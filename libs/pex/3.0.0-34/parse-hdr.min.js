!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).parseHdr=r()}}(function(){return function(){return function r(e,n,t){function o(f,a){if(!n[f]){if(!e[f]){var u="function"==typeof require&&require;if(!a&&u)return u(f,!0);if(i)return i(f,!0);var d=new Error("Cannot find module '"+f+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[f]={exports:{}};e[f][0].call(l.exports,function(r){return o(e[f][1][r]||r)},l,l.exports,r,e,n,t)}return n[f].exports}for(var i="function"==typeof require&&require,f=0;f<t.length;f++)o(t[f]);return o}}()({1:[function(r,e,n){var t="#\\?RADIANCE",o="#.*",i="EXPOSURE=\\s*([0-9]*[.][0-9]*)",f="FORMAT=32-bit_rle_rgbe",a="-Y ([0-9]+) \\+X ([0-9]+)";e.exports=function(r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var e=0,n=r.length,u=10;function d(){var t="";do{var o=r[e];if(o==u){++e;break}t+=String.fromCharCode(o)}while(++e<n);return t}for(var l=0,w=0,c=1,h=!1,s=0;s<20;s++){var p,g=d();if(p=g.match(t));else if(p=g.match(f))h=!0;else if(p=g.match(i))c=Number(p[1]);else if(p=g.match(o));else if(p=g.match(a)){w=Number(p[1]),l=Number(p[2]);break}}if(!h)throw new Error("File is not run length encoded!");var v=new Uint8Array(l*w*4);!function(r,e,n,t,o,i){var f,a,u,d=new Array(4),l=null,w=new Array(2),c=r.length;function h(e){var n=0;do{e[n++]=r[t]}while(++t<c&&n<e.length);return n}function s(e,n,o){var i=0;do{e[n+i++]=r[t]}while(++t<c&&i<o);return i}function p(r,e,n,t){var o=4*t,i=s(e,n,o);if(i<o)throw new Error("Error reading raw pixels: got "+i+" bytes, expected "+o)}for(;i>0;){if(h(d)<d.length)throw new Error("Error reading bytes: expected "+d.length);if(2!=d[0]||2!=d[1]||0!=(128&d[2]))return e[n++]=d[0],e[n++]=d[1],e[n++]=d[2],e[n++]=d[3],void p(0,e,n,o*i-1);if(((255&d[2])<<8|255&d[3])!=o)throw new Error("Wrong scanline width "+((255&d[2])<<8|255&d[3])+", expected "+o);null==l&&(l=new Array(4*o)),f=0;for(var g=0;g<4;g++)for(a=(g+1)*o;f<a;){if(h(w)<w.length)throw new Error("Error reading 2-byte buffer");if((255&w[0])>128){if(0==(u=(255&w[0])-128)||u>a-f)throw new Error("Bad scanline data");for(;u-- >0;)l[f++]=w[1]}else{if(0==(u=255&w[0])||u>a-f)throw new Error("Bad scanline data");if(l[f++]=w[1],--u>0){if(s(l,f,u)<u)throw new Error("Error reading non-run data");f+=u}}}for(g=0;g<o;g++)e[n+0]=l[g],e[n+1]=l[g+o],e[n+2]=l[g+2*o],e[n+3]=l[g+3*o],n+=4;i--}}(r,v,0,e,l,w);for(var y=new Float32Array(l*w*4),E=0;E<v.length;E+=4){var m=v[E+0]/255,b=v[E+1]/255,x=v[E+2]/255,A=v[E+3],N=Math.pow(2,A-128);m*=N,b*=N,x*=N;var O=E;y[O+0]=m,y[O+1]=b,y[O+2]=x,y[O+3]=1}return{shape:[l,w],exposure:c,gamma:1,data:y}}},{}]},{},[1])(1)});
