/**
 * Hilo3d 1.5.98
 * Copyright (c) 2017-present Alibaba Group Holding Ltd.
 * @license MIT
 */
window.Hilo3d=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=193)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(23));t.default=r.default},function(e,t,n){"use strict";var r=s(n(74)),i=s(n(76)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(78));function s(e){return e&&e.__esModule?e:{default:e}}var o={webgl:r.default,webglExtensions:i.default,Hilo:a};Object.assign(o,r.default,i.default,a),e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=0;return function(t){var n=++e;return t?n=t+"_"+n:n+="",n}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},degToRad:function(e){return e*this.DEG2RAD},radToDeg:function(e){return e*this.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({className:"Vector3",isVector3:!0,constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.elements=r.vec3.fromValues(e,t,n)},copy:function(e){return r.vec3.copy(this.elements,e.elements),this},clone:function(){var e=this.elements;return new this.constructor(e[0],e[1],e[2])},toArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[0+t]=n[0],e[1+t]=n[1],e[2+t]=n[2],e},fromArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return n[0]=e[t+0],n[1]=e[t+1],n[2]=e[t+2],this},set:function(e,t,n){return r.vec3.set(this.elements,e,t,n),this},add:function(e,t){return t||(t=e,e=this),r.vec3.add(this.elements,e.elements,t.elements),this},subtract:function(e,t){return t||(t=e,e=this),r.vec3.subtract(this.elements,e.elements,t.elements),this},multiply:function(e,t){return t||(t=e,e=this),r.vec3.multiply(this.elements,e.elements,t.elements),this},divide:function(e,t){return t||(t=e,e=this),r.vec3.divide(this.elements,e.elements,t.elements),this},ceil:function(){return r.vec3.ceil(this.elements,this.elements),this},floor:function(){return r.vec3.floor(this.elements,this.elements),this},min:function(e,t){return t||(t=e,e=this),r.vec3.min(this.elements,e.elements,t.elements),this},max:function(e,t){return t||(t=e,e=this),r.vec3.max(this.elements,e.elements,t.elements),this},round:function(){return r.vec3.round(this.elements,this.elements),this},scale:function(e){return r.vec3.scale(this.elements,this.elements,e),this},scaleAndAdd:function(e,t,n){return n||(n=t,t=this),r.vec3.scaleAndAdd(this.elements,t.elements,n.elements,e),this},distance:function(e,t){return t||(t=e,e=this),r.vec3.distance(e.elements,t.elements)},squaredDistance:function(e,t){return t||(t=e,e=this),r.vec3.squaredDistance(e.elements,t.elements)},length:function(){return r.vec3.length(this.elements)},squaredLength:function(){return r.vec3.squaredLength(this.elements)},negate:function(){return r.vec3.negate(this.elements,this.elements),this},inverse:function(e){return e||(e=this),r.vec3.inverse(this.elements,e.elements),this},normalize:function(){return r.vec3.normalize(this.elements,this.elements),this},dot:function(e,t){return t||(t=e,e=this),r.vec3.dot(e.elements,t.elements)},cross:function(e,t){return t||(t=e,e=this),r.vec3.cross(this.elements,e.elements,t.elements),this},lerp:function(e,t){return r.vec3.lerp(this.elements,this.elements,e.elements,t),this},hermite:function(e,t,n,i,a){return r.vec3.hermite(this.elements,e.elements,t.elements,n.elements,i.elements,a),this},bezier:function(e,t,n,i,a){return r.vec3.bezier(this.elements,e.elements,t.elements,n.elements,i.elements,a),this},random:function(e){return r.vec3.random(this.elements,e),this},transformMat3:function(e){return r.vec3.transformMat3(this.elements,this.elements,e.elements),this},transformMat4:function(e){return r.vec3.transformMat4(this.elements,this.elements,e.elements),this},transformDirection:function(e){var t=this.elements,n=e.elements,r=t[0],i=t[1],a=t[2];return t[0]=r*n[0]+i*n[4]+a*n[8],t[1]=r*n[1]+i*n[5]+a*n[9],t[2]=r*n[2]+i*n[6]+a*n[10],this},transformQuat:function(e){return r.vec3.transformQuat(this.elements,this.elements,e.elements),this},rotateX:function(e,t){return r.vec3.rotateX(this.elements,this.elements,e.elements,t),this},rotateY:function(e,t){return r.vec3.rotateY(this.elements,this.elements,e.elements,t),this},rotateZ:function(e,t){return r.vec3.rotateZ(this.elements,this.elements,e.elements,t),this},exactEquals:function(e,t){return t||(t=e,e=this),r.vec3.exactEquals(e.elements,t.elements)},equals:function(e,t){return t||(t=e,e=this),r.vec3.equals(e.elements,t.elements)},x:{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e}},y:{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e}},z:{get:function(){return this.elements[2]},set:function(e){this.elements[2]=e}}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.sqrDist=i.prototype.squaredDistance,i.prototype.len=i.prototype.length,i.prototype.sqrLen=i.prototype.squaredLength,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(24)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,className:"Color",isColor:!0,r:{get:function(){return this.x},set:function(e){this.x=e}},g:{get:function(){return this.y},set:function(e){this.y=e}},b:{get:function(){return this.z},set:function(e){this.z=e}},a:{get:function(){return this.w},set:function(e){this.w=e}},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o.superclass.constructor.call(this,e,t,n,r)},toRGBArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e},fromUintArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.elements[0]=e[t]/255,this.elements[1]=e[t+1]/255,this.elements[2]=e[t+2]/255,this.elements[3]=e[t+3]/255,this},fromHEX:function(e){return"number"==typeof e?e=e.toString(16):("#"===e[0]&&(e=e.slice(1)),3===e.length&&(e=e.replace(/(\w)/g,"$1$1"))),this.elements[0]=parseInt(e.slice(0,2),16)/255,this.elements[1]=parseInt(e.slice(2,4),16)/255,this.elements[2]=parseInt(e.slice(4,6),16)/255,this},toHEX:function(){for(var e="",t=0;t<3;t++)e+=(0,a.padLeft)(Math.floor(255*this.elements[t]).toString(16),2);return e}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialRun=t.getElementRect=t.isArrayLike=t.getBlobUrl=t.getTypedArrayGLType=t.isStrOrNumber=t.copyArrayData=t.getTypedArrayClass=t.padLeft=t.insertToSortedArray=t.getIndexFromSortedArray=t.getExtension=t.convertUint8ArrayToString=t.getRelativePath=t.each=void 0;var r=n(1);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=void 0;function s(e,t){if(window.TextDecoder)return a||(a=new TextDecoder("utf-8")),e instanceof Uint8Array||(e=new Uint8Array(e)),a.decode(e);for(var n="",r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return t&&(n=decodeURIComponent(escape(n))),n}function o(e,t,n){if(!e||!e.length)return[0,0];for(var r=0,i=e.length-1;r<=i;){var a=r+i>>1,s=n(e[a],t);if(0===s)return[a,a];s<0?r=a+1:i=a-1}return r>i?[i,r]:[r,i]}var u=function(){var e,t=(i(e={},r.BYTE,Int8Array),i(e,r.UNSIGNED_BYTE,Uint8Array),i(e,r.SHORT,Int16Array),i(e,r.UNSIGNED_SHORT,Uint16Array),i(e,r.UNSIGNED_INT,Uint32Array),i(e,r.FLOAT,Float32Array),e);return function(e){return t[e]||Float32Array}}();t.each=function(e,t){e&&(Array.isArray(e)?e.forEach(t):Object.keys(e).forEach(function(n){t(e[n],n)}))},t.getRelativePath=function(e,t){if(/^(?:http|blob|data:|\/)/.test(t))return t;e=e.replace(/\/[^/]*?$/,"").split("/"),t=t.split("/");var n=void 0;for(n=0;n<t.length;n++){var r=t[n];if(".."===r)e.pop();else if("."!==r)break}return e.join("/")+"/"+t.slice(n).join("/")},t.convertUint8ArrayToString=s,t.getExtension=function(e){var t=String(e).match(/\/?[^/]+\.(\w+)(\?\S+)?$/i);return t&&t[1].toLowerCase()||null},t.getIndexFromSortedArray=o,t.insertToSortedArray=function(e,t,n){var r=o(e,t,n);e.splice(r[1],0,t)},t.padLeft=function(e,t,n){return t<=e.length?e:new Array(t-e.length+1).join(n||"0")+e},t.getTypedArrayClass=u,t.copyArrayData=function(e,t,n,r,i){if(e&&t){t.isGeometryData&&(t=t.data);for(var a=0;a<i;a++)e[n+a]=t[r+a]}},t.isStrOrNumber=function(e){return"string"==typeof e||"number"==typeof e},t.getTypedArrayGLType=function(e){return e instanceof Float32Array?r.FLOAT:e instanceof Int8Array?r.BYTE:e instanceof Uint8Array?r.UNSIGNED_BYTE:e instanceof Int16Array?r.SHORT:e instanceof Uint16Array?r.UNSIGNED_SHORT:e instanceof Uint32Array?r.UNSIGNED_INT:r.FLOAT},t.getBlobUrl=function(e,t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),window.Blob&&window.URL)try{var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}catch(t){console.warn("new Blob error",e)}return"data:"+e+";base64,"+btoa(s(t))},t.isArrayLike=function(e){return Array.isArray(e)||e.BYTES_PER_ELEMENT||e.length},t.getElementRect=function(e){var t=document.documentElement,n=void 0;try{n=e.getBoundingClientRect()}catch(t){n={top:e.offsetTop,left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight}}var r=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)||0,i=(window.pageYOffset||t.scrollTop)-(t.clientTop||0)||0,a=window.getComputedStyle?getComputedStyle(e):e.currentStyle,s=parseInt,o=s(a.paddingLeft)+s(a.borderLeftWidth)||0,u=s(a.paddingTop)+s(a.borderTopWidth)||0,c=s(a.paddingRight)+s(a.borderRightWidth)||0,f=s(a.paddingBottom)+s(a.borderBottomWidth)||0,l=n.top||0,h=n.left||0;return{left:h+r+o,top:l+i+u,width:(n.right||0)-c-h-o,height:(n.bottom||0)-f-l-u}},t.serialRun=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return Array.isArray(e)||(e=Object.values(e)),e.reduce(function(e,n,r){return e.then(function(){return t(n,r)})},Promise.resolve())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=o(n(0)),a=o(n(3)),s=o(n(19));function o(e){return e&&e.__esModule?e:{default:e}}var u=void 0,c=new a.default,f=new a.default,l=i.default.create({className:"Matrix4",isMatrix4:!0,constructor:function(){this.elements=r.mat4.create()},copy:function(e){return r.mat4.copy(this.elements,e.elements),this},clone:function(){var e=new this.constructor;return r.mat4.copy(e.elements,this.elements),e},toArray:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,r=0;r<16;r++)e[t+r]=n[r];return e},fromArray:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,r=0;r<16;r++)n[r]=e[t+r];return this},set:function(e,t,n,i,a,s,o,u,c,f,l,h,d,_,m,p){return r.mat4.set(this.elements,e,t,n,i,a,s,o,u,c,f,l,h,d,_,m,p),this},identity:function(){return r.mat4.identity(this.elements),this},transpose:function(){return r.mat4.transpose(this.elements,this.elements),this},invert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return r.mat4.invert(this.elements,e.elements),this},adjoint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return r.mat4.adjoint(this.elements,e.elements),this},determinant:function(){return r.mat4.determinant(this.elements)},multiply:function(e,t){return t||(t=e,e=this),r.mat4.multiply(this.elements,e.elements,t.elements),this},premultiply:function(e){return this.multiply(e,this),this},translate:function(e){return r.mat4.translate(this.elements,this.elements,e.elements),this},scale:function(e){return r.mat4.scale(this.elements,this.elements,e.elements),this},rotate:function(e,t){return r.mat4.rotate(this.elements,this.elements,e,t.elements),this},rotateX:function(e){return r.mat4.rotateX(this.elements,this.elements,e),this},rotateY:function(e){return r.mat4.rotateY(this.elements,this.elements,e),this},rotateZ:function(e){return r.mat4.rotateZ(this.elements,this.elements,e),this},fromTranslation:function(e){return r.mat4.fromTranslation(this.elements,e.elements),this},fromScaling:function(e){return r.mat4.fromScaling(this.elements,e.elements),this},fromRotation:function(e,t){return r.mat4.fromRotation(this.elements,e,t.elements),this},fromXRotation:function(e){return r.mat4.fromXRotation(this.elements,e),this},fromYRotation:function(e){return r.mat4.fromYRotation(this.elements,e),this},fromZRotation:function(e){return r.mat4.fromZRotation(this.elements,e),this},fromRotationTranslation:function(e,t){return r.mat4.fromRotationTranslation(this.elements,e.elements,t.elements),this},getTranslation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.default;return r.mat4.getTranslation(e.elements,this.elements),e},getScaling:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.default;return r.mat4.getScaling(e.elements,this.elements),e},getRotation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s.default;return r.mat4.getRotation(e.elements,this.elements),e},fromRotationTranslationScale:function(e,t,n){return r.mat4.fromRotationTranslationScale(this.elements,e.elements,t.elements,n.elements),this},fromRotationTranslationScaleOrigin:function(e,t,n,i){return r.mat4.fromRotationTranslationScaleOrigin(this.elements,e.elements,t.elements,n.elements,i.elements),this},fromQuat:function(e){return r.mat4.fromQuat(this.elements,e.elements),this},frustum:function(e,t,n,i,a,s){return r.mat4.frustum(this.elements,e,t,n,i,a,s),this},perspective:function(e,t,n,i){return r.mat4.perspective(this.elements,e,t,n,i),this},perspectiveFromFieldOfView:function(e,t,n){return r.mat4.perspectiveFromFieldOfView(this.elements,e,t,n),this},ortho:function(e,t,n,i,a,s){return r.mat4.ortho(this.elements,e,t,n,i,a,s),this},lookAt:function(e,t,n){return e.isVector3||(e=c.set(e.x,e.y,e.z)),t.isVector3||(t=f.set(t.x,t.y,t.z)),r.mat4.lookAt(this.elements,e.elements,t.elements,n.elements),this},targetTo:function(e,t,n){e.isVector3||(e=c.set(e.x,e.y,e.z)),t.isVector3||(t=f.set(t.x,t.y,t.z)),e=e.elements,t=t.elements,n=n.elements;var r=this.elements,i=e[0],a=e[1],s=e[2],o=n[0],u=n[1],l=n[2],h=i-t[0],d=a-t[1],_=s-t[2],m=h*h+d*d+_*_;m>0?(h*=m=1/Math.sqrt(m),d*=m,_*=m):_=1;var p=u*_-l*d,v=l*h-o*_,g=o*d-u*h;return(m=p*p+v*v+g*g)>0?(p*=m=1/Math.sqrt(m),v*=m,g*=m):(m=(p=u*_-l*d)*p+(v=l*h-(o+=1e-7)*_)*v+(g=o*d-u*h)*g,p*=m=1/Math.sqrt(m),v*=m,g*=m),r[0]=p,r[1]=v,r[2]=g,r[3]=0,r[4]=d*g-_*v,r[5]=_*p-h*g,r[6]=h*v-d*p,r[7]=0,r[8]=h,r[9]=d,r[10]=_,r[11]=0,r[12]=i,r[13]=a,r[14]=s,r[15]=1,this},frob:function(){return r.mat4.frob(this.elements)},add:function(e,t){return t||(t=e,e=this),r.mat4.add(this.elements,e.elements,t.elements),this},subtract:function(e,t){return t||(t=e,e=this),r.mat4.subtract(this.elements,e.elements,t.elements),this},exactEquals:function(e,t){return t||(t=e,e=this),r.mat4.exactEquals(e.elements,t.elements)},equals:function(e,t){return t||(t=e,e=this),r.mat4.equals(e.elements,t.elements)},compose:function(e,t,n,r){return r?this.fromRotationTranslationScaleOrigin(e,t,n,r):this.fromRotationTranslationScale(e,t,n),this},decompose:function(e,t,n,r){return this.getScaling(n),this.getTranslation(t),u||(u=new l),this.determinant()<0&&(n.x*=-1),u.copy(this),c.inverse(n),u.scale(c),e.fromMat4(u),r&&r.set(0,0,0),this}});l.prototype.sub=l.prototype.subtract,l.prototype.mul=l.prototype.multiply,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(0)),i=m(n(2)),a=m(n(37)),s=m(n(3)),o=m(n(24)),u=m(n(20)),c=m(n(6)),f=m(n(19)),l=m(n(69)),h=m(n(8)),d=n(5),_=n(1);function m(e){return e&&e.__esModule?e:{default:e}}var p=new s.default,v=new s.default,g=new s.default,E=new o.default,T=new a.default,M=new a.default,A=new a.default,O=new u.default,y=new c.default,S=new f.default,I=r.default.create({isGeometry:!0,className:"Geometry",vertices:null,uvs:null,uvs1:null,colors:null,indices:null,skinIndices:null,skinWeights:null,mode:_.TRIANGLES,isStatic:!0,isDirty:!0,useAABBRaycast:!1,constructor:function(e){this.id=i.default.generateUUID(this.className),Object.assign(this,e),this.currentVerticesCount=0,this.currentIndicesCount=0},_needUpdateNormals:!1,normals:{get:function(){return!this._needUpdateNormals&&this._normals||this.calculateNormals(),this._normals},set:function(e){this._normals=e,this._needUpdateNormals=!1}},calculateNormals:function(){this._normals||(this._normals=new h.default(new Float32Array(this.vertices.realLength),3));var e=this._normals,t=void 0;if(this.indices)t=this.indices.data;else{var n=this.vertices.length/3;t=new Array(n);for(var r=0;r<n;r++)t[r]=r}for(var i=this.vertices,a=0,s=new Uint8Array(i.count),o=0;o<t.length;o+=3){a=t[o],p.copy(i.get(a)),a=t[o+1],v.copy(i.get(a)),a=t[o+2],g.copy(i.get(a)),v.sub(p),g.sub(p),v.cross(g);for(var u=0;u<3;u++){if(s[a=t[o+u]]){var c=e.get(a);c.scale(s[a]),c.add(v),c.scale(1/(s[a]+1)),e.set(a,c)}else e.set(a,v);s[a]++}}e.isDirty=!0,this._needUpdateNormals=!1},tangents:{get:function(){return this._tangents||this.calculateTangents(this.uvs,"_tangents"),this._tangents},set:function(e){this._tangents=e}},tangents1:{get:function(){return this._tangents1||this.calculateTangents(this.uvs1,"_tangents1"),this._tangents1},set:function(e){this._tangents1=e}},calculateTangents:function(e,t){this[t]||(this[t]=new h.default(new Float32Array(4*this.vertices.count),4));var n=this[t],r=void 0;if(this.indices)r=this.indices.data;else{var i=this.vertices.length/3;r=new Array(i);for(var a=0;a<i;a++)r[a]=a}for(var s=this.vertices,o=0,u=0;u<r.length;u+=3){o=r[u],p.copy(s.get(o)),T.copy(e.get(o)),o=r[u+1],v.copy(s.get(o)),M.copy(e.get(o)),o=r[u+2],g.copy(s.get(o)),A.copy(e.get(o)),v.sub(p),g.sub(p),M.sub(T),A.sub(T);var c=1/(M.x*A.y-A.x*M.y);Number.isFinite(c)?(p.x=c*(A.y*v.x-M.y*g.x),p.y=c*(A.y*v.y-M.y*g.y),p.z=c*(A.y*v.z-M.y*g.z)):(p.x=0,p.y=0,p.z=1),E.set(p.x,p.y,p.z,1),n.set(r[u],E),n.set(r[u+1],E),n.set(r[u+2],E)}},convertToLinesMode:function(){if(this.mode===_.TRIANGLES)if(this.indices){for(var e=new Uint16Array(2*this.indices.length),t=this.indices.data,n=0;n<t.length;n+=3)e[2*n]=t[n],e[2*n+1]=t[n+1],e[2*n+2]=t[n+1],e[2*n+3]=t[n+2],e[2*n+4]=t[n+2],e[2*n+5]=t[n];this.indices.data=e,this.mode=_.LINES}else console.warn("Has no indices!");else console.warn("Only support convert triangles to lines mode!")},translate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.transformMat4(y.fromTranslation(p.set(e,t,n))),this},scale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.transformMat4(y.fromScaling(p.set(e,t,n))),this},rotate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.transformMat4(y.fromQuat(S.fromEuler({x:e*i.default.DEG2RAD,y:t*i.default.DEG2RAD,z:n*i.default.DEG2RAD}))),this},transformMat4:function(e){var t=this.vertices;if(t&&t.traverse(function(n,r,i){t.setByOffset(i,n.transformMat4(e))}),O.normalFromMat4(e),this._normals){var n=this.normals;n.traverse(function(e,t,r){n.setByOffset(r,e.transformMat3(O).normalize())})}if(this._tangents){var r=this.tangents;r.traverse(function(e,t,n){r.setByOffset(n,e.transformMat3(O).normalize())})}return this.isDirty=!0,this},merge:function(e,t){var n=e.vertices,r=this.vertices.count;return t&&(n=e.vertices.clone()).traverse(function(e,r,i){n.setByOffset(i,e.transformMat4(t))}),this.vertices.merge(n),this.uvs&&e.uvs?this.uvs.merge(e.uvs):this.uvs=null,this.uvs1&&e.uvs1?this.uvs1.merge(e.uvs1):this.uvs1=null,this.colors&&e.colors?this.colors.merge(e.colors):this.colors=null,this.indices&&e.indices?this.indices.merge(e.indices,function(e){return e+r}):this.indices=null,this._normals&&(this._normals=null),this._tangents&&(this._tangents=null),this._tangents1&&(this._tangents1=null),this.isDirty=!0,this},ensureData:function(e,t,n,r){var i=this[e];if(!i||n>i.length){var a=new r(n);i?(a.set(i.data),i.data=a):this[e]=new h.default(a,t)}},addPoints:function(){var e=this,t=[].slice.call(arguments),n=3*(this.currentVerticesCount+t.length);this.ensureData("vertices",3,n,Float32Array);var r=this.vertices.data;return t.forEach(function(t){var n=3*e.currentVerticesCount++;r[n]=t[0],r[n+1]=t[1],r[n+2]=t[2]}),this.currentVerticesCount-t.length},addIndices:function(){var e=this,t=[].slice.call(arguments),n=this.currentIndicesCount+t.length;this.ensureData("indices",1,n,Uint16Array);var r=this.indices.data;t.forEach(function(t){r[e.currentIndicesCount++]=t}),this._needUpdateNormals=!0},addLine:function(e,t){var n=this.addPoints(e,t);this.addIndices(n,n+1)},addFace:function(e,t,n){var r=this.addPoints(e,t,n);this.addIndices(r,r+1,r+2)},addRect:function(e,t,n,r){var i=this.addPoints(e,t,n,r);this.addIndices(i,i+1,i+2,i,i+2,i+3)},setVertexUV:function(e,t){this.ensureData("uvs",2,this.vertices.length/3*2,Float32Array);for(var n=this.uvs.data,r=0;r<t.length;r++)n[e+2*r]=t[r][0],n[e+2*r+1]=t[r][1]},setFaceUV:function(e,t,n,r){this.setVertexUV(e,[t,n,r])},setRectUV:function(e,t,n,r,i){this.setVertexUV(e,[t,n,r,i])},getBounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];t||(t={xMin:1/0,xMax:-1/0,yMin:1/0,yMax:-1/0,zMin:1/0,zMax:-1/0});for(var n=this.vertices.data,r=0;r<n.length;r+=3)p.fromArray(n,r),e&&p.transformMat4(e),t.xMax=Math.max(t.xMax,p.x),t.yMax=Math.max(t.yMax,p.y),t.zMax=Math.max(t.zMax,p.z),t.xMin=Math.min(t.xMin,p.x),t.yMin=Math.min(t.yMin,p.y),t.zMin=Math.min(t.zMin,p.z);return t.width=t.xMax-t.xMin,t.height=t.yMax-t.yMin,t.depth=t.zMax-t.zMin,t.x=(t.xMin+t.xMax)/2,t.y=(t.yMin+t.yMax)/2,t.z=(t.zMin+t.zMax)/2,t},getLocalBounds:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._localBounds&&!e||(this._localBounds=this.getBounds()),this._localBounds},getSphereBounds:function(e){this._sphereBounds||(this._sphereBounds=new l.default);var t=this._sphereBounds;return t.copy(this.getLocalSphereBounds()),e&&t.transformMat4(e),t},getLocalSphereBounds:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._localSphereBounds||e){var t=this.getLocalBounds(e),n=new l.default({center:new s.default(t.x,t.y,t.z)});n.fromPoints(this.vertices.data),this._localSphereBounds=n}return this._localSphereBounds},convertToNoIndices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(this.mode===_.TRIANGLES)if(this.indices){for(var t=this.indices.data,n=t.length,r=new Float32Array(n*e),i=this.uvs?new Float32Array(2*n):null,a=new Float32Array(3*n),s=this.colors?new Float32Array(this.colors.size*n):null,o=this.skinIndices?new Float32Array(4*n):null,u=this.skinWeights?new Float32Array(4*n):null,c=0;c<n;c++){var f=t[c];(0,d.copyArrayData)(r,this.vertices,c*e,3*f,3),4===e&&(r[4*c+3]=1),(0,d.copyArrayData)(i,this.uvs,2*c,2*f,2),(0,d.copyArrayData)(a,this.normals,3*c,3*f,3),(0,d.copyArrayData)(o,this.skinIndices,4*c,4*f,4),(0,d.copyArrayData)(u,this.skinWeights,4*c,4*f,4),this.colors&&(0,d.copyArrayData)(s,this.colors,c*this.colors.size,f*this.colors.size,this.colors.size)}delete this.indices,this.vertices.data=r,this.uvs&&(this.uvs.data=i),this.normals&&(this.normals.data=a),this.colors&&(this.colors.data=s),this.skinIndices&&(this.skinIndices.data=o),this.skinWeights&&(this.skinWeights.data=u)}else console.warn("Has no indices!");else console.warn("Only support convert triangles to lines mode!")},clone:function(){var e=new this.constructor({mode:this.mode});return this.vertices&&(e.vertices=this.vertices.clone()),this.uvs&&(e.uvs=this.uvs.clone()),this.uvs1&&(e.uvs1=this.uvs1.clone()),this.colors&&(e.colors=this.colors.clone()),this.indices&&(e.indices=this.indices.clone()),this.skinWeights&&(e.skinWeights=this.skinWeights.clone()),this.skinIndices&&(e.skinIndices=this.skinIndices.clone()),this._normals&&(e._normals=this._normals.clone()),this._tangents&&(e._tangents=this._tangents.clone()),this._tangents1&&(e._tangents1=this._tangents1.clone()),this.positionDecodeMat&&(e.positionDecodeMat=this.positionDecodeMat),this.uvDecodeMat&&(e.uvDecodeMat=this.uvDecodeMat),this.uv1DecodeMat&&(e.uv1DecodeMat=this.uv1DecodeMat),this.normalDecodeMat&&(e.normalDecodeMat=this.normalDecodeMat),e},_aabbRaycast:function(e){var t=this.getLocalBounds(),n=e.intersectsBox([[t.xMin,t.yMin,t.zMin],[t.xMax,t.yMax,t.zMax]]);return n?[n]:null},_raycast:function(e,t){var n=this.vertices,r=this.indices,i=[],a=[],s=void 0;s=r?r.realLength:n.realLength/3;for(var o=0;o<s;o+=3){var u=r?r.get(o):o;p.copy(n.get(u)),u=r?r.get(o+1):o+1,v.copy(n.get(u)),u=r?r.get(o+2):o+2,g.copy(n.get(u));var c=void 0;t===_.FRONT?(i[0]=p.elements,i[1]=v.elements,i[2]=g.elements,c=e.intersectsTriangle(i)):t===_.BACK?(i[1]=p.elements,i[0]=v.elements,i[2]=g.elements,c=e.intersectsTriangle(i)):t===_.FRONT_AND_BACK&&(i[0]=p.elements,i[1]=v.elements,i[2]=g.elements,(c=e.intersectsTriangle(i))||(i[1]=p.elements,i[0]=v.elements,i[2]=g.elements,c=e.intersectsTriangle(i))),c&&a.push(c)}return a.length?a:null},raycast:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=void 0;return(r=this.useAABBRaycast?this._aabbRaycast(e):this._raycast(e,t))&&n&&e.sortPoints(r),r},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.positionDecodeMat&&(e.QUANTIZED=1,e.POSITION_QUANTIZED=1),this.normalDecodeMat&&(e.QUANTIZED=1,e.NORMAL_QUANTIZED=1),this.uvDecodeMat&&(e.QUANTIZED=1,e.UV_QUANTIZED=1),this.uv1DecodeMat&&(e.QUANTIZED=1,e.UV1_QUANTIZED=1),this.colors&&(e.HAS_COLOR=1,e.COLOR_SIZE=this.colors.size),e},destroy:function(){console.log("Geometry.destroy has been deprecated, use mesh.destroy(renderer) instead.")}});t.default=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(2)),a=f(n(37)),s=f(n(3)),o=f(n(24)),u=f(n(6)),c=n(5);function f(e){return e&&e.__esModule?e:{default:e}}var l={2:new a.default,3:new s.default,4:new o.default,16:new u.default},h=r.default.create({className:"GeometryData",isGeometryData:!0,size:void 0,normalized:!1,type:void 0,isDirty:!0,bufferViewId:void 0,glBuffer:null,constructor:function(e,t,n){this.id=i.default.generateUUID(this.className),this.data=e,this.size=t,Object.assign(this,n),this.bufferViewId||(this.bufferViewId=this.id)},_stride:0,stride:{get:function(){return this._stride},set:function(e){this._stride=e,this.strideSize=0===e?0:e/this.data.BYTES_PER_ELEMENT}},strideSize:0,_offset:0,offset:{get:function(){return this._offset},set:function(e){this._offset=e,this.offsetSize=e/this.data.BYTES_PER_ELEMENT}},offsetSize:0,data:{set:function(e){e&&(this._data=e,this.type=(0,c.getTypedArrayGLType)(e),this.stride=this._stride,this.offset=this._offset,this.isDirty=!0)},get:function(){return this._data}},length:{get:function(){return this._data.length}},realLength:{get:function(){return 0===this.strideSize?this._data.length:this._data.length/this.strideSize*this.size}},count:{get:function(){return 0===this.strideSize?this._data.length/this.size:this._data.length/this.strideSize}},clone:function(){var e=new h;return e.copy(this),e},copy:function(e){var t=e.data;this.data=new t.constructor(t),this.size=e.size,this.stride=e.stride,this.normalized=e.normalized,this.type=e.type,this.offset=e.offset},getOffset:function(e){var t=this.strideSize;return 0===t?e*this.size:e*t+this.offsetSize},get:function(e){var t=this.getOffset(e);return this.getByOffset(t)},set:function(e,t){var n=this.getOffset(e);return this.setByOffset(n,t),n},getByOffset:function(e){var t=this.size;return t>1?l[t].fromArray(this._data,e):this._data[e]},setByOffset:function(e,t){var n=this.size,r=this._data;n>1?t.toArray(r,e):r[e]=t,this.isDirty=!0},traverse:function(e){for(var t=this.count,n=0;n<t;n++){var r=this.getOffset(n);if(e(this.getByOffset(r),n,r))return!0}return!1},traverseByComponent:function(e){for(var t=this.count,n=this.size,r=this._data,i=0;i<t;i++)for(var a=this.getOffset(i),s=i*n,o=0;o<n;o++){var u=a+o;if(e(r[u],s+o,u))return!0}return!1},merge:function(e,t){if(e.type!==this.type||e.size!==this.size)return console.warn("geometryData type or size not same, cannot merge!",this,e),this;var n=(0,c.getTypedArrayClass)(this.type),r=this.realLength,i=e.realLength,a=new n(r+i);return this.traverseByComponent(function(e,t){a[t]=e}),e.traverseByComponent(function(e,n){t&&(e=t(e,n)),a[r+n]=e}),this.stride=0,this.offset=0,this.data=a,this}});t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(73));t.default=r.default},function(e,t,n){"use strict";(function(e){var n,r,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,o){"object"==a(t)&&"object"==a(e)?e.exports=o():(r=[],void 0===(i="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=i))}("undefined"!=typeof self&&self,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":a(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=e},t.toRadian=function(e){return e*i},t.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))};var r=t.EPSILON=1e-6;t.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,t.RANDOM=Math.random;var i=Math.PI/180},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=i,t.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,n,i){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=i,a},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=a,t.multiply=s,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.distance=u,t.squaredDistance=c,t.length=f,t.squaredLength=l,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*n+r*r+i*i+a*a;return s>0&&(s=1/Math.sqrt(s),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=a*s),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,n,r){var i=t[0],a=t[1],s=t[2],o=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=s+r*(n[2]-s),e[3]=o+r*(n[3]-o),e},t.random=function(e,t){var n,i,a,s,o,u;t=t||1;do{o=(n=2*r.RANDOM()-1)*n+(i=2*r.RANDOM()-1)*i}while(o>=1);do{u=(a=2*r.RANDOM()-1)*a+(s=2*r.RANDOM()-1)*s}while(u>=1);var c=Math.sqrt((1-o)/u);return e[0]=t*n,e[1]=t*i,e[2]=t*a*c,e[3]=t*s*c,e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*s,e},t.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[0],o=n[1],u=n[2],c=n[3],f=c*r+o*a-u*i,l=c*i+u*r-s*a,h=c*a+s*i-o*r,d=-s*r-o*i-u*a;return e[0]=f*c+d*-s+l*-u-h*-o,e[1]=l*c+d*-o+h*-s-f*-u,e[2]=h*c+d*-u+f*-o-l*-s,e[3]=t[3],e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=t[0],u=t[1],c=t[2],f=t[3];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function s(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function o(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function f(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function l(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}t.sub=a,t.mul=s,t.div=o,t.dist=u,t.sqrDist=c,t.len=f,t.sqrLen=l,t.forEach=function(){var e=i();return function(t,n,r,i,a,s){var o,u=void 0;for(n||(n=4),r||(r=0),o=i?Math.min(i*n+r,t.length):t.length,u=r;u<o;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],a(e,e,s),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=i,t.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=a,t.fromValues=s,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},t.subtract=o,t.multiply=u,t.divide=c,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},t.distance=f,t.squaredDistance=l,t.squaredLength=h,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=d,t.dot=_,t.cross=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[0],o=n[1],u=n[2];return e[0]=i*u-a*o,e[1]=a*s-r*u,e[2]=r*o-i*s,e},t.lerp=function(e,t,n,r){var i=t[0],a=t[1],s=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=s+r*(n[2]-s),e},t.hermite=function(e,t,n,r,i,a){var s=a*a,o=s*(2*a-3)+1,u=s*(a-2)+a,c=s*(a-1),f=s*(3-2*a);return e[0]=t[0]*o+n[0]*u+r[0]*c+i[0]*f,e[1]=t[1]*o+n[1]*u+r[1]*c+i[1]*f,e[2]=t[2]*o+n[2]*u+r[2]*c+i[2]*f,e},t.bezier=function(e,t,n,r,i,a){var s=1-a,o=s*s,u=a*a,c=o*s,f=3*a*o,l=3*u*s,h=u*a;return e[0]=t[0]*c+n[0]*f+r[0]*l+i[0]*h,e[1]=t[1]*c+n[1]*f+r[1]*l+i[1]*h,e[2]=t[2]*c+n[2]*f+r[2]*l+i[2]*h,e},t.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=i*t,e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[3]*r+n[7]*i+n[11]*a+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/s,e},t.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},t.transformQuat=function(e,t,n){var r=n[0],i=n[1],a=n[2],s=n[3],o=t[0],u=t[1],c=t[2],f=i*c-a*u,l=a*o-r*c,h=r*u-i*o,d=i*h-a*l,_=a*f-r*h,m=r*l-i*f,p=2*s;return f*=p,l*=p,h*=p,d*=2,_*=2,m*=2,e[0]=o+f+d,e[1]=u+l+_,e[2]=c+h+m,e},t.rotateX=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.rotateY=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.rotateZ=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.angle=function(e,t){var n=s(e[0],e[1],e[2]),r=s(t[0],t[1],t[2]);d(n,n),d(r,r);var i=_(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],s=t[0],o=t[1],u=t[2];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(){var e=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function s(e,t,n){var i=new r.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=n,i}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function c(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function f(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function h(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function d(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function _(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.sub=o,t.mul=u,t.div=c,t.dist=f,t.sqrDist=l,t.len=a,t.sqrLen=h,t.forEach=function(){var e=i();return function(t,n,r,i,a,s){var o,u=void 0;for(n||(n=3),r||(r=0),o=i?Math.min(i*n+r,t.length):t.length,u=r;u<o;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],a(e,e,s),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0,t.create=u,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=c,t.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),i=Math.sin(n/2);return i>r.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n},t.multiply=f,t.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);return e[0]=r*u+s*o,e[1]=i*u+a*o,e[2]=a*u-i*o,e[3]=s*u-r*o,e},t.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*o,e[1]=i*u+s*o,e[2]=a*u+r*o,e[3]=s*u-i*o,e},t.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*o,e[1]=i*u-r*o,e[2]=a*u+s*o,e[3]=s*u-a*o,e},t.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},t.slerp=l,t.random=function(e){var t=r.RANDOM(),n=r.RANDOM(),i=r.RANDOM(),a=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*n),e[1]=a*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*i),e[3]=s*Math.cos(2*Math.PI*i),e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*n+r*r+i*i+a*a,o=s?1/s:0;return e[0]=-n*o,e[1]=-r*o,e[2]=-i*o,e[3]=a*o,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=h,t.fromEuler=function(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),s=Math.cos(t),o=Math.sin(n),u=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return e[0]=a*u*f-s*o*c,e[1]=s*o*f+a*u*c,e[2]=s*u*c-a*o*f,e[3]=s*u*f+a*o*c,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"};var r=o(n(0)),i=o(n(5)),a=o(n(2)),s=o(n(1));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function c(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function f(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=n[0],u=n[1],c=n[2],f=n[3];return e[0]=r*f+s*o+i*c-a*u,e[1]=i*f+s*u+a*o-r*c,e[2]=a*f+s*c+r*u-i*o,e[3]=s*f-r*o-i*u-a*c,e}function l(e,t,n,i){var a=t[0],s=t[1],o=t[2],u=t[3],c=n[0],f=n[1],l=n[2],h=n[3],d=void 0,_=void 0,m=void 0,p=void 0,v=void 0;return(_=a*c+s*f+o*l+u*h)<0&&(_=-_,c=-c,f=-f,l=-l,h=-h),1-_>r.EPSILON?(d=Math.acos(_),m=Math.sin(d),p=Math.sin((1-i)*d)/m,v=Math.sin(i*d)/m):(p=1-i,v=i),e[0]=p*a+v*c,e[1]=p*s+v*f,e[2]=p*o+v*l,e[3]=p*u+v*h,e}function h(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,s=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*s+s]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+s]-t[3*s+a])*r,e[a]=(t[3*a+i]+t[3*i+a])*r,e[s]=(t[3*s+i]+t[3*i+s])*r}return e}t.clone=s.clone,t.fromValues=s.fromValues,t.copy=s.copy,t.set=s.set,t.add=s.add,t.mul=f,t.scale=s.scale,t.dot=s.dot,t.lerp=s.lerp;var d=t.length=s.length,_=(t.len=d,t.squaredLength=s.squaredLength),m=(t.sqrLen=_,t.normalize=s.normalize);t.exactEquals=s.exactEquals,t.equals=s.equals,t.rotationTo=function(){var e=a.create(),t=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(r,i,s){var o=a.dot(i,s);return o<-.999999?(a.cross(e,t,i),a.len(e)<1e-6&&a.cross(e,n,i),a.normalize(e,e),c(r,e,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+o,m(r,r))}}(),t.sqlerp=function(){var e=u(),t=u();return function(n,r,i,a,s,o){return l(e,r,s,o),l(t,i,a,o),l(n,e,t,2*o*(1-o)),n}}(),t.setAxes=function(){var e=i.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],m(t,h(t,e))}}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,n,i,a,s,o,u,c,f,l,h,d,_,m,p){var v=new r.ARRAY_TYPE(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=a,v[5]=s,v[6]=o,v[7]=u,v[8]=c,v[9]=f,v[10]=l,v[11]=h,v[12]=d,v[13]=_,v[14]=m,v[15]=p,v},t.set=function(e,t,n,r,i,a,s,o,u,c,f,l,h,d,_,m,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e[6]=o,e[7]=u,e[8]=c,e[9]=f,e[10]=l,e[11]=h,e[12]=d,e[13]=_,e[14]=m,e[15]=p,e},t.identity=i,t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],_=t[12],m=t[13],p=t[14],v=t[15],g=n*o-r*s,E=n*u-i*s,T=n*c-a*s,M=r*u-i*o,A=r*c-a*o,O=i*c-a*u,y=f*m-l*_,S=f*p-h*_,I=f*v-d*_,L=l*p-h*m,R=l*v-d*m,b=h*v-d*p,x=g*b-E*R+T*L+M*I-A*S+O*y;return x?(x=1/x,e[0]=(o*b-u*R+c*L)*x,e[1]=(i*R-r*b-a*L)*x,e[2]=(m*O-p*A+v*M)*x,e[3]=(h*A-l*O-d*M)*x,e[4]=(u*I-s*b-c*S)*x,e[5]=(n*b-i*I+a*S)*x,e[6]=(p*T-_*O-v*E)*x,e[7]=(f*O-h*T+d*E)*x,e[8]=(s*R-o*I+c*y)*x,e[9]=(r*I-n*R-a*y)*x,e[10]=(_*A-m*T+v*g)*x,e[11]=(l*T-f*A-d*g)*x,e[12]=(o*S-s*L-u*y)*x,e[13]=(n*L-r*S+i*y)*x,e[14]=(m*E-_*M-p*g)*x,e[15]=(f*M-l*E+h*g)*x,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],_=t[12],m=t[13],p=t[14],v=t[15];return e[0]=o*(h*v-d*p)-l*(u*v-c*p)+m*(u*d-c*h),e[1]=-(r*(h*v-d*p)-l*(i*v-a*p)+m*(i*d-a*h)),e[2]=r*(u*v-c*p)-o*(i*v-a*p)+m*(i*c-a*u),e[3]=-(r*(u*d-c*h)-o*(i*d-a*h)+l*(i*c-a*u)),e[4]=-(s*(h*v-d*p)-f*(u*v-c*p)+_*(u*d-c*h)),e[5]=n*(h*v-d*p)-f*(i*v-a*p)+_*(i*d-a*h),e[6]=-(n*(u*v-c*p)-s*(i*v-a*p)+_*(i*c-a*u)),e[7]=n*(u*d-c*h)-s*(i*d-a*h)+f*(i*c-a*u),e[8]=s*(l*v-d*m)-f*(o*v-c*m)+_*(o*d-c*l),e[9]=-(n*(l*v-d*m)-f*(r*v-a*m)+_*(r*d-a*l)),e[10]=n*(o*v-c*m)-s*(r*v-a*m)+_*(r*c-a*o),e[11]=-(n*(o*d-c*l)-s*(r*d-a*l)+f*(r*c-a*o)),e[12]=-(s*(l*p-h*m)-f*(o*p-u*m)+_*(o*h-u*l)),e[13]=n*(l*p-h*m)-f*(r*p-i*m)+_*(r*h-i*l),e[14]=-(n*(o*p-u*m)-s*(r*p-i*m)+_*(r*u-i*o)),e[15]=n*(o*h-u*l)-s*(r*h-i*l)+f*(r*u-i*o),e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11],d=e[12],_=e[13],m=e[14],p=e[15];return(t*s-n*a)*(l*p-h*m)-(t*o-r*a)*(f*p-h*_)+(t*u-i*a)*(f*m-l*_)+(n*o-r*s)*(c*p-h*d)-(n*u-i*s)*(c*m-l*d)+(r*u-i*o)*(c*_-f*d)},t.multiply=a,t.translate=function(e,t,n){var r=n[0],i=n[1],a=n[2],s=void 0,o=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,_=void 0,m=void 0,p=void 0,v=void 0;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]):(s=t[0],o=t[1],u=t[2],c=t[3],f=t[4],l=t[5],h=t[6],d=t[7],_=t[8],m=t[9],p=t[10],v=t[11],e[0]=s,e[1]=o,e[2]=u,e[3]=c,e[4]=f,e[5]=l,e[6]=h,e[7]=d,e[8]=_,e[9]=m,e[10]=p,e[11]=v,e[12]=s*r+f*i+_*a+t[12],e[13]=o*r+l*i+m*a+t[13],e[14]=u*r+h*i+p*a+t[14],e[15]=c*r+d*i+v*a+t[15]),e},t.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,n,i){var a,s,o,u,c,f,l,h,d,_,m,p,v,g,E,T,M,A,O,y,S,I,L,R,b=i[0],x=i[1],N=i[2],P=Math.sqrt(b*b+x*x+N*N);return P<r.EPSILON?null:(b*=P=1/P,x*=P,N*=P,a=Math.sin(n),o=1-(s=Math.cos(n)),u=t[0],c=t[1],f=t[2],l=t[3],h=t[4],d=t[5],_=t[6],m=t[7],p=t[8],v=t[9],g=t[10],E=t[11],T=b*b*o+s,M=x*b*o+N*a,A=N*b*o-x*a,O=b*x*o-N*a,y=x*x*o+s,S=N*x*o+b*a,I=b*N*o+x*a,L=x*N*o-b*a,R=N*N*o+s,e[0]=u*T+h*M+p*A,e[1]=c*T+d*M+v*A,e[2]=f*T+_*M+g*A,e[3]=l*T+m*M+E*A,e[4]=u*O+h*y+p*S,e[5]=c*O+d*y+v*S,e[6]=f*O+_*y+g*S,e[7]=l*O+m*y+E*S,e[8]=u*I+h*L+p*R,e[9]=c*I+d*L+v*R,e[10]=f*I+_*L+g*R,e[11]=l*I+m*L+E*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],s=t[5],o=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=s*i+f*r,e[6]=o*i+l*r,e[7]=u*i+h*r,e[8]=c*i-a*r,e[9]=f*i-s*r,e[10]=l*i-o*r,e[11]=h*i-u*r,e},t.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],s=t[1],o=t[2],u=t[3],c=t[8],f=t[9],l=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=s*i-f*r,e[2]=o*i-l*r,e[3]=u*i-h*r,e[8]=a*r+c*i,e[9]=s*r+f*i,e[10]=o*r+l*i,e[11]=u*r+h*i,e},t.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],s=t[1],o=t[2],u=t[3],c=t[4],f=t[5],l=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=s*i+f*r,e[2]=o*i+l*r,e[3]=u*i+h*r,e[4]=c*i-a*r,e[5]=f*i-s*r,e[6]=l*i-o*r,e[7]=h*i-u*r,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,n){var i,a,s,o=n[0],u=n[1],c=n[2],f=Math.sqrt(o*o+u*u+c*c);return f<r.EPSILON?null:(o*=f=1/f,u*=f,c*=f,i=Math.sin(t),s=1-(a=Math.cos(t)),e[0]=o*o*s+a,e[1]=u*o*s+c*i,e[2]=c*o*s-u*i,e[3]=0,e[4]=o*u*s-c*i,e[5]=u*u*s+a,e[6]=c*u*s+o*i,e[7]=0,e[8]=o*c*s+u*i,e[9]=u*c*s-o*i,e[10]=c*c*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=s,t.fromQuat2=function(e,t){var n=new r.ARRAY_TYPE(3),i=-t[0],a=-t[1],o=-t[2],u=t[3],c=t[4],f=t[5],l=t[6],h=t[7],d=i*i+a*a+o*o+u*u;return d>0?(n[0]=2*(c*u+h*i+f*o-l*a)/d,n[1]=2*(f*u+h*a+l*i-c*o)/d,n[2]=2*(l*u+h*o+c*a-f*i)/d):(n[0]=2*(c*u+h*i+f*o-l*a),n[1]=2*(f*u+h*a+l*i-c*o),n[2]=2*(l*u+h*o+c*a-f*i)),s(e,t,n),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],s=t[5],o=t[6],u=t[8],c=t[9],f=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+s*s+o*o),e[2]=Math.sqrt(u*u+c*c+f*f),e},t.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},t.fromRotationTranslationScale=function(e,t,n,r){var i=t[0],a=t[1],s=t[2],o=t[3],u=i+i,c=a+a,f=s+s,l=i*u,h=i*c,d=i*f,_=a*c,m=a*f,p=s*f,v=o*u,g=o*c,E=o*f,T=r[0],M=r[1],A=r[2];return e[0]=(1-(_+p))*T,e[1]=(h+E)*T,e[2]=(d-g)*T,e[3]=0,e[4]=(h-E)*M,e[5]=(1-(l+p))*M,e[6]=(m+v)*M,e[7]=0,e[8]=(d+g)*A,e[9]=(m-v)*A,e[10]=(1-(l+_))*A,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,n,r,i){var a=t[0],s=t[1],o=t[2],u=t[3],c=a+a,f=s+s,l=o+o,h=a*c,d=a*f,_=a*l,m=s*f,p=s*l,v=o*l,g=u*c,E=u*f,T=u*l,M=r[0],A=r[1],O=r[2],y=i[0],S=i[1],I=i[2],L=(1-(m+v))*M,R=(d+T)*M,b=(_-E)*M,x=(d-T)*A,N=(1-(h+v))*A,P=(p+g)*A,w=(_+E)*O,C=(p-g)*O,D=(1-(h+m))*O;return e[0]=L,e[1]=R,e[2]=b,e[3]=0,e[4]=x,e[5]=N,e[6]=P,e[7]=0,e[8]=w,e[9]=C,e[10]=D,e[11]=0,e[12]=n[0]+y-(L*y+x*S+w*I),e[13]=n[1]+S-(R*y+N*S+C*I),e[14]=n[2]+I-(b*y+P*S+D*I),e[15]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n+n,o=r+r,u=i+i,c=n*s,f=r*s,l=r*o,h=i*s,d=i*o,_=i*u,m=a*s,p=a*o,v=a*u;return e[0]=1-l-_,e[1]=f+v,e[2]=h-p,e[3]=0,e[4]=f-v,e[5]=1-c-_,e[6]=d+m,e[7]=0,e[8]=h+p,e[9]=d-m,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,n,r,i,a,s){var o=1/(n-t),u=1/(i-r),c=1/(a-s);return e[0]=2*a*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(i+r)*u,e[10]=(s+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*c,e[15]=0,e},t.perspective=function(e,t,n,r,i){var a=1/Math.tan(t/2),s=void 0;return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(s=1/(r-i),e[10]=(i+r)*s,e[14]=2*i*r*s):(e[10]=-1,e[14]=-2*r),e},t.perspectiveFromFieldOfView=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+o),c=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(s-o)*u*.5,e[9]=(i-a)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},t.ortho=function(e,t,n,r,i,a,s){var o=1/(t-n),u=1/(r-i),c=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*u,e[14]=(s+a)*c,e[15]=1,e},t.lookAt=function(e,t,n,a){var s=void 0,o=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,_=void 0,m=void 0,p=t[0],v=t[1],g=t[2],E=a[0],T=a[1],M=a[2],A=n[0],O=n[1],y=n[2];return Math.abs(p-A)<r.EPSILON&&Math.abs(v-O)<r.EPSILON&&Math.abs(g-y)<r.EPSILON?i(e):(h=p-A,d=v-O,_=g-y,s=T*(_*=m=1/Math.sqrt(h*h+d*d+_*_))-M*(d*=m),o=M*(h*=m)-E*_,u=E*d-T*h,(m=Math.sqrt(s*s+o*o+u*u))?(s*=m=1/m,o*=m,u*=m):(s=0,o=0,u=0),c=d*u-_*o,f=_*s-h*u,l=h*o-d*s,(m=Math.sqrt(c*c+f*f+l*l))?(c*=m=1/m,f*=m,l*=m):(c=0,f=0,l=0),e[0]=s,e[1]=c,e[2]=h,e[3]=0,e[4]=o,e[5]=f,e[6]=d,e[7]=0,e[8]=u,e[9]=l,e[10]=_,e[11]=0,e[12]=-(s*p+o*v+u*g),e[13]=-(c*p+f*v+l*g),e[14]=-(h*p+d*v+_*g),e[15]=1,e)},t.targetTo=function(e,t,n,r){var i=t[0],a=t[1],s=t[2],o=r[0],u=r[1],c=r[2],f=i-n[0],l=a-n[1],h=s-n[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var _=u*h-c*l,m=c*f-o*h,p=o*l-u*f;return(d=_*_+m*m+p*p)>0&&(_*=d=1/Math.sqrt(d),m*=d,p*=d),e[0]=_,e[1]=m,e[2]=p,e[3]=0,e[4]=l*p-h*m,e[5]=h*_-f*p,e[6]=f*m-l*_,e[7]=0,e[8]=f,e[9]=l,e[10]=h,e[11]=0,e[12]=i,e[13]=a,e[14]=s,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},t.subtract=o,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],_=e[11],m=e[12],p=e[13],v=e[14],g=e[15],E=t[0],T=t[1],M=t[2],A=t[3],O=t[4],y=t[5],S=t[6],I=t[7],L=t[8],R=t[9],b=t[10],x=t[11],N=t[12],P=t[13],w=t[14],C=t[15];return Math.abs(n-E)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(i-T)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-A)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(o-O)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(u-y)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-S)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-I)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(l-L)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(h-R)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-b)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(b))&&Math.abs(_-x)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(x))&&Math.abs(m-N)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(p-P)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-w)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(g-C)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(C))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=t[9],d=t[10],_=t[11],m=t[12],p=t[13],v=t[14],g=t[15],E=n[0],T=n[1],M=n[2],A=n[3];return e[0]=E*r+T*o+M*l+A*m,e[1]=E*i+T*u+M*h+A*p,e[2]=E*a+T*c+M*d+A*v,e[3]=E*s+T*f+M*_+A*g,E=n[4],T=n[5],M=n[6],A=n[7],e[4]=E*r+T*o+M*l+A*m,e[5]=E*i+T*u+M*h+A*p,e[6]=E*a+T*c+M*d+A*v,e[7]=E*s+T*f+M*_+A*g,E=n[8],T=n[9],M=n[10],A=n[11],e[8]=E*r+T*o+M*l+A*m,e[9]=E*i+T*u+M*h+A*p,e[10]=E*a+T*c+M*d+A*v,e[11]=E*s+T*f+M*_+A*g,E=n[12],T=n[13],M=n[14],A=n[15],e[12]=E*r+T*o+M*l+A*m,e[13]=E*i+T*u+M*h+A*p,e[14]=E*a+T*c+M*d+A*v,e[15]=E*s+T*f+M*_+A*g,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=r+r,u=i+i,c=a+a,f=r*o,l=r*u,h=r*c,d=i*u,_=i*c,m=a*c,p=s*o,v=s*u,g=s*c;return e[0]=1-(d+m),e[1]=l+g,e[2]=h-v,e[3]=0,e[4]=l-g,e[5]=1-(f+m),e[6]=_+p,e[7]=0,e[8]=h+v,e[9]=_-p,e[10]=1-(f+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}t.mul=a,t.sub=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,n,i,a,s,o,u,c){var f=new r.ARRAY_TYPE(9);return f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=a,f[5]=s,f[6]=o,f[7]=u,f[8]=c,f},t.set=function(e,t,n,r,i,a,s,o,u,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e[6]=o,e[7]=u,e[8]=c,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],c=t[7],f=t[8],l=f*s-o*c,h=-f*a+o*u,d=c*a-s*u,_=n*l+r*h+i*d;return _?(_=1/_,e[0]=l*_,e[1]=(-f*r+i*c)*_,e[2]=(o*r-i*s)*_,e[3]=h*_,e[4]=(f*n-i*u)*_,e[5]=(-o*n+i*a)*_,e[6]=d*_,e[7]=(-c*n+r*u)*_,e[8]=(s*n-r*a)*_,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],c=t[7],f=t[8];return e[0]=s*f-o*c,e[1]=i*c-r*f,e[2]=r*o-i*s,e[3]=o*u-a*f,e[4]=n*f-i*u,e[5]=i*a-n*o,e[6]=a*c-s*u,e[7]=r*u-n*c,e[8]=n*s-r*a,e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],u=e[7],c=e[8];return t*(c*a-s*u)+n*(-c*i+s*o)+r*(u*i-a*o)},t.multiply=i,t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=u,e[6]=h*r+d*s+c,e[7]=h*i+d*o+f,e[8]=h*a+d*u+l,e},t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=Math.sin(n),d=Math.cos(n);return e[0]=d*r+h*s,e[1]=d*i+h*o,e[2]=d*a+h*u,e[3]=d*s-h*r,e[4]=d*o-h*i,e[5]=d*u-h*a,e[6]=c,e[7]=f,e[8]=l,e},t.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n+n,o=r+r,u=i+i,c=n*s,f=r*s,l=r*o,h=i*s,d=i*o,_=i*u,m=a*s,p=a*o,v=a*u;return e[0]=1-l-_,e[3]=f-v,e[6]=h+p,e[1]=f+v,e[4]=1-c-_,e[7]=d-m,e[2]=h-p,e[5]=d+m,e[8]=1-c-l,e},t.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],_=t[12],m=t[13],p=t[14],v=t[15],g=n*o-r*s,E=n*u-i*s,T=n*c-a*s,M=r*u-i*o,A=r*c-a*o,O=i*c-a*u,y=f*m-l*_,S=f*p-h*_,I=f*v-d*_,L=l*p-h*m,R=l*v-d*m,b=h*v-d*p,x=g*b-E*R+T*L+M*I-A*S+O*y;return x?(x=1/x,e[0]=(o*b-u*R+c*L)*x,e[1]=(u*I-s*b-c*S)*x,e[2]=(s*R-o*I+c*y)*x,e[3]=(i*R-r*b-a*L)*x,e[4]=(n*b-i*I+a*S)*x,e[5]=(r*I-n*R-a*y)*x,e[6]=(m*O-p*A+v*M)*x,e[7]=(p*T-_*O-v*E)*x,e[8]=(_*A-m*T+v*g)*x,e):null},t.projection=function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},t.subtract=a,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=t[0],d=t[1],_=t[2],m=t[3],p=t[4],v=t[5],g=t[6],E=t[7],T=t[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(l-T)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=n[0],d=n[1],_=n[2],m=n[3],p=n[4],v=n[5],g=n[6],E=n[7],T=n[8];return e[0]=h*r+d*s+_*c,e[1]=h*i+d*o+_*f,e[2]=h*a+d*u+_*l,e[3]=m*r+p*s+v*c,e[4]=m*i+p*o+v*f,e[5]=m*a+p*u+v*l,e[6]=g*r+E*s+T*c,e[7]=g*i+E*o+T*f,e[8]=g*a+E*u+T*l,e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}t.mul=i,t.sub=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0,t.create=i,t.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,n){return e[0]=t,e[1]=n,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},t.subtract=a,t.multiply=s,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},t.distance=u,t.squaredDistance=c,t.length=f,t.squaredLength=l,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},t.lerp=function(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e},t.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},t.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},t.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},t.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},t.rotate=function(e,t,n,r){var i=t[0]-n[0],a=t[1]-n[1],s=Math.sin(r),o=Math.cos(r);return e[0]=i*o-a*s+n[0],e[1]=i*s+a*o+n[1],e},t.angle=function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],s=n*n+r*r;s>0&&(s=1/Math.sqrt(s));var o=i*i+a*a;o>0&&(o=1/Math.sqrt(o));var u=(n*i+r*a)*s*o;return u>1?0:u<-1?Math.PI:Math.acos(u)},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var n=e[0],i=e[1],a=t[0],s=t[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(){var e=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function s(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function o(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function f(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function l(e){var t=e[0],n=e[1];return t*t+n*n}t.len=f,t.sub=a,t.mul=s,t.div=o,t.dist=u,t.sqrDist=c,t.sqrLen=l,t.forEach=function(){var e=i();return function(t,n,r,i,a,s){var o,u=void 0;for(n||(n=2),r||(r=0),o=i?Math.min(i*n+r,t.length):t.length,u=r;u<o;u+=n)e[0]=t[u],e[1]=t[u+1],a(e,e,s),t[u]=e[0],t[u+1]=e[1];return t}}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0,t.create=function(){var e=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,n,i,a,s,o,u){var c=new r.ARRAY_TYPE(8);return c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=a,c[5]=s,c[6]=o,c[7]=u,c},t.fromRotationTranslationValues=function(e,t,n,i,a,s,o){var u=new r.ARRAY_TYPE(8);u[0]=e,u[1]=t,u[2]=n,u[3]=i;var c=.5*a,f=.5*s,l=.5*o;return u[4]=c*i+f*n-l*t,u[5]=f*i+l*e-c*n,u[6]=l*i+c*t-f*e,u[7]=-c*e-f*t-l*n,u},t.fromRotationTranslation=o,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var n=i.create();a.getRotation(n,t);var s=new r.ARRAY_TYPE(3);return a.getTranslation(s,t),o(e,n,s),e},t.copy=u,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,n,r,i,a,s,o,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e[6]=o,e[7]=u,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var n=t[4],r=t[5],i=t[6],a=t[7],s=-t[0],o=-t[1],u=-t[2],c=t[3];return e[0]=2*(n*c+a*s+r*u-i*o),e[1]=2*(r*c+a*o+i*s-n*u),e[2]=2*(i*c+a*u+n*o-r*s),e},t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=.5*n[0],u=.5*n[1],c=.5*n[2],f=t[4],l=t[5],h=t[6],d=t[7];return e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=s*o+i*c-a*u+f,e[5]=s*u+a*o-r*c+l,e[6]=s*c+r*u-i*o+h,e[7]=-r*o-i*u-a*c+d,e},t.rotateX=function(e,t,n){var r=-t[0],a=-t[1],s=-t[2],o=t[3],u=t[4],c=t[5],f=t[6],l=t[7],h=u*o+l*r+c*s-f*a,d=c*o+l*a+f*r-u*s,_=f*o+l*s+u*a-c*r,m=l*o-u*r-c*a-f*s;return i.rotateX(e,t,n),r=e[0],a=e[1],s=e[2],o=e[3],e[4]=h*o+m*r+d*s-_*a,e[5]=d*o+m*a+_*r-h*s,e[6]=_*o+m*s+h*a-d*r,e[7]=m*o-h*r-d*a-_*s,e},t.rotateY=function(e,t,n){var r=-t[0],a=-t[1],s=-t[2],o=t[3],u=t[4],c=t[5],f=t[6],l=t[7],h=u*o+l*r+c*s-f*a,d=c*o+l*a+f*r-u*s,_=f*o+l*s+u*a-c*r,m=l*o-u*r-c*a-f*s;return i.rotateY(e,t,n),r=e[0],a=e[1],s=e[2],o=e[3],e[4]=h*o+m*r+d*s-_*a,e[5]=d*o+m*a+_*r-h*s,e[6]=_*o+m*s+h*a-d*r,e[7]=m*o-h*r-d*a-_*s,e},t.rotateZ=function(e,t,n){var r=-t[0],a=-t[1],s=-t[2],o=t[3],u=t[4],c=t[5],f=t[6],l=t[7],h=u*o+l*r+c*s-f*a,d=c*o+l*a+f*r-u*s,_=f*o+l*s+u*a-c*r,m=l*o-u*r-c*a-f*s;return i.rotateZ(e,t,n),r=e[0],a=e[1],s=e[2],o=e[3],e[4]=h*o+m*r+d*s-_*a,e[5]=d*o+m*a+_*r-h*s,e[6]=_*o+m*s+h*a-d*r,e[7]=m*o-h*r-d*a-_*s,e},t.rotateByQuatAppend=function(e,t,n){var r=n[0],i=n[1],a=n[2],s=n[3],o=t[0],u=t[1],c=t[2],f=t[3];return e[0]=o*s+f*r+u*a-c*i,e[1]=u*s+f*i+c*r-o*a,e[2]=c*s+f*a+o*i-u*r,e[3]=f*s-o*r-u*i-c*a,o=t[4],u=t[5],c=t[6],f=t[7],e[4]=o*s+f*r+u*a-c*i,e[5]=u*s+f*i+c*r-o*a,e[6]=c*s+f*a+o*i-u*r,e[7]=f*s-o*r-u*i-c*a,e},t.rotateByQuatPrepend=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=n[0],u=n[1],c=n[2],f=n[3];return e[0]=r*f+s*o+i*c-a*u,e[1]=i*f+s*u+a*o-r*c,e[2]=a*f+s*c+r*u-i*o,e[3]=s*f-r*o-i*u-a*c,o=n[4],u=n[5],c=n[6],f=n[7],e[4]=r*f+s*o+i*c-a*u,e[5]=i*f+s*u+a*o-r*c,e[6]=a*f+s*c+r*u-i*o,e[7]=s*f-r*o-i*u-a*c,e},t.rotateAroundAxis=function(e,t,n,i){if(Math.abs(i)<r.EPSILON)return u(e,t);var a=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);i*=.5;var s=Math.sin(i),o=s*n[0]/a,c=s*n[1]/a,f=s*n[2]/a,l=Math.cos(i),h=t[0],d=t[1],_=t[2],m=t[3];e[0]=h*l+m*o+d*f-_*c,e[1]=d*l+m*c+_*o-h*f,e[2]=_*l+m*f+h*c-d*o,e[3]=m*l-h*o-d*c-_*f;var p=t[4],v=t[5],g=t[6],E=t[7];return e[4]=p*l+E*o+v*f-g*c,e[5]=v*l+E*c+g*o-p*f,e[6]=g*l+E*f+p*c-v*o,e[7]=E*l-p*o-v*c-g*f,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e},t.multiply=c,t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e},t.lerp=function(e,t,n,r){var i=1-r;return f(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e},t.invert=function(e,t){var n=h(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var n=h(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,i=t[1]/n,a=t[2]/n,s=t[3]/n,o=t[4],u=t[5],c=t[6],f=t[7],l=r*o+i*u+a*c+s*f;e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=(o-r*l)/n,e[5]=(u-i*l)/n,e[6]=(c-a*l)/n,e[7]=(f-s*l)/n}return e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],f=e[7],l=t[0],h=t[1],d=t[2],_=t[3],m=t[4],p=t[5],v=t[6],g=t[7];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-_)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(o-m)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-p)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(c-v)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-g)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))};var r=s(n(0)),i=s(n(3)),a=s(n(4));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],s=t[0],o=t[1],u=t[2],c=t[3];return e[0]=s,e[1]=o,e[2]=u,e[3]=c,e[4]=r*c+i*u-a*o,e[5]=i*c+a*s-r*u,e[6]=a*c+r*o-i*s,e[7]=-r*s-i*o-a*u,e}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=n[4],u=n[5],c=n[6],f=n[7],l=t[4],h=t[5],d=t[6],_=t[7],m=n[0],p=n[1],v=n[2],g=n[3];return e[0]=r*g+s*m+i*v-a*p,e[1]=i*g+s*p+a*m-r*v,e[2]=a*g+s*v+r*p-i*m,e[3]=s*g-r*m-i*p-a*v,e[4]=r*f+s*o+i*c-a*u+l*g+_*m+h*v-d*p,e[5]=i*f+s*u+a*o-r*c+h*g+_*p+d*m-l*v,e[6]=a*f+s*c+r*u-i*o+d*g+_*v+l*p-h*m,e[7]=s*f-r*o-i*u-a*c+_*g-l*m-h*p-d*v,e}t.getReal=i.copy,t.setReal=i.copy,t.mul=c;var f=t.dot=i.dot,l=t.length=i.length,h=(t.len=l,t.squaredLength=i.squaredLength);t.sqrLen=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,n,i,a,s){var o=new r.ARRAY_TYPE(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=i,o[4]=a,o[5]=s,o},t.set=function(e,t,n,r,i,a,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=n*a-r*i;return u?(u=1/u,e[0]=a*u,e[1]=-r*u,e[2]=-i*u,e[3]=n*u,e[4]=(i*o-a*s)*u,e[5]=(r*s-n*o)*u,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=i,t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=Math.sin(n),f=Math.cos(n);return e[0]=r*f+a*c,e[1]=i*f+s*c,e[2]=r*-c+a*f,e[3]=i*-c+s*f,e[4]=o,e[5]=u,e},t.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=n[0],f=n[1];return e[0]=r*c,e[1]=i*c,e[2]=a*f,e[3]=s*f,e[4]=o,e[5]=u,e},t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=r*c+a*f+o,e[5]=i*c+s*f+u,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},t.subtract=a,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=t[0],f=t[1],l=t[2],h=t[3],d=t[4],_=t[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-_)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=n[0],f=n[1],l=n[2],h=n[3],d=n[4],_=n[5];return e[0]=r*c+a*f,e[1]=i*c+s*f,e[2]=r*l+a*h,e[3]=i*l+s*h,e[4]=r*d+a*_+o,e[5]=i*d+s*_+u,e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}t.mul=i,t.sub=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,n,i){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=i,a},t.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},t.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*a-i*r;return s?(s=1/s,e[0]=a*s,e[1]=-r*s,e[2]=-i*s,e[3]=n*s,e):null},t.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=i,t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*o,e[1]=i*u+s*o,e[2]=r*-o+a*u,e[3]=i*-o+s*u,e},t.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=n[0],u=n[1];return e[0]=r*o,e[1]=i*o,e[2]=a*u,e[3]=s*u,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},t.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=a,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=t[0],u=t[1],c=t[2],f=t[3];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))},t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=n[0],u=n[1],c=n[2],f=n[3];return e[0]=r*o+a*u,e[1]=i*o+s*u,e[2]=r*c+a*f,e[3]=i*c+s*f,e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}t.mul=i,t.sub=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var r=d(n(0)),i=d(n(9)),a=d(n(8)),s=d(n(5)),o=d(n(4)),u=d(n(3)),c=d(n(7)),f=d(n(6)),l=d(n(2)),h=d(n(1));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.glMatrix=r,t.mat2=i,t.mat2d=a,t.mat3=s,t.mat4=o,t.quat=u,t.quat2=c,t.vec2=f,t.vec3=l,t.vec4=h}])})}).call(this,n(42)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),i=c(n(2)),a=c(n(12)),s=c(n(16)),o=c(n(33)),u=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var f=new s.default,l=r.default.create({Statics:{cache:{get:function(){return f}},reset:function(e){f.each(function(t,n){e.deleteTexture(t),f.remove(n)})}},isTexture:!0,className:"Texture",image:null,target:u.TEXTURE_2D,level:0,internalFormat:u.RGBA,format:u.RGBA,type:u.UNSIGNED_BYTE,width:0,height:0,border:0,magFilter:u.LINEAR,minFilter:u.LINEAR,wrapS:u.REPEAT,wrapT:u.REPEAT,name:"",premultiplyAlpha:!1,flipY:!1,compressed:!1,needUpdate:!0,needDestory:!1,autoUpdate:!1,uv:0,constructor:function(e){this.id=i.default.generateUUID(this.className),Object.assign(this,e)},isImgPowerOfTwo:function(e){return i.default.isPowerOfTwo(e.width)&&i.default.isPowerOfTwo(e.height)},resizeImgToPowerOfTwo:function(e){if(this.isImgPowerOfTwo(e))return e;var t=i.default.nextPowerOfTwo(e.width),n=i.default.nextPowerOfTwo(e.height),r=this._canvasImage;return r||(r=document.createElement("canvas"),this._canvasImage=r),r.width=t,r.height=n,r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),o.default.warnOnce("resizeImgToPowerOfTwo"+this.id,"image is not power of two ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e.src),r},_glUploadTexture:function(e,t,n){var r=e.gl;return this.compressed?r.compressedTexImage2D(t,this.level,this.internalFormat,this.width,this.height,this.border,n):n.width?r.texImage2D(t,this.level,this.internalFormat,this.format,this.type,n):r.texImage2D(t,this.level,this.internalFormat,this.width,this.height,this.border,this.format,this.type,n),this},_uploadTexture:function(e){return this._glUploadTexture(e,this.target,this.image),this},updateTexture:function(e,t){var n=e.gl;if(this.needUpdate||this.autoUpdate){this._originImage&&this.image===this._canvasImage&&(this.image=this._originImage);var r=this.minFilter!==u.LINEAR&&this.minFilter!==u.NEAREST;(this.wrapS!==u.CLAMP_TO_EDGE||this.wrapT!==u.CLAMP_TO_EDGE||r)&&(this._originImage=this.image,this.image=this.resizeImgToPowerOfTwo(this.image)),e.activeTexture(n.TEXTURE0+a.default.MAX_TEXTURE_INDEX),e.bindTexture(this.target,t),e.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!this.flipY),this._uploadTexture(e),r&&n.generateMipmap(this.target),this.needUpdate=!1}return this},getGLTexture:function(e){var t=this.gl=e.gl,n=this.id;this.needDestory&&(this.destroy(),this.needDestory=!1);var r=f.get(n);return r?this.updateTexture(e,r):(r=t.createTexture(),f.add(n,r),this.needUpdate=!0,this.updateTexture(e,r),t.texParameterf(this.target,t.TEXTURE_MAG_FILTER,this.magFilter),t.texParameterf(this.target,t.TEXTURE_MIN_FILTER,this.minFilter),t.texParameterf(this.target,t.TEXTURE_WRAP_S,this.wrapS),t.texParameterf(this.target,t.TEXTURE_WRAP_T,this.wrapT)),r},setGLTexture:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this.destroy(),f.add(this.id,e),this},destroy:function(){var e=this.id,t=f.get(e);return t&&this.gl&&(this.gl.deleteTexture(t),f.remove(e)),this},clone:function(){var e=Object.assign({},this);return delete e.id,new this.constructor(e)}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(22));var i={MAX_TEXTURE_INDEX:null,MAX_PRECISION:null,MAX_VERTEX_PRECISION:null,MAX_FRAGMENT_PRECISION:null,VERTEX_TEXTURE_FLOAT:null,FRAGMENT_TEXTURE_FLOAT:null,init:function(e){var t=this;this.gl=e;["MAX_RENDERBUFFER_SIZE","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_VARYING_VECTORS","MAX_VERTEX_ATTRIBS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_VECTORS","MAX_COMBINED_TEXTURE_IMAGE_UNITS"].forEach(function(e){t.get(e)}),this.MAX_TEXTURE_INDEX=this.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,this.MAX_VERTEX_PRECISION=this._getMaxSupportPrecision(e.VERTEX_SHADER),this.MAX_FRAGMENT_PRECISION=this._getMaxSupportPrecision(e.FRAGMENT_SHADER),this.MAX_PRECISION=this.getMaxPrecision(this.MAX_FRAGMENT_PRECISION,this.MAX_VERTEX_PRECISION),this.VERTEX_TEXTURE_FLOAT=!!r.default.texFloat&&this.MAX_VERTEX_TEXTURE_IMAGE_UNITS>0,this.FRAGMENT_TEXTURE_FLOAT=!!r.default.texFloat,this.EXT_FRAG_DEPTH=r.default.get("EXT_frag_depth"),this.SHADER_TEXTURE_LOD=!!r.default.shaderTextureLod},get:function(e){var t=this.gl,n=this[e];return void 0===n&&(n=this[e]=t.getParameter(t[e])),n},_getMaxSupportPrecision:function(e){var t=this.gl,n="lowp";if(t.getShaderPrecisionFormat)for(var r=[{name:"highp",type:t.HIGH_FLOAT},{name:"mediump",type:t.MEDIUM_FLOAT}],i=0;i<r.length;i++){var a=r[i];if((t.getShaderPrecisionFormat(e,a.type)||{}).precision>0){n=a.name;break}}else n="mediump";return n},getMaxPrecision:function(e,t){return"highp"===e||"mediump"===e&&"lowp"===t?t:e}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(9)),a=o(n(133)),s=n(5);function o(e){return e&&e.__esModule?e:{default:e}}var u=new a.default,c=r.default.create({Mixes:i.default,isBasicLoader:!0,className:"BasicLoader",Statics:{_cache:u,enalbeCache:function(){u.enabled=!0},disableCache:function(){u.enabled=!1},deleteCache:function(e){u.remove(e)},clearCache:function(){u.clear()}},load:function(e){var t=e.src,n=e.type;if(!n){var r=(0,s.getExtension)(t);/^(?:png|jpe?g|gif|webp|bmp)$/i.test(r)&&(n="img"),n||(n=e.defaultType)}return"img"===n?this.loadImg(t,e.crossOrigin):this.loadRes(t,n)},isCrossOrigin:function(e){var t=window.location,n=document.createElement("a");return n.href=e,n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol},loadImg:function(e,t){var n=this,r=u.get(e);return r?u.wait(r):new Promise(function(r,i){var s=new Image;u.update(e,a.default.PENDING),s.onload=function(){s.onerror=null,s.onabort=null,s.onload=null,u.update(e,a.default.LOADED,s),r(s)},s.onerror=function(){s.onerror=null,s.onabort=null,s.onload=null;var t=new Error("Image load failed for "+e.slice(0,100));u.update(e,a.default.FAILED,t),i(t)},s.onabort=s.onerror,(t||n.isCrossOrigin(e))&&(s.crossOrigin="anonymous"),s.src=e})},loadRes:function(e,t){var n=this;if(/^data:(.+?);base64,/.test(e)){var r=RegExp.$1,i=e.slice(13+r.length),s=atob(i);return"json"===t?s=JSON.parse(s):"buffer"===t&&(s=Uint8Array.from(s,function(e){return e.charCodeAt(0)}).buffer),Promise.resolve(s)}var o=u.get(e);return o?u.wait(o):(u.update(e,a.default.PENDING),this.fire("beforeload"),this.request({url:e,type:t}).then(function(t){return n.fire("loaded"),u.update(e,a.default.LOADED,t),t},function(t){throw n.fire("failed",t),u.update(e,a.default.FAILED),new Error("Resource load failed for "+e+", "+t)}))},request:function(e){var t=this;return new Promise(function(n,r){var i=new XMLHttpRequest;i.onload=function(){if(i.status<200||i.status>=300)r(new TypeError("Network request failed for "+i.status));else{var t="response"in i?i.response:i.responseText;if("json"===e.type)try{t=JSON.parse(t)}catch(e){return void r(new TypeError("JSON.parse error"+e))}n(t)}},i.onprogress=function(n){t.fire("progress",{url:e.url,loaded:n.loaded,total:n.total})},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request timed out"))},i.open(e.method||"GET",e.url,!0),"include"===e.credentials&&(i.withCredentials=!0),"buffer"===e.type&&(i.responseType="arraybuffer"),(0,s.each)(e.headers,function(e,t){i.setRequestHeader(t,e)}),i.send(e.body||null)})}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(13)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({isLoader:!0,className:"Loader",maxConnections:2,Statics:{_loaderClassMap:{},_loaders:{},addLoader:function(e,t){o._loaderClassMap[e]=t},getLoader:function(e){if(!o._loaders[e]){var t=o._loaderClassMap[e]?o._loaderClassMap[e]:i.default;o._loaders[e]=new t}return o._loaders[e]}},load:function(e){var t=this;if(e instanceof Array)return Promise.all(e.map(function(e){return t.load(e)}));var n=e.type||(0,a.getExtension)(e.src);return o.getLoader(n).load(e)}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(9)),a=f(n(6)),s=f(n(3)),o=f(n(31)),u=f(n(19)),c=f(n(2));function f(e){return e&&e.__esModule?e:{default:e}}var l=new s.default(0,1,0),h=new a.default,d=r.default.create({Mixes:i.default,isNode:!0,className:"Node",name:"",animationId:"",autoUpdateWorldMatrix:!0,parent:null,_x:0,_y:0,_z:0,_scaleX:1,_scaleY:1,_scaleZ:1,_rotationX:0,_rotationRadX:0,_rotationY:0,_rotationRadY:0,_rotationZ:0,_rotationRadZ:0,_pivotX:0,_pivotY:0,_pivotZ:0,_positionDirty:!1,_scaleDirty:!1,_rotationDirty:!1,_pivotDirty:!1,_matrixDirty:!1,needCallChildUpdate:!0,visible:!0,pointerEnabled:!0,pointerChildren:!0,useHandCursor:!1,constructor:function(e){this.id=c.default.generateUUID(this.className),this.up=l.clone(),this.children=[],this.worldMatrix=new a.default,this._matrix=new a.default,this._position=new s.default,this._scale=new s.default(1,1,1),this._pivot=new s.default,this._euler=new o.default,this.quaternion=new u.default,Object.assign(this,e)},clone:function(e){var t=new this.constructor;return t.name=this.name,t.jointName=this.jointName,t.animationId=this.animationId,t.setPosition(this.x,this.y,this.z),t.setScale(this.scaleX,this.scaleY,this.scaleZ),t.setRotation(this.rotationX,this.rotationY,this.rotationZ),this.children.forEach(function(e){t.addChild(e.clone(!0))}),e||(this.anim&&(t.anim=this.anim.clone(t)),t.resetSkinedMeshRootNode()),t},setAnim:function(e){return this.anim=e,e.rootNode=this,this},resetSkinedMeshRootNode:function(){var e=this;this.traverse(function(t){t.isSkinedMesh&&t.jointNames&&(t.rootNode=e)},!0)},getChildrenNameMap:function(){var e={};return this.traverse(function(t){e[t.name]=t;var n=t._originName;void 0===n||e[n]||(e[n]=t)},!0),e},addChild:function(e){return e.parent&&e.removeFromParent(),e.parent=this,this.children.push(e),this},removeChild:function(e){var t=this.children.indexOf(e);return t>-1&&(this.children.splice(t,1),e.parent=null),this},addTo:function(e){return e.addChild(this),this},removeFromParent:function(){return this.parent&&this.parent.removeChild(this),this},updateMatrix:function(){var e=!1;return this._positionDirty&&(this._positionDirty=!1,e=!0,this._position.set(this._x,this._y,this._z)),this._scaleDirty&&(this._scaleDirty=!1,e=!0,this._scale.set(this._scaleX,this._scaleY,this._scaleZ)),this._rotationDirty&&(this._rotationDirty=!1,e=!0,this._euler.set(this._rotationRadX,this._rotationRadY,this._rotationRadZ),this._quaternion.fromEuler(this._euler,!0)),this._pivotDirty&&(this._pivotDirty=!1,e=!0,this._pivot.set(this._pivotX,this._pivotY,this._pivotZ)),this._matrixDirty&&(this._matrixDirty=!1,e=!0),e&&(this.matrixVersion++,this._matrix.compose(this._quaternion,this._position,this._scale,this._pivot)),this},updateTransform:function(){this._matrix.decompose(this._quaternion,this._position,this._scale,this._pivot);var e=this._position,t=this._scale,n=this._pivot;return this._x=e.x,this._y=e.y,this._z=e.z,this._scaleX=t.x,this._scaleY=t.y,this._scaleZ=t.z,this._pivotX=n.x,this._pivotY=n.y,this._pivotZ=n.z,this._onQuaternionChange(),this._positionDirty=this._rotationDirty=this._scaleDirty=this.pivot=this._matrixDirty=!1,this},updateMatrixWorld:function(e){return this.traverse(function(t){(t.autoUpdateWorldMatrix||e)&&(t.parent?t.worldMatrix.multiply(t.parent.worldMatrix,t.matrix):t.worldMatrix.copy(t.matrix))}),this},getConcatenatedMatrix:function(e){for(var t=new a.default,n=this;n&&n!==e;n=n.parent)t.multiply(n.matrix,t);return t},traverse:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!e(this)?(this.children.forEach(function(t){t.traverse(e)}),this):this},traverseUpdate:function(e){return this.traverse(function(t){return t.onUpdate&&t.onUpdate(e),!t.needCallChildUpdate}),this},getChildByFn:function(e){var t=null;return this.traverse(function(n){return!!e(n)&&(t=n,!0)},!0),t},getChildrenByFn:function(e){var t=[];return this.traverse(function(n){e(n)&&t.push(n)},!0),t},getChildByName:function(e){return this.getChildByFn(function(t){return t.name===e})},getChildrenByName:function(e){return this.getChildrenByFn(function(t){return t.name===e})},getChildById:function(e){return this.getChildByFn(function(t){return t.id===e})},getChildrenByClassName:function(e){return this.getChildrenByFn(function(t){return t.className===e})},setScale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return this.scaleX=e,this.scaleY=t,this.scaleZ=n,this},setPosition:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setRotation:function(e,t,n){return this.rotationX=e,this.rotationY=t,this.rotationZ=n,this},setPivot:function(e,t,n){return this.pivotX=e,this.pivotY=t,this.pivotZ=n,this},lookAt:function(e){return this.isCamera?h.targetTo(this,e,this.up):h.targetTo(e,this,this.up),this._quaternion.fromMat4(h),this},raycast:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.visible)return null;var i=[];return this.traverse(function(n){if(r&&!n.pointerEnabled)return!0;if(n.isMesh){var a=n.raycast(e,!1);a&&(i=i.concat(a.map(function(e){return{mesh:n,point:e}})))}return!(!r||t.pointerChildren)}),i.length?(n&&e.sortPoints(i,"point"),i):null},matrix:{get:function(){return this.updateMatrix(),this._matrix},set:function(e){this._matrix=e,this.updateTransform()}},x:{get:function(){return this._x},set:function(e){this._x=e,this._positionDirty=!0}},y:{get:function(){return this._y},set:function(e){this._y=e,this._positionDirty=!0}},z:{get:function(){return this._z},set:function(e){this._z=e,this._positionDirty=!0}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e,this._scaleDirty=!0}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e,this._scaleDirty=!0}},scaleZ:{get:function(){return this._scaleZ},set:function(e){this._scaleZ=e,this._scaleDirty=!0}},rotationX:{get:function(){return this._rotationX},set:function(e){this._rotationX=e,this._rotationRadX=c.default.DEG2RAD*e,this._rotationDirty=!0}},rotationY:{get:function(){return this._rotationY},set:function(e){this._rotationY=e,this._rotationRadY=c.default.DEG2RAD*e,this._rotationDirty=!0}},rotationZ:{get:function(){return this._rotationZ},set:function(e){this._rotationZ=e,this._rotationRadZ=c.default.DEG2RAD*e,this._rotationDirty=!0}},pivotX:{get:function(){return this._pivotX},set:function(e){this._pivotX=e,this._pivotDirty=!0}},pivotY:{get:function(){return this._pivotY},set:function(e){this._pivotY=e,this._pivotDirty=!0}},pivotZ:{get:function(){return this._pivotZ},set:function(e){this._pivotZ=e,this._pivotDirty=!0}},quaternion:{get:function(){return this._quaternion},set:function(e){var t=this;this._quaternion=e,this._matrixDirty=!0,this._onQuaternionChange(),this._quaternion.on("change",function(){t._onQuaternionChange(),t._matrixDirty=!0})}},_onQuaternionChange:function(){var e=this._euler,t=this._quaternion;e.fromQuat(t),this._rotationRadX=e.x,this._rotationRadY=e.y,this._rotationRadZ=e.z,this._rotationX=e.x*c.default.RAD2DEG,this._rotationY=e.y*c.default.RAD2DEG,this._rotationZ=e.z*c.default.RAD2DEG},matrixVersion:0,getBounds:function(e,t,n){return t?t.multiply(this.matrix):t=this.getConcatenatedMatrix(e),this.children.forEach(function(e){n=e.getBounds(null,t.clone(),n)}),this.isMesh&&(n=this.geometry.getBounds(t,n)),n},_fireMouseEvent:function(e){if(e.eventCurrentTarget=this,this.fire(e),"mousemove"===e.type){if(!this.__mouseOver){this.__mouseOver=!0;var t=Object.assign({},e);t.type="mouseover",this.fire(t)}}else"mouseout"===e.type&&(this.__mouseOver=!1);var n=this.parent;e._stopped||e._stopPropagationed||!n||n._fireMouseEvent(e)}});t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({constructor:function(){this._cache={}},get:function(e){return this._cache[e]},getObject:function(e){return this._cache[e.__cacheId]},add:function(e,t){"object"===(void 0===t?"undefined":r(t))&&(t.__cacheId=e),this._cache[e]=t},remove:function(e){delete this._cache[e]},removeObject:function(e){delete this._cache[e.__cacheId]},removeAll:function(){this._cache={}},each:function(e){var t=this._cache;for(var n in t)e(t[n],n)}});t.default=i},function(e,t){e.exports="#define GLSLIFY 1\n#define HILO_FRONT_SIDE 1028\n#define HILO_BACK_SIDE 1029\n#define HILO_FRONT_AND_BACK_SIDE 1032\n#define HILO_PI 3.141592653589793\n#define HILO_INVERSE_PI 0.3183098861837907"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(39)),a=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isBasicMaterial:!0,className:"BasicMaterial",lightType:"BLINN-PHONG",diffuse:null,ambient:null,specular:null,emission:null,specularEnvMap:null,specularEnvMatrix:null,reflectivity:0,refractRatio:0,refractivity:0,shininess:32,usedUniformVectors:11,constructor:function(e){this.diffuse=new a.default(.5,.5,.5),this.specular=new a.default(1,1,1),this.emission=new a.default(0,0,0),o.superclass.constructor.call(this,e),Object.assign(this.uniforms,{u_diffuse:"DIFFUSE",u_specular:"SPECULAR",u_ambient:"AMBIENT",u_shininess:"SHININESS",u_reflectivity:"REFLECTIVITY",u_refractRatio:"REFRACTRATIO",u_refractivity:"REFRACTIVITY",u_specularEnvMap:"SPECULARENVMAP",u_specularEnvMatrix:"SPECULARENVMATRIX"}),this.addTextureUniforms({u_diffuse:"DIFFUSE",u_specular:"SPECULAR",u_ambient:"AMBIENT"})},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.superclass.getRenderOption.call(this,e);var t=this._textureOption.reset(e),n=this.lightType;"PHONG"!==n&&"BLINN-PHONG"!==n||(e.HAS_SPECULAR=1);var r=this.diffuse;return r&&r.isTexture&&(r.isCubeTexture?e.DIFFUSE_CUBE_MAP=1:t.add(this.diffuse,"DIFFUSE_MAP")),e.HAS_LIGHT&&(t.add(this.specular,"SPECULAR_MAP"),t.add(this.ambient,"AMBIENT_MAP"),t.add(this.specularEnvMap,"SPECULAR_ENV_MAP")),t.update(),e}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=o(n(20)),a=o(n(0)),s=o(n(9));function o(e){return e&&e.__esModule?e:{default:e}}var u=new i.default,c=a.default.create({Mixes:s.default,className:"Quaternion",isQuaternion:!0,constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.elements=r.quat.fromValues(e,t,n,i)},copy:function(e,t){return r.quat.copy(this.elements,e.elements),t||this.fire("change"),this},clone:function(){var e=this.elements;return new this.constructor(e[0],e[1],e[2],e[3])},toArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e},fromArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=this.elements;return r[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],n||this.fire("change"),this},set:function(e,t,n,i,a){return r.quat.set(this.elements,e,t,n,i),a||this.fire("change"),this},identity:function(e){return r.quat.identity(this.elements),e||this.fire("change"),this},rotationTo:function(e,t,n){return r.quat.rotationTo(this.elements,e.elements,t.elements),n||this.fire("change"),this},setAxes:function(e,t,n,i){return r.quat.setAxes(this.elements,e.elements,t.elements,n.elements),i||this.fire("change"),this},setAxisAngle:function(e,t,n){return r.quat.setAxisAngle(this.elements,e.elements,t),n||this.fire("change"),this},getAxisAngle:function(e){return r.quat.getAxisAngle(e.elements,this.elements)},add:function(e,t){return r.quat.add(this.elements,this.elements,e.elements),t||this.fire("change"),this},multiply:function(e,t){return r.quat.multiply(this.elements,this.elements,e.elements),t||this.fire("change"),this},premultiply:function(e,t){return r.quat.multiply(this.elements,e.elements,this.elements),t||this.fire("change"),this},scale:function(e,t){return r.quat.scale(this.elements,this.elements,e),t||this.fire("change"),this},rotateX:function(e,t){return r.quat.rotateX(this.elements,this.elements,e),t||this.fire("change"),this},rotateY:function(e,t){return r.quat.rotateY(this.elements,this.elements,e),t||this.fire("change"),this},rotateZ:function(e,t){return r.quat.rotateZ(this.elements,this.elements,e),t||this.fire("change"),this},calculateW:function(e){return r.quat.calculateW(this.elements,this.elements),e||this.fire("change"),this},dot:function(e){return r.quat.dot(this.elements,e.elements)},lerp:function(e,t,n){return r.quat.lerp(this.elements,this.elements,e.elements,t),n||this.fire("change"),this},slerp:function(e,t,n){return r.quat.slerp(this.elements,this.elements,e.elements,t),n||this.fire("change"),this},sqlerp:function(e,t,n,i,a,s){return r.quat.sqlerp(this.elements,e.elements,t.elements,n.elements,i.elements,a),s||this.fire("change"),this},invert:function(e){return r.quat.invert(this.elements,this.elements),e||this.fire("change"),this},conjugate:function(e){return r.quat.conjugate(this.elements,this.elements),e||this.fire("change"),this},length:function(){return r.quat.length(this.elements)},squaredLength:function(){return r.quat.squaredLength(this.elements)},normalize:function(e){return r.quat.normalize(this.elements,this.elements),e||this.fire("change"),this},fromMat3:function(e,t){return r.quat.fromMat3(this.elements,e.elements),t||this.fire("change"),this},fromMat4:function(e,t){return u.fromMat4(e),this.fromMat3(u,t),this},exactEquals:function(e){return r.quat.exactEquals(this.elements,e.elements)},equals:function(e){return r.quat.equals(this.elements,e.elements)},fromEuler:function(e,t){var n=.5*e.x,r=.5*e.y,i=.5*e.z,a=e.order||"ZYX",s=Math.sin(n),o=Math.cos(n),u=Math.sin(r),c=Math.cos(r),f=Math.sin(i),l=Math.cos(i),h=this.elements;return"XYZ"===a?(h[0]=s*c*l+o*u*f,h[1]=o*u*l-s*c*f,h[2]=o*c*f+s*u*l,h[3]=o*c*l-s*u*f):"YXZ"===a?(h[0]=s*c*l+o*u*f,h[1]=o*u*l-s*c*f,h[2]=o*c*f-s*u*l,h[3]=o*c*l+s*u*f):"ZXY"===a?(h[0]=s*c*l-o*u*f,h[1]=o*u*l+s*c*f,h[2]=o*c*f+s*u*l,h[3]=o*c*l-s*u*f):"ZYX"===a?(h[0]=s*c*l-o*u*f,h[1]=o*u*l+s*c*f,h[2]=o*c*f-s*u*l,h[3]=o*c*l+s*u*f):"YZX"===a?(h[0]=s*c*l+o*u*f,h[1]=o*u*l+s*c*f,h[2]=o*c*f-s*u*l,h[3]=o*c*l-s*u*f):"XZY"===a&&(h[0]=s*c*l-o*u*f,h[1]=o*u*l-s*c*f,h[2]=o*c*f+s*u*l,h[3]=o*c*l+s*u*f),t||this.fire("change"),this},x:{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e,this.fire("change")}},y:{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e,this.fire("change")}},z:{get:function(){return this.elements[2]},set:function(e){this.elements[2]=e,this.fire("change")}},w:{get:function(){return this.elements[3]},set:function(e){this.elements[3]=e,this.fire("change")}}});c.prototype.mul=c.prototype.multiply,c.prototype.len=c.prototype.length,c.prototype.sqrLen=c.prototype.squaredLength,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({className:"Matrix3",isMatrix3:!0,constructor:function(){this.elements=r.mat3.create()},copy:function(e){return r.mat3.copy(this.elements,e.elements),this},clone:function(){var e=new this.constructor;return r.mat3.copy(e.elements,this.elements),e},toArray:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,r=0;r<9;r++)e[t+r]=n[r];return e},fromArray:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,r=0;r<9;r++)n[r]=e[t+r];return this},set:function(e,t,n,i,a,s,o,u,c){return r.mat3.set(this.elements,e,t,n,i,a,s,o,u,c),this},identity:function(){return r.mat3.identity(this.elements),this},transpose:function(){return r.mat3.transpose(this.elements,this.elements),this},invert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return r.mat3.invert(this.elements,e.elements),this},adjoint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return r.mat3.adjoint(this.elements,e.elements),this},determinant:function(){return r.mat3.determinant(this.elements)},multiply:function(e,t){return t||(t=e,e=this),r.mat3.multiply(this.elements,e.elements,t.elements),this},premultiply:function(e){return this.multiply(e,this),this},translate:function(e){return r.mat3.translate(this.elements,this.elements,e.elements),this},rotate:function(e){return r.mat3.rotate(this.elements,this.elements,e),this},scale:function(e){return r.mat3.scale(this.elements,this.elements,e.elements),this},fromTranslation:function(e){return r.mat3.fromTranslation(this.elements,e.elements),this},fromRotation:function(e){return r.mat3.fromRotation(this.elements,e),this},fromScaling:function(e){return r.mat3.fromScaling(this.elements,e.elements),this},fromQuat:function(e){return r.mat3.fromQuat(this.elements,e.elements),this},normalFromMat4:function(e){return r.mat3.normalFromMat4(this.elements,e.elements),this},fromMat4:function(e){return r.mat3.fromMat4(this.elements,e.elements),this},frob:function(){return r.mat3.frob(this.elements)},add:function(e,t){return t||(t=e,e=this),r.mat3.add(this.elements,e.elements,t.elements),this},subtract:function(e,t){return t||(t=e,e=this),r.mat3.subtract(this.elements,e.elements,t.elements),this},exactEquals:function(e,t){return t||(t=e,e=this),r.mat3.exactEquals(e.elements,t.elements)},equals:function(e,t){return t||(t=e,e=this),r.mat3.equals(e.elements,t.elements)},fromRotationTranslationScale:function(e,t,n,r,i){var a=Math.cos(e),s=Math.sin(e);return this.set(r*a,-i*s,0,r*s,i*a,0,t,n,1),this}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(15)),a=o(n(32)),s=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}var u=new a.default,c=new s.default,f=r.default.create({Extends:i.default,isMesh:!0,className:"Mesh",geometry:null,material:null,useInstanced:!0,frustumTest:!1,constructor:function(e){f.superclass.constructor.call(this,e),this._usedResourceDict={}},clone:function(e){var t=i.default.prototype.clone.call(this,e);return Object.assign(t,{geometry:this.geometry,material:this.material}),t},raycast:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.visible)return null;var n=this.geometry,r=this.material,i=this.worldMatrix;if(n&&r){c.invert(i),u.copy(e),u.transformMat4(c);var a=n.raycast(u,r.side,t);if(a)return a.forEach(function(e){e.transformMat4(i)}),a}return null},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.geometry.getRenderOption(e),e},useResource:function(e){e&&(this._usedResourceDict[e.className+":"+e.id]=e)},destroy:function(e){if(this._isDestroyed)return this;this.removeFromParent();var t=e.resourceManager,n=this._usedResourceDict;for(var r in n)t.destroyIfNoRef(n[r]);return this._usedResourceDict=null,this.geometry=null,this.material=null,this._isDestroyed=!0,this}});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={instanced:void 0,vao:void 0,texFloat:void 0,loseContext:void 0,_usedExtensions:{},_disabledExtensions:{},init:function(e){this.reset(e)},reset:function(e){this.gl=e;var t=this._usedExtensions;for(var n in t){var r=t[n];this[r]=void 0,this.get(n,r)}},use:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this.gl?this.get(e,t):this._usedExtensions[e]=t},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this._disabledExtensions[e])return null;var n=this[t];return void 0===n&&(n=this._getExtension(e),this[t]=n),n},disable:function(e){this._disabledExtensions[e]=!0},enable:function(e){this._disabledExtensions[e]=!1},_getExtension:function(e){var t=this.gl;return t&&t.getExtension&&(t.getExtension(e)||t.getExtension("WEBKIT_"+e)||t.getExtension("MOZ_"+e))||null}};r.use("ANGLE_instanced_arrays","instanced"),r.use("OES_vertex_array_object","vao"),r.use("OES_texture_float","texFloat"),r.use("WEBGL_lose_context","loseContext"),r.use("OES_element_index_uint","uintIndices"),r.use("EXT_shader_texture_lod","shaderTextureLod"),t.default=r},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){var e,t,n=function(e){var t,n,r={};for(t in e)n=e[t],i.hasOwnProperty(t)?i[t].call(this,n):r[t]=n;s(this.prototype,r)},i={Extends:function(e){var t=this.prototype,n=a(e.prototype);s(this,e),s(n,t),n.constructor=this,this.prototype=n,this.superclass=e.prototype},Mixes:function(e){e instanceof Array||(e=[e]);for(var t,n=this.prototype;t=e.shift();)s(n,t.prototype||t)},Statics:function(e){s(this,e)}},a=function(){if(Object.__proto__)return function(e){return{__proto__:e}};var e=function(){};return function(t){return e.prototype=t,new e}}(),s=function(e){for(var n=1,i=arguments.length;n<i;n++){var a,s=arguments[n];for(var o in s){var u=s[o];!u||"object"!==(void 0===u?"undefined":r(u))||void 0===u.value&&"function"!=typeof u.get&&"function"!=typeof u.set?e[o]=u:(a=a||{})[o]=u}a&&t(e,a)}return e};try{e=Object.defineProperty,t=Object.defineProperties,e({},"$",{value:0})}catch(n){"__defineGetter__"in Object&&(e=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},t=function(t,n){for(var r in n)n.hasOwnProperty(r)&&e(t,r,n[r]);return t})}return{create:function(e){var t=(e=e||{}).hasOwnProperty("constructor")?e.constructor:function(){};return n.call(t,e),t},mix:s}}();e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({className:"Vector4",isVector4:!0,constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.elements=r.vec4.fromValues(e,t,n,i)},copy:function(e){return r.vec4.copy(this.elements,e.elements),this},clone:function(){var e=this.elements;return new this.constructor(e[0],e[1],e[2],e[3])},toArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[0+t]=n[0],e[1+t]=n[1],e[2+t]=n[2],e[3+t]=n[3],e},fromArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return n[0]=e[t+0],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],this},set:function(e,t,n,i){return r.vec4.set(this.elements,e,t,n,i),this},add:function(e,t){return t||(t=e,e=this),r.vec4.add(this.elements,e.elements,t.elements),this},subtract:function(e,t){return t||(t=e,e=this),r.vec4.subtract(this.elements,e.elements,t.elements),this},multiply:function(e,t){return t||(t=e,e=this),r.vec4.multiply(this.elements,e.elements,t.elements),this},divide:function(e,t){return t||(t=e,e=this),r.vec4.divide(this.elements,e.elements,t.elements),this},ceil:function(){return r.vec4.ceil(this.elements,this.elements),this},floor:function(){return r.vec4.floor(this.elements,this.elements),this},min:function(e,t){return t||(t=e,e=this),r.vec4.min(this.elements,e.elements,t.elements),this},max:function(e,t){return t||(t=e,e=this),r.vec4.max(this.elements,e.elements,t.elements),this},round:function(){return r.vec4.round(this.elements,this.elements),this},scale:function(e){return r.vec4.scale(this.elements,this.elements,e),this},scaleAndAdd:function(e,t,n){return n||(n=t,t=this),r.vec4.scaleAndAdd(this.elements,t.elements,n.elements,e),this},distance:function(e,t){return t||(t=e,e=this),r.vec4.distance(e.elements,t.elements)},squaredDistance:function(e,t){return t||(t=e,e=this),r.vec4.squaredDistance(e.elements,t.elements)},length:function(){return r.vec4.length(this.elements)},squaredLength:function(){return r.vec4.squaredLength(this.elements)},negate:function(){return r.vec4.negate(this.elements,this.elements),this},inverse:function(e){return e||(e=this),r.vec4.inverse(this.elements,e.elements),this},normalize:function(){return r.vec4.normalize(this.elements,this.elements),this},dot:function(e,t){return t||(t=e,e=this),r.vec4.dot(e.elements,t.elements)},lerp:function(e,t){return r.vec4.lerp(this.elements,this.elements,e.elements,t),this},random:function(e){return e=e||1,this.elements[0]=Math.random(),this.elements[1]=Math.random(),this.elements[2]=Math.random(),this.elements[3]=Math.random(),this.normalize(),this.scale(e),this},transformMat4:function(e){return r.vec4.transformMat4(this.elements,this.elements,e.elements),this},transformQuat:function(e){return r.vec4.transformQuat(this.elements,this.elements,e.elements),this},exactEquals:function(e,t){return t||(t=e,e=this),r.vec4.exactEquals(e.elements,t.elements)},equals:function(e,t){return t||(t=e,e=this),r.vec4.equals(e.elements,t.elements)},x:{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e}},y:{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e}},z:{get:function(){return this.elements[2]},set:function(e){this.elements[2]=e}},w:{get:function(){return this.elements[3]},set:function(e){this.elements[3]=e}}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.sqrDist=i.prototype.squaredDistance,i.prototype.len=i.prototype.length,i.prototype.sqrLen=i.prototype.squaredLength,t.default=i},function(e,t,n){"use strict";e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=(u(n(49)),u(n(3))),a=u(n(20)),s=u(n(6)),o=n(1);function u(e){return e&&e.__esModule?e:{default:e}}new i.default;var c=new a.default,f=new s.default,l=new Float32Array([.5,.5,.5,1]),h=void 0,d=void 0,_=void 0,m=void 0,p=void 0,v={state:null,camera:null,lightManager:null,fog:null,gl:null,init:function(e,t,n,r){m=this.state=e,h=this.camera=t,_=this.lightManager=n,p=this.fog=r,d=this.gl=m.gl},setCamera:function(e){h=this.camera=e},handlerColorOrTexture:function(e,t){return e&&e.isTexture?this.handlerTexture(e,t):(e&&e.isColor?e.toArray(l):l[0]=l[1]=l[2]=.5,l)},handlerTexture:function(e,t){if(e&&e.isTexture)return this.handlerGLTexture(e.target,e.getGLTexture(m),t)},handlerGLTexture:function(e,t,n){if(t)return m.activeTexture(d.TEXTURE0+n),m.bindTexture(e,t),n},handlerUV:function(e){return e&&e.isTexture&&e.uv||0},POSITION:{get:function(e,t,n){return e.geometry.vertices}},NORMAL:{get:function(e,t,n){return e.geometry.normals}},TANGENT:{get:function(e,t,n){var r=t.normalMap;if(r&&r.isTexture)return 1===Number(r.uv)?e.geometry.tangents1:e.geometry.tangents}},TEXCOORD_0:{get:function(e,t,n){if(e.geometry.uvs)return e.geometry.uvs}},TEXCOORD_1:{get:function(e,t,n){if(e.geometry.uvs1)return e.geometry.uvs1}},UVMATRIX_0:{get:function(e,t,n){if(t.uvMatrix)return t.uvMatrix.elements}},UVMATRIX_1:{get:function(e,t,n){if(t.uvMatrix1)return t.uvMatrix1.elements}},CAMERAFAR:{get:function(e,t,n){if(h.isPerspectiveCamera)return h.far}},CAMERANEAR:{get:function(e,t,n){if(h.isPerspectiveCamera)return h.near}},CAMERATYPE:{get:function(e,t,n){return h.isPerspectiveCamera?1:0}},COLOR_0:{get:function(e,t,n){if(e.geometry.colors)return e.geometry.colors}},SKININDICES:{get:function(e,t,n){return e.geometry.skinIndices}},SKINWEIGHTS:{get:function(e,t,n){return e.geometry.skinWeights}},LOCAL:{get:function(e,t,n){return e.matrix.elements},isDependMesh:!0},MODEL:{get:function(e,t,n){return e.worldMatrix.elements},isDependMesh:!0},VIEW:{get:function(e,t,n){return h.viewMatrix.elements}},PROJECTION:{get:function(e,t,n){return h.projectionMatrix.elements}},VIEWPROJECTION:{get:function(e,t,n){return h.viewProjectionMatrix.elements}},MODELVIEW:{get:function(e,t,n){return h.getModelViewMatrix(e,f).elements},isDependMesh:!0},MODELVIEWPROJECTION:{get:function(e,t,n){return h.getModelProjectionMatrix(e,f).elements},isDependMesh:!0},MODELINVERSE:{get:function(e,t,n){return f.invert(e.worldMatrix).elements},isDependMesh:!0},VIEWINVERSE:{get:function(e,t,n){return h.worldMatrix.elements}},PROJECTIONINVERSE:{get:function(e,t,n){return f.invert(h.projectionMatrix).elements}},MODELVIEWINVERSE:{get:function(e,t,n){return f.invert(h.getModelViewMatrix(e,f)).elements},isDependMesh:!0},MODELVIEWPROJECTIONINVERSE:{get:function(e,t,n){return f.invert(h.getModelProjectionMatrix(e,f)).elements},isDependMesh:!0},MODELINVERSETRANSPOSE:{get:function(e,t,n){return c.normalFromMat4(e.worldMatrix).elements},isDependMesh:!0},MODELVIEWINVERSETRANSPOSE:{get:function(e,t,n){return c.normalFromMat4(h.getModelViewMatrix(e,f)).elements},isDependMesh:!0},VIEWPORT:{get:function(e,t,n){console.warn("no this semantic:",name)}},JOINTMATRIX:{get:function(e,t,n){if(e.isSkinedMesh)return e.getJointMat();console.warn("Current mesh is not SkinedMesh!",e.id)},isDependMesh:!0,notSupportInstanced:!0},JOINTMATRIXTEXTURE:{get:function(e,t,n){if(e.isSkinedMesh)return e.updateJointMatTexture(),v.handlerTexture(e.jointMatTexture,n.textureIndex);console.warn("Current mesh is not SkinedMesh!",e.id)},isDependMesh:!0,notSupportInstanced:!0},JOINTMATRIXTEXTURESIZE:{get:function(e,t,n){if(e.isSkinedMesh)return e.initJointMatTexture(),[e.jointMatTexture.width,e.jointMatTexture.height];console.warn("Current mesh is not SkinedMesh!",e.id)},isDependMesh:!0,notSupportInstanced:!0},NORMALMAPSCALE:{get:function(e,t,n){return t.normalMapScale}},OCCLUSIONSTRENGTH:{get:function(e,t,n){return t.occlusionStrength}},SHININESS:{get:function(e,t,n){return t.shininess}},SPECULARENVMATRIX:{get:function(e,t,n){return t.specularEnvMatrix&&t.specularEnvMap?t.specularEnvMatrix.elements:(f.identity(),f.elements)}},REFLECTIVITY:{get:function(e,t,n){return t.reflectivity}},REFRACTRATIO:{get:function(e,t,n){return t.refractRatio}},REFRACTIVITY:{get:function(e,t,n){return t.refractivity}},LOGDEPTH:{get:function(e,t,n){return 2/(Math.log(h.far+1)/Math.LN2)}},AMBIENTLIGHTSCOLOR:{get:function(e,t,n){return _.ambientInfo}},DIRECTIONALLIGHTSCOLOR:{get:function(e,t,n){return _.directionalInfo.colors}},DIRECTIONALLIGHTSINFO:{get:function(e,t,n){return _.directionalInfo.infos}},DIRECTIONALLIGHTSSHADOWMAP:{get:function(e,t,n){return _.directionalInfo.shadowMap.map(function(e,t){return v.handlerGLTexture(o.TEXTURE_2D,e,n.textureIndex+t)})}},DIRECTIONALLIGHTSSHADOWMAPSIZE:{get:function(e,t,n){return _.directionalInfo.shadowMapSize}},DIRECTIONALLIGHTSSHADOWBIAS:{get:function(e,t,n){return _.directionalInfo.shadowBias}},DIRECTIONALLIGHTSPACEMATRIX:{get:function(e,t,n){return _.directionalInfo.lightSpaceMatrix}},POINTLIGHTSPOS:{get:function(e,t,n){return _.pointInfo.poses}},POINTLIGHTSCOLOR:{get:function(e,t,n){return _.pointInfo.colors}},POINTLIGHTSINFO:{get:function(e,t,n){return _.pointInfo.infos}},POINTLIGHTSSHADOWMAP:{get:function(e,t,n){return _.pointInfo.shadowMap.map(function(e,t){return v.handlerGLTexture(o.TEXTURE_CUBE_MAP,e,n.textureIndex+t)})}},POINTLIGHTSSHADOWBIAS:{get:function(e,t,n){return _.pointInfo.shadowBias}},POINTLIGHTSPACEMATRIX:{get:function(e,t,n){return _.pointInfo.lightSpaceMatrix}},SPOTLIGHTSPOS:{get:function(e,t,n){return _.spotInfo.poses}},SPOTLIGHTSDIR:{get:function(e,t,n){return _.spotInfo.dirs}},SPOTLIGHTSCOLOR:{get:function(e,t,n){return _.spotInfo.colors}},SPOTLIGHTSCUTOFFS:{get:function(e,t,n){return _.spotInfo.cutoffs}},SPOTLIGHTSINFO:{get:function(e,t,n){return _.spotInfo.infos}},SPOTLIGHTSSHADOWMAP:{get:function(e,t,n){return _.spotInfo.shadowMap.map(function(e,t){return v.handlerGLTexture(o.TEXTURE_2D,e,n.textureIndex+t)})}},SPOTLIGHTSSHADOWMAPSIZE:{get:function(e,t,n){return _.spotInfo.shadowMapSize}},SPOTLIGHTSSHADOWBIAS:{get:function(e,t,n){return _.spotInfo.shadowBias}},SPOTLIGHTSPACEMATRIX:{get:function(e,t,n){return _.spotInfo.lightSpaceMatrix}},FOGCOLOR:{get:function(e,t,n){if(p)return p.color.elements}},FOGINFO:{get:function(e,t,n){if(p)return p.getInfo()}},POSITIONDECODEMAT:{get:function(e,t,n){return e.geometry.positionDecodeMat},isDependMesh:!0},NORMALDECODEMAT:{get:function(e,t,n){return e.geometry.normalDecodeMat},isDependMesh:!0},UVDECODEMAT:{get:function(e,t,n){return e.geometry.uvDecodeMat},isDependMesh:!0},UV1DECODEMAT:{get:function(e,t,n){return e.geometry.uv1DecodeMat},isDependMesh:!0},BASECOLOR:{get:function(e,t,n){return t.baseColor.elements}},METALLIC:{get:function(e,t,n){return t.metallic}},ROUGHNESS:{get:function(e,t,n){return t.roughness}},DIFFUSEENVMAP:{get:function(e,t,n){return v.handlerTexture(t.diffuseEnvMap,n.textureIndex)}},BRDFLUT:{get:function(e,t,n){return v.handlerTexture(t.brdfLUT,n.textureIndex)}},SPECULARENVMAP:{get:function(e,t,n){return v.handlerTexture(t.specularEnvMap,n.textureIndex)}},GLOSSINESS:{get:function(e,t,n){return t.glossiness}},ALPHACUTOFF:{get:function(e,t,n){return t.alphaCutoff}},EXPOSURE:{get:function(e,t,n){return t.exposure}},GAMMAFACTOR:{get:function(e,t,n){return t.gammaFactor}},MORPHWEIGHTS:{isDependMesh:!0,notSupportInstanced:!0,get:function(e,t,n){var r=e.geometry;if(r.isMorphGeometry&&r.weights)return r.weights}}};[["POSITION","vertices"],["NORMAL","normals"],["TANGENT","tangents"]].forEach(function(e){for(var t=0;t<8;t++)v["MORPH"+e[0]+t]={get:function(e,t){return function(n,r,i){var a=n.geometry;if(a.isMorphGeometry&&a.targets&&a.targets[e]){var s=a._originalMorphIndices?a._originalMorphIndices[t]:t,o=a.targets[e][s],u="_target_"+e+"_"+t;return a[u]!==s&&o&&(o.isDirty=!0,a[u]=s),o}}}(e[1],t)}}),[["DIFFUSE","diffuse"],["SPECULAR","specular"],["EMISSION","emission"],["AMBIENT","ambient"]].forEach(function(e){var t=r(e,2),n=t[0],i=t[1];v[n]={get:function(e,t,n){return v.handlerColorOrTexture(t[i],n.textureIndex)}},v[n+"UV"]={get:function(e,t,n){return v.handlerUV(t[i])}}}),[["NORMALMAP","normalMap"],["PARALLAXMAP","parallaxMap"],["BASECOLORMAP","baseColorMap"],["METALLICMAP","metallicMap"],["ROUGHNESSMAP","roughnessMap"],["METALLICROUGHNESSMAP","metallicRoughnessMap"],["OCCLUSIONMAP","occlusionMap"],["SPECULARGLOSSINESSMAP","specularGlossinessMap"],["LIGHTMAP","lightMap"]].forEach(function(e){var t=r(e,2),n=t[0],i=t[1];v[n]={get:function(e,t,n){return v.handlerTexture(t[i],n.textureIndex)}},v[n+"UV"]={get:function(e,t,n){return v.handlerUV(t[i])}}}),[["TRANSPARENCY","transparency"]].forEach(function(e){var t=r(e,2),n=t[0],i=t[1];v[n]={get:function(e,t,n){var r=t[i];return r&&r.isTexture?v.handlerTexture(r,n.textureIndex):void 0!==r&&null!==r?r:1}},v[n+"UV"]={get:function(e,t,n){return v.handlerUV(t[i])}}}),t.default=v},function(e,t){e.exports="#ifdef HILO_USE_SHADER_TEXTURE_LOD\n    #extension GL_EXT_shader_texture_lod: enable\n#endif\n\n#ifdef HILO_USE_EXT_FRAG_DEPTH\n    #extension GL_EXT_frag_depth: enable\n#define GLSLIFY 1\n#endif"},function(e,t){e.exports="#ifdef GL_ES\nprecision HILO_MAX_FRAGMENT_PRECISION float;\n#define GLSLIFY 1\n#endif"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(0)),i=p(n(34)),a=p(n(123)),s=p(n(122)),o=p(n(16)),u=p(n(65)),c=p(n(67)),f=p(n(2)),l=p(n(4)),h=p(n(8)),d=p(n(12)),_=n(5),m=n(1);function p(e){return e&&e.__esModule?e:{default:e}}var v=new o.default,g=r.default.create({Statics:{cache:{get:function(){return v}},reset:function(e){v.each(function(e){e.reset()})},destroy:function(e){v.each(function(e){e.destroy()})}},className:"Framebuffer",isFramebuffer:!0,bufferInternalFormat:m.DEPTH_STENCIL,target:m.TEXTURE_2D,internalFormat:m.RGBA,data:null,format:m.RGBA,type:m.UNSIGNED_BYTE,attachment:m.COLOR_ATTACHMENT0,needRenderbuffer:!0,useVao:!0,renderer:null,texture:null,renderbuffer:null,framebuffer:null,_isInit:!1,minFilter:m.NEAREST,magFilter:m.NEAREST,constructor:function(e,t){this.id=f.default.generateUUID(this.className),this.renderer=e,Object.assign(this,t),this.width||(this.width=e.width),this.height||(this.height=e.height),v.add(this.id,this)},init:function(){if(!this._isInit&&this.renderer.isInit){this._isInit=!0;var e=this.renderer;this.gl=e.gl,this.state=e.state,this.reset()}},reset:function(){this.destroyResource();var e=this.gl;this.framebuffer=e.createFramebuffer(),this.bind(),this.needRenderbuffer&&(this.renderbuffer=this.createRenderbuffer()),this.texture=this.createTexture(),this.isComplete()||console.warn("Framebuffer is not complete => "+e.checkFramebufferStatus(e.FRAMEBUFFER)),this.unbind()},isComplete:function(){var e=this.gl;return!(!e||e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)},bind:function(){this.init(),this._isInit&&this.state.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer)},unbind:function(){if(this.init(),this._isInit){var e=this.state;e.bindFramebuffer(this.gl.FRAMEBUFFER,e.preFramebuffer)}},clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.default(0,0,0,0);if(this._isInit){var t=this.gl;t.clearColor(e.r,e.g,e.b,e.a),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}},render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments[4];if(this._isInit){var f=this.gl,l=this.state;l.disable(m.DEPTH_TEST),l.disable(m.CULL_FACE),o&&this.clear(o);var d=i.default.getCustomShader(a.default,s.default,"","FramebufferTextureShader"),_=u.default.getProgram(d,l);_.useProgram();var p=e+"_"+t+"_"+n+"_"+r+"_"+_.id,v=c.default.getVao(f,p,{useVao:this.useVao,useInstanced:!1,mode:m.TRIANGLE_STRIP});if(v.isDirty){v.isDirty=!1;var g=[e=2*e-1,t=1-2*t,e+(n*=2),t,e,t-(r*=2),e+n,t-r];v.addAttribute(new h.default(new Float32Array(g)),_.attributes.a_position),v.addAttribute(new h.default(new Float32Array([0,1,1,1,0,0,1,0])),_.attributes.a_texcoord0)}l.activeTexture(f.TEXTURE0),l.bindTexture(f.TEXTURE_2D,this.texture),v.draw()}},createRenderbuffer:function(){var e=this.gl,t=this.width,n=this.height,r=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,r),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r),r},createTexture:function(){var e=this.state,t=e.gl,n=t.createTexture();return e.activeTexture(t.TEXTURE0+d.default.MAX_TEXTURE_INDEX),e.bindTexture(this.target,n),t.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.data),t.texParameteri(this.target,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(this.target,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(this.target,t.TEXTURE_MIN_FILTER,this.minFilter),t.texParameteri(this.target,t.TEXTURE_MAG_FILTER,this.magFilter),t.framebufferTexture2D(t.FRAMEBUFFER,this.attachment,this.target,n,0),n},resize:function(e,t,n){(n||this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this._isInit&&this.reset())},readPixels:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=new((0,_.getTypedArrayClass)(this.type))(n*r*4);if(this._isInit){var a=this.gl;t=this.height-t-r,this.bind(),a.readPixels(e,t,n,r,this.format,this.type,i),this.unbind()}return i},destroy:function(){this.destroyResource(),this.gl=null,v.removeObject(this)},destroyResource:function(){var e=this.gl;e&&(this.framebuffer&&(e.deleteFramebuffer(this.framebuffer),this.framebuffer=null),this.renderbuffer&&(e.deleteRenderbuffer(this.renderbuffer),this.renderbuffer=null),this.texture&&(e.deleteTexture(this.texture),this.texture=null))}});t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(15)),a=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var o=new a.default,u=r.default.create({Extends:i.default,isLight:!0,className:"Light",amount:1,constantAttenuation:1,linearAttenuation:0,quadraticAttenuation:0,_range:0,range:{get:function(){return this._range},set:function(e){this.constantAttenuation=1,e<=0?(this.linearAttenuation=0,this.quadraticAttenuation=0):(this.linearAttenuation=4.5/e,this.quadraticAttenuation=75/(e*e)),this._range=e}},constructor:function(e){this.color=new a.default(1,1,1),u.superclass.constructor.call(this,e)},toInfoArray:function(e,t){return e[t+0]=this.constantAttenuation,e[t+1]=this.linearAttenuation,e[t+2]=this.quadraticAttenuation,this},getRealColor:function(){return o.copy(this.color).scale(this.amount)}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var s=new(a(n(6)).default),o=r.default.create({className:"Euler",isEuler:!0,order:"ZYX",constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.elements=[e,t,n]},clone:function(){var e=new this.constructor;return e.copy(this),e},copy:function(e){return this.set(e.x,e.y,e.z),this.order=e.order,this},set:function(e,t,n){return this.elements[0]=e,this.elements[1]=t,this.elements[2]=n,this},fromArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.elements[0]=e[t],this.elements[1]=e[t+1],this.elements[2]=e[t+2],this},toArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.elements[0],e[t+1]=this.elements[1],e[t+2]=this.elements[2],e},fromMat4:function(e,t){var n=e.elements,r=n[0],a=n[1],s=n[2],o=n[4],u=n[5],c=n[6],f=n[8],l=n[9],h=n[10];t=t||this.order,this.order=t;var d=i.default.clamp;return"XYZ"===t?(this.y=Math.asin(d(f,-1,1)),Math.abs(f)<.99999?(this.x=Math.atan2(-l,h),this.z=Math.atan2(-o,r)):(this.x=Math.atan2(c,u),this.z=0)):"YXZ"===t?(this.x=Math.asin(-d(l,-1,1)),Math.abs(l)<.99999?(this.y=Math.atan2(f,h),this.z=Math.atan2(a,u)):(this.y=Math.atan2(-s,r),this.z=0)):"ZXY"===t?(this.x=Math.asin(d(c,-1,1)),Math.abs(c)<.99999?(this.y=Math.atan2(-s,h),this.z=Math.atan2(-o,u)):(this.y=0,this.z=Math.atan2(a,r))):"ZYX"===t?(this.y=Math.asin(-d(s,-1,1)),Math.abs(s)<.99999?(this.x=Math.atan2(c,h),this.z=Math.atan2(a,r)):(this.x=0,this.z=Math.atan2(-o,u))):"YZX"===t?(this.z=Math.asin(d(a,-1,1)),Math.abs(a)<.99999?(this.x=Math.atan2(-l,u),this.y=Math.atan2(-s,r)):(this.x=0,this.y=Math.atan2(f,h))):"XZY"===t?(this.z=Math.asin(-d(o,-1,1)),Math.abs(o)<.99999?(this.x=Math.atan2(c,u),this.y=Math.atan2(f,r)):(this.x=Math.atan2(-l,h),this.y=0)):console.warn("Euler fromMat4() unsupported order: "+t),this},fromQuat:function(e,t){return s.fromQuat(e),this.fromMat4(s,t)},x:{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e}},y:{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e}},z:{get:function(){return this.elements[2]},set:function(e){this.elements[2]=e}}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(79)),i=s(n(0)),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var o=i.default.create({className:"Ray",isRay:!0,origin:{get:function(){return this._origin},set:function(e){this._origin=e,this._ray.origin=e.elements}},direction:{get:function(){return this._direction},set:function(e){this._direction=e,this._ray.direction=e.elements}},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._ray=new r.default,this.origin=e.origin||new a.default(0,0,0),this.direction=e.direction||new a.default(0,0,-1)},set:function(e,t){return this.origin=e,this.direction=t,this},copy:function(e){this.origin.copy(e.origin),this.direction.copy(e.direction)},clone:function(){return new this.constructor({origin:this.origin.clone(),direction:this.direction.clone()})},fromCamera:function(e,t,n,r,i){e.isPerspectiveCamera?(e.worldMatrix.getTranslation(this.origin),this.direction.set(t,n,0),this.direction.copy(e.unprojectVector(this.direction,r,i)),this.direction.sub(this.origin).normalize()):e.OrthographicCamera&&(this.origin.set(t,n,(e.near+e.far)/(e.near-e.far)),this.origin.copy(e.unprojectVector(this.origin,r,i)),this.direction.set(0,0,-1).transformDirection(e.worldMatrix).normalize())},transformMat4:function(e){this.origin.transformMat4(e),this.direction.transformDirection(e).normalize()},sortPoints:function(e,t){var n=this;t?e.sort(function(e,r){return n.squaredDistance(e[t])-n.squaredDistance(r[t])}):e.sort(function(e,t){return n.squaredDistance(e)-n.squaredDistance(t)})},squaredDistance:function(e){return this.origin.squaredDistance(e)},distance:function(e){return this.origin.distance(e)},intersectsSphere:function(e,t){var n=this._ray.intersectsSphere(e,t);return this._getRes(n)},intersectsPlane:function(e,t){var n=this._ray.intersectsPlane(e,t);return this._getRes(n)},intersectsTriangle:function(e){var t=this._ray.intersectsTriangle(e);return this._getRes(t)},intersectsBox:function(e){var t=this._ray.intersectsBox(e);return this._getRes(t)},intersectsTriangleCell:function(e,t){var n=this._ray.intersectsTriangleCell(e,t);return this._getRes(n)},_getRes:function(e){return e?new a.default(e[0],e[1],e[2]):null}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},i={_cache:r,log:function(){console.log.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)},logOnce:function(e,t){r["log_"+e]||(r["log_"+e]=!0,this.log(t))},warnOnce:function(e,t){r["warn_"+e]||(r["warn_"+e]=!0,this.warn(t))},errorOnce:function(e,t){r["error_"+e]||(r["error_"+e]=!0,this.error(t))}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),i=l(n(2)),a=l(n(16)),s=l(n(12)),o=l(n(89)),u=l(n(99)),c=l(n(116)),f=l(n(118));function l(e){return e&&e.__esModule?e:{default:e}}var h=new a.default,d=r.default.create({isShader:!0,className:"Shader",vs:"",fs:"",Statics:{shaders:{"chunk/baseDefine.glsl":n(17),"chunk/color.frag":n(50),"chunk/color.vert":n(106),"chunk/color_main.vert":n(108),"chunk/diffuse.frag":n(90),"chunk/diffuse_main.frag":n(97),"chunk/extensions.frag":n(27),"chunk/extensions.vert":n(63),"chunk/fog.frag":n(57),"chunk/fog_main.frag":n(61),"chunk/frag_color.frag":n(62),"chunk/joint.vert":n(101),"chunk/joint_main.vert":n(111),"chunk/light.frag":n(54),"chunk/lightFog.frag":n(53),"chunk/lightFog.vert":n(104),"chunk/lightFog_main.frag":n(59),"chunk/lightFog_main.vert":n(114),"chunk/logDepth.frag":n(35),"chunk/logDepth_main.frag":n(36),"chunk/logDepth.vert":n(107),"chunk/logDepth_main.vert":n(115),"chunk/morph.vert":n(105),"chunk/morph_main.vert":n(110),"chunk/normal.frag":n(52),"chunk/normal.vert":n(103),"chunk/normal_main.frag":n(58),"chunk/normal_main.vert":n(113),"chunk/pbr.frag":n(119),"chunk/pbr_main.frag":n(121),"chunk/phong.frag":n(96),"chunk/phong_main.frag":n(98),"chunk/precision.frag":n(28),"chunk/precision.vert":n(64),"chunk/transparency.frag":n(56),"chunk/transparency_main.frag":n(60),"chunk/unQuantize.vert":n(100),"chunk/unQuantize_main.vert":n(109),"chunk/uv.frag":n(51),"chunk/uv.vert":n(102),"chunk/uv_main.vert":n(112),"method/encoding.glsl":n(120),"method/getDiffuse.glsl":n(91),"method/getLightAttenuation.glsl":n(93),"method/getShadow.glsl":n(95),"method/getSpecular.glsl":n(92),"method/packFloat.glsl":n(117),"method/textureEnvMap.glsl":n(55),"method/transpose.glsl":n(160),"method/unpackFloat.glsl":n(94),"basic.frag":n(89),"basic.vert":n(99),"geometry.frag":n(116),"pbr.frag":n(118),"screen.frag":n(122),"screen.vert":n(123)},init:function(e){this.renderer=e,this.commonHeader=this._getCommonHeader(this.renderer)},cache:{get:function(){return h}},reset:function(e){h.removeAll()},getHeaderKey:function(e,t,n,r,i){var a="header_"+t.id+"_"+n.lightInfo.uid;return e.isSkinedMesh&&(a+="_joint"+e.jointNames.length),r&&(a+="_fog_"+r.mode),e.geometry.isMorphGeometry&&(a+="_"+e.geometry.id),i&&(a+="_fogDepth"),a},getHeader:function(e,t,n,r,i){var a=this.getHeaderKey(e,t,n,r),o=h.get(a);if(!o||t.isDirty){var u={},c=t.lightType;c&&"NONE"!==c&&n.getRenderOption(u),t.getRenderOption(u),e.getRenderOption(u),r&&(u.HAS_FOG=1,r.getRenderOption(u)),i&&(u.USE_LOG_DEPTH=1,s.default.EXT_FRAG_DEPTH&&(u.USE_EXT_FRAG_DEPTH=1)),u.HAS_NORMAL&&u.NORMAL_MAP&&(u.HAS_TANGENT=1),u.RECEIVE_SHADOWS||(delete u.DIRECTIONAL_LIGHTS_SMC,delete u.SPOT_LIGHTS_SMC,delete u.POINT_LIGHTS_SMC),o="#define SHADER_NAME "+t.className+"\n",o+=Object.keys(u).map(function(e){return"#define HILO_"+e+" "+u[e]}).join("\n")+"\n",h.add(a,o)}return o},_getCommonHeader:function(e){var t=s.default.getMaxPrecision(s.default.MAX_VERTEX_PRECISION,e.vertexPrecision),n=s.default.getMaxPrecision(s.default.MAX_FRAGMENT_PRECISION,e.fragmentPrecision);return"\n#define HILO_MAX_PRECISION "+s.default.getMaxPrecision(t,n)+"\n#define HILO_MAX_VERTEX_PRECISION "+t+"\n#define HILO_MAX_FRAGMENT_PRECISION "+n+"\n"},getShader:function(e,t,n,r,i,a){var s=this.getHeader(e,t,r,i,a);return t.isBasicMaterial||t.isPBRMaterial?this.getBasicShader(t,n,s):t.isShaderMaterial?this.getCustomShader(t.vs,t.fs,s,t.id):null},getBasicShader:function(e,t,n){var r=[];t&&(r=e.getInstancedUniforms().map(function(e){return e.name})),r=r.join("|");var i=e.className+":"+r+":"+n,a=h.get(i);if(!a){var s="",l=u.default;if(e.isBasicMaterial?e.isGeometryMaterial?s+=c.default:s+=o.default:e.isPBRMaterial&&(s+=f.default),r){var d=new RegExp("^\\s*uniform\\s+(\\w+)\\s+("+r+");","gm");l=l.replace(d,"attribute $1 $2;")}a=this.getCustomShader(l,s,n,i)}return a},getCustomShader:function(e,t,n,r){var i=this.commonHeader,a=void 0;return void 0!==r&&(a=h.get(r)),a||(a=new d({vs:i+n+e,fs:i+n+t}),r&&(a.id=r,h.add(r,a))),a}},constructor:function(e){this.id=i.default.generateUUID(this.className),Object.assign(this,e)},destroyIfNoRef:function(e){return e.resourceManager.destroyIfNoRef(this),this},destroy:function(){return this._isDestroyed?this:(h.removeObject(this),this._isDestroyed=!0,this)}});t.default=d},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(HILO_USE_LOG_DEPTH) && defined(HILO_USE_EXT_FRAG_DEPTH)\n    uniform float u_logDepth;\n    varying float v_fragDepth;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(HILO_USE_LOG_DEPTH) && defined(HILO_USE_EXT_FRAG_DEPTH)\n    gl_FragDepthEXT = log2( v_fragDepth ) * u_logDepth * 0.5;\n#endif"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({className:"Vector2",isVector2:!0,constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.elements=r.vec2.fromValues(e,t)},copy:function(e){return r.vec2.copy(this.elements,e.elements),this},clone:function(){var e=this.elements;return new this.constructor(e[0],e[1])},toArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[0+t]=n[0],e[1+t]=n[1],e},fromArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return n[0]=e[t+0],n[1]=e[t+1],this},set:function(e,t){return r.vec2.set(this.elements,e,t),this},add:function(e,t){return t||(t=e,e=this),r.vec2.add(this.elements,e.elements,t.elements),this},subtract:function(e,t){return t||(t=e,e=this),r.vec2.subtract(this.elements,e.elements,t.elements),this},multiply:function(e,t){return t||(t=e,e=this),r.vec2.multiply(this.elements,e.elements,t.elements),this},divide:function(e,t){return t||(t=e,e=this),r.vec2.divide(this.elements,e.elements,t.elements),this},ceil:function(){return r.vec2.ceil(this.elements,this.elements),this},floor:function(){return r.vec2.floor(this.elements,this.elements),this},min:function(e,t){return t||(t=e,e=this),r.vec2.min(this.elements,e.elements,t.elements),this},max:function(e,t){return t||(t=e,e=this),r.vec2.max(this.elements,e.elements,t.elements),this},round:function(){return r.vec2.round(this.elements,this.elements),this},scale:function(e){return r.vec2.scale(this.elements,this.elements,e),this},scaleAndAdd:function(e,t,n){return n||(n=t,t=this),r.vec2.scaleAndAdd(this.elements,t.elements,n.elements,e),this},distance:function(e,t){return t||(t=e,e=this),r.vec2.distance(e.elements,t.elements)},squaredDistance:function(e,t){return t||(t=e,e=this),r.vec2.squaredDistance(e.elements,t.elements)},length:function(){return r.vec2.length(this.elements)},squaredLength:function(){return r.vec2.squaredLength(this.elements)},negate:function(){return r.vec2.negate(this.elements,this.elements),this},inverse:function(e){return e||(e=this),r.vec2.inverse(this.elements,e.elements),this},normalize:function(){return r.vec2.normalize(this.elements,this.elements),this},dot:function(e,t){return t||(t=e,e=this),r.vec2.dot(e.elements,t.elements)},cross:function(e,t){return t||(t=e,e=this),r.vec2.cross(this.elements,e.elements,t.elements),this},lerp:function(e,t){return r.vec2.lerp(this.elements,this.elements,e.elements,t),this},random:function(e){return r.vec2.random(this.elements,e),this},transformMat3:function(e){return r.vec2.transformMat3(this.elements,this.elements,e.elements),this},transformMat4:function(e){return r.vec2.transformMat4(this.elements,this.elements,e.elements),this},exactEquals:function(e,t){return t||(t=e,e=this),r.vec2.exactEquals(e.elements,t.elements)},equals:function(e,t){return t||(t=e,e=this),r.vec2.equals(e.elements,t.elements)},x:{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e}},y:{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e}}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.sqrDist=i.prototype.squaredDistance,i.prototype.len=i.prototype.length,i.prototype.sqrLen=i.prototype.squaredLength,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(2)),a=o(n(70)),s=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var u=r.default.create({Extends:a.default,isPerspectiveCamera:!0,className:"PerspectiveCamera",_near:.1,near:{get:function(){return this._near},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._near=e}},_far:null,far:{get:function(){return this._far},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._far=e}},_fov:50,fov:{get:function(){return this._fov},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._fov=e}},_aspect:1,aspect:{get:function(){return this._aspect},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._aspect=e}},constructor:function(e){u.superclass.constructor.call(this,e),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.projectionMatrix.elements,t=this.near,n=this.far,r=this.aspect,a=this.fov,s=1/Math.tan(.5*i.default.degToRad(a));if(e[0]=s/r,e[5]=s,e[11]=-1,e[15]=0,n){var o=1/(t-n);e[10]=(t+n)*o,e[14]=2*n*t*o}else e[10]=-1,e[14]=-2*t},getGeometry:function(e){if(e||!this._geometry||this._isGeometryDirty){this._isGeometryDirty=!1;var t=new s.default,n=Math.tan(this.fov/2*Math.PI/180),r=this.near,i=this.far,a=r*n,o=i*n,u=this.aspect*a,c=this.aspect*o,f=[-u,-a,-r],l=[u,-a,-r],h=[u,a,-r],d=[-u,a,-r],_=[-c,-o,-i],m=[c,-o,-i],p=[c,o,-i],v=[-c,o,-i];t.addRect(_,m,p,v),t.addRect(m,l,h,p),t.addRect(l,f,d,h),t.addRect(f,_,v,d),t.addRect(v,p,h,d),t.addRect(f,l,m,_),this._geometry=t}return this._geometry}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),i=u(n(2)),a=u(n(26)),s=u(n(33)),o=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var c={isBlankInfo:!0,get:function(){}},f=r.default.create({isMaterial:!0,className:"Material",lightType:"NONE",wireframe:!1,depthTest:!0,sampleAlphaToCoverage:!1,depthMask:!0,depthRange:[0,1],depthFunc:o.LEQUAL,_cullFace:!0,normalMap:null,parallaxMap:null,normalMapScale:1,ignoreTranparent:!1,gammaOutput:!1,gammaFactor:2.2,castShadows:!0,receiveShadows:!0,uvMatrix:null,uvMatrix1:null,cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace=e,e?this.cullFaceType=this._cullFaceType:this._side=o.FRONT_AND_BACK}},_cullFaceType:o.BACK,cullFaceType:{get:function(){return this._cullFaceType},set:function(e){this._cullFaceType=e,this._cullFace&&(e===o.BACK?this._side=o.FRONT:e===o.FRONT&&(this._side=o.BACK))}},_side:o.FRONT,side:{get:function(){return this._side},set:function(e){this._side!==e&&(this._side=e,e===o.FRONT_AND_BACK?this._cullFace=!1:(this._cullFace=!0,e===o.FRONT?this._cullFaceType=o.BACK:e===o.BACK&&(this._cullFaceType=o.FRONT)))}},blend:!1,blendEquation:o.FUNC_ADD,blendEquationAlpha:o.FUNC_ADD,blendSrc:o.ONE,blendDst:o.ZERO,blendSrcAlpha:o.ONE,blendDstAlpha:o.ZERO,isDirty:!1,transparency:1,_transparent:!1,transparent:{get:function(){return this._transparent},set:function(e){this._transparent!==e&&(this._transparent=e,e?(this.blend=!0,this.blendSrc=o.ONE,this.blendDst=o.ONE_MINUS_SRC_ALPHA,this.blendSrcAlpha=o.ONE,this.blendDstAlpha=o.ONE_MINUS_SRC_ALPHA,this.depthMask=!1):(this.blend=!1,this.depthMask=!0))}},alphaCutoff:0,useHDR:!1,exposure:1,constructor:function(e){var t=this;this.id=i.default.generateUUID(this.className),this.uniforms={u_normalMatrix:"MODELVIEWINVERSETRANSPOSE",u_modelViewMatrix:"MODELVIEW",u_modelViewProjectionMatrix:"MODELVIEWPROJECTION",u_logDepth:"LOGDEPTH",u_ambientLightsColor:"AMBIENTLIGHTSCOLOR",u_directionalLightsColor:"DIRECTIONALLIGHTSCOLOR",u_directionalLightsInfo:"DIRECTIONALLIGHTSINFO",u_directionalLightsShadowMap:"DIRECTIONALLIGHTSSHADOWMAP",u_directionalLightsShadowMapSize:"DIRECTIONALLIGHTSSHADOWMAPSIZE",u_directionalLightsShadowBias:"DIRECTIONALLIGHTSSHADOWBIAS",u_directionalLightSpaceMatrix:"DIRECTIONALLIGHTSPACEMATRIX",u_pointLightsPos:"POINTLIGHTSPOS",u_pointLightsColor:"POINTLIGHTSCOLOR",u_pointLightsInfo:"POINTLIGHTSINFO",u_pointLightsShadowBias:"POINTLIGHTSSHADOWBIAS",u_pointLightsShadowMap:"POINTLIGHTSSHADOWMAP",u_pointLightSpaceMatrix:"POINTLIGHTSPACEMATRIX",u_spotLightsPos:"SPOTLIGHTSPOS",u_spotLightsDir:"SPOTLIGHTSDIR",u_spotLightsColor:"SPOTLIGHTSCOLOR",u_spotLightsCutoffs:"SPOTLIGHTSCUTOFFS",u_spotLightsInfo:"SPOTLIGHTSINFO",u_spotLightsShadowMap:"SPOTLIGHTSSHADOWMAP",u_spotLightsShadowMapSize:"SPOTLIGHTSSHADOWMAPSIZE",u_spotLightsShadowBias:"SPOTLIGHTSSHADOWBIAS",u_spotLightSpaceMatrix:"SPOTLIGHTSPACEMATRIX",u_jointMat:"JOINTMATRIX",u_jointMatTexture:"JOINTMATRIXTEXTURE",u_jointMatTextureSize:"JOINTMATRIXTEXTURESIZE",u_fogColor:"FOGCOLOR",u_fogInfo:"FOGINFO",u_alphaCutoff:"ALPHACUTOFF",u_exposure:"EXPOSURE",u_gammaFactor:"GAMMAFACTOR",u_positionDecodeMat:"POSITIONDECODEMAT",u_normalDecodeMat:"NORMALDECODEMAT",u_uvDecodeMat:"UVDECODEMAT",u_uv1DecodeMat:"UV1DECODEMAT",u_morphWeights:"MORPHWEIGHTS",u_normalMapScale:"NORMALMAPSCALE",u_emission:"EMISSION",u_transparency:"TRANSPARENCY",u_uvMatrix:"UVMATRIX_0",u_uvMatrix1:"UVMATRIX_1"},this.addTextureUniforms({u_normalMap:"NORMALMAP",u_parallaxMap:"PARALLAXMAP",u_emission:"EMISSION",u_transparency:"TRANSPARENCY"}),this.attributes={a_position:"POSITION",a_normal:"NORMAL",a_tangent:"TANGENT",a_texcoord0:"TEXCOORD_0",a_texcoord1:"TEXCOORD_1",a_color:"COLOR_0",a_skinIndices:"SKININDICES",a_skinWeights:"SKINWEIGHTS"},["POSITION","NORMAL","TANGENT"].forEach(function(e){for(var n=e.slice(0,1)+e.slice(1).toLowerCase(),r=0;r<8;r++)t.attributes["a_morph"+n+r]="MORPH"+e+r}),Object.assign(this,e)},addTextureUniforms:function(e){var t={};for(var n in e){var r=e[n];t[n+".texture"]=r,t[n+".uv"]=r+"UV"}Object.assign(this.uniforms,t)},getRenderOption:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.lightType;t["LIGHT_TYPE_"+n]=1,t.SIDE=this.side;var r=this._textureOption.reset(t);return t.HAS_LIGHT&&(t.HAS_NORMAL=1,r.add(this.normalMap,"NORMAL_MAP",function(){1!==e.normalMapScale&&(t.NORMAL_MAP_SCALE=1)})),r.add(this.parallaxMap,"PARALLAX_MAP"),r.add(this.emission,"EMISSION_MAP"),r.add(this.transparency,"TRANSPARENCY_MAP"),this.ignoreTranparent&&(t.IGNORE_TRANSPARENT=1),this.alphaCutoff>0&&(t.ALPHA_CUTOFF=1),this.useHDR&&(t.USE_HDR=1),this.gammaOutput&&(t.GAMMA_OUTPUT=1),this.receiveShadows&&(t.RECEIVE_SHADOWS=1),this.castShadows&&(t.CAST_SHADOWS=1),this.uvMatrix&&(t.UV_MATRIX=1),this.uvMatrix1&&(t.UV_MATRIX1=1),r.update(),t},_textureOption:{uvTypes:null,option:null,reset:function(e){return this.option=e,this.uvTypes={},this},add:function(e,t,n){if(e&&e.isTexture){var r=this.uvTypes,i=this.option,a=e.uv||0;r[a]=1,i[t]=a,e.isCubeTexture&&(i[t+"_CUBE"]=1),n&&n(e)}return this},update:function(){var e=[0,1],t=this.uvTypes,n=this.option;for(var r in t)-1!==e.indexOf(Number(r))?n["HAS_TEXCOORD"+r]=1:(console.warn("uv_"+r+" not support!"),n.HAS_TEXCOORD0=1);return this}},getInstancedUniforms:function(){var e=this._instancedUniforms;if(!this._instancedUniforms){var t=this.uniforms;for(var n in e=this._instancedUniforms=[],t){var r=this.getUniformInfo(n);r.isDependMesh&&!r.notSupportInstanced&&e.push({name:n,info:r})}}return e},getUniformData:function(e,t,n){return this.getUniformInfo(e).get(t,this,n)},getAttributeData:function(e,t,n){return this.getAttributeInfo(e).get(t,this,n)},getUniformInfo:function(e){return this.getInfo("uniforms",e)},getAttributeInfo:function(e){return this.getInfo("attributes",e)},getInfo:function(e,t){var n=this[e][t];return"string"==typeof n&&(n=a.default[n]),n&&n.get||(s.default.warnOnce("material.getInfo-"+t,"Material.getInfo: no this semantic:"+t),n=c),n},clone:function(){var e=new this.constructor;for(var t in this)"id"!==t&&(e[t]=this[t]);return e}});t.default=f},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(141),a={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR",COLOR_0:"COLOR",TEXCOORD:"TEXCOORD",TEXCOORD_0:"TEXCOORD",TEXCOORD_1:"TEXCOORD_1",TEXCOORD_2:"TEXCOORD_2",TANGENT:"TANGENT",JOINT:"JOINT",JOINTS_0:"JOINT",WEIGHT:"WEIGHT",WEIGHTS_0:"WEIGHT"},s=["POSITION","NORMAL","COLOR","TEXCOORD","TANGENT","JOINT","WEIGHT","OTHER","TEXCOORD_1","TEXCOORD_2"],o={POSITION:0,NORMAL:1,COLOR:2,TEXCOORD:3,TANGENT:4,JOINT:5,WEIGHT:6,OTHER:7,TEXCOORD_1:8,TEXCOORD_2:9},u={POSITION:"vertices",NORMAL:"normals",COLOR:"colors",TEXCOORD:"uvs",TEXCOORD_1:"uvs1",TEXCOORD_2:"uvs2",TANGENT:"tangents",JOINT:"skinIndices",WEIGHT:"skinWeights"},c={vertices:"POSITION",_normals:"NORMAL",colors:"COLOR",uvs:"TEXCOORD",uvs1:"TEXCOORD_1",uvs2:"TEXCOORD_2",_tangents:"TANGENT",skinIndices:"JOINT",skinWeights:"WEIGHT"},f={POSITION:3,NORMAL:3,COLOR:3,TEXCOORD:2,TEXCOORD_1:2,TEXCOORD_2:2,TANGENT:4,JOINT:4,WEIGHT:4},l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indices=t,this.mode=n,this.attrs=[],this.attrIndexMap={}}return r(e,null,[{key:"cp",value:function(e){return e}},{key:"minus",value:function(e,t){return e-t}},{key:"plus",value:function(e,t){return e+t}},{key:"pp",value:function(e,t,n,r){return r-t-n+e}},{key:"depp",value:function(e,t,n,r){return t+n-e+r}},{key:"ATTR",get:function(){return a}},{key:"ATTR_NAME_ID",get:function(){return o}}]),r(e,[{key:"getAttrLength",value:function(){return this.attrs[0].data.length/this.attrs[0].itemCount}},{key:"attrIdToName",value:function(e){return s[e]||"OTHER"}},{key:"addAttr",value:function(e,t,n){a[e]?(this.attrIndexMap[e]=this.attrs.length,n||(n=f[e])):n||(n=1),this.attrs.push({name:e,itemCount:n,data:t})}},{key:"getAttr",value:function(e){if(this.attrIndexMap[e])return this.attrs[this.attrIndexMap[e]];for(var t=this.attrs.length-1;t>=0;t--){var n=this.attrs[t];if(n.name===e)return n}}},{key:"cal",value:function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];this.attrs.forEach(function(r,a){for(var s=r.data,o=e.attrs[a].data,u=t*r.itemCount,c=r.itemCount-1;c>=0;c--)o[u+c]=n.apply(null,i.map(function(e){return s[e*r.itemCount+c]}))})}},{key:"quantize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attrs.forEach(function(t){if("JOINT"!==t.name&&0!=e[t.name]){var n=i.encode(t.data,e[t.name]||12);t.quantizationBit=n.quantizationBit,t.min=n.min,t.max=n.max,t.data=n.data}})}},{key:"dequantize",value:function(){this.attrs.forEach(function(e){e.quantizationBit&&(e.data=i.decode(e.data,e.quantizationBit,e.min,e.max))})}},{key:"convertTypedArray",value:function(){!this.indices||this.indices instanceof Array||(this.indices=Array.from(this.indices)),this.attrs.forEach(function(e){e.data instanceof Array||e.data instanceof Float32Array||(e.data=Array.from(e.data))})}},{key:"clearEBAttrs",value:function(){delete this.clers,delete this.holes,delete this.handles}},{key:"convertToTypedArray",value:function(){this.indices instanceof Array&&(this.getAttrLength()>65535?this.indices=new Uint32Array(this.indices):this.indices=new Uint16Array(this.indices)),this.attrs.forEach(function(e){e.data instanceof Array&&(e.data=new Float32Array(e.data))})}},{key:"prepareToWorkerSend",value:function(){return this.clearEBAttrs(),this.convertToTypedArray(),this.getAllBuffers()}},{key:"clone",value:function(){var t=new e(Array.from(this.indices),this.mode);return Object.assign(t.attrIndexMap,this.attrIndexMap),t.attrs=this.attrs.map(function(e){var t=Object.assign({},e);return t.data=Array.from(t.data),t}),t}},{key:"cloneStruct",value:function(){var t=new e;return t.mode=this.mode,this.indices&&(t.indices=[]),Object.assign(t.attrIndexMap,this.attrIndexMap),t.attrs=this.attrs.map(function(e){var t=Object.assign({},e);return t.data=[],t}),t}},{key:"toHilo3dGeometry",value:function(e){var t=new e.Geometry;return this.indices&&(this.indices.BYTES_PER_ELEMENT?t.indices=new e.GeometryData(this.indices,1):this.getAttrLength()>65535?t.indices=new e.GeometryData(new Uint32Array(this.indices),1):t.indices=new e.GeometryData(new Uint16Array(this.indices),1)),this.attrs.forEach(function(n){var r=u[n.name];r&&(n.data.BYTES_PER_ELEMENT?t[r]=new e.GeometryData(n.data,n.itemCount):t[r]=new e.GeometryData(new Float32Array(n.data),n.itemCount))}),t}},{key:"getAllBuffers",value:function(){var e=[];return this.indices.BYTES_PER_ELEMENT&&e.push(this.indices.buffer),this.attrs.forEach(function(t){t.data&&t.data.BYTES_PER_ELEMENT&&e.push(t.data.buffer)}),e}}],[{key:"fromGLTFPrimitive",value:function(t){var n=new e(t.indices,t.mode),r=t.attributes;for(var i in r)n.addAttr(a[i],r[i],f[a[i]]);return n}},{key:"fromHilo3dGeometry",value:function(t){var n=new e(t.indices.data,t.mode);for(var r in c)t[r]&&n.addAttr(c[r],t[r].data,t[r].size);return n}}]),e}();e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(0)),i=d(n(2)),a=d(n(132)),s=d(n(38)),o=d(n(29)),u=d(n(26)),c=d(n(72)),f=d(n(4)),l=d(n(6)),h=n(1);function d(e){return e&&e.__esModule?e:{default:e}}var _=null,m=new f.default(1,1,1),p=new l.default,v=r.default.create({isLightShadow:!0,className:"LightShadow",light:null,renderer:null,framebuffer:null,camera:null,width:1024,height:1024,maxBias:.05,minBias:.005,cameraInfo:null,debug:!1,constructor:function(e){this.id=i.default.generateUUID(this.className),Object.assign(this,e)},createFramebuffer:function(){this.framebuffer||(this.framebuffer=new o.default(this.renderer,{width:this.width,height:this.height}),this.debug&&this.showShadowMap())},updateLightCamera:function(e){this.light.isDirectionalLight?this.updateDirectionalLightCamera(e):this.light.isSpotLight&&this.updateSpotLightCamera(e)},updateDirectionalLightCamera:function(e){var t=this.light;if(this.camera.lookAt(t.direction),this.cameraInfo)this.updateCustumCamera(this.cameraInfo);else{var n=e.getGeometry();if(n){this.camera.updateViewMatrix(),p.multiply(this.camera.viewMatrix,e.worldMatrix);var r=n.getBounds(p);this.camera.near=-r.zMax,this.camera.far=-r.zMin,this.camera.left=r.xMin,this.camera.right=r.xMax,this.camera.bottom=r.yMin,this.camera.top=r.yMax}}this.camera.updateViewMatrix()},updateCustumCamera:function(e){for(var t in e)this.camera[t]=e[t]},updateSpotLightCamera:function(e){var t=this.light;this.camera.lookAt(t.direction),this.cameraInfo?this.updateCustumCamera(this.cameraInfo):(this.camera.fov=2*t.outerCutoff,this.camera.near=.01,this.camera.far=e.far,this.camera.aspect=1),this.camera.updateViewMatrix()},createCamera:function(e){this.camera||(this.light.isDirectionalLight?this.camera=new a.default:this.light.isSpotLight&&(this.camera=new s.default),this.camera.addTo(this.light)),this._cameraMatrixVersion!==e.matrixVersion&&(this.updateLightCamera(e),this._cameraMatrixVersion=e.matrixVersion)},createShadowMap:function(e){this.createFramebuffer(),this.createCamera(e);var t=this.renderer,n=this.framebuffer,r=this.camera;_||(_=new c.default({vertexType:h.DEPTH,side:h.BACK,writeOriginData:!0})),n.bind(),t.state.viewport(0,0,this.width,this.height),t.clear(m),r.updateViewProjectionMatrix(),u.default.setCamera(r),t.forceMaterial=_,this.renderShadowScane(t),delete t.forceMaterial,n.unbind(),u.default.setCamera(e),t.viewport()},renderShadowScane:function(e){e.renderList.traverse(function(t){e.renderMeshes(t.filter(function(e){return e.material.castShadows}))})},showShadowMap:function(){var e=this;this.renderer.on("afterRender",function(){e.framebuffer.render(0,.7,.3,.3)})}});t.default=v},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},function(e,t,n){"use strict";e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},function(e,t,n){"use strict";e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},function(e,t,n){"use strict";e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.create({className:"Plane",isPlane:!0,constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.default,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.normal=e,this.distance=t},copy:function(e){return this.normal.copy(e.normal),this.distance=e.distance,this},clone:function(){return new this.constructor(this.normal.clone(),this.distance)},set:function(e,t,n,r){return this.normal.set(e,t,n),this.distance=r,this},normalize:function(){var e=1/this.normal.length();return this.normal.scale(e),this.distance*=e,this},distanceToPoint:function(e){return this.normal.dot(e)+this.distance},projectPoint:function(e){return(new i.default).copy(this.normal).scale(-this.distanceToPoint(e)).add(e)}});t.default=s},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),i=u(n(2)),a=u(n(11)),s=n(5),o=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var c=r.default.create({Extends:a.default,isDataTexture:!0,className:"DataTexture",target:o.TEXTURE_2D,internalFormat:o.RGBA,format:o.RGBA,type:o.FLOAT,magFilter:o.NEAREST,minFilter:o.NEAREST,wrapS:o.CLAMP_TO_EDGE,wrapT:o.CLAMP_TO_EDGE,dataLength:0,resetSize:function(e){if(e!==this.dataLength){this.dataLength=e;var t=i.default.nextPowerOfTwo(e/4),n=Math.max(Math.log2(t),4),r=Math.floor(n/2),a=n-r;this.width=Math.pow(2,r),this.height=Math.pow(2,a),this.DataClass=(0,s.getTypedArrayClass)(this.type)}},data:{get:function(){return this.image},set:function(e){if(this.image!==e){this.resetSize(e.length);var t=this.width*this.height*4;t===e.length&&e instanceof this.DataClass?this.image=e:(this.image&&this.image.length===t||(this.image=new this.DataClass(t)),this.image.set(e,0)),this.needUpdate=!0}}},constructor:function(e){c.superclass.constructor.call(this,e)}});t.default=c},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_COLOR\n    varying vec4 v_color;\n#endif\n\n#ifdef HILO_USE_HDR\n    uniform float u_exposure;\n#endif\n\n#ifdef HILO_GAMMA_OUTPUT\n    uniform float u_gammaFactor;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_TEXCOORD0\n    varying vec2 v_texcoord0;\n#endif\n\n#ifdef HILO_HAS_TEXCOORD1\n    varying vec2 v_texcoord1;\n#endif\n\n#if defined(HILO_HAS_TEXCOORD0) || defined(HILO_HAS_TEXCOORD1)\n    #if defined(HILO_HAS_TEXCOORD0) && defined(HILO_HAS_TEXCOORD1)\n        #define HILO_TEXTURE_2D(hiloSampler2D)  hiloTexture2D(hiloSampler2D.texture, hiloSampler2D.uv)\n        \n        struct hiloSampler2D{\n            sampler2D texture;\n            int uv; \n        };\n        \n        \n        vec4 hiloTexture2D(sampler2D texture, int uv){\n            if(uv == 0){\n                return texture2D(texture, v_texcoord0);\n            }\n            else{\n                return texture2D(texture, v_texcoord1);\n            }\n        }\n    #else\n        #ifdef HILO_HAS_TEXCOORD1\n            #define HILO_V_TEXCOORD v_texcoord1\n        #else\n            #define HILO_V_TEXCOORD v_texcoord0\n        #endif\n        #define HILO_TEXTURE_2D(hiloSampler2D)  hiloTexture2D(hiloSampler2D.texture)\n\n        struct hiloSampler2D{\n            sampler2D texture;\n        };\n\n        vec4 hiloTexture2D(sampler2D texture){\n            return texture2D(texture, HILO_V_TEXCOORD);\n        }\n    #endif\n#endif\n\n\n#ifdef HILO_DIFFUSE_CUBE_MAP\n    varying vec3 v_position;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_NORMAL\n    varying vec3 v_normal;\n    #ifdef HILO_NORMAL_MAP\n        uniform hiloSampler2D u_normalMap;\n        varying mat3 v_TBN;\n        \n        #ifdef HILO_NORMAL_MAP_SCALE\n        uniform float u_normalMapScale;\n        #endif\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(HILO_HAS_LIGHT) || defined(HILO_HAS_FRAG_POS)\n    varying vec3 v_fragPos;\n#endif"},function(e,t,n){e.exports="#define GLSLIFY 1\n#ifdef HILO_DIRECTIONAL_LIGHTS\n    uniform vec3 u_directionalLightsColor[HILO_DIRECTIONAL_LIGHTS];\n    uniform vec3 u_directionalLightsInfo[HILO_DIRECTIONAL_LIGHTS];\n    #ifdef HILO_DIRECTIONAL_LIGHTS_SMC\n        uniform sampler2D u_directionalLightsShadowMap[HILO_DIRECTIONAL_LIGHTS_SMC];\n        uniform vec2 u_directionalLightsShadowMapSize[HILO_DIRECTIONAL_LIGHTS_SMC];\n        uniform mat4 u_directionalLightSpaceMatrix[HILO_DIRECTIONAL_LIGHTS_SMC];\n        uniform vec2 u_directionalLightsShadowBias[HILO_DIRECTIONAL_LIGHTS_SMC];\n    #endif\n#endif\n\n#ifdef HILO_SPOT_LIGHTS\n    uniform vec3 u_spotLightsPos[HILO_SPOT_LIGHTS];\n    uniform vec3 u_spotLightsDir[HILO_SPOT_LIGHTS];\n    uniform vec3 u_spotLightsColor[HILO_SPOT_LIGHTS];\n    uniform vec2 u_spotLightsCutoffs[HILO_SPOT_LIGHTS];\n    uniform vec3 u_spotLightsInfo[HILO_SPOT_LIGHTS];\n    #ifdef HILO_SPOT_LIGHTS_SMC\n        uniform sampler2D u_spotLightsShadowMap[HILO_SPOT_LIGHTS_SMC];\n        uniform vec2 u_spotLightsShadowMapSize[HILO_SPOT_LIGHTS_SMC];\n        uniform mat4 u_spotLightSpaceMatrix[HILO_SPOT_LIGHTS_SMC];\n        uniform vec2 u_spotLightsShadowBias[HILO_SPOT_LIGHTS_SMC];\n    #endif\n#endif\n\n#ifdef HILO_POINT_LIGHTS\n    uniform vec3 u_pointLightsPos[HILO_POINT_LIGHTS];\n    uniform vec3 u_pointLightsColor[HILO_POINT_LIGHTS];\n    uniform vec3 u_pointLightsInfo[HILO_POINT_LIGHTS];\n    #ifdef HILO_POINT_LIGHTS_SMC\n        uniform samplerCube u_pointLightsShadowMap[HILO_POINT_LIGHTS_SMC];\n        uniform mat4 u_pointLightSpaceMatrix[HILO_POINT_LIGHTS_SMC];\n        uniform vec2 u_pointLightsShadowBias[HILO_POINT_LIGHTS_SMC];\n    #endif\n#endif\n\n#ifdef HILO_AMBIENT_LIGHTS\n    uniform vec3 u_ambientLightsColor;\n#endif\n\n"+n(91)+"\n"+n(92)+"\n"+n(93)+"\n"+n(94)+"\n"+n(95)},function(e,t){e.exports="#define GLSLIFY 1\nvec4 textureEnvMap(sampler2D texture, vec3 position){\n    return texture2D(texture, vec2(atan(position.x, position.z) * HILO_INVERSE_PI * 0.5+0.5,  acos(position.y) * HILO_INVERSE_PI));\n}\n\nvec4 textureEnvMap(samplerCube texture, vec3 position){\n    return textureCube(texture, position);\n}\n\n#ifdef HILO_USE_SHADER_TEXTURE_LOD\n    vec4 textureEnvMapLod(sampler2D texture, vec3 position, float lod){\n        return texture2DLodEXT(texture, vec2(atan(position.x, position.z) * HILO_INVERSE_PI * 0.5+0.5,  acos(position.y) * HILO_INVERSE_PI), lod);\n    }\n\n    vec4 textureEnvMapLod(samplerCube texture, vec3 position, float lod){\n        return textureCubeLodEXT(texture, position, lod);\n    }\n#endif\n\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_TRANSPARENCY_MAP\n    uniform hiloSampler2D u_transparency;\n#else\n    uniform float u_transparency;\n#endif\n\n#ifdef HILO_ALPHA_CUTOFF\n    uniform float u_alphaCutoff;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_FOG\n    varying float v_dist;\n    uniform vec4 u_fogColor;\n    \n    #ifdef HILO_FOG_LINEAR\n        uniform vec2 u_fogInfo;\n    #else\n        uniform float u_fogInfo;\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_NORMAL_MAP\n    vec3 normal = HILO_TEXTURE_2D(u_normalMap).rgb * 2.0 - 1.0;\n    #ifdef HILO_NORMAL_MAP_SCALE\n        normal.xy *= u_normalMapScale;\n    #endif\n    normal = normalize(v_TBN * normal);\n#elif defined(HILO_HAS_NORMAL)\n    vec3 normal = normalize(v_normal);\n#else\n    vec3 normal = vec3(0, 0, 1);\n#endif\n\n#if HILO_SIDE == HILO_BACK_SIDE\n    normal = -normal;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_LIGHT\n    #if HILO_SIDE == HILO_FRONT_AND_BACK_SIDE\n        if(dot(-v_fragPos, normal) < 0.0){\n            normal = -normal;\n        }\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\nfloat transparency = 1.0;\n#ifdef HILO_TRANSPARENCY_MAP\n    transparency = HILO_TEXTURE_2D(u_transparency).r;\n#else\n    transparency = u_transparency;\n#endif\ncolor.a *= transparency;\n#ifdef HILO_ALPHA_CUTOFF\n    if (color.a < u_alphaCutoff) {\n        discard;\n    } else {\n        color.a = 1.0;\n    }\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_FOG\n    float fogFactor = 1.0;\n\n    #ifdef HILO_FOG_LINEAR\n        fogFactor = (u_fogInfo.y - v_dist)/(u_fogInfo.y - u_fogInfo.x);\n    #elif defined(HILO_FOG_EXP)\n        fogFactor = exp(-abs(u_fogInfo * v_dist));\n    #elif defined(HILO_FOG_EXP2)\n        fogFactor = exp(-(u_fogInfo * v_dist) * (u_fogInfo * v_dist)); \n    #endif\n    \n    fogFactor = clamp(fogFactor, 0.0, 1.0);\n    color = mix(u_fogColor, color, fogFactor);\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_IGNORE_TRANSPARENT\ncolor.a = 1.0;\n#endif\n\ncolor.rgb *= color.a;\n\n#ifdef HILO_GAMMA_OUTPUT\n    color.rgb = pow(color.rgb, vec3(1.0 / u_gammaFactor));\n#endif\n\n#ifdef HILO_USE_HDR\n    color.rgb = vec3(1.0) - exp(-color.rgb * u_exposure);\n#endif\n\ngl_FragColor = color;"},function(e,t){e.exports="#define GLSLIFY 1\n"},function(e,t){e.exports="#ifdef GL_ES\nprecision HILO_MAX_VERTEX_PRECISION float;\n#define GLSLIFY 1\n#endif"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(2)),a=f(n(16)),s=f(n(33)),o=f(n(66)),u=f(n(22)),c=f(n(34));function f(e){return e&&e.__esModule?e:{default:e}}var l=new a.default,h=r.default.create({Statics:{cache:{get:function(){return l}},reset:function(e){l.each(function(e){e.destroy()})},getProgram:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.id,i=l.get(r);return i||(i=new h({state:t,vertexShader:e.vs,fragShader:e.fs,ignoreError:n}),l.add(r,i)),i},getBlankProgram:function(e){var t=c.default.getCustomShader("void main(){}","void main(){}","","__hiloBlankShader");return this.getProgram(t,e,!0)}},className:"Program",isProgram:!0,fragShader:"",vertexShader:"",attributes:null,uniforms:null,program:null,gl:null,state:null,constructor:function(e){return this.id=i.default.generateUUID(this.className),Object.assign(this,e),this._dict={},this.attributes={},this.uniforms={},this.gl=this.state.gl,this.program=this.createProgram(),this.program?(this.initAttributes(),this.initUniforms(),this):this.ignoreError?this:h.getBlankProgram(e.state)},createProgram:function(){var e=this.gl,t=e.createProgram(),n=this.createShader(e.VERTEX_SHADER,this.vertexShader),r=this.createShader(e.FRAGMENT_SHADER,this.fragShader);if(n&&r){if(e.attachShader(t,n),e.attachShader(t,r),e.linkProgram(t),e.deleteShader(n),e.deleteShader(r),!e.getProgramParameter(t,e.LINK_STATUS)){var i=e.getProgramInfoLog(t);return s.default.error("compileProgramError: "+i,this),e.deleteProgram(t),null}return t}return null},useProgram:function(){this.state.useProgram(this.program)},createShader:function(e,t){var n=this.gl,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);return s.default.error("compileShaderError: "+i,t.split("\n").map(function(e,t){return t+1+" "+e}).join("\n")),null}return r},initAttributes:function(){for(var e=this,t=this.gl,n=this.program,r=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES),i=u.default.instanced,a=function(r){var a=t.getActiveAttrib(n,r),s=a.name,u=a.type,c=a.size,f=t.getAttribLocation(n,s),l=o.default.get(u),h=function(e){var n=e.type,r=void 0===n?t.FLOAT:n,i=e.normalized,a=void 0!==i&&i,s=e.stride,o=void 0===s?0:s,u=e.offset,c=void 0===u?0:u;t.vertexAttribPointer(f,l.size,r,a,o,c)},d=function(){t.enableVertexAttribArray(f)},_=function(){},m=function(e,t){e[f]=t};if(i&&(_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i.vertexAttribDivisorANGLE(f,e)}),"Matrix"===l.type){var p=l.byteSize,v=l.size,g=Math.sqrt(v),E=4*g,T=function(e){for(var t=0;t<g;t++)e(f+t,t)};h=function(e){var n=e.type,r=void 0===n?t.FLOAT:n,i=e.normalized,a=void 0!==i&&i,s=e.stride,o=void 0===s?0:s,u=e.offset,c=void 0===u?0:u,f=void 0;f=0===o?p:o,T(function(e,n){t.vertexAttribPointer(e,g,r,a,f,c+E*n)})},d=function(){T(function(e){t.enableVertexAttribArray(e)})},m=function(e,t){T(function(n){e[n]=t})},i&&(_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;T(function(t){i.vertexAttribDivisorANGLE(t,e)})})}e.attributes[s]={name:s,location:f,type:u,size:c,glTypeInfo:l,pointer:h,enable:d,divisor:_,addTo:m}},s=0;s<r;s++)a(s)},initUniforms:function(){for(var e=this,t=this.gl,n=this.program,r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),i=0,a=function(r){var a=t.getActiveUniform(n,r),s=a.name,u=a.size,c=a.type;s=s.replace(/\[0\]$/,"");var f=t.getUniformLocation(n,s),l=o.default.get(c),h=l.uniformArray,d=l.uniform;e.uniforms[s]={name:s,location:f,type:c,size:u,glTypeInfo:l},c!==t.SAMPLER_2D&&c!==t.SAMPLER_CUBE||(e.uniforms[s].textureIndex=i,i+=u),Object.defineProperty(e,s,{set:l.size>1||u>1?function(e){h(f,e)}:function(t){e._dict[s]!==t&&(e._dict[s]=t,d(f,t))}})},s=0;s<r;s++)a(s)},destroyIfNoRef:function(e){return e.resourceManager.destroyIfNoRef(this),this},destroy:function(){return this._isDestroyed?this:(this.gl.deleteProgram(this.program),this.uniforms=null,this.attributes=null,this.program=null,this.gl=null,this.state=null,this._dict=null,l.removeObject(this),this._isDestroyed=!0,this)}});t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{name:"FLOAT",byteSize:4,uniformFuncName:"uniform1f",type:"Scalar",size:1},{name:"FLOAT_VEC2",byteSize:8,uniformFuncName:"uniform2f",type:"Vector",size:2},{name:"FLOAT_VEC3",byteSize:12,uniformFuncName:"uniform3f",type:"Vector",size:3},{name:"FLOAT_VEC4",byteSize:16,uniformFuncName:"uniform4f",type:"Vector",size:4},{name:"FLOAT_MAT2",byteSize:16,uniformFuncName:"uniformMatrix2fv",type:"Matrix",size:4},{name:"FLOAT_MAT3",byteSize:36,uniformFuncName:"uniformMatrix3fv",type:"Matrix",size:9},{name:"FLOAT_MAT4",byteSize:64,uniformFuncName:"uniformMatrix4fv",type:"Matrix",size:16},{name:"INT",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1},{name:"INT_VEC2",byteSize:8,uniformFuncName:"uniform2i",type:"Vector",size:2},{name:"INT_VEC3",byteSize:12,uniformFuncName:"uniform3i",type:"Vector",size:3},{name:"INT_VEC4",byteSize:16,uniformFuncName:"uniform4i",type:"Vector",size:4},{name:"BOOL",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1},{name:"BOOL_VEC2",byteSize:8,uniformFuncName:"uniform2i",type:"Vector",size:2},{name:"BOOL_VEC3",byteSize:12,uniformFuncName:"uniform3i",type:"Vector",size:3},{name:"BOOL_VEC4",byteSize:16,uniformFuncName:"uniform4i",type:"Vector",size:4},{name:"SAMPLER_2D",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1},{name:"SAMPLER_CUBE",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1}],i={},a={dict:i,init:function(e){r.forEach(function(t){var n=t.name,r=void 0,a=void 0,s=t.uniformFuncName,o=s+"v";"Matrix"===t.type?r=a=function(t,n){void 0!==n&&e[s](t,!1,n)}:(r=function(t,n){void 0!==n&&e[s](t,n)},a=function(t,n){e[o](t,n)}),i[e[n]]=Object.assign(t,{glValue:e[n],uniform:r,uniformArray:a})})},get:function(e){return i[e]}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(22)),a=f(n(68)),s=f(n(161)),o=f(n(16)),u=f(n(8)),c=n(1);function f(e){return e&&e.__esModule?e:{default:e}}var l=[],h=null,d=new o.default,_=r.default.create({Statics:{cache:{get:function(){return d}},getVao:function(e,t,n){var r=d.get(t);return r||(r=new _(e,t,n),d.add(t,r)),r},reset:function(e){h=null,l=[],this.bindSystemVao(),d.each(function(t){t.destroy(e)})},bindSystemVao:function(){i.default.vao&&i.default.vao.bindVertexArrayOES(null),h=null}},className:"VertexArrayObject",isVertexArrayObject:!0,vertexCount:null,useVao:!1,useInstanced:!1,mode:c.TRIANGLES,isDirty:!0,constructor:function(e,t,n){this.gl=e,this.id=t,this.vaoExtension=i.default.vao,this.instancedExtension=i.default.instanced,Object.assign(this,n),this.vaoExtension||(this.useVao=!1),this.instancedExtension||(this.useInstanced=!1),this.useVao&&(this.vao=this.vaoExtension.createVertexArrayOES()),this.attributes=[],this.activeStates=[],this.indexBuffer=null},bind:function(){h!==this&&(this.useVao?this.vaoExtension.bindVertexArrayOES(this.vao):this.bindSystemVao(),h=this)},bindSystemVao:function(){var e=this.gl;h&&h.useVao&&h.unbind();var t=this.activeStates,n=void 0;this.attributes.forEach(function(e){var t=e.buffer,r=e.attribute,i=e.geometryData;n!==t&&(n=t,t.bind()),r.enable(),r.pointer(i),e.useInstanced?r.divisor(1):r.divisor(0)}),l.forEach(function(n,r){var i=t[r];n&&!i&&(n.attribute.divisor(0),e.disableVertexAttribArray(r))}),this.indexBuffer&&this.indexBuffer.bind(),l=t},unbind:function(){this.useVao&&this.vaoExtension.bindVertexArrayOES(null),h=null},draw:function(){this.bind();var e=this.gl,t=this.mode;this.indexBuffer?e.drawElements(t,this.vertexCount,this.indexType,0):e.drawArrays(t,0,this.getVertexCount())},getVertexCount:function(){if(null===this.vertexCount){var e=this.attributes[0];this.vertexCount=e?e.buffer.data.length/e.attribute.glTypeInfo.size:0}return this.vertexCount},drawInstance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.bind();var t=this.gl,n=this.mode;this.useInstanced&&(this.indexBuffer?this.instancedExtension.drawElementsInstancedANGLE(n,this.vertexCount,t.UNSIGNED_SHORT,0,e):this.instancedExtension.drawArraysInstancedANGLE(n,0,this.getVertexCount(),e))},addIndexBuffer:function(e,t){this.bind();var n=this.gl,r=this.indexBuffer;return this.indexType=e.type,r?e.isDirty&&(e.isDirty=!1,r.upload(e.data),this.vertexCount=e.length):((r=a.default.createIndexBuffer(n,e,t)).bind(),this.indexBuffer=r,this.vertexCount=e.length,e.isDirty=!1),r},addAttribute:function(e,t,n,r){this.bind();var i=this.gl,s=t.name,o=this[s];if(o)e.isDirty&&(e.isDirty=!1,o.buffer.upload(e.data));else{e.isDirty=!1;var u=a.default.createVertexBuffer(i,e,n);u.bind(),t.enable(),t.pointer(e),o={attribute:t,buffer:u,geometryData:e},this.attributes.push(o),this[s]=o,t.addTo(this.activeStates,o),r&&r(o)}return o},addInstancedAttribute:function(e,t,n){this.bind();var r=this.gl,i=e.name,a=e.glTypeInfo,o=s.default.getTypedArray(Float32Array,t.length*a.size);t.forEach(function(e,t){void 0!==n(e)?s.default.fillArrayData(o,n(e),t*a.size):console.warn("no attributeData:"+i+"-"+e.name)});var c=this[i],f=void 0;return c?(f=c.geometryData).data=o:f=new u.default(o),this.addAttribute(f,e,r.DYNAMIC_DRAW,function(t){e.divisor(1),t.useInstanced=!0})},useResource:function(e,t){return this.attributes.forEach(function(n){e.useResource(n.buffer,t)}),this.indexBuffer&&e.useResource(this.indexBuffer,t),this},destroyIfNoRef:function(e){return e.resourceManager.destroyIfNoRef(this),this},destroy:function(){var e=this;return this._isDestroyed?this:(this.useVao&&this.vaoExtension.deleteVertexArrayOES(this.vao),this.gl=null,this.indexBuffer=null,this.attributes.forEach(function(t){e[t.name]=null}),this.attributes=null,this.activeStates=null,d.removeObject(this),this._isDestroyed=!0,this)}});t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(16)),a=o(n(2)),s=n(1);function o(e){return e&&e.__esModule?e:{default:e}}var u=new i.default,c=r.default.create({Statics:{cache:{get:function(){return u}},reset:function(e){u.each(function(e){e.destroy()})},createVertexBuffer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.STATIC_DRAW;return this.createBuffer(e,s.ARRAY_BUFFER,t,n)},createBuffer:function(e,t,n,r){var i=n.bufferViewId,a=u.get(i);return a||(a=new c(e,t,n.data,r),u.add(i,a),a)},createIndexBuffer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.STATIC_DRAW;return this.createBuffer(e,s.ELEMENT_ARRAY_BUFFER,t,n)}},className:"Buffer",isBuffer:!0,constructor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ARRAY_BUFFER,n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.STATIC_DRAW;this.id=a.default.generateUUID(this.className),this.gl=e,this.target=t,this.usage=r,this.buffer=e.createBuffer(),n&&this.upload(n)},bind:function(){return this.gl.bindBuffer(this.target,this.buffer),this},upload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.gl,r=this.target,i=this.usage;return this.bind(),!this.data||this.data.byteLength<e.byteLength?n.bufferData(r,e,i):n.bufferSubData(r,t,e),this.data=e,this},destroyIfNoRef:function(e){return e.resourceManager.destroyIfNoRef(this),this},destroy:function(){return this._isDestroyed?this:(this.gl.deleteBuffer(this.buffer),this.data=null,u.removeObject(this),this._isDestroyed=!0,this)}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var s=new i.default,o=r.default.create({className:"Sphere",isSphere:!0,radius:0,constructor:function(e){Object.assign(this,e),this.center||(this.center=new i.default(0,0,0))},clone:function(){var e=new this.constructor;return e.copy(this),e},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},fromPoints:function(e){for(var t=this.center,n=0,r=0;r<e.length;r+=3){var i=e[r]-t.x,a=e[r+1]-t.y,s=e[r+2]-t.z;n=Math.max(i*i+a*a+s*s,n)}return this.radius=Math.sqrt(n),this},transformMat4:function(e){this.center.transformMat4(e);var t=e.getScaling(s);return this.radius*=Math.max(t.x,t.y,t.z),this}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(15)),a=o(n(6)),s=o(n(71));function o(e){return e&&e.__esModule?e:{default:e}}var u=new a.default,c=r.default.create({Extends:i.default,isCamera:!0,className:"Camera",_needUpdateProjectionMatrix:!0,_isGeometryDirty:!1,constructor:function(e){this.viewMatrix=new a.default,this.projectionMatrix=new a.default,this.viewProjectionMatrix=new a.default,this._frustum=new s.default,c.superclass.constructor.call(this,e)},updateViewMatrix:function(){return this.updateMatrixWorld(!0),this.viewMatrix.invert(this.worldMatrix),this},updateProjectionMatrix:function(){},getGeometry:function(e){},updateViewProjectionMatrix:function(){return this._needUpdateProjectionMatrix&&(this.updateProjectionMatrix(),this._needUpdateProjectionMatrix=!1),this.updateViewMatrix(),this.viewProjectionMatrix.multiply(this.projectionMatrix,this.viewMatrix),this.updateFrustum(this.viewProjectionMatrix),this},getModelViewMatrix:function(e,t){return(t=t||new a.default).multiply(this.viewMatrix,e.worldMatrix),t},getModelProjectionMatrix:function(e,t){return(t=t||new a.default).multiply(this.viewProjectionMatrix,e.worldMatrix),t},projectVector:function(e,t,n){var r=e.clone();return r.transformMat4(this.viewProjectionMatrix),t&&n&&(r.x=(r.x+1)/2*t,r.y=n-(r.y+1)/2*n),r},unprojectVector:function(e,t,n){var r=e.clone();return t&&n&&(r.x=r.x/t*2-1,r.y=1-r.y/n*2),u.invert(this.viewProjectionMatrix),r.transformMat4(u),r},isPointVisible:function(e){return!!this._frustum.intersectsSphere({center:e,radius:0})},isMeshVisible:function(e){var t=e.geometry;if(t){var n=t.getSphereBounds(e.worldMatrix);if(this._frustum.intersectsSphere(n))return!0}return!1},updateFrustum:function(e){return this._frustum.fromMatrix(e),this}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(47));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.create({className:"Frustum",isFrustum:!0,constructor:function(){this.planes=[];for(var e=6;e--;)this.planes.push(new i.default)},copy:function(e){var t=e.planes;return this.planes.forEach(function(e,n){e.copy(t[n])}),this},clone:function(){var e=new this.constructor;return e.copy(this),e},fromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],u=n[5],c=n[6],f=n[7],l=n[8],h=n[9],d=n[10],_=n[11],m=n[12],p=n[13],v=n[14],g=n[15];return t[0].set(s-r,f-o,_-l,g-m).normalize(),t[1].set(s+r,f+o,_+l,g+m).normalize(),t[2].set(s+i,f+u,_+h,g+p).normalize(),t[3].set(s-i,f-u,_-h,g-p).normalize(),t[4].set(s-a,f-c,_-d,g-v).normalize(),t[5].set(s+a,f+c,_+d,g+v).normalize(),this},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(18)),a=n(1);function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isGeometryMaterial:!0,className:"GeometryMaterial",vertexType:a.POSITION,lightType:a.NONE,writeOriginData:!1,constructor:function(e){o.superclass.constructor.call(this,e),Object.assign(this.uniforms,{u_cameraFar:"CAMERAFAR",u_cameraNear:"CAMERANEAR",u_cameraType:"CAMERATYPE"})},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(o.superclass.getRenderOption.call(this,e),e["VERTEX_TYPE_"+this.vertexType]=1,this.vertexType){case a.POSITION:e.HAS_FRAG_POS=1;break;case a.NORMAL:e.HAS_NORMAL=1;break;case a.DEPTH:break;case a.DISTANCE:e.HAS_FRAG_POS=1}return this.writeOriginData&&(e.WRITE_ORIGIN_DATA=1),e}});t.default=o},function(e,t,n){"use strict";var r={_listeners:null,on:function(e,t,n){for(var r=this._listeners=this._listeners||{},i=r[e]=r[e]||[],a=0,s=i.length;a<s;a++){if(i[a].listener===t)return}return i.push({listener:t,once:n}),this},off:function(e,t){if(0==arguments.length)return this._listeners=null,this;var n=this._listeners&&this._listeners[e];if(n){if(1==arguments.length)return delete this._listeners[e],this;for(var r=0,i=n.length;r<i;r++){if(n[r].listener===t){n.splice(r,1),0===n.length&&delete this._listeners[e];break}}}return this},fire:function(e,t){var n,r;"string"==typeof e?r=e:(n=e,r=e.type);var a=this._listeners;if(!a)return!1;var s=a[r];if(s){var o=s.slice(0);if((n=n||new i(r,this,t))._stopped)return!1;for(var u=0;u<o.length;u++){var c=o[u];if(c.listener.call(this,n),c.once){var f=s.indexOf(c);f>-1&&s.splice(f,1)}}return 0==s.length&&delete a[r],!0}return!1}},i=n(23).create({constructor:function(e,t,n){this.type=e,this.target=t,this.detail=n,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),a=window.Event;if(a){var s=a.prototype,o=s.stopImmediatePropagation;s.stopImmediatePropagation=function(){o&&o.call(this),this._stopped=!0}}e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(75));t.default=r.default},function(e,t,n){"use strict";e.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(77));t.default=r.default},function(e,t,n){"use strict";(function(e){"object"===("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)&&(e.exports={VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795})}).call(this,n(42)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.POSITION="POSITION",t.NORMAL="NORMAL",t.DEPTH="DEPTH",t.DISTANCE="DISTANCE"},function(e,t,n){"use strict";var r=n(80),i=n(82),a=n(83),s=n(86),o=n(46),u=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];function f(e,t){this.origin=e||[0,0,0],this.direction=t||[0,0,-1]}e.exports=f,f.prototype.set=function(e,t){this.origin=e,this.direction=t},f.prototype.copy=function(e){o(this.origin,e.origin),o(this.direction,e.direction)},f.prototype.clone=function(){var e=new f;return e.copy(this),e},f.prototype.intersectsSphere=function(e,t){return a(c,this.origin,this.direction,e,t)},f.prototype.intersectsPlane=function(e,t){return i(c,this.origin,this.direction,e,t)},f.prototype.intersectsTriangle=function(e){return r(c,this.origin,this.direction,e)},f.prototype.intersectsBox=function(e){return s(c,this.origin,this.direction,e)},f.prototype.intersectsTriangleCell=function(e,t){var n=e[0],r=e[1],i=e[2];return u[0]=t[n],u[1]=t[r],u[2]=t[i],this.intersectsTriangle(u)}},function(e,t,n){"use strict";var r=n(81),i=n(25),a=n(43),s=1e-6,o=[0,0,0],u=[0,0,0],c=[0,0,0],f=[0,0,0],l=[0,0,0];e.exports=function(e,t,n,h){a(o,h[1],h[0]),a(u,h[2],h[0]),r(f,n,u);var d=i(o,f);if(d<s)return null;a(c,t,h[0]);var _=i(c,f);if(_<0||_>d)return null;r(l,c,o);var m=i(n,l);if(m<0||_+m>d)return null;var p=i(u,l)/d;return e[0]=t[0]+p*n[0],e[1]=t[1]+p*n[1],e[2]=t[2]+p*n[2],e}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[0],o=n[1],u=n[2];return e[0]=i*u-a*o,e[1]=a*s-r*u,e[2]=r*o-i*s,e}},function(e,t,n){"use strict";var r=n(25),i=n(44),a=n(45),s=n(46);e.exports=function(e,t,n,u,c){var f=r(n,u);if(0!==f){var l=-(r(t,u)+c)/f;return l<0?null:(a(o,n,l),i(e,t,o))}return r(u,t)+c===0?s(e,t):null};var o=[0,0,0]},function(e,t,n){"use strict";var r=n(84),i=n(25),a=n(43),s=n(85),o=n(45),u=n(44),c=[0,0,0];e.exports=function(e,t,n,f,l){a(c,f,t);var h=i(n,c);if(h<0)return null;s(c,t,n,h);var d=r(f,c),_=l*l;if(d>_)return null;return o(e,n,h-Math.sqrt(_-d)),u(e,e,t)}},function(e,t,n){"use strict";e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},function(e,t,n){"use strict";function r(e,t,n){for(var r=e.length,i=-1/0,a=1/0,s=0;s<r;s++){var o=(n[0][s]-e[s])/t[s],u=(n[1][s]-e[s])/t[s];if(o>u){var c=o;o=u,u=c}if(u<i||o>a)return 1/0;o>i&&(i=o),u<a&&(a=u)}return i>a?1/0:i}e.exports=function(e,t,n,i){var a=r(t,n,i);if(a===1/0)e=null;else{e=e||[];for(var s=0;s<t.length;s++)e[s]=t[s]+n[s]*a}return e},e.exports.distance=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),i=u(n(21)),a=u(n(6)),s=u(n(49)),o=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}var c=new a.default,f=new a.default,l=r.default.create({Extends:i.default,isSkinedMesh:!0,className:"SkinedMesh",_rootNode:null,rootNode:{get:function(){return this._rootNode},set:function(e){this._rootNode=e,this.initJointNodeList()}},jointNodeList:null,useInstanced:!1,jointMatTexture:null,constructor:function(e){this.jointNames=[],this.inverseBindMatrices=[],l.superclass.constructor.call(this,e)},initJointNodeList:function(){var e=this;if(this._rootNode){var t={};this._rootNode.traverse(function(e){"jointName"in e&&(t[e.jointName]=e)}),this.jointNodeList=[],this.jointNames.forEach(function(n){e.jointNodeList.push(t[n])})}},getJointMat:function(){var e=this;if(this.jointNodeList)return this.jointMat||(this.jointMat=new Float32Array(16*this.jointNodeList.length)),this._rootNode||!this.clonedFrom?f.invert(this.worldMatrix):f.invert(this.clonedFrom.worldMatrix),this.jointNodeList.forEach(function(t,n){c.copy(f),c.multiply(t.worldMatrix),c.multiply(e.inverseBindMatrices[n]),c.toArray(e.jointMat,16*n)}),this.jointMat},initJointMatTexture:function(){if(!this.jointMatTexture){var e=this.getJointMat();this.jointMatTexture=new s.default({data:e})}return this.jointMatTexture},updateJointMatTexture:function(){if(this.jointMatTexture){var e=this.getJointMat();this.jointMatTexture.data.set(e,0),this.jointMatTexture.needUpdate=!0}else this.initJointMatTexture()},clone:function(e){var t=i.default.prototype.clone.call(this,e);return Object.assign(t,{useInstanced:this.useInstanced,jointNames:this.jointNames.slice(),inverseBindMatrices:this.inverseBindMatrices.map(function(e){return e.clone()}),jointNodeList:this.jointNodeList}),t.clonedFrom=this,t},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.superclass.getRenderOption.call(this,e);var t=this.jointNames.length;t&&(e.JOINT_COUNT=t,o.default.VERTEX_TEXTURE_FLOAT&&t>(o.default.MAX_VERTEX_UNIFORM_VECTORS-22)/4&&(e.JOINT_MAT_MAP=1));return e}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=A(n(0)),i=A(n(26)),a=A(n(4)),s=A(n(34)),o=A(n(65)),u=A(n(124)),c=A(n(125)),f=A(n(67)),l=A(n(68)),h=A(n(29)),d=A(n(22)),_=A(n(12)),m=A(n(66)),p=A(n(126)),v=A(n(127)),g=A(n(128)),E=A(n(9)),T=A(n(11)),M=n(1);function A(e){return e&&e.__esModule?e:{default:e}}var O=r.default.create({Mixes:E.default,className:"WebGLRenderer",isWebGLRenderer:!0,gl:null,width:0,height:0,pixelRatio:1,domElement:null,useInstanced:!1,useVao:!0,alpha:!1,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!1,useFramebuffer:!1,framebufferOption:{},useLogDepth:!1,vertexPrecision:"highp",fragmentPrecision:"highp",fog:null,offsetX:0,offsetY:0,_isInit:!1,_isContextLost:!1,constructor:function(e){this.clearColor=new a.default(1,1,1),this.renderInfo=new u.default,this.renderList=new c.default,this.lightManager=new g.default,this.resourceManager=new v.default,Object.assign(this,e)},resize:function(e,t,n){if(n||this.width!==e||this.height!==t){var r=this.domElement;this.width=e,this.height=t,r.width=e,r.height=t,this.framebuffer&&this.framebuffer.resize(this.width,this.height,n),this.viewport()}},setOffset:function(e,t){this.offsetX===e&&this.offsetY===t||(this.offsetX=e,this.offsetY=t,this.viewport())},viewport:function(e,t,n,r){var i=this.state,a=this.gl;i&&(void 0===e?e=this.offsetX:this.offsetX=e,void 0===t?t=this.offsetY:this.offsetY=t,void 0===n&&(n=a.drawingBufferWidth),void 0===r&&(r=a.drawingBufferHeight),i.viewport(e,t,n,r))},isInit:{get:function(){return this._isInit}},onInit:function(e){var t=this;this._isInit?e(this):this.on("init",function(){e(t)},!0)},initContext:function(){var e=this;if(!this._isInit){this._isInit=!0;var t=this.gl=this.domElement.getContext("webgl",{alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat});t.viewport(0,0,this.width,this.height),m.default.init(t),d.default.init(t),_.default.init(t),s.default.init(this),this.state=new p.default(t),d.default.instanced||(this.useInstanced=!1),d.default.vao||(this.useVao=!1),this.useFramebuffer&&(this.framebuffer=new h.default(this,Object.assign({useVao:this.useVao,width:this.width,height:this.height},this.framebufferOption))),this.domElement.addEventListener("webglcontextlost",function(t){e._onContextLost(t)},!1),this.domElement.addEventListener("webglcontextrestored",function(t){e._onContextRestore(t)},!1),this.fire("init")}},_onContextLost:function(e){var t=this.gl;this._isContextLost=!0,e.preventDefault(),o.default.reset(t),s.default.reset(t),T.default.reset(t),l.default.reset(t),f.default.reset(t),this.state.reset(t),this._lastMaterial=null,this._lastProgram=null},_onContextRestore:function(e){var t=this.gl;this._isContextLost=!1,d.default.reset(t),h.default.reset(t)},setupDepthTest:function(e){var t=this.state;e.depthTest?(t.enable(M.DEPTH_TEST),t.depthFunc(e.depthFunc),t.depthMask(e.depthMask),t.depthRange(e.depthRange[0],e.depthRange[1])):t.disable(M.DEPTH_TEST)},setupSampleAlphaToCoverage:function(e){var t=this.state;e.sampleAlphaToCoverage?t.enable(M.SAMPLE_ALPHA_TO_COVERAGE):t.disable(M.SAMPLE_ALPHA_TO_COVERAGE)},setupCullFace:function(e){var t=this.state;e.cullFace&&e.cullFaceType!==M.FRONT_AND_BACK?(t.enable(M.CULL_FACE),t.cullFace(e.cullFaceType)):t.disable(M.CULL_FACE)},setupBlend:function(e){var t=this.state;e.blend?(t.enable(M.BLEND),t.blendFuncSeparate(e.blendSrc,e.blendDst,e.blendSrcAlpha,e.blendDstAlpha),t.blendEquationSeparate(e.blendEquation,e.blendEquationAlpha)):t.disable(M.BLEND)},setupUniforms:function(e,t,n,r){var i=this.forceMaterial||t.material;for(var a in e.uniforms){var s=i.getUniformInfo(a),o=e.uniforms[a];if(!s.isBlankInfo&&(r||s.isDependMesh&&!n)){var u=s.get(t,i,o);void 0!==u&&null!==u&&(e[a]=u)}}},setupVao:function(e,t,n){var r=n.geometry,i=r.isStatic;if(e.isDirty||!i||r.isDirty){e.isDirty=!1;var a=this.forceMaterial||n.material,s=a.attributes,o=i?M.STATIC_DRAW:M.DYNAMIC_DRAW;for(var u in s){var c=t.attributes[u];if(c){var f=a.getAttributeData(u,n,c);void 0!==f&&null!==f&&e.addAttribute(f,c,o)}}r.indices&&e.addIndexBuffer(r.indices,o),r.isDirty=!1}r.vertexCount&&(e.vertexCount=r.vertexCount)},setupMaterial:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.forceMaterial||t.material;(i.isDirty||this._lastMaterial!==i)&&(this.setupDepthTest(i),this.setupSampleAlphaToCoverage(i),this.setupCullFace(i),this.setupBlend(i),r=!0),this.setupUniforms(e,t,n,r),i.isDirty=!1,this._lastMaterial=i},setupMesh:function(e,t){var n=this.gl,r=this.state,i=this.lightManager,a=this.resourceManager,u=e.geometry,c=this.forceMaterial||e.material,l=s.default.getShader(e,c,t,i,this.fog,this.useLogDepth),h=o.default.getProgram(l,r);h.useProgram(),this.setupMaterial(h,e,t,this._lastProgram!==h),this._lastProgram=h,e.material.wireframe&&u.mode!==M.LINES&&u.convertToLinesMode();var d=u.id+h.id,_=f.default.getVao(n,d,{useInstanced:t,useVao:this.useVao,mode:u.mode});return this.setupVao(_,h,e),a.useResource(_,e).useResource(l,e).useResource(h,e),{vao:_,program:h,geometry:u}},addRenderInfo:function(e,t){var n=this.renderInfo;n.addFaceCount(e),n.addDrawCount(t)},renderMeshes:function(e){var t=e[0],n=this.forceMaterial||t.material;this.useInstanced&&t.useInstanced&&e.length>1?this.renderInstancedMeshes(t,e,n):this.renderMultipleMeshes(e)},render:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.initContext(),!this._isContextLost){var r=this.renderList,a=this.renderInfo,s=this.lightManager,o=this.resourceManager,u=this.state;this.fog=e.fog,s.reset(),a.reset(),r.reset(),o.reset(),i.default.init(u,t,s,this.fog),e.updateMatrixWorld(),t.updateViewProjectionMatrix(),e.traverse(function(e){return!e.visible||(e.isMesh?r.addMesh(e,t):e.isLight&&s.addLight(e),!1)}),s.createShadowMap(this,t),s.updateInfo(t),n&&this.fire("beforeRender"),this.useFramebuffer&&this.framebuffer.bind(),this.clear(),n&&this.fire("beforeRenderScene"),this.renderScene(),this.useFramebuffer&&this.renderToScreen(this.framebuffer),n&&this.fire("afterRender"),o.destroyUnsuedResource()}},renderScene:function(){var e=this;this.renderList.traverse(function(t){e.renderMeshes(t)})},clear:function(e){var t=this.gl,n=this.state;e=e||this.clearColor,n.depthMask(!0),this._lastMaterial=null,this._lastProgram=null,t.clearColor(e.r,e.g,e.b,e.a),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},clearDepth:function(){var e=this.gl;this.state.depthMask(!0),e.clear(e.DEPTH_BUFFER_BIT)},renderToScreen:function(e){this.state.bindSystemFramebuffer(),e.render(0,0,1,1,this.clearColor)},renderMesh:function(e){var t=this.setupMesh(e,!1).vao;t.draw(),this.addRenderInfo(t.vertexCount/3,1)},renderInstancedMeshes:function(e,t,n){var r=this.setupMesh(e,!0),i=r.vao,a=r.program;n.getInstancedUniforms().forEach(function(e){var n=e.name,r=e.info,s=a.attributes[n];s&&i.addInstancedAttribute(s,t,function(e){return r.get(e)})}),i.drawInstance(t.length),this.addRenderInfo(i.vertexCount/3*t.length,1)},renderMultipleMeshes:function(e){var t=this;e.forEach(function(e){t.renderMesh(e)})},releaseGLResource:function(){var e=this.gl;e&&(o.default.reset(e),s.default.reset(e),l.default.reset(e),f.default.reset(e),this.state.reset(e),T.default.reset(e),h.default.destroy(e))}});t.default=O},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(27)+"\n"+n(17)+"\n"+n(28)+"\n\n"+n(50)+"\n"+n(51)+"\n"+n(52)+"\n"+n(53)+"\n"+n(90)+"\n"+n(54)+"\n"+n(96)+"\n"+n(56)+"\n"+n(57)+"\n"+n(35)+"\n\nvoid main(void) {\n    vec4 diffuse = vec4(0., 0., 0., 1.);\n    vec4 color = vec4(0., 0., 0., 1.);\n\n    "+n(58)+"\n    "+n(59)+"\n    "+n(97)+"\n    "+n(98)+"\n    "+n(60)+"\n    "+n(61)+"\n    "+n(62)+"\n    "+n(36)+"\n}"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(HILO_DIFFUSE_MAP)\n    uniform hiloSampler2D u_diffuse;\n#elif defined(HILO_DIFFUSE_CUBE_MAP)\n    uniform samplerCube u_diffuse;\n#else\n    uniform vec4 u_diffuse;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\nfloat getDiffuse(vec3 normal, vec3 lightDir){\n    return max(dot(normal, lightDir), 0.0);\n}\n\n"},function(e,t){e.exports="#define GLSLIFY 1\nfloat getSpecular(vec3 cameraPos, vec3 fragPos, vec3 lightDir, vec3 normal, float shininess){\n    vec3 viewDir = normalize(cameraPos - fragPos);\n    #ifdef LIGHT_TYPE_PHONG\n        return pow(max(dot(viewDir, reflect(-lightDir, normal), 0.0), shininess);\n    #else\n        return pow(max(dot(normal, normalize(lightDir + viewDir)), 0.0), shininess);\n    #endif\n}\n\n"},function(e,t){e.exports="#define GLSLIFY 1\nfloat getLightAttenuation(vec3 distanceVec, vec3 info){\n    float distance = length(distanceVec);\n    return 1.0/(info.x + info.y * distance + info.z * distance * distance);\n}\n\n"},function(e,t){e.exports="#define GLSLIFY 1\nfloat unpackFloat(vec4 rgbaDepth) {\n    const vec4 bitShift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n    float depth = dot(rgbaDepth, bitShift);\n    return depth;\n}\n\n"},function(e,t){e.exports="#define GLSLIFY 1\nbool isOutOfRange(vec2 pos) {\n    if (pos.x < 0.0 || pos.x > 1.0 || pos.y < 0.0 || pos.y > 1.0) {\n        return true;\n    }\n    return false;\n}\n\nfloat getShadow(sampler2D shadowMap, vec2 shadowMapSize, float bias, vec3 fragPos, mat4 lightSpaceMatrix) {\n    vec4 fragPosLightSpace = lightSpaceMatrix * vec4(fragPos, 1.0);\n    vec3 projCoords = fragPosLightSpace.xyz / fragPosLightSpace.w;\n    projCoords = projCoords * 0.5 + 0.5;\n    if (isOutOfRange(projCoords.xy)) {\n        return 1.0;\n    }\n    float currentDepth = projCoords.z;\n    float shadow = 0.0;\n    vec2 texelSize = 1.0 / shadowMapSize;\n    for (int x = -1; x <= 1; ++x) {\n        for (int y = -1; y <= 1; ++y) {\n            vec2 pos = projCoords.xy + vec2(x, y) * texelSize;\n            if (isOutOfRange(pos)) {\n                shadow += 1.0;\n            } else {\n                float pcfDepth = texture2D(shadowMap, pos).r;\n                shadow += currentDepth - bias > pcfDepth ? 1.0 : 0.0;\n            }\n        }\n    }\n    return 1.0 - shadow / 9.0;\n}\n\nfloat getShadow(samplerCube shadowMap, float bias, vec3 distanceVec, mat4 lightSpaceMatrix) {\n    float currentDistance = length(distanceVec);\n    vec3 direction = normalize(( lightSpaceMatrix * vec4(-distanceVec, 1.0) ).xyz);\n\n    float shadow = 0.0;\n    const float samples = 2.0;\n    const float offset = 0.01;\n    const float step = offset / (samples * 0.5);\n    for(float x = -offset; x < offset; x +=step)\n    {\n        for(float y = -offset; y < offset; y +=step)\n        {\n            for(float z = -offset; z < offset; z +=step)\n            {\n                float closestDistance = unpackFloat(textureCube(shadowMap, direction + vec3(x, y, z)));\n                if(currentDistance - bias > closestDistance)\n                    shadow += 1.0;\n            }\n        }\n    }\n    shadow /= (samples * samples * samples);\n\n    return 1.0 - shadow;\n}\n\n"},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(55)+"\n\n#ifdef HILO_HAS_LIGHT\n    #ifdef HILO_HAS_SPECULAR\n        uniform float u_shininess;\n        #ifdef HILO_SPECULAR_MAP\n            uniform hiloSampler2D u_specular;\n        #else\n            uniform vec4 u_specular;\n        #endif\n    #endif\n    #ifdef HILO_EMISSION_MAP\n        uniform hiloSampler2D u_emission;\n    #else\n        uniform vec4 u_emission;\n    #endif\n    #ifdef HILO_AMBIENT_MAP\n        uniform hiloSampler2D u_ambient;\n    #endif\n    #ifdef HILO_SPECULAR_ENV_MAP\n        #ifdef HILO_SPECULAR_ENV_MAP_CUBE\n            uniform samplerCube u_specularEnvMap;\n        #else\n            uniform sampler2D u_specularEnvMap;\n        #endif\n        uniform mat4 u_specularEnvMatrix;\n        uniform float u_reflectivity;\n        uniform float u_refractRatio;\n        uniform float u_refractivity;\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(HILO_DIFFUSE_MAP)\n    diffuse = HILO_TEXTURE_2D(u_diffuse);\n#elif defined(HILO_DIFFUSE_CUBE_MAP)\n    diffuse = textureCube(u_diffuse, v_position);\n#elif defined(HILO_HAS_COLOR)\n    diffuse = v_color;\n#else\n    diffuse = u_diffuse;\n#endif\ncolor.a = diffuse.a;"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_LIGHT\n    vec3 lightDiffuse = vec3(0, 0, 0);\n    vec3 lightAmbient = vec3(0, 0, 0);\n    vec3 viewPos = vec3(0, 0, 0);\n\n    #ifdef HILO_AMBIENT_MAP\n        lightAmbient = HILO_TEXTURE_2D(u_ambient).rgb;\n    #else\n        lightAmbient = diffuse.rgb;\n    #endif\n\n    #ifdef HILO_HAS_SPECULAR\n        vec3 lightSpecular = vec3(0, 0, 0);\n        #ifdef HILO_SPECULAR_MAP\n            vec4 specular = HILO_TEXTURE_2D(u_specular);\n        #else\n            vec4 specular = u_specular;\n        #endif\n    #endif\n    \n    #ifdef HILO_EMISSION_MAP\n        vec4 emission = HILO_TEXTURE_2D(u_emission);\n    #else\n        vec4 emission = u_emission;\n    #endif\n\n    #ifdef HILO_DIRECTIONAL_LIGHTS\n        for(int i = 0;i < HILO_DIRECTIONAL_LIGHTS;i++){\n            vec3 lightDir = -u_directionalLightsInfo[i];\n\n            float shadow = 1.0;\n            #ifdef HILO_DIRECTIONAL_LIGHTS_SMC\n                if (i < HILO_DIRECTIONAL_LIGHTS_SMC) {\n                    float bias = max(u_directionalLightsShadowBias[i][1] * (1.0 - dot(normal, lightDir)), u_directionalLightsShadowBias[i][0]);\n                    shadow = getShadow(u_directionalLightsShadowMap[i], u_directionalLightsShadowMapSize[i], bias, v_fragPos, u_directionalLightSpaceMatrix[i]);\n                }\n            #endif\n\n            float diff = getDiffuse(normal, lightDir);\n            lightDiffuse += diff * u_directionalLightsColor[i] * shadow;\n\n            #ifdef HILO_HAS_SPECULAR\n                float spec = getSpecular(viewPos, v_fragPos, lightDir, normal, u_shininess);\n                lightSpecular += spec * u_directionalLightsColor[i] * shadow;\n            #endif\n        }\n    #endif\n\n    #ifdef HILO_SPOT_LIGHTS\n        for(int i = 0; i < HILO_SPOT_LIGHTS; i++){\n            vec3 lightDir = -u_spotLightsDir[i];\n            vec3 distanceVec = u_spotLightsPos[i] - v_fragPos;\n\n            float shadow = 1.0;\n            #ifdef HILO_SPOT_LIGHTS_SMC\n                if (i < HILO_SPOT_LIGHTS_SMC) {\n                    float bias = max(u_spotLightsShadowBias[i][1] * (1.0 - dot(normal, lightDir)), u_spotLightsShadowBias[i][0]);\n                    shadow = getShadow(u_spotLightsShadowMap[i], u_spotLightsShadowMapSize[i], bias, v_fragPos, u_spotLightSpaceMatrix[i]);\n                }\n            #endif\n            \n            float diff = getDiffuse(normal, normalize(distanceVec));\n            float theta = dot(normalize(distanceVec), lightDir);\n            float epsilon = u_spotLightsCutoffs[i][0] - u_spotLightsCutoffs[i][1];\n            float intensity = clamp((theta - u_spotLightsCutoffs[i][1]) / epsilon, 0.0, 1.0);\n            float attenuation = getLightAttenuation(distanceVec, u_spotLightsInfo[i]);\n\n            lightDiffuse += intensity * attenuation * shadow * diff * u_spotLightsColor[i];\n\n            #ifdef HILO_HAS_SPECULAR\n                float spec = getSpecular(viewPos, v_fragPos, lightDir, normal, u_shininess);\n                lightSpecular += intensity * attenuation * shadow * spec * u_spotLightsColor[i];\n            #endif\n        }\n    #endif\n\n    #ifdef HILO_POINT_LIGHTS\n        for(int i = 0;i < HILO_POINT_LIGHTS;i++){\n            vec3 distanceVec = u_pointLightsPos[i] - v_fragPos;\n            vec3 lightDir = normalize(distanceVec);\n\n            float shadow = 1.0;\n            #ifdef HILO_POINT_LIGHTS_SMC\n                if (i < HILO_POINT_LIGHTS_SMC) {\n                    float bias = max(u_pointLightsShadowBias[i][1] * (1.0 - dot(normal, lightDir)), u_pointLightsShadowBias[i][0]);\n                    shadow = getShadow(u_pointLightsShadowMap[i], bias, distanceVec, u_pointLightSpaceMatrix[i]);\n                }\n            #endif\n            \n            float diff = getDiffuse(normal, lightDir);\n            float attenuation = getLightAttenuation(distanceVec, u_pointLightsInfo[i]);\n            lightDiffuse += diff * attenuation * u_pointLightsColor[i] * shadow;\n\n            #ifdef HILO_HAS_SPECULAR\n                float spec = getSpecular(viewPos, v_fragPos, lightDir, normal, u_shininess);\n                lightSpecular += spec * attenuation * u_pointLightsColor[i] * shadow;\n            #endif\n        }\n    #endif\n\n    #ifdef HILO_AMBIENT_LIGHTS\n        color.rgb += u_ambientLightsColor * lightAmbient;\n    #endif\n\n    #if defined(HILO_SPECULAR_ENV_MAP) && defined(HILO_HAS_SPECULAR)\n        vec3 I = normalize(v_fragPos - viewPos);\n        if (u_reflectivity > 0.0) {\n            vec3 R = reflect(I, normal);\n            R = normalize(vec3(u_specularEnvMatrix * vec4(R, 1.0)));\n            lightSpecular += textureEnvMap(u_specularEnvMap, R).rgb * u_reflectivity;\n        }\n        if (u_refractivity > 0.0) {\n            vec3 R = refract(I, normal, u_refractRatio);\n            R = normalize(vec3(u_specularEnvMatrix * vec4(R, 1.0)));\n            lightSpecular += textureEnvMap(u_specularEnvMap, R).rgb * u_refractivity;\n        }\n    #endif\n\n    color.rgb += lightDiffuse * diffuse.rgb;\n    #ifdef HILO_HAS_SPECULAR\n        color.rgb += lightSpecular * specular.rgb;\n    #endif\n\n    color.rgb += emission.rgb;\n#else\n    color = diffuse;\n#endif"},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(63)+"\n"+n(17)+"\n"+n(64)+"\n\nattribute vec3 a_position;\nuniform mat4 u_modelViewProjectionMatrix;\n\n"+n(100)+"\n"+n(101)+"\n"+n(102)+"\n"+n(103)+"\n"+n(104)+"\n"+n(105)+"\n"+n(106)+"\n"+n(107)+"\nvoid main(void) {\n    vec4 pos = vec4(a_position, 1.0);\n    #ifdef HILO_HAS_TEXCOORD0\n        vec2 uv = a_texcoord0;\n    #endif\n    #ifdef HILO_HAS_TEXCOORD1\n        vec2 uv1 = a_texcoord1;\n    #endif\n    #ifdef HILO_HAS_NORMAL\n        vec3 normal = a_normal;\n    #endif\n\n    #ifdef HILO_NORMAL_MAP\n        vec4 tangent = a_tangent;\n    #endif\n\n    "+n(108)+"\n    "+n(109)+"\n    "+n(110)+"\n    "+n(111)+"\n    "+n(112)+"\n    "+n(113)+"\n    "+n(114)+"\n\n    gl_Position = u_modelViewProjectionMatrix * pos;\n\n    "+n(115)+"\n}"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_QUANTIZED\n    #ifdef HILO_POSITION_QUANTIZED\n        uniform mat4 u_positionDecodeMat;\n    #endif\n    #ifdef HILO_NORMAL_QUANTIZED\n        uniform mat4 u_normalDecodeMat;\n    #endif\n    #ifdef HILO_UV_QUANTIZED\n        uniform mat3 u_uvDecodeMat;\n    #endif\n    #ifdef HILO_UV1_QUANTIZED\n        uniform mat3 u_uv1DecodeMat;\n    #endif\n\n    vec2 unQuantize(vec2 data, mat3 decodeMat) {\n        vec3 result = vec3(data, 1.0);\n        result = decodeMat * result;\n        return result.xy;\n    }\n\n    vec3 unQuantize(vec3 data, mat4 decodeMat) {\n        vec4 result = vec4(data, 1.0);\n        result = decodeMat * result;\n        return result.xyz;\n    }\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_JOINT_COUNT\n    attribute vec4 a_skinIndices;\n    attribute vec4 a_skinWeights;\n    #ifdef HILO_JOINT_MAT_MAP\n        uniform sampler2D u_jointMatTexture;\n        uniform vec2 u_jointMatTextureSize;\n        mat4 getJointMat(float index) {\n            index *= 4.0;\n            float x = float(mod(index, u_jointMatTextureSize.x));\n            float y = float(floor(index / u_jointMatTextureSize.x));\n            float dx = 1.0 / float(u_jointMatTextureSize.x);\n            float dy = 1.0 / float(u_jointMatTextureSize.y);\n            y = dy * (y + 0.5);\n            vec4 v1 = texture2D(u_jointMatTexture, vec2(dx * (x + 0.5), y));\n            vec4 v2 = texture2D(u_jointMatTexture, vec2(dx * (x + 1.5), y));\n            vec4 v3 = texture2D(u_jointMatTexture, vec2(dx * (x + 2.5), y));\n            vec4 v4 = texture2D(u_jointMatTexture, vec2(dx * (x + 3.5), y));\n            mat4 mat = mat4(v1, v2, v3, v4);\n            return mat;\n        }\n\n        mat4 getJointMat(vec4 weights, vec4 indices) {\n            mat4 mat = weights.x * getJointMat(indices.x);\n            mat += weights.y * getJointMat(indices.y);\n            mat += weights.z * getJointMat(indices.z);\n            mat += weights.w * getJointMat(indices.w);\n            return mat;\n        }\n    #else\n        uniform mat4 u_jointMat[HILO_JOINT_COUNT];\n       \n        mat4 getJointMat(vec4 weights, vec4 indices) {\n            mat4 mat = weights.x * u_jointMat[int(indices.x)];\n            mat += weights.y * u_jointMat[int(indices.y)];\n            mat += weights.z * u_jointMat[int(indices.z)];\n            mat += weights.w * u_jointMat[int(indices.w)];\n            return mat;\n        }\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_TEXCOORD0\n    attribute vec2 a_texcoord0;\n    varying vec2 v_texcoord0;\n    #ifdef HILO_UV_MATRIX\n        uniform mat3 u_uvMatrix;\n    #endif\n#endif\n\n#ifdef HILO_HAS_TEXCOORD1\n    attribute vec2 a_texcoord1;\n    varying vec2 v_texcoord1;\n    #ifdef HILO_UV_MATRIX\n        uniform mat3 u_uvMatrix1;\n    #endif\n#endif\n\n#ifdef HILO_DIFFUSE_CUBE_MAP\n    varying vec3 v_position;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_NORMAL\n    attribute vec3 a_normal;\n    uniform mat3 u_normalMatrix;\n    varying vec3 v_normal;\n\n    #ifdef HILO_NORMAL_MAP\n        attribute vec4 a_tangent;\n        varying mat3 v_TBN;\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(HILO_HAS_LIGHT) || defined(HILO_HAS_FOG) || defined(HILO_HAS_FRAG_POS)\n    uniform mat4 u_modelViewMatrix;\n    #ifdef HILO_HAS_FOG\n        varying float v_dist;\n    #endif\n\n    #if defined(HILO_HAS_LIGHT) || defined(HILO_HAS_FRAG_POS) \n        varying vec3 v_fragPos;\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_MORPH_TARGET_COUNT\n    uniform float u_morphWeights[HILO_MORPH_TARGET_COUNT];\n\n    #if HILO_MORPH_TARGET_COUNT > 0\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition0;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal0;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent0;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 1\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition1;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal1;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent1;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 2\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition2;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal2;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent2;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 3\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition3;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal3;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent3;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 4\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition4;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal4;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent4;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 5\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition5;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal5;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent5;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 6\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition6;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal6;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent6;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 7\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition7;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal7;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent7;\n        #endif\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_COLOR\n    #if HILO_COLOR_SIZE == 3\n        attribute vec3 a_color;\n    #elif HILO_COLOR_SIZE == 4\n        attribute vec4 a_color;\n    #endif\n    varying vec4 v_color;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_USE_LOG_DEPTH\n    #ifdef HILO_USE_EXT_FRAG_DEPTH\n        varying float v_fragDepth;\n    #else\n        uniform float u_logDepth;\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_COLOR\n    #if HILO_COLOR_SIZE == 3\n        v_color = vec4(a_color, 1.0);\n    #elif HILO_COLOR_SIZE == 4\n        v_color = a_color;\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_QUANTIZED\n    #ifdef HILO_POSITION_QUANTIZED\n        pos.xyz = unQuantize(pos.xyz, u_positionDecodeMat);\n    #endif\n    #if defined(HILO_HAS_TEXCOORD0) && defined(HILO_UV_QUANTIZED)\n        uv = unQuantize(uv, u_uvDecodeMat);\n    #endif\n    #if defined(HILO_HAS_TEXCOORD1) && defined(HILO_UV1_QUANTIZED)\n        uv1 = unQuantize(uv1, u_uv1DecodeMat);\n    #endif\n    #if defined(HILO_HAS_NORMAL) && defined(HILO_NORMAL_QUANTIZED)\n        normal = unQuantize(normal, u_normalDecodeMat);\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_MORPH_TARGET_COUNT\n    #if HILO_MORPH_TARGET_COUNT > 0\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition0 * u_morphWeights[0];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal0 * u_morphWeights[0];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent0 * u_morphWeights[0];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 1\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition1 * u_morphWeights[1];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal1 * u_morphWeights[1];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent1 * u_morphWeights[1];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 2\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition2 * u_morphWeights[2];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal2 * u_morphWeights[2];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent2 * u_morphWeights[2];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 3\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition3 * u_morphWeights[3];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal3 * u_morphWeights[3];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent3 * u_morphWeights[3];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 4\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition4 * u_morphWeights[4];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal4 * u_morphWeights[4];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent4 * u_morphWeights[4];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 5\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition5 * u_morphWeights[5];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal5 * u_morphWeights[5];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent5 * u_morphWeights[5];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 6\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition6 * u_morphWeights[6];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal6 * u_morphWeights[6];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent6 * u_morphWeights[6];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 7\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition7 * u_morphWeights[7];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal7 * u_morphWeights[7];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent7 * u_morphWeights[7];\n        #endif\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_JOINT_COUNT\n    mat4 skinMat = getJointMat(a_skinWeights, a_skinIndices);\n    pos = skinMat * pos;\n\n    #ifdef HILO_HAS_NORMAL\n        normal = mat3(skinMat) * normal;\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_TEXCOORD0\n    #ifdef HILO_UV_MATRIX\n        v_texcoord0 = (u_uvMatrix * vec3(uv, 1.0)).xy;\n    #else\n        v_texcoord0 = uv;\n    #endif\n#endif\n#ifdef HILO_HAS_TEXCOORD1\n    #ifdef HILO_UV_MATRIX\n        v_texcoord1 = (u_uvMatrix1 * vec3(uv1, 1.0)).xy;\n    #else\n        v_texcoord1 = uv1;\n    #endif\n#endif\n#ifdef HILO_DIFFUSE_CUBE_MAP\n    v_position = pos.xyz;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_NORMAL\n    #ifdef HILO_NORMAL_MAP\n        vec3 T = normalize(u_normalMatrix * tangent.xyz);\n        vec3 N = normalize(u_normalMatrix * normal);\n        T = normalize(T - dot(T, N) * N);\n        vec3 B = cross(N, T) * tangent.w;\n        v_TBN = mat3(T, B, N);\n    #endif\n    v_normal = normalize(u_normalMatrix * normal);\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(HILO_HAS_LIGHT) || defined(HILO_HAS_FOG) || defined(HILO_HAS_FRAG_POS)\n    vec3 fragPos = (u_modelViewMatrix * pos).xyz;\n\n    #if defined(HILO_HAS_LIGHT) || defined(HILO_HAS_FRAG_POS)\n        v_fragPos = fragPos;\n    #endif\n\n    #ifdef HILO_HAS_FOG\n        v_dist = length(fragPos);\n    #endif\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef HILO_USE_LOG_DEPTH\n    #ifdef HILO_USE_EXT_FRAG_DEPTH\n        v_fragDepth = 1.0 + gl_Position.w;\n    #else\n        gl_Position.z = log2( max( 1e-6, gl_Position.w + 1.0 ) ) * u_logDepth - 1.0;\n        gl_Position.z *= gl_Position.w;\n    #endif\n#endif"},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(27)+"\n"+n(17)+"\n"+n(28)+"\n\n#if defined(HILO_VERTEX_TYPE_POSITION)\n    varying vec3 v_fragPos;\n#elif defined(HILO_VERTEX_TYPE_NORMAL)\n    varying vec3 v_normal;\n#elif defined(HILO_VERTEX_TYPE_DEPTH)\n    uniform float u_cameraFar;\n    uniform float u_cameraNear;\n    uniform float u_cameraType;\n#elif defined(HILO_VERTEX_TYPE_DISTANCE)\n    "+n(117)+"\n\n    uniform float u_cameraFar;\n    uniform float u_cameraNear;\n    varying vec3 v_fragPos;\n#endif\n\nvec4 transformDataToColor(vec3 data){\n    #ifdef HILO_WRITE_ORIGIN_DATA\n        return vec4(data, 1.0);\n    #else\n        return vec4(data * 0.5 + 0.5, 1.0);\n    #endif\n}\n\n"+n(35)+"\n\nvoid main(void) {\n    #if defined(HILO_VERTEX_TYPE_POSITION)\n        gl_FragColor = transformDataToColor(v_fragPos);\n    #elif defined(HILO_VERTEX_TYPE_NORMAL)\n        gl_FragColor = transformDataToColor(v_normal);\n    #elif defined(HILO_VERTEX_TYPE_DEPTH)\n        float z;\n        #ifdef HILO_WRITE_ORIGIN_DATA\n            z = gl_FragCoord.z;\n        #else\n            // OrthographicCamera\n            if(u_cameraType < 1.0){\n                z = gl_FragCoord.z;\n            }\n            // PerspectiveCamera\n            else{\n                z = gl_FragCoord.z * 2.0 - 1.0;\n                z = (2.0 * u_cameraNear * u_cameraFar) / (u_cameraFar + u_cameraNear - z * (u_cameraFar - u_cameraNear));\n            }\n        #endif\n        gl_FragColor = vec4(z, z, z, 1.0);\n    #elif defined(HILO_VERTEX_TYPE_DISTANCE)\n        float distance = length(v_fragPos);\n        #ifdef HILO_WRITE_ORIGIN_DATA\n            gl_FragColor = vec4(distance, distance, distance, 1.0);\n        #else\n            gl_FragColor = packFloat(distance);\n        #endif\n    #endif\n    "+n(36)+"\n}"},function(e,t){e.exports="#define GLSLIFY 1\n// https://github.com/playcanvas/engine/blob/master/src/graphics/program-lib/chunks/packDepth.frag\n// Packing a float in GLSL with multiplication and mod\n// http://blog.gradientstudios.com/2012/08/23/shadow-map-improvement\nvec4 packFloat(float depth) {\n    const vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    const vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n\n    // combination of mod and multiplication and division works better\n    vec4 res = mod(depth * bit_shift * vec4(255), vec4(256) ) / vec4(255);\n    res -= res.xxyz * bit_mask;\n    return res;\n}\n\n\n\n"},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(27)+"\n"+n(17)+"\n"+n(28)+"\n\n"+n(50)+"\n"+n(51)+"\n"+n(52)+"\n"+n(53)+"\n"+n(119)+"\n"+n(54)+"\n"+n(56)+"\n"+n(57)+"\n"+n(35)+"\n\nvoid main(void) {\n    vec4 color = vec4(0., 0., 0., 1.);\n\n    "+n(58)+"\n    "+n(59)+"\n    "+n(121)+"\n    "+n(61)+"\n    "+n(62)+"\n    "+n(36)+"\n}"},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(55)+"\n"+n(120)+'\n\nuniform vec4 u_baseColor;\n#ifdef HILO_BASE_COLOR_MAP\n    uniform hiloSampler2D u_baseColorMap;\n#endif\n\n#ifdef HILO_HAS_LIGHT\n    uniform float u_metallic;\n    #ifdef HILO_METALLIC_MAP\n        uniform hiloSampler2D u_metallicMap;\n    #endif\n        uniform float u_roughness;\n    #ifdef HILO_ROUGHNESS_MAP\n        uniform hiloSampler2D u_roughnessMap;\n    #endif\n    #ifdef HILO_METALLIC_ROUGHNESS_MAP\n        uniform hiloSampler2D u_metallicRoughnessMap;\n    #endif\n    #ifdef HILO_OCCLUSION_MAP\n        uniform hiloSampler2D u_occlusionMap;\n    #endif\n\n    #ifdef HILO_OCCLUSION_STRENGTH\n        uniform float u_occlusionStrength;\n    #endif\n\n    #ifdef HILO_DIFFUSE_ENV_MAP\n        #ifdef HILO_DIFFUSE_ENV_MAP_CUBE\n            uniform samplerCube u_diffuseEnvMap;\n        #else\n            uniform sampler2D u_diffuseEnvMap;\n        #endif\n    #endif\n    #ifdef HILO_SPECULAR_ENV_MAP\n        uniform sampler2D u_brdfLUT;\n        #ifdef HILO_SPECULAR_ENV_MAP_CUBE\n            uniform samplerCube u_specularEnvMap;\n        #else\n            uniform sampler2D u_specularEnvMap;\n        #endif\n    #endif\n\n    #ifdef HILO_EMISSION_MAP\n        uniform hiloSampler2D u_emission;\n    #endif\n\n    #ifdef HILO_PBR_SPECULAR_GLOSSINESS\n        uniform vec4 u_specular;\n        uniform float u_glossiness;\n        #ifdef HILO_SPECULAR_GLOSSINESS_MAP\n            uniform hiloSampler2D u_specularGlossinessMap;\n        #endif\n    #endif\n\n    #ifdef HILO_LIGHT_MAP\n        uniform hiloSampler2D u_lightMap;\n    #endif\n\n\n    // PBR Based on https://github.com/KhronosGroup/glTF-WebGL-PBR\n\n    // Basic Lambertian diffuse\n    // Implementation from Lambert\'s Photometria https://archive.org/details/lambertsphotome00lambgoog\n    // See also [1], Equation 1\n    vec3 diffuse(vec3 diffuseColor) {\n        return diffuseColor * HILO_INVERSE_PI;\n    }\n\n    // The following equation models the Fresnel reflectance term of the spec equation (aka F())\n    // Implementation of fresnel from [4], Equation 15\n    vec3 specularReflection(vec3 reflectance0, vec3 reflectance90, float VdotH) {\n        return reflectance0 + (reflectance90 - reflectance0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);\n    }\n\n    // This calculates the specular geometric attenuation (aka G()),\n    // where rougher material will reflect less light back to the viewer.\n    // This implementation is based on [1] Equation 4, and we adopt their modifications to\n    // alphaRoughness as input as originally proposed in [2].\n    float geometricOcclusion(float NdotL, float NdotV, float alphaRoughness) {\n        float r = alphaRoughness * alphaRoughness;\n\n        float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r + (1.0 - r) * (NdotL * NdotL)));\n        float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r + (1.0 - r) * (NdotV * NdotV)));\n        return attenuationL * attenuationV;\n    }\n\n    // The following equation(s) model the distribution of microfacet normals across the area being drawn (aka D())\n    // Implementation from "Average Irregularity Representation of a Roughened Surface for Ray Reflection" by T. S. Trowbridge, and K. P. Reitz\n    // Follows the distribution function recommended in the SIGGRAPH 2013 course notes from EPIC Games [1], Equation 3.\n    float microfacetDistribution(float alphaRoughness, float NdotH) {\n        float roughnessSq = alphaRoughness * alphaRoughness;\n        float f = (NdotH * roughnessSq - NdotH) * NdotH + 1.0;\n        return roughnessSq * HILO_INVERSE_PI / (f * f);\n    }\n\n    vec3 getIBLContribution(vec3 N, vec3 V, vec3 diffuseColor, vec3 specularColor, float ao, float NdotV, float perceptualRoughness) {\n        vec3 color = vec3(.0, .0, .0);\n        #ifdef HILO_DIFFUSE_ENV_MAP\n            vec3 diffuseLight = textureEnvMap(u_diffuseEnvMap, N).rgb;\n            color.rgb += diffuseLight * diffuseColor * ao;\n        #endif\n\n        #ifdef HILO_SPECULAR_ENV_MAP\n            vec3 R = -normalize(reflect(V, N));\n            vec3 brdf = texture2D(u_brdfLUT, vec2(NdotV, 1.0 - perceptualRoughness)).rgb;\n            #ifdef HILO_USE_SHADER_TEXTURE_LOD\n                float mipCount = 10.0; // resolution of 1024*1024\n                float lod = perceptualRoughness * mipCount;\n                vec3 specularLight = textureEnvMapLod(u_specularEnvMap, R, lod).rgb;\n            #else\n                vec3 specularLight = textureEnvMap(u_specularEnvMap, R).rgb;\n            #endif\n            color.rgb += specularLight * (specularColor * brdf.x + brdf.y);\n        #endif\n        return color;\n    }\n\n    vec3 calculateLo(vec3 N, vec3 V, vec3 L, vec3 reflectance0, vec3 reflectance90, float alphaRoughness, vec3 diffuseColor, float NdotV) {\n        vec3 H = normalize(L + V);\n        float NdotL = clamp(dot(N, L), 0.001, 1.0);\n        float NdotH = clamp(dot(N, H), 0.0, 1.0);\n        float LdotH = clamp(dot(L, H), 0.0, 1.0);\n        float VdotH = clamp(dot(V, H), 0.0, 1.0);\n        // Calculate the shading terms for the microfacet specular shading model\n        vec3 F = specularReflection(reflectance0, reflectance90, VdotH);\n        float G = geometricOcclusion(NdotL, NdotV, alphaRoughness);\n        float D = microfacetDistribution(alphaRoughness, NdotH);\n\n        vec3 diffuseContrib;\n\n        #ifdef HILO_LIGHT_MAP\n            diffuseContrib = vec3(0.0);\n        #else\n            diffuseContrib = (1.0 - F) * diffuse(diffuseColor);\n        #endif\n        vec3 specContrib = F * G * D / (4.0 * NdotL * NdotV);\n        // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n        return NdotL * (diffuseContrib + specContrib);\n    }\n#endif'},function(e,t){e.exports="#define GLSLIFY 1\nvec4 sRGBToLinear( in vec4 value ) {\n    return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\n\n"},function(e,t,n){e.exports="#define GLSLIFY 1\nvec4 baseColor = u_baseColor;\n#ifdef HILO_BASE_COLOR_MAP\n    #ifdef HILO_GAMMA_OUTPUT\n        baseColor *= sRGBToLinear(HILO_TEXTURE_2D(u_baseColorMap));\n    #else\n        baseColor *= HILO_TEXTURE_2D(u_baseColorMap);\n    #endif\n#endif\n\n#if defined(HILO_HAS_COLOR)\n    baseColor *= v_color;\n#endif\n\ncolor.a = baseColor.a;\n\n"+n(60)+"\n\n#ifdef HILO_HAS_LIGHT\n    vec3 viewPos = vec3(0, 0, 0);\n    vec3 N = normal;\n    vec3 V = normalize(viewPos - v_fragPos);\n\n    #ifdef HILO_OCCLUSION_MAP\n        float ao  = HILO_TEXTURE_2D(u_occlusionMap).r;\n    #else\n        float ao = 1.0;\n    #endif\n\n    #ifdef HILO_PBR_SPECULAR_GLOSSINESS\n        vec3 specular = u_specular.rgb;\n        float glossiness = u_glossiness;\n        #ifdef HILO_SPECULAR_GLOSSINESS_MAP\n            vec4 specularGlossiness = HILO_TEXTURE_2D(u_specularGlossinessMap);\n            specular = specularGlossiness.rgb * specular;\n            glossiness = specularGlossiness.a * glossiness;\n        #endif\n        float roughness = 1.0 - glossiness;\n        float metallic = 0.0;\n        vec3 diffuseColor = baseColor.rgb * (1.0 - max(max(specular.r, specular.g), specular.b));\n        vec3 specularColor = specular;\n    #else\n        float metallic = u_metallic;\n        float roughness = u_roughness;\n        #ifdef HILO_METALLIC_MAP\n            metallic = HILO_TEXTURE_2D(u_metallicMap).r * u_metallic;\n        #endif\n        #ifdef HILO_ROUGHNESS_MAP\n            roughness  = HILO_TEXTURE_2D(u_roughnessMap).r * u_roughness;\n        #endif\n        #ifdef HILO_METALLIC_ROUGHNESS_MAP\n            vec4 metallicRoughnessMap = HILO_TEXTURE_2D(u_metallicRoughnessMap);\n            #ifdef HILO_IS_OCCLUSION_MAP_IN_METALLIC_ROUGHNESS_MAP\n                ao = metallicRoughnessMap.r;\n            #endif\n            roughness = metallicRoughnessMap.g * u_roughness;\n            metallic = metallicRoughnessMap.b * u_metallic;\n        #endif\n        roughness = clamp(roughness, 0.04, 1.0);\n        metallic = clamp(metallic, 0.0, 1.0);\n        vec3 f0 = vec3(0.04);\n        vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n        diffuseColor *= 1.0 - metallic;\n        vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    #endif\n\n    #ifdef HILO_OCCLUSION_STRENGTH\n        ao = mix(1.0, ao, u_occlusionStrength);\n    #endif\n\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n    // For typical incident reflectance range (between 4% to 100%) set the grazing reflectance to 100% for typical fresnel effect.\n    // For very low reflectance range on highly diffuse objects (below 4%), incrementally reduce grazing reflecance to 0%.\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    float NdotV = clamp(abs(dot(N, V)), 0.001, 1.0);\n    float alphaRoughness = roughness * roughness;\n\n    #ifdef HILO_DIRECTIONAL_LIGHTS\n        for(int i = 0;i < HILO_DIRECTIONAL_LIGHTS;i++){\n            vec3 lightDir = normalize(-u_directionalLightsInfo[i]);\n            vec3 radiance = u_directionalLightsColor[i];\n            float shadow = 1.0;\n            #ifdef HILO_DIRECTIONAL_LIGHTS_SMC\n                if (i < HILO_DIRECTIONAL_LIGHTS_SMC) {\n                    float bias = max(u_directionalLightsShadowBias[i][1] * (1.0 - dot(N, lightDir)), u_directionalLightsShadowBias[i][0]);\n                    shadow = getShadow(u_directionalLightsShadowMap[i], u_directionalLightsShadowMapSize[i], bias, v_fragPos, u_directionalLightSpaceMatrix[i]);\n                }\n            #endif\n            color.rgb += shadow * radiance * calculateLo(N, V, lightDir, specularEnvironmentR0, specularEnvironmentR90, alphaRoughness, diffuseColor, NdotV);\n        }\n    #endif\n\n    #ifdef HILO_SPOT_LIGHTS\n        for(int i = 0; i < HILO_SPOT_LIGHTS; i++){\n            vec3 lightDir = normalize(-u_spotLightsDir[i]);\n            vec3 distanceVec = u_spotLightsPos[i] - v_fragPos;\n\n            float theta = dot(normalize(distanceVec), lightDir);\n            float epsilon = u_spotLightsCutoffs[i][0] - u_spotLightsCutoffs[i][1];\n            float intensity = clamp((theta - u_spotLightsCutoffs[i][1]) / epsilon, 0.0, 1.0);\n            float attenuation = getLightAttenuation(distanceVec, u_spotLightsInfo[i]);\n            vec3 radiance = intensity * attenuation * u_spotLightsColor[i];\n\n            float shadow = 1.0;\n            #ifdef HILO_SPOT_LIGHTS_SMC\n                if (i < HILO_SPOT_LIGHTS_SMC) {\n                    float bias = max(u_spotLightsShadowBias[i][1] * (1.0 - dot(N, lightDir)), u_spotLightsShadowBias[i][0]);\n                    shadow = getShadow(u_spotLightsShadowMap[i], u_spotLightsShadowMapSize[i], bias, v_fragPos, u_spotLightSpaceMatrix[i]);\n                }\n            #endif\n            color.rgb += shadow * radiance * calculateLo(N, V, lightDir, specularEnvironmentR0, specularEnvironmentR90, alphaRoughness, diffuseColor, NdotV);\n        }\n    #endif\n\n    #ifdef HILO_POINT_LIGHTS\n        for(int i = 0; i < HILO_POINT_LIGHTS; i++){\n            vec3 distanceVec = u_pointLightsPos[i] - v_fragPos;\n            vec3 lightDir = normalize(distanceVec);\n\n            float shadow = 1.0;\n            #ifdef HILO_POINT_LIGHTS_SMC\n                if (i < HILO_POINT_LIGHTS_SMC) {\n                    float bias = max(u_pointLightsShadowBias[i][1] * (1.0 - dot(normal, lightDir)), u_pointLightsShadowBias[i][0]);\n                    shadow = getShadow(u_pointLightsShadowMap[i], bias, distanceVec, u_pointLightSpaceMatrix[i]);\n                }\n            #endif\n\n            float attenuation = getLightAttenuation(distanceVec, u_pointLightsInfo[i]);\n            vec3 radiance = attenuation * u_pointLightsColor[i];\n\n            color.rgb += shadow * radiance * calculateLo(N, V, lightDir, specularEnvironmentR0, specularEnvironmentR90, alphaRoughness, diffuseColor, NdotV);\n        }\n    #endif\n\n    #ifdef HILO_LIGHT_MAP\n        color.rgb += baseColor.rgb * HILO_TEXTURE_2D(u_lightMap).rgb;\n    #endif\n\n    // IBL\n    color.rgb += getIBLContribution(N, V, diffuseColor, specularColor, ao, NdotV, roughness);\n\n    #if defined(HILO_AMBIENT_LIGHTS) && !defined(HILO_DIFFUSE_ENV_MAP)\n        color.rgb += u_ambientLightsColor * baseColor.rgb * ao;\n    #endif\n\n    #ifdef HILO_EMISSION_MAP\n        #ifdef HILO_GAMMA_OUTPUT\n            color.rgb += sRGBToLinear(HILO_TEXTURE_2D(u_emission)).rgb;\n        #else\n            color.rgb += HILO_TEXTURE_2D(u_emission).rgb;\n        #endif\n    #endif\n#else\n    color = baseColor;\n#endif"},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(27)+"\n"+n(17)+"\n"+n(28)+"\n\nvarying vec2 v_texcoord0;\nuniform sampler2D u_diffuse;\n\nvoid main(void) {  \n    gl_FragColor = texture2D(u_diffuse, v_texcoord0);\n}"},function(e,t,n){e.exports="#define GLSLIFY 1\n"+n(63)+"\n"+n(17)+"\n"+n(64)+"\n\nattribute vec2 a_position;\nattribute vec2 a_texcoord0;\nvarying vec2 v_texcoord0;\n\n\nvoid main(void) {\n    vec4 pos = vec4(a_position, 0.0, 1.0);\n    gl_Position = pos;\n    v_texcoord0 = a_texcoord0;\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({className:"RenderInfo",isRenderInfo:!0,constructor:function(){this.reset()},addFaceCount:function(e){this._currentFaceCount+=e},addDrawCount:function(e){this._currentDrawCount+=e},reset:function(){this.faceCount=Math.floor(this._currentFaceCount),this.drawCount=Math.floor(this._currentDrawCount),this._currentFaceCount=0,this._currentDrawCount=0}});t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(3)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var o=new i.default,u=r.default.create({className:"RenderList",isRenderList:!0,constructor:function(){this.dict={},this.transparentList=[]},reset:function(){this.dict={},this.transparentList.length=0},traverse:function(e){var t=this.dict;for(var n in t)e(t[n]);this.transparentList.forEach(function(t){e([t])})},addMesh:function(e,t){var n=e.material,r=e.geometry;if(n&&r){if(e.frustumTest&&!t.isMeshVisible(e))return;var i=n.id+"_"+r.id;if(e.instanceId=i,n.transparent)e.worldMatrix.getTranslation(o),o.transformMat4(t.viewProjectionMatrix),e._sortRenderZ=o.z,(0,a.insertToSortedArray)(this.transparentList,e,function(e,t){return t._sortRenderZ-e._sortRenderZ});else(this.dict[i]=this.dict[i]||[]).push(e)}else console.warn("Mesh must have material and geometry",e)}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({className:"WebGLState",isWebGLState:!0,systemFramebuffer:null,constructor:function(e){this.gl=e,this.reset()},reset:function(){this._dict={},this.activeTextureIndex=null,this.textureUnitDict={},this.currentFramebuffer=null,this.preFramebuffer=null,this._pixelStorei={}},enable:function(e){!0!==this._dict[e]&&(this._dict[e]=!0,this.gl.enable(e))},disable:function(e){!1!==this._dict[e]&&(this._dict[e]=!1,this.gl.disable(e))},bindFramebuffer:function(e,t){this.currentFramebuffer!==t&&(this.preFramebuffer=this.currentFramebuffer,this.currentFramebuffer=t,this.gl.bindFramebuffer(e,t))},bindSystemFramebuffer:function(){this.bindFramebuffer(this.gl.FRAMEBUFFER,this.systemFramebuffer)},useProgram:function(e){this.set1("useProgram",e)},depthFunc:function(e){this.set1("depthFunc",e)},depthMask:function(e){this.set1("depthMask",e)},clear:function(e){this.gl.clear(e)},depthRange:function(e,t){this.set2("depthRange",e,t)},stencilFunc:function(e,t,n){this.set3("stencilFunc",e,t,n)},stencilMask:function(e){this.set1("stencilMask",e)},stencilOp:function(e,t,n){this.set3("stencilOp",e,t,n)},colorMask:function(e,t,n,r){this.set4("colorMask",e,t,n,r)},cullFace:function(e){this.set1("cullFace",e)},frontFace:function(e){this.set1("frontFace",e)},blendFuncSeparate:function(e,t,n,r){this.set4("blendFuncSeparate",e,t,n,r)},blendEquationSeparate:function(e,t){this.set2("blendEquationSeparate",e,t)},pixelStorei:function(e,t){this._pixelStorei[e]!==t&&(this._pixelStorei[e]=t,this.gl.pixelStorei(e,t))},viewport:function(e,t,n,r){this.set4("viewport",e,t,n,r)},activeTexture:function(e){this.activeTextureIndex!==e&&(this.activeTextureIndex=e,this.gl.activeTexture(e))},bindTexture:function(e,t){var n=this.getActiveTextureUnit();n[e]!==t&&(n[e]=t,this.gl.bindTexture(e,t))},getActiveTextureUnit:function(){var e=this.textureUnitDict[this.activeTextureIndex];return e||(e=this.textureUnitDict[this.activeTextureIndex]={}),e},set1:function(e,t){this._dict[e]!==t&&(this._dict[e]=t,this.gl[e](t))},set2:function(e,t,n){var r=this._dict[e];r||(r=this._dict[e]=[]),r[0]===t&&r[1]===n||(r[0]=t,r[1]=n,this.gl[e](t,n))},set3:function(e,t,n,r){var i=this._dict[e];i||(i=this._dict[e]=[]),i[0]===t&&i[1]===n&&i[2]===r||(i[0]=t,i[1]=n,i[2]=r,this.gl[e](t,n,r))},set4:function(e,t,n,r,i){var a=this._dict[e];a||(a=this._dict[e]=[]),a[0]===t&&a[1]===n&&a[2]===r&&a[3]===i||(a[0]=t,a[1]=n,a[2]=r,a[3]=i,this.gl[e](t,n,r,i))},get:function(e){return this._dict[e]}});t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)).default.create({className:"WebGLResourceManager",isWebGLResourceManager:!0,hasUsedResource:!1,hasNeedDestroyResource:!1,constructor:function(e){Object.assign(this,e)},useResource:function(e,t){if(this.hasUsedResource=!0,e){var n=e.className+":"+e.id;this._usedResourceDict[n]||(this._usedResourceDict[n]=e,e.useResource&&e.useResource(this,t))}return t&&t.useResource(e),this},destroyIfNoRef:function(e){return this._needDestroyDict||(this._needDestroyDict={}),e&&(this.hasNeedDestroyResource=!0,this._needDestroyDict[e.className+":"+e.id]=e),this},destroyUnsuedResource:function(){if(!this.hasNeedDestroyResource)return this;var e=this._needDestroyDict,t=this._usedResourceDict;for(var n in e)if(!t[n]){var r=e[n];r&&r.destroy&&r.destroy()}return this._needDestroyDict={},this.hasNeedDestroyResource=!1,this},reset:function(){return this.hasUsedResource=!1,this._usedResourceDict={},this}});t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(6)),a=o(n(3)),s=n(5);function o(e){return e&&e.__esModule?e:{default:e}}var u=new i.default,c=new a.default,f=new Float32Array([0,0,0]),l=r.default.create({isLightManager:!0,className:"LightManager",constructor:function(e){this.ambientLights=[],this.directionalLights=[],this.pointLights=[],this.spotLights=[],this.lightInfo={AMBIENT_LIGHTS:0,POINT_LIGHTS:0,DIRECTIONAL_LIGHTS:0,SPOT_LIGHTS:0,uid:0},Object.assign(this,e)},getRenderOption:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;return(0,s.each)(this.lightInfo,function(r,i){if("uid"!==i&&r){t[i]=r,n=!0;var a=e.getShadowMapCount(i);a&&(t[i+"_SMC"]=a)}}),n&&(t.HAS_LIGHT=1),t},addLight:function(e){var t=null;e.isAmbientLight?t=this.ambientLights:e.isDirectionalLight?t=this.directionalLights:e.isPointLight?t=this.pointLights:e.isSpotLight?t=this.spotLights:console.warn("Not support this light:",e),t&&(e.shadow?t.unshift(e):t.push(e))},getDirectionalInfo:function(e){var t=[],n=[],r=[],i=[],a=[],s=[];this.directionalLights.forEach(function(o,c){var f=3*c;o.getRealColor().toRGBArray(t,f),o.getViewDirection(e).toArray(n,f),o.shadow&&o.lightShadow&&(r.push(o.lightShadow.framebuffer.texture),i.push(o.lightShadow.width),i.push(o.lightShadow.height),s.push(o.lightShadow.minBias,o.lightShadow.maxBias),u.copy(e.worldMatrix),u.premultiply(o.lightShadow.camera.viewProjectionMatrix),u.toArray(a,16*c))});var o={colors:new Float32Array(t),infos:new Float32Array(n)};return r.length&&(o.shadowMap=r,o.shadowMapSize=new Float32Array(i),o.shadowBias=new Float32Array(s),o.lightSpaceMatrix=new Float32Array(a)),o},getSpotInfo:function(e){var t=[],n=[],r=[],i=[],a=[],s=[],o=[],f=[],l=[];this.spotLights.forEach(function(h,d){var _=3*d;h.getRealColor().toRGBArray(t,_),h.toInfoArray(n,_),h.getViewDirection(e).toArray(i,_),a.push(h._cutoffCos,h._outerCutoffCos),e.getModelViewMatrix(h,u),u.getTranslation(c),c.toArray(r,_),h.shadow&&h.lightShadow&&(s.push(h.lightShadow.framebuffer.texture),o.push(h.lightShadow.width),o.push(h.lightShadow.height),l.push(h.lightShadow.minBias,h.lightShadow.maxBias),u.copy(e.worldMatrix),u.premultiply(h.lightShadow.camera.viewProjectionMatrix),u.toArray(f,16*d))});var h={colors:new Float32Array(t),infos:new Float32Array(n),poses:new Float32Array(r),dirs:new Float32Array(i),cutoffs:new Float32Array(a)};return s.length&&(h.shadowMap=s,h.shadowMapSize=new Float32Array(o),h.shadowBias=new Float32Array(l),h.lightSpaceMatrix=new Float32Array(f)),h},getPointInfo:function(e){var t=[],n=[],r=[],i=[],a=[],s=[];this.pointLights.forEach(function(o,f){var l=3*f;o.getRealColor().toRGBArray(t,l),o.toInfoArray(n,l),e.getModelViewMatrix(o,u),u.getTranslation(c),c.toArray(r,l),o.shadow&&o.lightShadow&&(i.push(o.lightShadow.framebuffer.texture),s.push(o.lightShadow.minBias,o.lightShadow.maxBias),o.lightShadow.camera.viewMatrix.toArray(a,16*f))});var o={colors:new Float32Array(t),infos:new Float32Array(n),poses:new Float32Array(r)};return i.length&&(o.shadowMap=i,o.shadowBias=new Float32Array(s),o.lightSpaceMatrix=new Float32Array(a)),o},getAmbientInfo:function(){return f[0]=f[1]=f[2]=0,this.ambientLights.forEach(function(e){var t=e.getRealColor();f[0]+=t.r,f[1]+=t.g,f[2]+=t.b}),f[0]=Math.min(1,f[0]),f[1]=Math.min(1,f[1]),f[2]=Math.min(1,f[2]),f},updateInfo:function(e){var t=this.lightInfo,n=this.ambientLights,r=this.directionalLights,i=this.pointLights,a=this.spotLights;t.AMBIENT_LIGHTS=n.length,t.POINT_LIGHTS=i.length,t.DIRECTIONAL_LIGHTS=r.length,t.SPOT_LIGHTS=a.length,t.uid=[t.AMBIENT_LIGHTS,t.POINT_LIGHTS,t.DIRECTIONAL_LIGHTS,t.SPOT_LIGHTS].join("_"),this.directionalInfo=this.getDirectionalInfo(e),this.pointInfo=this.getPointInfo(e),this.spotInfo=this.getSpotInfo(e),this.ambientInfo=this.getAmbientInfo()},getInfo:function(){return this.lightInfo},reset:function(){this.ambientLights.length=0,this.directionalLights.length=0,this.pointLights.length=0,this.spotLights.length=0},getShadowMapCount:function(e){var t=[];"POINT_LIGHTS"===e?t=this.pointLights:"DIRECTIONAL_LIGHTS"===e?t=this.directionalLights:"SPOT_LIGHTS"===e&&(t=this.spotLights);var n=0;return t.forEach(function(e){n+=e.shadow?1:0}),n},createShadowMap:function(e,t){this.directionalLights.forEach(function(n){n.createShadowMap(e,t)}),this.spotLights.forEach(function(n){n.createShadowMap(e,t)}),this.pointLights.forEach(function(n){n.createShadowMap(e,t)})}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(130));t.default=r.default},function(e,t,n){"use strict";var r=function(){var e=navigator.userAgent,t=document,n=window,r=t.documentElement,i={iphone:/iphone/i.test(e),ipad:/ipad/i.test(e),ipod:/ipod/i.test(e),ios:/iphone|ipad|ipod/i.test(e),android:/android/i.test(e),webkit:/webkit/i.test(e),chrome:/chrome/i.test(e),safari:/safari/i.test(e),firefox:/firefox/i.test(e),ie:/msie/i.test(e),opera:/opera/i.test(e),supportTouch:"ontouchstart"in n,supportCanvas:null!=t.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in n||"orientation"in n.screen,supportDeviceMotion:"ondevicemotion"in n};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),i.supportStorage=!0}catch(e){}var a=i.jsVendor=i.webkit?"webkit":i.firefox?"webkit":i.opera?"o":i.ie?"ms":"",s=i.cssVendor="-"+a+"-",o=t.createElement("div"),u=o.style,c=void 0!=u[a+"Transform"],f=void 0!=u[a+"Perspective"];f&&(o.id="test3d",(u=t.createElement("style")).textContent="@media ("+s+"transform-3d){#test3d{height:3px}}",t.head.appendChild(u),r.appendChild(o),f=3==o.offsetHeight,t.head.removeChild(u),r.removeChild(o)),i.supportTransform=c,i.supportTransform3D=f;var l=i.supportTouch,h=l?"touchstart":"mousedown",d=l?"touchmove":"mousemove",_=l?"touchend":"mouseup";return i.POINTER_START=h,i.POINTER_MOVE=d,i.POINTER_END=_,i}();e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(7)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isMorphGeometry:!0,className:"MorphGeometry",isStatic:!1,weights:[],targets:null,constructor:function(e){o.superclass.constructor.call(this,e),this.weights=this.weights||[]},update:function(e,t){this.weights=e,this._originalMorphIndices=t},clone:function(){return i.default.prototype.clone.call(this,{targets:this.targets,weights:this.weights})},getRenderOption:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.superclass.getRenderOption.call(this,t),this.targets&&(this._maxMorphTargetCount||(this._maxMorphTargetCount=Math.floor(8/Object.keys(this.targets).length)),(0,a.each)(this.targets,function(n,r){t.MORPH_TARGET_COUNT=Math.min(n.length,e._maxMorphTargetCount),"vertices"===r?t.MORPH_HAS_POSITION=1:"normals"===r?t.MORPH_HAS_NORMAL=1:"tangents"===r&&(t.MORPH_HAS_TANGENT=1)})),t}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(70)),a=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isOrthographicCamera:!0,className:"OrthographicCamera",_left:-1,left:{get:function(){return this._left},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._left=e}},_right:1,right:{get:function(){return this._right},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._right=e}},_bottom:-1,bottom:{get:function(){return this._bottom},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._bottom=e}},_top:1,top:{get:function(){return this._top},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._top=e}},_near:.1,near:{get:function(){return this._near},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._near=e}},_far:1,far:{get:function(){return this._far},set:function(e){this._needUpdateProjectionMatrix=!0,this._isGeometryDirty=!0,this._far=e}},constructor:function(e){o.superclass.constructor.call(this,e),this.updateProjectionMatrix()},updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},getGeometry:function(e){if(e||!this._geometry||this._isGeometryDirty){this._isGeometryDirty=!1;var t=new a.default,n=[this.left,this.bottom,-this.near],r=[this.right,this.bottom,-this.near],i=[this.right,this.top,-this.near],s=[this.left,this.top,-this.near],o=[this.left,this.bottom,-this.far],u=[this.right,this.bottom,-this.far],c=[this.right,this.top,-this.far],f=[this.left,this.top,-this.far];t.addRect(o,u,c,f),t.addRect(u,r,i,c),t.addRect(r,n,s,i),t.addRect(n,o,f,s),t.addRect(f,c,i,s),t.addRect(n,r,u,o),this._geometry=t}return this._geometry}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.create({Mixes:i.default,isLoadCache:!0,className:"LoadCache",Statics:{PENDING:1,LOADED:2,FAILED:3},enabled:!0,constructor:function(){this._files={}},update:function(e,t,n){if(this.enabled){var r={key:e,state:t,data:n};this._files[e]=r,this.fire("update",r),this.fire("update:"+r.key,r)}},get:function(e){return this.enabled?this._files[e]:null},remove:function(e){delete this._files[e]},clear:function(){this._files={}},wait:function(e){var t=this;return e?e.state===s.LOADED?Promise.resolve(e.data):e.state===s.FAILED?Promise.reject():new Promise(function(n,r){t.on("update:"+e.key,function(e){var t=e.detail;t.state===s.LOADED?n(t.data):t.state===s.FAILED&&r(t.data)},!0)}):Promise.reject()}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(11)),a=n(1);function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isCubeTexture:!0,className:"CubeTexture",target:a.TEXTURE_CUBE_MAP,internalFormat:a.RGB,format:a.RGB,magFilter:a.LINEAR,minFilter:a.LINEAR,wrapS:a.CLAMP_TO_EDGE,wrapT:a.CLAMP_TO_EDGE,constructor:function(e){o.superclass.constructor.call(this,e),this.image=this.image||[]},_uploadTexture:function(e){var t=this;Array.isArray(this.image)&&6===this.image.length?this.image.forEach(function(n,r){t._glUploadTexture(e,a.TEXTURE_CUBE_MAP_POSITIVE_X+r,n)}):console.error("CubeTexture image must be an Array of length 6",this.image)},right:{get:function(){return this.image[0]},set:function(e){this.image[0]=e}},left:{get:function(){return this.image[1]},set:function(e){this.image[1]=e}},top:{get:function(){return this.image[2]},set:function(e){this.image[2]=e}},bottom:{get:function(){return this.image[3]},set:function(e){this.image[3]=e}},front:{get:function(){return this.image[4]},set:function(e){this.image[4]=e}},back:{get:function(){return this.image[5]},set:function(e){this.image[5]=e}}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=S(n(0)),a=S(n(15)),s=S(n(18)),o=S(n(136)),u=S(n(7)),c=S(n(131)),f=S(n(8)),l=S(n(21)),h=S(n(87)),d=S(n(137)),_=S(n(2)),m=S(n(6)),p=S(n(20)),v=S(n(4)),g=S(n(138)),E=S(n(139)),T=S(n(38)),M=y(n(5)),A=y(n(170)),O=n(1);function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}var I={5120:[1,Int8Array],5121:[1,Uint8Array],5122:[2,Int16Array],5123:[2,Uint16Array],5125:[4,Uint32Array],5126:[4,Float32Array]},L={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},R={POSITION:{name:"vertices",decodeMatName:"positionDecodeMat"},TEXCOORD_0:{name:"uvs",decodeMatName:"uvDecodeMat"},TEXCOORD_1:{name:"uvs1",decodeMatName:"uv1DecodeMat"},NORMAL:{name:"normals",decodeMatName:"normalDecodeMat"},JOINT:{name:"skinIndices"},JOINTS_0:{name:"skinIndices"},WEIGHT:{name:"skinWeights"},WEIGHTS_0:{name:"skinWeights"},TANGENT:{name:"tangents"},COLOR_0:{name:"colors"}},b=i.default.create({isGLTFParser:!0,className:"GLTFParser",Statics:{MAGIC:"glTF",extensionHandlers:A},isMultiAnim:!0,isProgressive:!1,isUnQuantizeInShader:!0,preHandlerImageURI:null,customMaterialCreator:null,src:"",constructor:function(e,t){Object.assign(this,t),this.content=e},parse:function(e){var t=this;if(this.content instanceof ArrayBuffer){var n=this.content;if(M.convertUint8ArrayToString(new Uint8Array(n,0,4))===b.MAGIC)this.parseBinary(n);else{var r=M.convertUint8ArrayToString(new Uint8Array(n),!0);this.json=JSON.parse(r)}}else this.json=JSON.parse(this.content);return this.glTFVersion=parseFloat(this.json.asset.version),this.glTFVersion>=2&&(this.isGLTF2=!0),console.log("glTFVersion",this.glTFVersion),this.parseExtensionUsed(),this.loadResources(e).then(function(){return t.parseGeometries()}).then(function(){return t.parseScene()})},parseExtensionUsed:function(){var e=this;this.extensionsUsed={},M.each(this.json.extensionsUsed,function(t){e.extensionsUsed[t]=!0}),this.extensionsUsed.WEB3D_quantized_attributes||(this.isUnQuantizeInShader=!1)},getExtensionHandler:function(e){return this.extensionHandlers&&this.extensionHandlers[e]||b.extensionHandlers[e]},parseExtensions:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M.each(e,function(e,i){var a=n.getExtensionHandler(i);a&&a.parse&&(t=a.parse(e,n,t,r))}),t},isUseExtension:function(e,t){return!!(e&&e.extensions&&e.extensions[t])},parseBinary:function(e){this.isBinary=!0;var t=new DataView(e),n=t.getUint32(4,!0),r=t.getUint32(8,!0),i=void 0;console.log("parseBinary",n,r);var a=12;if(n<2){var s=t.getUint32(a,!0);i=new Uint8Array(e,20,s),i=M.convertUint8ArrayToString(i,!0),this.json=JSON.parse(i),this.binaryBody=e.slice(20+s)}else{if(2!==n)throw new Error("Dont support glTF version "+n);for(;a<r;){var o=t.getUint32(a,!0),u=t.getUint32(a+4,!0);1313821514===u?(i=new Uint8Array(e,a+8,o),i=M.convertUint8ArrayToString(i,!0),this.json=JSON.parse(i)):5130562===u&&(this.binaryBody=e.slice(a+8,a+8+o)),a+=8+o}}},loadResources:function(e){var t=this,n=[];for(var r in this.isBinary?n.push(this.loadBuffers(e).then(function(){return t.loadTextures(e)})):(n.push(this.loadBuffers(e)),n.push(this.loadTextures(e))),this.extensionsUsed){var i=this.getExtensionHandler(r);i&&i.init&&n.push(i.init(e,this))}return Promise.all(n)},loadBuffers:function(e){var t=this;return this.buffers={},this.isBinary?(this.isGLTF2?this.buffers[0]=this.binaryBody:this.buffers.binary_glTF=this.binaryBody,this.parseBufferViews(),Promise.resolve()):Promise.all(Object.keys(this.json.buffers||[]).map(function(n){var r=M.getRelativePath(t.src,t.json.buffers[n].uri);return e.loadRes(r,"buffer").then(function(e){t.buffers[n]=e})})).then(function(){t.parseBufferViews()})},getImageUri:function(e){var t=this.json.images[e],n=t.uri;if(this.isUseExtension(t,"KHR_binary_glTF")){var r=t.extensions.KHR_binary_glTF,i=this.bufferViews[r.bufferView],a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return M.getBlobUrl(r.mimeType,a)}if(!n&&"bufferView"in t){var s=this.bufferViews[t.bufferView],o=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);return M.getBlobUrl(t.mimeType,o)}return n},getUsedTextureNameMap:function(){var e=this,t={};return M.each(this.json.materials,function(n){var r=n,i=!1;if(e.isUseExtension(n,"KHR_materials_common")&&(i=!0,r=n.extensions.KHR_materials_common.values),e.isGLTF2&&!i){if(r.normalTexture&&(t[r.normalTexture.index]=!0),r.occlusionTexture&&(t[r.occlusionTexture.index]=!0),r.emissiveTexture&&(t[r.emissiveTexture.index]=!0),r.transparencyTexture&&(t[r.transparencyTexture.index]=!0),e.isUseExtension(r,"KHR_materials_pbrSpecularGlossiness")){var a=r.extensions.KHR_materials_pbrSpecularGlossiness;a.diffuseTexture&&(t[a.diffuseTexture.index]=!0),a.specularGlossinessTexture&&(t[a.specularGlossinessTexture.index]=!0)}else if(r.pbrMetallicRoughness){var s=r.pbrMetallicRoughness;s.baseColorTexture&&(t[s.baseColorTexture.index]=!0),s.metallicRoughnessTexture&&(t[s.metallicRoughnessTexture.index]=!0)}}else i||(r=n.values),["diffuse","specular","emission","ambient","transparency","normalMap"].forEach(function(n){var i=r[n];i instanceof Object&&"index"in i&&(i=i.index),M.isStrOrNumber(i)&&e.json.textures[i]&&(t[i]=!0)})}),t},loadTextures:function(){var e=this;if(this.textures={},!this.json.textures)return Promise.resolve();var t=this.getUsedTextureNameMap();return Promise.all(Object.keys(this.json.textures).filter(function(e){return t[e]}).map(function(t){var n=e.json.textures[t],r=e.getImageUri(n.source);r=M.getRelativePath(e.src,r),e.preHandlerImageURI&&(r=e.preHandlerImageURI(r,t));var i=new d.default(n);return i.uv=void 0,i.autoLoad=e.isProgressive,i.crossOrigin=!0,i.src=r,i.name=n.name||t,e.json.samplers&&Object.assign(i,e.json.samplers[n.sampler]),e.textures[t]=i,e.isProgressive?Promise.resolve():i.load()}))},parseBufferViews:function(){var e=this;this.bufferViews={},M.each(this.json.bufferViews,function(t,n){var r=e.buffers[t.buffer],i=t.byteOffset||0,a=t.byteLength;e.bufferViews[n]={id:_.default.generateUUID("bufferView"),byteOffset:i,byteLength:a,buffer:r,byteStride:t.byteStride}}),this.isBinary||delete this.buffers},getTexture:function(e){var t=this.textures[e.index],n=e.texCoord||0,r=e.index+"_"+n;return this.textures[r]?t=this.textures[r]:"number"==typeof t.uv&&t.uv!==n&&(t=t.clone(),this.textures[r]=t),t.uv=n,t.__gltfTextureInfo=e,t},getColorOrTexture:function(e){return Array.isArray(e)?new v.default(e[0],e[1],e[2]):(e instanceof Object&&"index"in e&&(e=e.index),this.textures[e])},createPBRMaterial:function(e){var t=new o.default,n=e;switch(n.alphaMode){case"BLEND":t.transparent=!0;break;case"MASK":t.alphaCutoff="alphaCutoff"in n?n.alphaCutoff:.5;break;case"OPAQUE":default:t.ignoreTranparent=!0}n.doubleSided?t.side=O.FRONT_AND_BACK:t.side=O.FRONT,n.transparencyTexture&&(t.transparency=this.getTexture(n.transparencyTexture));var r=!this.isUseExtension(n,"KHR_materials_unlit");if(r){var i=n.normalTexture;i&&(t.normalMap=this.getTexture(i),void 0!==i.scale?t.normalMapScale=i.scale:t.normalMapScale=1);var a=n.occlusionTexture;a&&(t.occlusionMap=this.getTexture(a),void 0!==a.strength?t.occlusionStrength=a.strength:t.occlusionStrength=1);var s=n.emissiveTexture;s&&(t.emission=this.getTexture(s))}else t.lightType="NONE";if(this.isUseExtension(n,"KHR_materials_pbrSpecularGlossiness"))this.parseExtensions(n.extensions,t);else if(n.pbrMetallicRoughness){var u=n.pbrMetallicRoughness;u.baseColorFactor&&t.baseColor.fromArray(u.baseColorFactor),u.baseColorTexture&&(t.baseColorMap=this.getTexture(u.baseColorTexture)),r&&(u.metallicRoughnessTexture&&(t.metallicRoughnessMap=this.getTexture(u.metallicRoughnessTexture),t.occlusionMap===t.metallicRoughnessMap&&(t.occlusionMap=null,t.isOcclusionInMetallicRoughnessMap=!0)),"roughnessFactor"in u&&(t.roughness=u.roughnessFactor),"metallicFactor"in u&&(t.metallic=u.metallicFactor))}return t.baseColorMap&&this._parseTextureTransform(t,t.baseColorMap),t},_parseTextureTransform:function(e,t){var n=t.__gltfTextureInfo;if(this.isUseExtension(n,"KHR_texture_transform")){var r=n.extensions.KHR_texture_transform;if(void 0!==r.texCoord&&(t.uv=r.texCoord),r.offset||r.rotation||r.scale){var i=r.offset||[0,0],a=r.rotation||0,s=r.scale||[1,1],o=(new p.default).fromRotationTranslationScale(a,i[0],i[1],s[0],s[1]);0===t.uv?e.uvMatrix=o:1===t.uv&&(e.uvMatrix1=o)}}},createKMCMaterial:function(e,t){var n=new s.default,r=void 0;return t?(r=t.values,n.lightType=t.technique):r=e.values,n.diffuse=this.getColorOrTexture(r.diffuse)||n.diffuse,n.specular=this.getColorOrTexture(r.specular)||n.specular,n.emission=this.getColorOrTexture(r.emission)||n.emission,n.ambient=this.getColorOrTexture(r.ambient)||n.ambient,r.normalMap&&(n.normalMap=this.getColorOrTexture(r.normalMap)),"number"==typeof r.transparency?(n.transparency=r.transparency,n.transparency<1&&(n.transparent=!0)):"string"==typeof r.transparency&&(n.transparency=this.getColorOrTexture(r.transparency),n.transparent=!0),!0===r.transparent&&(n.transparent=!0),"shininess"in r&&(n.shininess=r.shininess),this._parseTextureTransform(n,n.diffuse),n},parseMaterials:function(){var e=this;this.materials={},M.each(this.json.materials,function(t,n){if(e.customMaterialCreator)e.materials[n]=e.customMaterialCreator(n,t,e.json);else{var r=null;e.isUseExtension(t,"KHR_materials_common")&&(r=t.extensions.KHR_materials_common);var i=void 0;(i=e.isGLTF2&&!r?e.createPBRMaterial(t):e.createKMCMaterial(t,r)).name=t.name||n,e.materials[n]=i,e.parseTechnique(t,i)}})},sparseAccessorHandler:function(e,t){if(!t)return e;var n=t.count,r=e.data.constructor,i=new r(e.realLength);i.set(e.data),e.data=i;for(var a=this.bufferViews[t.values.bufferView],s=new r(a.buffer,a.byteOffset+t.values.byteOffset,n*e.size),o=new(r=I[t.indices.componentType][1])((a=this.bufferViews[t.indices.bufferView]).buffer,a.byteOffset+t.indices.byteOffset,n),u=0;u<n;u++)M.copyArrayData(i,s,o[u]*e.size,u*e.size,e.size);return e},getAccessorData:function(e,t){var n=this.json.accessors[e];if(n.data)return n.data;var i=r(I[n.componentType],2)[1],a=L[n.type],s=this.bufferViews[n.bufferView],o=n.count*a,u=void 0;if(s.byteStride&&s.byteStride>a*i.BYTES_PER_ELEMENT)s.array||(s.array=new i(s.buffer,s.byteOffset,s.byteLength/i.BYTES_PER_ELEMENT)),u=new f.default(s.array,a,{offset:n.byteOffset||0,stride:s.byteStride,bufferViewId:s.id});else{var c=(n.byteOffset||0)+s.byteOffset,l=void 0;if(c%i.BYTES_PER_ELEMENT)l=new i(s.buffer.slice(c,c+o*i.BYTES_PER_ELEMENT));else l=new i(s.buffer,c,o);u=new f.default(l,a)}return n.sparse&&(u=this.sparseAccessorHandler(u,n.sparse)),u=this.parseExtensions(n.extensions,u,{isDecode:t}),n.data=u,n.normalized&&(u.normalized=!0),u},getArrayByAccessor:function(e,t){var n=this.json.accessors[e];if(n.array)return n.array;var r=this.getAccessorData(e,t);if(!r.stride&&!r.offset&&1===r.size)return r.data;var i=[];return r.traverse(function(e){i.push(e.toArray?e.toArray():e)}),n.array=i,i},parseTechnique:function(e,t){var n=null;this.json.techniques&&(n=this.json.techniques[e.technique]),n&&n.states&&(n.states.enable.forEach(function(e){switch(e){case O.BLEND:t.blend=!0;break;case O.DEPTH_TEST:t.depthTest=!0;break;case O.CULL_FACE:t.cullFace=!0}}),M.each(n.states.functions,function(e,n){switch(n){case"blendEquationSeparate":t.blendEquation=e[0],t.blendEquationAlpha=e[1];break;case"blendFuncSeparate":t.blendSrc=e[0],t.blendDst=e[1],t.blendSrcAlpha=e[2],t.blendDstAlpha=e[3];break;case"depthMask":t.depthMask=e[0];break;case"cullFace":t.cullFaceType=e[0];break;default:t[n]=e}}),t.cullFace?t.side=t.cullFaceType===O.FRONT?O.BACK:O.FRONT:t.side=O.FRONT_AND_BACK)},createMorphGeometry:function(e,t){var n=this,r=new c.default,i=r.targets={};return M.each(e.targets,function(e){M.each(e,function(e,t){var r=R[t].name;i[r]||(i[r]=[]);var a=n.getAccessorData(e,!0);i[r].push(a)})}),r.weights=t||new Float32Array(e.targets.length),r},handlerGeometry:function(e,t){if(t.extensions)return this.parseExtensions(t.extensions);e||(e=new u.default),"indices"in t&&(e.indices=this.getAccessorData(t.indices));var n=t.attributes;for(var r in n){var i=R[r];if(i){var a=!(this.isUnQuantizeInShader&&i.decodeMatName);e[i.name]=this.getAccessorData(n[r],a),a||(e[i.decodeMatName]=e[i.name].decodeMat,delete e[i.name].decodeMat)}else console.warn("Unknow attribute named "+r+"!")}return e},handlerSkinedMesh:function(e,t){if(t){var n=(t.jointNames||t.joints).length,r=void 0;t.bindShapeMatrix&&(r=(new m.default).fromArray(t.bindShapeMatrix));for(var i=this.getArrayByAccessor(t.inverseBindMatrices,!0),a=0;a<n;a++){var s=(new m.default).fromArray(i[a]);r&&s.multiply(r),e.inverseBindMatrices.push(s)}e.jointNames=t.jointNames||t.joints,this.useInstanced&&(e.useInstanced=!0)}},fixProgressiveGeometry:function(e,t){e._geometry=t,this.isProgressive&&e._meshes&&e._meshes.forEach(function(e){e.visible=!0,e.geometry=t})},parseGeometries:function(){var e=this,t=M.serialRun(this.json.meshes,function(t){return M.serialRun(t.primitives,function(n){var r=void 0;n.targets&&n.targets.length&&(r=e.createMorphGeometry(n,t.weights)),n._geometry=r;var i=e.handlerGeometry(r,n);return i&&i.then?i.then(function(t){e.fixProgressiveGeometry(n,t)},function(e){console.warn("geometry parse error",e)}):(e.fixProgressiveGeometry(n,i),i)})});return this.isProgressive?null:t},parseMesh:function(e,t,n){var r=this,i=this.json.meshes[e];i.primitives.forEach(function(a){var o=void 0;if(a.meshNode)o=a.meshNode.clone();else{var u=r.materials[a.material]||new s.default,c=r.json.skins&&r.json.skins[n.skin];o=new(c?h.default:l.default)({geometry:a._geometry,material:u,name:"mesh-"+(i.name||e)}),r.handlerSkinedMesh(o,c),a.meshNode=o}r.isProgressive&&!o.geometry&&(o.visible=!1,a._meshes=a._meshes||[],a._meshes.push(o)),t.addChild(o),r.meshes.push(o)})},parseCameras:function(){var e=this;this.cameras={};var t=window.innerWidth/window.innerHeight;M.each(this.json.cameras,function(n,r){if("perspective"===n.type){var i=new T.default;i.name=n.name||r,i.fov=_.default.radToDeg(n.perspective.yfov),i.near=n.perspective.znear,i.far=n.perspective.zfar,n.aspectRatio?i.aspect=n.aspectRatio:i.aspect=t,e.cameras[r]=i}})},handlerNodeTransform:function(e,t){if(t.matrix){var n=new m.default;n.fromArray(t.matrix),e.matrix=n}else t.rotation&&e.quaternion.fromArray(t.rotation),t.scale&&e.setScale(t.scale[0],t.scale[1],t.scale[2]),t.translation&&(e.x=t.translation[0],e.y=t.translation[1],e.z=t.translation[2])},parseNode:function(e,t){var n=this,r=void 0,i=this.json.nodes[e];r=new a.default({name:i.name,animationId:e}),this.parseExtensions(i.extensions,r),"camera"in i&&this.cameras[i.camera]&&r.addChild(this.cameras[i.camera]),this.handlerNodeTransform(r,i),i.jointName?(r.jointName=i.jointName,this.jointMap[r.jointName]=r):this.isGLTF2&&(r.jointName=e,this.jointMap[e]=r),i.meshes?i.meshes.forEach(function(e){return n.parseMesh(e,r,i)}):"mesh"in i&&this.parseMesh(i.mesh,r,i),i.children&&i.children.forEach(function(e){return n.parseNode(e,r)}),t.addChild(r)},parseAnimations:function(){var e=this;if(!this.json.animations)return null;var t=this.isMultiAnim,n={},r=[];return M.each(this.json.animations,function(i){i.channels.forEach(function(t){var n=t.target.path,a=t.target.id;e.isGLTF2&&(a=t.target.node);var s=i.samplers[t.sampler],o=e.isGLTF2?s.input:i.parameters[s.input],u=e.isGLTF2?s.output:i.parameters[n],c=e.getArrayByAccessor(o,!0),f=e.getArrayByAccessor(u,!0);"rotation"===n&&(n="quaternion");var l=new g.default({interpolationType:s.interpolation||"LINEAR",nodeName:a,keyTime:c,states:f,type:g.default.getType(n)});r.push(l)}),t&&r.length&&(n[i.name]={animStatesList:r},r=[])}),t&&Object.keys(n).length>0&&(r=Object.values(n)[0].animStatesList),r.length?new E.default({rootNode:this.node,animStatesList:r,clips:n}):null},parseScene:function(){var e=this;this.parseMaterials(),this.jointMap={},this.meshes=[],this.lights=[],this.node=new a.default({needCallChildUpdate:!1}),this.parseCameras();var t=this.json.scenes[this.getDefaultSceneName()];if(!t)return console.warn("GLTFParser:no scene!"),{node:this.node,meshes:[],cameras:[],lights:[],textures:[],materials:[]};t.nodes.forEach(function(t){return e.parseNode(t,e.node)}),this.node.resetSkinedMeshRootNode();var n={node:this.node,scene:this.node,meshes:this.meshes,json:this.json,cameras:Object.values(this.cameras),lights:this.lights,textures:Object.values(this.textures),materials:Object.values(this.materials)},r=this.parseAnimations();return r&&(this.node.setAnim(r),r.play(),n.anim=r),this.parseExtensions(this.json.extensions,n,{isGlobalExtension:!0}),n},getDefaultSceneName:function(){return void 0!==this.defaultScene?this.defaultScene:this.json.scenes?Object.keys(this.json.scenes)[0]:null}});t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(4)),a=o(n(39)),s=o(n(12));function o(e){return e&&e.__esModule?e:{default:e}}var u=r.default.create({Extends:a.default,isPBRMaterial:!0,className:"PBRMaterial",lightType:"PBR",gammaOutput:!0,baseColor:null,baseColorMap:null,metallic:1,metallicMap:null,roughness:1,roughnessMap:null,metallicRoughnessMap:null,occlusionMap:null,occlusionStrength:1,isOcclusionInMetallicRoughnessMap:!1,diffuseEnvMap:null,brdfLUT:null,specularEnvMap:null,emission:null,isSpecularGlossiness:!1,specular:null,glossiness:1,specularGlossinessMap:null,usedUniformVectors:11,constructor:function(e){this.baseColor=new i.default(1,1,1),this.specular=new i.default(1,1,1),u.superclass.constructor.call(this,e),Object.assign(this.uniforms,{u_baseColor:"BASECOLOR",u_metallic:"METALLIC",u_roughness:"ROUGHNESS",u_specular:"SPECULAR",u_glossiness:"GLOSSINESS",u_brdfLUT:"BRDFLUT",u_specularEnvMap:"SPECULARENVMAP",u_diffuseEnvMap:"DIFFUSEENVMAP",u_occlusionStrength:"OCCLUSIONSTRENGTH"}),this.addTextureUniforms({u_baseColorMap:"BASECOLORMAP",u_metallicMap:"METALLICMAP",u_roughnessMap:"ROUGHNESSMAP",u_metallicRoughnessMap:"METALLICROUGHNESSMAP",u_occlusionMap:"OCCLUSIONMAP",u_specularGlossinessMap:"SPECULARGLOSSINESSMAP",u_lightMap:"LIGHTMAP"})},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.superclass.getRenderOption.call(this,e);var t=this._textureOption.reset(e);return t.add(this.baseColorMap,"BASE_COLOR_MAP"),t.add(this.metallicMap,"METALLIC_MAP"),t.add(this.roughnessMap,"ROUGHNESS_MAP"),t.add(this.metallicRoughnessMap,"METALLIC_ROUGHNESS_MAP"),t.add(this.diffuseEnvMap,"DIFFUSE_ENV_MAP"),t.add(this.occlusionMap,"OCCLUSION_MAP"),t.add(this.lightMap,"LIGHT_MAP"),this.brdfLUT&&(t.add(this.specularEnvMap,"SPECULAR_ENV_MAP"),s.default.SHADER_TEXTURE_LOD&&this.specularEnvMap&&(e.USE_SHADER_TEXTURE_LOD=1)),this.isSpecularGlossiness&&(e.PBR_SPECULAR_GLOSSINESS=1,t.add(this.specularGlossinessMap,"SPECULAR_GLOSSINESS_MAP")),this.isOcclusionInMetallicRoughnessMap&&(e.IS_OCCLUSION_MAP_IN_METALLIC_ROUGHNESS_MAP=1),1!==this.occlusionStrength&&(e.OCCLUSION_STRENGTH=1),t.update(),e}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(9)),a=o(n(11)),s=o(n(14));function o(e){return e&&e.__esModule?e:{default:e}}var u=new Image;u.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";var c=r.default.create({Extends:a.default,Mixes:i.default,isLazyTexture:!0,className:"LazyTexture",_src:"",crossOrigin:!1,autoLoad:!0,src:{get:function(){return this._src},set:function(e){this._src!==e&&(this._src=e,this.autoLoad&&this.load())}},constructor:function(e){e&&("crossOrigin"in e&&(this.crossOrigin=e.crossOrigin),"autoLoad"in e&&(this.autoLoad=e.autoLoad)),c.superclass.constructor.call(this,e),this.image=this.placeHolder||u},load:function(){var e=this;return c.loader=c.loader||new s.default,c.loader.load({src:this.src,crossOrigin:this.crossOrigin,defaultType:"img"}).then(function(t){t.isTexture?(Object.assign(e,t),e.needUpdate=!0,e.needDestory=!0,e.fire("load")):(e.image=t,e.needUpdate=!0,e.fire("load"))},function(t){e.fire("error"),console.warn("LazyTexture Failed "+t)})}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=c(n(0)),a=c(n(2)),s=c(n(19)),o=c(n(31)),u=n(5);function c(e){return e&&e.__esModule?e:{default:e}}var f=new s.default,l=new s.default,h=new s.default,d=new s.default,_=new s.default,m=new s.default,p=new o.default,v=[];function g(e,t){return e-t}var E=i.default.create({Statics:{interpolation:{LINEAR:function(e,t,n){if(void 0===t)return e;if(e.slerp)return e.slerp(t,n);if(e.lerp)return e.lerp(t,n);if((0,u.isArrayLike)(e)){v.length=0;for(var r=e.length-1;r>=0;r--)v[r]=e[r]+n*(t[r]-e[r]);return v}return e+n*(t-e)},STEP:function(e,t,n){return e},CUBICSPLINE:function(e,t,n,r){var i=e.length/3;if(void 0===t)return 1===i?e[1]:e.slice(i,-i);var a=e[1],s=e[2],o=t[1],c=t[0];if(i>1&&(a=e.slice(i,-i),s=e.slice(-i),o=t.slice(i,-i),c=t.slice(0,i)),a.hermite)a.hermite(a,s.scale(r),o,c.scale(r),n);else if(a.sqlerp)a.sqlerp(a,s.scale(r),o,c.scale(r),n);else{(0,u.isArrayLike)(a)||(a=[a],s=[s],o=[o],c=[c]);var f=n*n,l=f*n,h=2*l-3*f+1,d=l-2*f+n,_=-2*l+3*f,m=l-f;v.length=0;for(var p=a.length-1;p>=0;p--)v[p]=a[p]*h+d*s[p]*r+o[p]*_+m*c[p]*r;a=v}return a}},StateType:{TRANSLATE:"Translation",POSITION:"Translation",TRANSLATION:"Translation",SCALE:"Scale",ROTATE:"Rotation",ROTATION:"Rotation",QUATERNION:"Quaternion",WEIGHTS:"Weights"},getType:function(e){return e=String(e).toUpperCase(),E.StateType[e]}},isAnimationStates:!0,className:"AnimationStates",nodeName:"",type:"",interpolationType:"LINEAR",constructor:function(e){this.id=a.default.generateUUID(this.className),this.keyTime=[],this.states=[],Object.assign(this,e)},findIndexByTime:function(e){return(0,u.getIndexFromSortedArray)(this.keyTime,e,g)},getStateByIndex:function(e){var t=this.states.length/this.keyTime.length;return 1===t?this.states[e]:this.states.slice(e*t,e*t+t)},getState:function(e){var t=this.findIndexByTime(e),n=r(t,2),i=n[0],a=n[1];if(i<0||a>=this.keyTime.length)return null;var s=this.keyTime[i],o=this.keyTime[a],c=this.getStateByIndex(i);if(i===a){var v=this.interpolation(c);return this.type===E.StateType.ROTATION&&(v=f.fromEuler(p.fromArray(v))),v.elements||v}var g=this.getStateByIndex(a),T=o-s,M=(e-s)/T;this.type===E.StateType.ROTATION?(0,u.isArrayLike)(c[0])?(c[0]=f.fromEuler(p.fromArray(c[0])),c[1]=l.fromEuler(p.fromArray(c[1])),c[2]=h.fromEuler(p.fromArray(c[2])),g[0]=d.fromEuler(p.fromArray(g[0])),g[1]=_.fromEuler(p.fromArray(g[1])),g[2]=m.fromEuler(p.fromArray(g[2]))):(c=f.fromEuler(p.fromArray(c)),g=l.fromEuler(p.fromArray(g))):this.type===E.StateType.QUATERNION&&((0,u.isArrayLike)(c[0])?(c[0]=f.fromArray(c[0]),c[1]=l.fromArray(c[1]),c[2]=h.fromArray(c[2]),g[0]=d.fromArray(g[0]),g[1]=_.fromArray(g[1]),g[2]=m.fromArray(g[2])):(c=f.fromArray(c),g=l.fromArray(g)));var A=this.interpolation(c,g,M,T);return A.elements||A},interpolation:function(e,t,n,r){return E.interpolation[this.interpolationType](e,t,n,r)},updateNodeTranslation:function(e,t){e.x=t[0],e.y=t[1],e.z=t[2]},updateNodeScale:function(e,t){e.scaleX=t[0],e.scaleY=t[1],e.scaleZ=t[2]},updateNodeQuaternion:function(e,t){e.quaternion.fromArray(t)},updateNodeWeights:function(e,t){var n=this._originalWeightIndices=this._originalWeightIndices||[],r=t.length;t=t.slice();for(var i=0;i<r;i++)n[i]=i;for(var a=0;a<r;a++)for(var s=a+1;s<r;s++)if(t[s]>t[a]){var o=t[a];t[a]=t[s],t[s]=o,o=n[a],n[a]=n[s],n[s]=o}e.traverse(function(e){e.isMesh&&e.geometry&&e.geometry.isMorphGeometry&&e.geometry.update(t,n)})},updateNodeState:function(e,t){if(t){var n=this.type;n===E.StateType.ROTATION&&(n=E.StateType.QUATERNION);var r=this.getState(e);r&&this["updateNode"+n](t,r)}},clone:function(){return new this.constructor({keyTime:this.keyTime,states:this.states,type:this.type,nodeName:this.nodeName})}});t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(2)),a=s(n(9));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Statics:{_anims:[],tick:function(e){this._anims.forEach(function(t){return t.tick(e)})}},Mixes:a.default,isAnimation:!0,className:"Animation",paused:!1,currentLoopCount:0,loop:1/0,currentTime:0,timeScale:1,startTime:0,endTime:0,baseTime:0,totalTime:0,nodeNameMap:null,_rootNode:null,rootNode:{get:function(){return this._rootNode},set:function(e){this._rootNode=e,this.initNodeNameMap()}},constructor:function(e){this.id=i.default.generateUUID(this.className),this.animStatesList=[],this.clips={},Object.assign(this,e),this.initTotalTime()},addClip:function(e,t,n,r){this.clips[e]={start:t,end:n,animStatesList:r}},removeClip:function(e){this.clips[e]=null},initTotalTime:function(){var e=0,t=1/0;this.animStatesList.forEach(function(n){e=Math.max(n.keyTime[n.keyTime.length-1],e),t=Math.min(n.keyTime[0],t)}),this.baseTime=t,this.totalTime=e},initNodeNameMap:function(){if(this._rootNode){var e=this.nodeNameMap={};this._rootNode.traverse(function(t){e[t.animationId]=t;var n=t.name;void 0===n||e[n]||(e[n]=t)},!0)}},tick:function(e){var t=this;if(!this.paused){if(this.currentTime+=e/1e3*this.timeScale,this.currentTime>this.endTime){if(this.fire("end"),this.currentLoopCount++,!this.loop||this.currentLoopCount>=this.loop)return void this.stop();this.currentTime=this.startTime}this.animStatesList.forEach(function(e){e.updateNodeState(t.currentTime,t.nodeNameMap[e.nodeName])})}},play:function(e,t){var n=void 0;if("string"==typeof e){var r=this.clips[e];r?(n=r.start,t=r.end,r.animStatesList&&(this.animStatesList=r.animStatesList,this.initTotalTime())):console.warn("no this animation clip name:"+e)}else n=e;void 0===n&&(n=this.baseTime),void 0===t&&(t=this.totalTime),this.endTime=Math.min(t,this.totalTime),this.startTime=Math.min(n,this.endTime),this.currentTime=this.startTime,this.currentLoopCount=0,this.stop(),this.paused=!1,o._anims.push(this)},stop:function(){this.paused=!0;var e=o._anims,t=e.indexOf(this);-1!==t&&e.splice(t,1)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},clone:function(e){var t=new this.constructor({rootNode:e,animStatesList:this.animStatesList,timeScale:this.timeScale,loop:this.loop,paused:this.paused,currentTime:this.currentTime,startTime:this.startTime,endTime:this.endTime,clips:this.clips});return this.paused||t.play(),t}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(171)),i=s(n(7)),a=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}var o={Geometry:i.default,GeometryData:a.default},u={_decodeTotalTime:0,wasmURL:"",workerURL:"",useWASM:!0,useWebWorker:!0,useAuto:!0,init:function(){return u.useAuto?r.default.initWASM(u.wasmURL):u.useWebWorker?r.default.initWorker(u.workerURL):u.useWASM?r.default.initWASM(u.wasmURL):Promise.resolve()},parse:function(e,t){var n=Date.now(),i=t.bufferViews[e.bufferView],a=u.wasmURL,s=u.workerURL,c=u.useAuto,f=u.useWASM,l=u.useWebWorker,h=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);function d(e){return u._decodeTotalTime+=Date.now()-n,e.toHilo3dGeometry(o)}return c?r.default.decompress(h,a,s).then(d):l?r.default.decompressWithWorker(h,f,a,s).then(d):d(f?r.default.decompressWithWASM(h,a):r.default.decompressWithJS(h))}};t.default=u},function(e,t,n){"use strict";var r={};function i(e){return r[e]||(r[e]=Math.pow(2,e)-1),r[e]}e.exports={cal:function(e,t,n,r){var a=i(r),s=n-t;return Math.round((e-t)/s*a)},encode:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=e.length,r=i(t),a=1/0,s=-1/0,o=0;o<n;o++)a=Math.min(a,e[o]),s=Math.max(s,e[o]);var u=s-a,c=[];for(o=0;o<n;o++)c[o]=Math.round((e[o]-a)/u*r);return{min:a,max:s,quantizationBit:t,data:c}},encodeWithMinAndMax:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8,s=e.length,o=i(a),u=r-n,c=0;c<s;c++)t[c]=Math.round((e[c]-n)/u*o);return t},decode:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments[2],r=arguments[3],a=e.length,s=i(t),o=r-n,u=new Float32Array(a),c=0;c<a;c++)u[c]=n+o*(e[c]/s);return u},normalize:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=e.length,i=0;i<r;i+=n){for(var a=0,s=0;s<n;s++)a+=e[i+s]*e[i+s];for(a=Math.sqrt(a),s=0;s<n;s++)t[i+s]=e[i+s]/a}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(30)),a=s(n(143));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isPointLight:!0,className:"PointLight",constructor:function(e){o.superclass.constructor.call(this,e)},createShadowMap:function(e,t){this.shadow&&(this.lightShadow||(this.lightShadow=new a.default({light:this,renderer:e}),"minBias"in this.shadow&&(this.lightShadow.minBias=this.shadow.minBias),"maxBias"in this.shadow&&(this.lightShadow.maxBias=this.shadow.maxBias)),this.lightShadow.createShadowMap(t))}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(0)),i=d(n(38)),a=d(n(29)),s=d(n(12)),o=d(n(26)),u=d(n(72)),c=d(n(4)),f=d(n(3)),l=d(n(41)),h=n(1);function d(e){return e&&e.__esModule?e:{default:e}}var _=null,m=new c.default(0,0,0,0),p=new f.default,v=[[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,-1,0,0,-1,0,0,0,1,0,0,-1,0,-1,0,0,-1,0]],g=r.default.create({isLightShadow:!0,className:"CubeLightShadow",Extends:l.default,light:null,renderer:null,framebuffer:null,camera:null,width:1024,height:1024,maxBias:.05,minBias:.005,debug:!1,constructor:function(e){g.superclass.constructor.call(this,e)},createFramebuffer:function(){if(!this.framebuffer){this.framebuffer=new a.default(this.renderer,{target:h.TEXTURE_CUBE_MAP,width:1024,height:1024,createTexture:function(){var e=this.state,t=e.gl,n=t.createTexture();e.activeTexture(h.TEXTURE0+s.default.MAX_TEXTURE_INDEX),e.bindTexture(this.target,n);for(var r=0;r<6;r++)t.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,this.internalFormat,this.width,this.height,0,this.format,this.type,null);return t.texParameteri(this.target,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),t.texParameteri(this.target,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),t.texParameteri(this.target,h.TEXTURE_MIN_FILTER,h.NEAREST),t.texParameteri(this.target,h.TEXTURE_MAG_FILTER,h.NEAREST),t.checkFramebufferStatus(h.FRAMEBUFFER)!==h.FRAMEBUFFER_COMPLETE&&console.warn("Framebuffer is not complete",t.checkFramebufferStatus(h.FRAMEBUFFER)),n},bindTexture:function(e){e=e||0;var t=this.state,n=t.gl;t.activeTexture(h.TEXTURE0+s.default.MAX_TEXTURE_INDEX),t.bindTexture(this.target,this.texture),n.framebufferTexture2D(h.FRAMEBUFFER,this.attachment,h.TEXTURE_CUBE_MAP_POSITIVE_X+e,this.texture,0)}})}},updateLightCamera:function(e){this.camera.fov=90,this.camera.near=e.near,this.camera.far=e.far,this.camera.aspect=1,this.camera.addTo(this.light),this.camera.updateViewMatrix()},createCamera:function(e){this.camera||(this.camera=new i.default,this.updateLightCamera(e))},createShadowMap:function(e){this.createFramebuffer(),this.createCamera(e);var t=this.renderer,n=this.framebuffer,r=this.camera;_||(_=new u.default({vertexType:h.DISTANCE,side:h.FRONT,writeOriginData:!1})),n.bind(),t.state.viewport(0,0,n.width,n.height);for(var i=0;i<6;i++)n.bindTexture(i),p.fromArray(v[0],3*i),r.up.fromArray(v[1],3*i),r.lookAt(p),r.updateViewProjectionMatrix(),t.clear(m),o.default.setCamera(r),t.forceMaterial=_,this.renderShadowScane(t);r.matrix.identity(),r.updateViewProjectionMatrix(),delete t.forceMaterial,n.unbind(),o.default.setCamera(e),t.viewport()}});t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),i=u(n(30)),a=u(n(41)),s=u(n(6)),o=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=new s.default,f=new o.default,l=r.default.create({Extends:i.default,isDirectionalLight:!0,className:"DirectionalLight",shadow:null,constructor:function(e){this.direction=new o.default(0,0,1),l.superclass.constructor.call(this,e)},createShadowMap:function(e,t){this.shadow&&(this.lightShadow||(this.lightShadow=new a.default({light:this,renderer:e,width:this.shadow.width||e.width,height:this.shadow.height||e.height,debug:this.shadow.debug,cameraInfo:this.shadow.cameraInfo}),"minBias"in this.shadow&&(this.lightShadow.minBias=this.shadow.minBias),"maxBias"in this.shadow&&(this.lightShadow.maxBias=this.shadow.maxBias)),this.lightShadow.createShadowMap(t))},getWorldDirection:function(){return f.copy(this.direction).transformDirection(this.worldMatrix).normalize(),f},getViewDirection:function(e){var t=e.getModelViewMatrix(this,c);return f.copy(this.direction).transformDirection(t).normalize(),f}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),i=c(n(30)),a=c(n(41)),s=c(n(2)),o=c(n(6)),u=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}var f=new o.default,l=new u.default,h=r.default.create({Extends:i.default,isSpotLight:!0,className:"SpotLight",shadow:null,_cutoffCos:.9763,_cutoff:12.5,cutoff:{get:function(){return this._cutoff},set:function(e){this._cutoff=e,this._cutoffCos=Math.cos(s.default.degToRad(e))}},_outerCutoffCos:.9537,_outerCutoff:17.5,outerCutoff:{get:function(){return this._outerCutoff},set:function(e){this._outerCutoff=e,this._outerCutoffCos=Math.cos(s.default.degToRad(e))}},constructor:function(e){this.direction=new u.default(0,0,1),h.superclass.constructor.call(this,e)},createShadowMap:function(e,t){this.shadow&&(this.lightShadow||(this.lightShadow=new a.default({light:this,renderer:e,width:this.shadow.width||e.width,height:this.shadow.height||e.height,debug:this.shadow.debug,cameraInfo:this.shadow.cameraInfo}),"minBias"in this.shadow&&(this.lightShadow.minBias=this.shadow.minBias),"maxBias"in this.shadow&&(this.lightShadow.maxBias=this.shadow.maxBias)),this.lightShadow.createShadowMap(t))},getWorldDirection:function(){return l.copy(this.direction).transformDirection(this.worldMatrix).normalize(),l},getViewDirection:function(e){var t=e.getModelViewMatrix(this,f);return l.copy(this.direction).transformDirection(t).normalize(),l}});t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(39));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.create({Extends:i.default,isShaderMaterial:!0,className:"ShaderMaterial",vs:"",fs:"",constructor:function(e){s.superclass.constructor.call(this,e)},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.superclass.getRenderOption.call(this,e),this.getCustomRenderOption&&(e=this.getCustomRenderOption(e)),e},getCustomRenderOption:null});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);Object.defineProperty(t,"Color",{enumerable:!0,get:function(){return p(r).default}});var i=n(31);Object.defineProperty(t,"Euler",{enumerable:!0,get:function(){return p(i).default}});var a=n(71);Object.defineProperty(t,"Frustum",{enumerable:!0,get:function(){return p(a).default}});var s=n(2);Object.defineProperty(t,"math",{enumerable:!0,get:function(){return p(s).default}});var o=n(20);Object.defineProperty(t,"Matrix3",{enumerable:!0,get:function(){return p(o).default}});var u=n(6);Object.defineProperty(t,"Matrix4",{enumerable:!0,get:function(){return p(u).default}});var c=n(47);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return p(c).default}});var f=n(19);Object.defineProperty(t,"Quaternion",{enumerable:!0,get:function(){return p(f).default}});var l=n(32);Object.defineProperty(t,"Ray",{enumerable:!0,get:function(){return p(l).default}});var h=n(69);Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return p(h).default}});var d=n(37);Object.defineProperty(t,"Vector2",{enumerable:!0,get:function(){return p(d).default}});var _=n(3);Object.defineProperty(t,"Vector3",{enumerable:!0,get:function(){return p(_).default}});var m=n(24);function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Vector4",{enumerable:!0,get:function(){return p(m).default}})},function(e,t,n){"use strict";Object.assign||(Object.assign=n(149)),Object.keys||(Object.keys=n(150)),Object.values||(Object.values=n(151)),"undefined"==typeof Promise&&(window.Promise=n(152))},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(o[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(o[s[f]]=n[s[f]])}}return o}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(a){if("object"!==(void 0===a?"undefined":r(a))&&("function"!=typeof a||null===a))throw new TypeError("Object.keys called on non-object");var s,o,u=[];for(s in a)e.call(a,s)&&u.push(s);if(t)for(o=0;o<i;o++)e.call(a,n[o])&&u.push(n[o]);return u}}())},function(e,t,n){"use strict";e.exports=function(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}},function(e,t,n){"use strict";e.exports="function"==typeof Promise?Promise:n(153)},function(e,t,n){"use strict";(function(t,n){var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="pending",s="settled",o="fulfilled",u="rejected",c=function(){},f=void 0!==t&&void 0!==t.process&&"function"==typeof t.process.emit,l=void 0===n?setTimeout:n,h=[];function d(){for(var e=0;e<h.length;e++)h[e][0](h[e][1]);h=[],r=!1}function _(e,t){h.push([e,t]),r||(r=!0,l(d,0))}function m(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"==typeof i){n=o;try{r=i(r)}catch(e){E(a,e)}}p(a,r)||(n===o&&v(a,r),n===u&&E(a,r))}function p(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===(void 0===t?"undefined":i(t)))){var r=t.then;if("function"==typeof r)return r.call(t,function(r){n||(n=!0,t===r?g(e,r):v(e,r))},function(t){n||(n=!0,E(e,t))}),!0}}catch(t){return n||E(e,t),!0}return!1}function v(e,t){e!==t&&p(e,t)||g(e,t)}function g(e,t){e._state===a&&(e._state=s,e._data=t,_(M,e))}function E(e,t){e._state===a&&(e._state=s,e._data=t,_(A,e))}function T(e){e._then=e._then.forEach(m)}function M(e){e._state=o,T(e)}function A(e){e._state=u,T(e),!e._handled&&f&&t.process.emit("unhandledRejection",e._data,e)}function O(e){t.process.emit("rejectionHandled",e)}function y(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof y==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){E(t,e)}try{e(function(e){v(t,e)},n)}catch(e){n(e)}}(e,this)}y.prototype={constructor:y,_state:a,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(c),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===u&&f&&_(O,this)),this._state===o||this._state===u?_(m,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},y.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new y(function(t,n){var r=[],i=0;function a(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var s,o=0;o<e.length;o++)(s=e[o])&&"function"==typeof s.then?s.then(a(o),n):r[o]=s;i||t(r)})},y.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new y(function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"==typeof r.then?r.then(t,n):t(r)})},y.resolve=function(e){return e&&"object"===(void 0===e?"undefined":i(e))&&e.constructor===y?e:new y(function(t){t(e)})},y.reject=function(e){return new y(function(t,n){n(e)})},e.exports=y}).call(this,n(48),n(154).setImmediate)},function(e,t,n){"use strict";(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(155),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}).call(this,n(48))},function(e,t,n){"use strict";(function(e,t){!function(e,n){if(!e.setImmediate){var r,i=1,a={},s=!1,o=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){f(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&f(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){f(e.data)},r=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;r=function(t){var n=o.createElement("script");n.onreadystatechange=function(){f(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(f,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return a[i]=s,r(i),i++},u.clearImmediate=c}function c(e){delete a[e]}function f(e){if(s)setTimeout(f,0,e);else{var t=a[e];if(t){s=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{c(e),s=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,n(48),n(156))},function(e,t,n){"use strict";var r,i,a=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var c,f=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?f=c.concat(f):h=-1,f.length&&_())}function _(){if(!l){var e=u(d);l=!0;for(var t=f.length;t;){for(c=f,f=[];++h<t;)c&&c[h].run();h=-1,t=f.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new m(e,t)),1!==f.length||l||u(_)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constants=t.WebGLSupport=t.browser=t.Cache=t.log=t.Ticker=t.MeshPicker=t.AnimationStates=t.Animation=t.SpotLight=t.PointLight=t.LightShadow=t.LightManager=t.Light=t.CubeLightShadow=t.DirectionalLight=t.AmbientLight=t.CameraHelper=t.AxisNetHelper=t.AxisHelper=t.ShaderMaterial=t.semantic=t.PBRMaterial=t.Material=t.GeometryMaterial=t.BasicMaterial=t.Shader=t.DataTexture=t.CubeTexture=t.LazyTexture=t.Texture=t.Loader=t.TextureLoader=t.ShaderMaterialLoader=t.LoadQueue=t.LoadCache=t.KTXLoader=t.HDRLoader=t.AliAMCExtension=t.GLTFParser=t.GLTFLoader=t.CubeTextureLoader=t.BasicLoader=t.WebGLState=t.WebGLResourceManager=t.WebGLRenderer=t.VertexArrayObject=t.RenderList=t.RenderInfo=t.Program=t.glType=t.Framebuffer=t.extensions=t.capabilities=t.Buffer=t.OrthographicCamera=t.PerspectiveCamera=t.Camera=t.SphereGeometry=t.PlaneGeometry=t.MorphGeometry=t.GeometryData=t.Geometry=t.BoxGeometry=t.Tween=t.Stage=t.SkinedMesh=t.Node=t.Mesh=t.Fog=t.EventMixin=t.Class=t.version=t.util=void 0;var r=n(0);Object.defineProperty(t,"Class",{enumerable:!0,get:function(){return Oe(r).default}});var i=n(9);Object.defineProperty(t,"EventMixin",{enumerable:!0,get:function(){return Oe(i).default}});var a=n(158);Object.defineProperty(t,"Fog",{enumerable:!0,get:function(){return Oe(a).default}});var s=n(21);Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return Oe(s).default}});var o=n(15);Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return Oe(o).default}});var u=n(87);Object.defineProperty(t,"SkinedMesh",{enumerable:!0,get:function(){return Oe(u).default}});var c=n(159);Object.defineProperty(t,"Stage",{enumerable:!0,get:function(){return Oe(c).default}});var f=n(162);Object.defineProperty(t,"Tween",{enumerable:!0,get:function(){return Oe(f).default}});var l=n(165);Object.defineProperty(t,"BoxGeometry",{enumerable:!0,get:function(){return Oe(l).default}});var h=n(7);Object.defineProperty(t,"Geometry",{enumerable:!0,get:function(){return Oe(h).default}});var d=n(8);Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return Oe(d).default}});var _=n(131);Object.defineProperty(t,"MorphGeometry",{enumerable:!0,get:function(){return Oe(_).default}});var m=n(166);Object.defineProperty(t,"PlaneGeometry",{enumerable:!0,get:function(){return Oe(m).default}});var p=n(167);Object.defineProperty(t,"SphereGeometry",{enumerable:!0,get:function(){return Oe(p).default}});var v=n(70);Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return Oe(v).default}});var g=n(38);Object.defineProperty(t,"PerspectiveCamera",{enumerable:!0,get:function(){return Oe(g).default}});var E=n(132);Object.defineProperty(t,"OrthographicCamera",{enumerable:!0,get:function(){return Oe(E).default}});var T=n(68);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return Oe(T).default}});var M=n(12);Object.defineProperty(t,"capabilities",{enumerable:!0,get:function(){return Oe(M).default}});var A=n(22);Object.defineProperty(t,"extensions",{enumerable:!0,get:function(){return Oe(A).default}});var O=n(29);Object.defineProperty(t,"Framebuffer",{enumerable:!0,get:function(){return Oe(O).default}});var y=n(66);Object.defineProperty(t,"glType",{enumerable:!0,get:function(){return Oe(y).default}});var S=n(65);Object.defineProperty(t,"Program",{enumerable:!0,get:function(){return Oe(S).default}});var I=n(124);Object.defineProperty(t,"RenderInfo",{enumerable:!0,get:function(){return Oe(I).default}});var L=n(125);Object.defineProperty(t,"RenderList",{enumerable:!0,get:function(){return Oe(L).default}});var R=n(67);Object.defineProperty(t,"VertexArrayObject",{enumerable:!0,get:function(){return Oe(R).default}});var b=n(88);Object.defineProperty(t,"WebGLRenderer",{enumerable:!0,get:function(){return Oe(b).default}});var x=n(127);Object.defineProperty(t,"WebGLResourceManager",{enumerable:!0,get:function(){return Oe(x).default}});var N=n(126);Object.defineProperty(t,"WebGLState",{enumerable:!0,get:function(){return Oe(N).default}});var P=n(13);Object.defineProperty(t,"BasicLoader",{enumerable:!0,get:function(){return Oe(P).default}});var w=n(168);Object.defineProperty(t,"CubeTextureLoader",{enumerable:!0,get:function(){return Oe(w).default}});var C=n(169);Object.defineProperty(t,"GLTFLoader",{enumerable:!0,get:function(){return Oe(C).default}});var D=n(135);Object.defineProperty(t,"GLTFParser",{enumerable:!0,get:function(){return Oe(D).default}});var H=n(140);Object.defineProperty(t,"AliAMCExtension",{enumerable:!0,get:function(){return Oe(H).default}});var F=n(177);Object.defineProperty(t,"HDRLoader",{enumerable:!0,get:function(){return Oe(F).default}});var U=n(179);Object.defineProperty(t,"KTXLoader",{enumerable:!0,get:function(){return Oe(U).default}});var G=n(133);Object.defineProperty(t,"LoadCache",{enumerable:!0,get:function(){return Oe(G).default}});var B=n(180);Object.defineProperty(t,"LoadQueue",{enumerable:!0,get:function(){return Oe(B).default}});var j=n(181);Object.defineProperty(t,"ShaderMaterialLoader",{enumerable:!0,get:function(){return Oe(j).default}});var V=n(182);Object.defineProperty(t,"TextureLoader",{enumerable:!0,get:function(){return Oe(V).default}});var X=n(14);Object.defineProperty(t,"Loader",{enumerable:!0,get:function(){return Oe(X).default}});var k=n(11);Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return Oe(k).default}});var z=n(137);Object.defineProperty(t,"LazyTexture",{enumerable:!0,get:function(){return Oe(z).default}});var Y=n(134);Object.defineProperty(t,"CubeTexture",{enumerable:!0,get:function(){return Oe(Y).default}});var W=n(49);Object.defineProperty(t,"DataTexture",{enumerable:!0,get:function(){return Oe(W).default}});var q=n(34);Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return Oe(q).default}});var Z=n(18);Object.defineProperty(t,"BasicMaterial",{enumerable:!0,get:function(){return Oe(Z).default}});var K=n(72);Object.defineProperty(t,"GeometryMaterial",{enumerable:!0,get:function(){return Oe(K).default}});var Q=n(39);Object.defineProperty(t,"Material",{enumerable:!0,get:function(){return Oe(Q).default}});var J=n(136);Object.defineProperty(t,"PBRMaterial",{enumerable:!0,get:function(){return Oe(J).default}});var $=n(26);Object.defineProperty(t,"semantic",{enumerable:!0,get:function(){return Oe($).default}});var ee=n(146);Object.defineProperty(t,"ShaderMaterial",{enumerable:!0,get:function(){return Oe(ee).default}});var te=n(183);Object.defineProperty(t,"AxisHelper",{enumerable:!0,get:function(){return Oe(te).default}});var ne=n(184);Object.defineProperty(t,"AxisNetHelper",{enumerable:!0,get:function(){return Oe(ne).default}});var re=n(185);Object.defineProperty(t,"CameraHelper",{enumerable:!0,get:function(){return Oe(re).default}});var ie=n(186);Object.defineProperty(t,"AmbientLight",{enumerable:!0,get:function(){return Oe(ie).default}});var ae=n(144);Object.defineProperty(t,"DirectionalLight",{enumerable:!0,get:function(){return Oe(ae).default}});var se=n(143);Object.defineProperty(t,"CubeLightShadow",{enumerable:!0,get:function(){return Oe(se).default}});var oe=n(30);Object.defineProperty(t,"Light",{enumerable:!0,get:function(){return Oe(oe).default}});var ue=n(128);Object.defineProperty(t,"LightManager",{enumerable:!0,get:function(){return Oe(ue).default}});var ce=n(41);Object.defineProperty(t,"LightShadow",{enumerable:!0,get:function(){return Oe(ce).default}});var fe=n(142);Object.defineProperty(t,"PointLight",{enumerable:!0,get:function(){return Oe(fe).default}});var le=n(145);Object.defineProperty(t,"SpotLight",{enumerable:!0,get:function(){return Oe(le).default}});var he=n(139);Object.defineProperty(t,"Animation",{enumerable:!0,get:function(){return Oe(he).default}});var de=n(138);Object.defineProperty(t,"AnimationStates",{enumerable:!0,get:function(){return Oe(de).default}});var _e=n(187);Object.defineProperty(t,"MeshPicker",{enumerable:!0,get:function(){return Oe(_e).default}});var me=n(188);Object.defineProperty(t,"Ticker",{enumerable:!0,get:function(){return Oe(me).default}});var pe=n(33);Object.defineProperty(t,"log",{enumerable:!0,get:function(){return Oe(pe).default}});var ve=n(16);Object.defineProperty(t,"Cache",{enumerable:!0,get:function(){return Oe(ve).default}});var ge=n(129);Object.defineProperty(t,"browser",{enumerable:!0,get:function(){return Oe(ge).default}});var Ee=n(190);Object.defineProperty(t,"WebGLSupport",{enumerable:!0,get:function(){return Oe(Ee).default}});var Te=n(1);Object.defineProperty(t,"constants",{enumerable:!0,get:function(){return Oe(Te).default}});var Me=n(147);Object.keys(Me).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return Me[e]}})});var Ae=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5));function Oe(e){return e&&e.__esModule?e:{default:e}}t.util=Ae;t.version="1.5.98"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(4)),a=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var o=new Float32Array(2),u=r.default.create({isFog:!0,className:"Fog",mode:"LINEAR",start:5,end:10,density:.1,constructor:function(e){this.id=a.default.generateUUID(this.className),this.color=new i.default(1,1,1,1),Object.assign(this,e)},getInfo:function(){return"LINEAR"===this.mode?(o[0]=this.start,o[1]=this.end,o):this.density},getRenderOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e["FOG_"+this.mode]=1,e}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(15)),a=f(n(88)),s=f(n(32)),o=f(n(3)),u=f(n(129)),c=n(5);function f(e){return e&&e.__esModule?e:{default:e}}var l=r.default.create({Extends:i.default,isStage:!0,className:"Stage",renderer:null,camera:null,pixelRatio:null,offsetX:0,offsetY:0,constructor:function(e){if(e.width||(e.width=innerWidth),e.height||(e.height=innerHeight),!e.pixelRatio){var t=window.devicePixelRatio||1;t=Math.min(t,1024/Math.max(e.width,e.height),2),t=Math.max(t,1),e.pixelRatio=t}l.superclass.constructor.call(this,e),this.initRenderer(e)},initRenderer:function(e){var t=this.canvas=this.createCanvas(e);this.renderer=new a.default(Object.assign(e,{domElement:t})),this.resize(this.width,this.height,this.pixelRatio,!0)},createCanvas:function(e){var t=void 0;return t=e.canvas?e.canvas:document.createElement("canvas"),e.container&&e.container.appendChild(t),t},resize:function(e,t,n,r){if(void 0===n&&(n=this.pixelRatio),r||this.width!==e||this.height!==t||this.pixelRatio!==n){this.width=e,this.height=t,this.pixelRatio=n,this.rendererWidth=e*n,this.rendererHeight=t*n;var i=this.canvas;this.renderer.resize(this.rendererWidth,this.rendererHeight,r),i.style.width=this.width+"px",i.style.height=this.height+"px",this.updateDomViewport()}return this},setOffset:function(e,t){if(this.offsetX!==e||this.offsetY!==t){this.offsetX=e,this.offsetY=t;var n=this.pixelRatio;this.renderer.setOffset(e*n,t*n)}return this},viewport:function(e,t,n,r){return this.resize(n,r,this.pixelRatio,!0),this.setOffset(e,t),this},tick:function(e){return this.traverseUpdate(e),this.renderer.render(this,this.camera,!0),this},enableDOMEvent:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.canvas,i=this._domListener||(this._domListener=function(e){t._onDOMEvent(e)});return(e="string"==typeof e?[e]:e).forEach(function(e){n?r.addEventListener(e,i,!1):r.removeEventListener(e,i)}),this},_onDOMEvent:function(e){var t=this.canvas,n=this._eventTarget,r=e.type,i=0===r.indexOf("touch"),a=e;if(i){var s=e.touches,o=e.changedTouches;s&&s.length?a=s[0]:o&&o.length&&(a=o[0])}var c=this.domViewport||this.updateDomViewport(),f=(a.pageX||a.clientX)-c.left,l=(a.pageY||a.clientY)-c.top;e.stageX=f,e.stageY=l,e.stopPropagation=function(){this._stopPropagationed=!0};var h=this.getMeshResultAtPoint(f,l,!0),d=h.mesh;e.hitPoint=h.point;var _="mouseout"===r;if(n&&(n!==d&&(!n.contains||!n.contains(d))||_)){var m=!1;if("touchmove"===r?m="touchout":"mousemove"!==r&&!_&&d||(m="mouseout"),m){var p=Object.assign({},e);p.type=m,p.eventTarget=n,n._fireMouseEvent(p)}e.lastEventTarget=n,this._eventTarget=null}if(d&&d.pointerEnabled&&"mouseout"!==r&&(e.eventTarget=this._eventTarget=d,d._fireMouseEvent(e)),!i){var v=d&&d.pointerEnabled&&d.useHandCursor?"pointer":"";t.style.cursor=v}u.default.android&&"touchmove"===r&&e.preventDefault()},updateDomViewport:function(){var e=this.canvas,t=null;return e.parentNode&&(t=this.domViewport=(0,c.getElementRect)(e)),t},getMeshResultAtPoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.camera,i=this._ray;i||(i=this._ray=new s.default),i.fromCamera(r,e,t,this.width,this.height);var a=this.raycast(i,!0,n);if(a)return a[0];this._stageResultAtPoint||(this._stageResultAtPoint={mesh:this,point:new o.default});var u=this._stageResultAtPoint.point;return u.copy(r.unprojectVector(u.set(e,t,0),this.width,this.height)),this._stageResultAtPoint},releaseGLResource:function(){return this.renderer.releaseGLResource(),this},destroy:function(){return this.releaseGLResource(),this.traverse(function(e){e.off(),e.parent=null}),this.children.length=0,this.renderer.off(),this}});t.default=l},function(e,t){e.exports="#define GLSLIFY 1\nfloat transpose(float m) {\n  return m;\n}\n\nmat2 transpose(mat2 m) {\n  return mat2(m[0][0], m[1][0],\n              m[0][1], m[1][1]);\n}\n\nmat3 transpose(mat3 m) {\n  return mat3(m[0][0], m[1][0], m[2][0],\n              m[0][1], m[1][1], m[2][1],\n              m[0][2], m[1][2], m[2][2]);\n}\n\nmat4 transpose(mat4 m) {\n  return mat4(m[0][0], m[1][0], m[2][0], m[3][0],\n              m[0][1], m[1][1], m[2][1], m[3][1],\n              m[0][2], m[1][2], m[2][2], m[3][2],\n              m[0][3], m[1][3], m[2][3], m[3][3]);\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new ArrayBuffer(1),i={getTypedArray:function(e,t){return this._updateBuffer(t*e.BYTES_PER_ELEMENT),new e(r,0,t)},fillArrayData:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,i=t.length;r<i;r++)e[n+r]=t[r]},_updateBuffer:function(e){r.byteLength<e&&(r=new ArrayBuffer(2*e))}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(163)),i=a(n(164));function a(e){return e&&e.__esModule?e:{default:e}}r.default.Ease=i.default,t.default=r.default},function(e,t,n){"use strict";var r=n(23),i=function(){function e(){return+new Date}return r.create({constructor:function(e,t,n,r){var i=this;for(var a in i.target=e,i._startTime=0,i._seekTime=0,i._pausedTime=0,i._pausedStartTime=0,i._reverseFlag=1,i._repeatCount=0,3==arguments.length&&(r=n,n=t,t=null),r)i[a]=r[a];i._fromProps=t,i._toProps=n,!r.duration&&r.time&&(i.duration=r.time||0,i.time=0)},target:null,duration:1e3,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,isStart:!1,onStart:null,onUpdate:null,onComplete:null,setProps:function(e,t){var n=this.target,r=e||t,i=this._fromProps={},a=this._toProps={};for(var s in e=e||n,t=t||n,r)a[s]=t[s]||0,n[s]=i[s]=e[s]||0;return this},start:function(){var t=this;return t._startTime=e()+t.delay,t._seekTime=0,t._pausedTime=0,t.paused=!1,i.add(t),t},stop:function(){return i.remove(this),this},pause:function(){return this.paused=!0,this._pausedStartTime=e(),this},resume:function(){var t=this;return t.paused=!1,t._pausedStartTime&&(t._pausedTime+=e()-t._pausedStartTime),t._pausedStartTime=0,t},seek:function(t,n){var r=this,a=e();return r._startTime=a,r._seekTime=t,r._pausedTime=0,void 0!==n&&(r.paused=n),r._update(a,!0),i.add(r),r},link:function(e){var t,n,r=e.delay,a=this._startTime;return"string"==typeof r&&(t=0==r.indexOf("+"),n=0==r.indexOf("-"),r=t||n?Number(r.substr(1))*(t?1:-1):Number(r)),e.delay=r,e._startTime=t||n?a+this.duration+r:a+r,this._next=e,i.remove(e),e},_render:function(e){var t,n=this.target,r=this._fromProps;for(t in r)n[t]=r[t]+(this._toProps[t]-r[t])*e},_update:function(t,n){var r=this;if(!r.paused||n){var a=t-r._startTime-r._pausedTime+r._seekTime;if(!(a<0)){var s,o=a/r.duration,u=!1;o=o<=0?0:o>=1?1:o;var c=r.ease?r.ease(o):o;r.reverse&&(r._reverseFlag<0&&(o=1-o,c=1-c),o<1e-7&&(r.repeat>0&&r._repeatCount++>=r.repeat||0==r.repeat&&!r.loop?u=!0:(r._startTime=e(),r._pausedTime=0,r._reverseFlag*=-1))),r.isStart||(r.setProps(r._fromProps,r._toProps),r.isStart=!0,r.onStart&&r.onStart.call(r,r)),r.time=a,r._render(c),(s=r.onUpdate)&&s.call(r,o,r),o>=1&&(r.reverse?(r._startTime=e(),r._pausedTime=0,r._reverseFlag*=-1):r.loop||r.repeat>0&&r._repeatCount++<r.repeat?(r._startTime=e()+r.repeatDelay,r._pausedTime=0):u=!0);var f=r._next;if(f&&f.time<=0){var l=f._startTime;l>0&&l<=t?(f._render(o),f.time=a,i.add(f)):u&&(l<0||l>t)&&f.start()}return u?((s=r.onComplete)&&s.call(r,r),!0):void 0}}},Statics:{_tweens:[],tick:function(){var t,n,r=i._tweens,a=r.length;for(n=0;n<a;n++)(t=r[n])&&t._update(e())&&(r.splice(n,1),n--);return i},add:function(e){var t=i._tweens;return-1==t.indexOf(e)&&t.push(e),i},remove:function(e){var t,n;if(e instanceof Array){for(t=0,n=e.length;t<n;t++)i.remove(e[t]);return i}var r=i._tweens;if(e instanceof i)(t=r.indexOf(e))>-1&&r.splice(t,1);else for(t=0;t<r.length;t++)r[t].target===e&&(r.splice(t,1),t--);return i},removeAll:function(){return i._tweens.length=0,i},fromTo:function(e,t,n,r){r=r||{};var a=e instanceof Array;e=a?e:[e];var s,o,u=r.stagger,c=[];for(o=0;o<e.length;o++)s=new i(e[o],t,n,r),u&&(s.delay=(r.delay||0)+(o*u||0)),s.start(),c.push(s);return a?c:s},to:function(e,t,n){return i.fromTo(e,null,t,n)},from:function(e,t,n){return i.fromTo(e,t,null,n)}}})}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t,n,r,i){return e=e||{},t&&(e.EaseIn=t),n&&(e.EaseOut=n),r&&(e.EaseInOut=r),i&&(e.EaseNone=i),e}var t=e(null,null,null,null,function(e){return e}),n=e(null,function(e){return e*e},function(e){return-e*(e-2)},function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}),r=e(null,function(e){return e*e*e},function(e){return--e*e*e+1},function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}),i=e(null,function(e){return e*e*e*e},function(e){return-(--e*e*e*e-1)},function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}),a=e(null,function(e){return e*e*e*e*e},function(e){return(e-=1)*e*e*e*e+1},function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}),s=Math,o=s.PI,u=.5*o,c=s.sin,f=s.cos,l=s.pow,h=s.sqrt,d=e(null,function(e){return 1-f(e*u)},function(e){return c(e*u)},function(e){return-.5*(f(o*e)-1)}),_=e(null,function(e){return 0==e?0:l(2,10*(e-1))},function(e){return 1==e?1:1-l(2,-10*e)},function(e){return 0==e||1==e?e:(e*=2)<1?.5*l(2,10*(e-1)):.5*(2-l(2,-10*(e-1)))}),m=e(null,function(e){return-(h(1-e*e)-1)},function(e){return h(1- --e*e)},function(e){return(e/=.5)<1?-.5*(h(1-e*e)-1):.5*(h(1-(e-=2)*e)+1)}),p=e({a:1,p:.4,s:.1,config:function(e,t){p.a=e,p.p=t,p.s=t/(2*o)*Math.asin(1/e)||0}},function(e){return-p.a*l(2,10*(e-=1))*c((e-p.s)*(2*o)/p.p)},function(e){return p.a*l(2,-10*e)*c((e-p.s)*(2*o)/p.p)+1},function(e){return(e*=2)<1?p.a*l(2,10*(e-=1))*c((e-p.s)*(2*o)/p.p)*-.5:p.a*l(2,-10*(e-=1))*c((e-p.s)*(2*o)/p.p)*.5+1}),v=e({o:1.70158,s:2.59491,config:function(e){v.o=e,v.s=1.525*e}},function(e){return e*e*((v.o+1)*e-v.o)},function(e){return(e-=1)*e*((v.o+1)*e+v.o)+1},function(e){return(e*=2)<1?e*e*((v.s+1)*e-v.s)*.5:.5*((e-=2)*e*((v.s+1)*e+v.s)+2)}),g=e(null,function(e){return 1-g.EaseOut(1-e)},function(e){return(e/=1)<.36364?7.5625*e*e:e<.72727?7.5625*(e-=.54545)*e+.75:e<.90909?7.5625*(e-=.81818)*e+.9375:7.5625*(e-=.95455)*e+.984375},function(e){return e<.5?.5*g.EaseIn(2*e):.5*g.EaseOut(2*e-1)+.5});return{Linear:t,Quad:n,Cubic:r,Quart:i,Quint:a,Sine:d,Expo:_,Circ:m,Elastic:p,Back:v,Bounce:g}}();e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(7)),a=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isBoxGeometry:!0,className:"BoxGeometry",width:1,height:1,depth:1,widthSegments:1,heightSegments:1,depthSegments:1,constructor:function(e){o.superclass.constructor.call(this,e),this.isSegments()?this.buildWithSegments():this.build()},buildWithSegments:function(){var e=this.width,t=this.height,n=this.depth,r=this.widthSegments,i=this.heightSegments,s=this.depthSegments,o=i*s*6,u=r*s*6,c=r*i*6,f=2*((i+1)*(s+1)+(r+1)*(s+1)+(r+1)*(i+1)),l=new Float32Array(3*f),h=new Float32Array(3*f),d=new Float32Array(2*f),_=new Uint16Array(2*(o+u+c));this.vertices=new a.default(l,3),this.normals=new a.default(h,3),this.uvs=new a.default(d,2),this.indices=new a.default(_,1);var m=[0,0];this.buildPlane(m,2,1,0,-1,1,n,t,e/2,s,i),this.buildPlane(m,2,1,0,1,1,n,t,-e/2,s,i),this.buildPlane(m,0,2,1,1,-1,e,n,t/2,r,s),this.buildPlane(m,0,2,1,1,1,e,n,-t/2,r,s),this.buildPlane(m,0,1,2,1,1,e,t,n/2,r,i),this.buildPlane(m,0,1,2,-1,1,e,t,-n/2,r,i)},buildPlane:function(e,t,n,r,i,a,s,o,u,c,f){for(var l=s/c,h=o/f,d=s/2,_=o/2,m=e[0],p=e[1],v=this.vertices.data,g=this.normals.data,E=this.uvs.data,T=this.indices.data,M=0;M<=f;M++)for(var A=(M*h-_)*a,O=0;O<=c;O++){if(v[3*m+t]=(O*l-d)*i,v[3*m+n]=A,v[3*m+r]=u,g[3*m+t]=0,g[3*m+n]=0,g[3*m+r]=u<0?-1:1,E[2*m]=O/c,E[2*m+1]=1-M/f,O<c&&M<f){var y=e[0]+(M+1)*(c+1)+O;T[p++]=y,T[p++]=m,T[p++]=y+1,T[p++]=y+1,T[p++]=m,T[p++]=m+1}m++}e[0]=m,e[1]=p},build:function(){var e=new Float32Array(72),t=new Uint16Array(36);this.vertices=new a.default(e,3),this.indices=new a.default(t,1);var n=this.width/2,r=this.height/2,i=this.depth/2,s=[-n,-r,-i],o=[n,-r,-i],u=[n,r,-i],c=[-n,r,-i],f=[-n,-r,i],l=[n,-r,i],h=[n,r,i],d=[-n,r,i];this.addRect(l,o,u,h),this.addRect(s,f,d,c),this.addRect(d,h,u,c),this.addRect(s,o,l,f),this.addRect(f,l,h,d),this.addRect(o,s,c,u)},isSegments:function(){return this.widthSegments>1||this.heightSegments>1||this.depthSegments>1},setFrontUV:function(e){this.isSegments()?console.warn("segmented BoxGeometry dont support setFrontUV!"):this.setVertexUV(32,e)},setRightUV:function(e){this.isSegments()?console.warn("segmented BoxGeometry dont support setRightUV!"):this.setVertexUV(0,e)},setBackUV:function(e){this.isSegments()?console.warn("segmented BoxGeometry dont support setBackUV!"):this.setVertexUV(40,e)},setLeftUV:function(e){this.isSegments()?console.warn("segmented BoxGeometry dont support setLeftUV!"):this.setVertexUV(8,e)},setTopUV:function(e){this.isSegments()?console.warn("segmented BoxGeometry dont support setTopUV!"):this.setVertexUV(16,e)},setBottomUV:function(e){this.isSegments()?console.warn("segmented BoxGeometry dont support setBottomUV!"):this.setVertexUV(24,e)},setAllRectUV:function(e){if(this.isSegments())return console.warn("segmented BoxGeometry dont support setAllRectUV!"),null;for(var t=0;t<6;t++)this.setVertexUV(8*t,e);return this},_raycast:function(e,t){return o.superclass._raycast.call(this,e,t)}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(7)),a=o(n(8)),s=n(1);function o(e){return e&&e.__esModule?e:{default:e}}var u=[0,0,1],c=r.default.create({Extends:i.default,isPlaneGeometry:!0,className:"PlaneGeometry",width:1,height:1,widthSegments:1,heightSegments:1,constructor:function(e){c.superclass.constructor.call(this,e),this.build()},build:function(){for(var e=this.widthSegments,t=this.heightSegments,n=(e+1)*(t+1),r=this.width/e,i=this.height/t,s=new Float32Array(3*n),o=new Float32Array(3*n),u=new Float32Array(2*n),c=new Uint16Array(e*t*6),f=0,l=0;l<=t;l++)for(var h=0;h<=e;h++){var d=l*(e+1)+h;if(s[3*d]=h*r-this.width/2,s[3*d+1]=this.height/2-l*i,o[3*d]=0,o[3*d+1]=0,o[3*d+2]=1,u[2*d]=h/e,u[2*d+1]=1-l/t,l<t&&h<e){var _=(l+1)*(e+1)+h;c[f++]=d,c[f++]=_,c[f++]=_+1,c[f++]=d,c[f++]=_+1,c[f++]=d+1}}this.vertices=new a.default(s,3),this.indices=new a.default(c,1),this.normals=new a.default(o,3),this.uvs=new a.default(u,2)},_raycast:function(e,t){var n=e.origin.z,r=e.direction.z;if(t===s.FRONT&&(r>0||n<0))return null;if(t===s.BACK&&(r<0||n>0))return null;var i=e.intersectsPlane(u,0);if(i){var a=i.x,o=i.y,c=.5*this.width,f=.5*this.height;if(a>=-c&&a<=c&&o>=-f&&o<=f)return[i]}return null}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(7)),a=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isSphereGeometry:!0,className:"SphereGeometry",radius:1,heightSegments:16,widthSegments:32,constructor:function(e){o.superclass.constructor.call(this,e),this.build()},build:function(){for(var e=this.radius,t=this.heightSegments,n=this.widthSegments,r=(n+1)*(t+1),i=n*t,s=new Float32Array(3*r),o=new Float32Array(4*r),u=new Float32Array(2*r),c=new Uint16Array(6*i),f=0,l=0,h=0,d=0,_=0,m=2*Math.PI,p=Math.PI,v=0;v<=t;v++)for(var g=v/t,E=p*g,T=Math.cos(E)*e,M=Math.sin(E)*e,A=0;A<=n;A++){var O=A/n,y=m*O,S=Math.cos(y),I=Math.sin(y),L=S*M,R=I*M,b=I,x=-S;if(o[h++]=b,o[h++]=0,o[h++]=x,o[h++]=1,s[l++]=L,s[l++]=T,s[l++]=R,u[d++]=O,u[d++]=g,v>0&&A>0){var N=_,P=N-1,w=P-n-1,C=N-n-1;c[f++]=w,c[f++]=C,c[f++]=N,c[f++]=w,c[f++]=N,c[f++]=P}_++}this.vertices=new a.default(s,3),this.indices=new a.default(c,1),this.uvs=new a.default(u,2),this.tangents=new a.default(o,4),this.normals=new a.default(new Float32Array(s),3)},_raycast:function(e,t){return o.superclass._raycast.call(this,e,t)}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(13)),a=o(n(134)),s=o(n(14));function o(e){return e&&e.__esModule?e:{default:e}}var u=r.default.create({Extends:i.default,isCubeTextureLoader:!0,className:"CubeTextureLoader",constructor:function(){u.superclass.constructor.call(this)},load:function(e){var t=this,n=void 0;return n=e.images&&Array.isArray(e.images)?e.images:[e.right,e.left,e.top,e.bottom,e.front,e.back],Promise.all(n.map(function(n){return t.loadImg(n,e.crossOrigin)})).then(function(t){var n=Object.assign({},e);return delete n.images,delete n.type,delete n.right,delete n.left,delete n.top,delete n.bottom,delete n.front,delete n.back,n.image=t,new a.default(n)}).catch(function(e){throw console.warn("load CubeTexture failed",e.message,e.stack),e})}});s.default.addLoader("CubeTexture",u),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(13)),a=o(n(135)),s=o(n(14));function o(e){return e&&e.__esModule?e:{default:e}}var u=r.default.create({Extends:i.default,isGLTFLoader:!0,className:"GLTFLoader",constructor:function(){u.superclass.constructor.call(this)},load:function(e){var t=this;return this.loadRes(e.src,"buffer").then(function(n){return new a.default(n,e).parse(t)}).catch(function(e){throw console.warn("load gltf failed",e.message,e.stack),e})}});s.default.addLoader("gltf",u),s.default.addLoader("glb",u),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KHR_lights_punctual=t.KHR_materials_pbrSpecularGlossiness=t.ALI_bounding_box=t.ALI_animation_clips=t.HILO_animation_clips=t.WEB3D_quantized_attributes=t.ALI_amc_mesh_compression=void 0;var r=n(140);Object.defineProperty(t,"ALI_amc_mesh_compression",{enumerable:!0,get:function(){return c(r).default}});var i=c(n(142)),a=c(n(144)),s=c(n(145)),o=c(n(4)),u=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var f=t.WEB3D_quantized_attributes={unQuantizeData:function(e,t){if(!t)return e;var n=Math.sqrt(t.length),r=n-1,i=new Float32Array(e.length),a=[];return e.traverse(function(e,s){e.toArray?e.toArray(a):a[0]=e;for(var o=s*r,u=0;u<n;u++){i[o+u]=0;for(var c=0;c<n;c++){var f=c===r?1:a[c];i[o+u]+=t[c*n+u]*f}}}),e.data=i,e.stride=0,e.offset=0,e},parse:function(e,t,n,r){var i=e.decodeMatrix;return r.isDecode?n=f.unQuantizeData(n,i):n.decodeMat=i,n}},l=t.HILO_animation_clips={parse:function(e,t,n){if(!n.anim||t.isMultiAnim)return n;for(var r in e){var i=e[r];n.anim.addClip(r,i[0],i[1])}return n}};t.ALI_animation_clips=l,t.ALI_bounding_box={parse:function(e,t,n){return e.center=e.max.map(function(t,n){return(t+e.min[n])/2}),e.width=e.max[0]-e.min[0],e.height=e.max[1]-e.min[1],e.depth=e.max[2]-e.min[2],e.size=Math.sqrt(Math.pow(e.width,2)+Math.pow(e.height,2)+Math.pow(e.depth,2)),n.bounds=e,n}},t.KHR_materials_pbrSpecularGlossiness={parse:function(e,t,n){return e.diffuseFactor&&n.baseColor.fromArray(e.diffuseFactor),e.diffuseTexture&&(n.baseColorMap=t.getTexture(e.diffuseTexture)),e.specularFactor&&(n.specular.fromArray(e.specularFactor),n.specular.a=1),"glossinessFactor"in e&&(n.glossiness=e.glossinessFactor),e.specularGlossinessTexture&&(n.specularGlossinessMap=t.getTexture(e.specularGlossinessTexture)),n.isSpecularGlossiness=!0,n}},t.KHR_lights_punctual={parse:function(e,t,n,r){if(!r.isGlobalExtension&&t.isUseExtension(t.json,"KHR_lights_punctual")&&t.json.extensions.KHR_lights_punctual.lights){var c=t.json.extensions.KHR_lights_punctual.lights[e.light];if(c){var f=void 0,l=new o.default(1,1,1,1);c.color&&(l.r=c.color[0],l.g=c.color[1],l.b=c.color[2]);var h=void 0!==c.intensity?c.intensity:1,d=c.name||"",_=c.spot||{},m=void 0!==_.innerConeAngle?u.default.radToDeg(_.innerConeAngle):0,p=void 0!==_.outerConeAngle?u.default.radToDeg(_.outerConeAngle):45,v=c.range||0;switch(c.type){case"directional":f=new a.default({color:l,amount:h,name:d,range:v});break;case"point":f=new i.default({color:l,amount:h,name:d,range:v});break;case"spot":f=new s.default({color:l,amount:h,name:d,range:v,cutoff:m,outerCutoff:p});break;default:return}f&&(n.addChild(f),t.lights.push(f))}}}}},function(e,t,n){"use strict";var r=n(40),i=n(172),a=n(174),s=n(175),o=n(176),u=[i],c=[a];function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e instanceof Uint8Array&&(t=e.byteOffset,e=e.buffer),function(e){return new u[e.type](e).decompress()}(function(e,t){var n=new Uint8Array(e,t,4);if(65!==n[0]||77!==n[1]||67!==n[2])throw new Error("The file is not AMC format!");var r=c[n[3]].read(e,t+4);return r.geometry.type=n[3],r.geometry}(e,t))}var l,h=null;function d(e){return!h&&o()?(h=new s({wasmURL:e})).init():Promise.resolve()}function _(e,t){if(h||d(),!h||!h.isReady)return f(e);try{return h.decompress(e)}catch(t){return console.warn("wasm decompress error",t),f(e)}}function m(e){return e=e||"https://g.alicdn.com/hilo/amc/0.1.18/worker.js",l?Promise.resolve(l):!1===l||"undefined"==typeof Worker||"undefined"==typeof URL||"undefined"==typeof Blob?Promise.reject("dont support web worker"):new Promise(function(t,n){var r=new XMLHttpRequest;r.addEventListener("load",function(){var e=URL.createObjectURL(new Blob([this.responseText]));(l=new Worker(e)).onerror=function(e){console.log("web worker error",e),l=!1,n(e)},t(l)}),r.addEventListener("error",function(e){return n(e)}),r.open("get",e,!0),r.send()})}var p=0;function v(e,t,n,i){return t=t&&o(),e=new Uint8Array(e),m(i).then(function(i){return new Promise(function(a,s){var o=p++,u=function(t){if(t.data.id===o)if(i.removeEventListener("message",u),u=null,t.data.data){var n=t.data.data;n.constructor=r,n.__proto__=r.prototype,a(n)}else a(f(e))};i.addEventListener("message",u),i.postMessage({id:o,data:e,useWASM:t,wasmURL:n},[e.buffer])})}).catch(function(n){return t?_(e):f(e)})}e.exports={initWASM:d,initWorker:m,decompress:function(e,t,n){var r=o();return!r||e.byteLength>1048576?v(e,r,t,n):r?Promise.resolve(_(e)):Promise.resolve(f(e))},decompressWithJS:f,decompressWithWASM:_,decompressWithWorker:v}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=n(40),o=(n(141),n(173)),u=o.map,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=t,this.faceCount=t.clers.length,this.clers=t.clers,this.holes=t.holes,this.handles=t.handles,this.createHandleMap(this.handles),this.vertexCount=t.getAttrLength(),this.noParallelogramPrediction=!!t.noParallelogramPrediction}return r(e,[{key:"nextCorner",value:function(e){return e<0?-1:e+(e%3==2?-2:1)}},{key:"prevCorner",value:function(e){return e<0?-1:e+(e%3?-1:2)}},{key:"createHandleMap",value:function(e){var t=this.handlesMap={};if(e)for(var n=e.length-1;n>=0;n-=2)t[e[n]]=e[n-1]}},{key:"mapBoundary",value:function(e){for(var t=this.indices,n=e.length,r=this.currentVertex,i=this.currentVertex-n+1,a=n-1;a>=0;a--)t[this.nextCorner(e[a])]=r,r=i,t[this.prevCorner(e[a])]=i++;this.currentVertex-=n}},{key:"mapHoleBoundary",value:function(e){for(var t=this.indices,n=e.length,r=this.currentVertex-n+1,i=r,a=n-1;a>=0;a--)t[this.nextCorner(e[a])]=r++,t[this.prevCorner(e[a])]=a?r:i;this.currentVertex-=n}},{key:"fixNegativeIndex",value:function(e){for(var t=e,n=this.indices;n[e]<0;){if(t===-n[-n[e]]||n[e]===n[-n[e]]){console.warn("dead loop bug!!"),n[s]=0;break}n[e]=n[-n[e]]}}},{key:"fixIndicesAndReadVertice",value:function(){for(var e,t=this.indices,n=this.handlesMap,r=this.clers,i=r.length,a=-1,s=[],u=0,c=0;u<i;u++,c+=3)-1===a?(this.fixNegativeIndex(c+1),this.fixNegativeIndex(c+2)):(t[c+1]=t[this.prevCorner(a)],t[c+2]=t[this.nextCorner(a)]),this.fixNegativeIndex(c),-1===a?(this.readVertex(t[c+2]),this.readVertex(t[c+1]),this.readVertex(t[c])):this.readVertex(t[c],a),a=c+1,(e=r[u])!==o.S||n[u]?e===o.E||e===o.F?a=s.pop():e===o.R&&(a=c+2):s.push(c+2),e===o.F&&(a=-1,delete this.lastReadVertexIndex),this._onDecompressFace(u,e)}},{key:"readVertex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(!this.readedVertexMap[e]&&(this.readedVertexMap[e]=1,!this.noParallelogramPrediction)){var n=this.indices,r=this.geometry;-1===t?void 0!==this.lastReadVertexIndex&&r.cal(r,e,a.plus,this.lastReadVertexIndex,e):r.cal(r,e,a.depp,n[t],n[this.prevCorner(t)],n[this.nextCorner(t)],e),this.lastReadVertexIndex=e}}},{key:"markCorner",value:function(e,t){var n=this.indices;void 0===n[this.nextCorner(e)]&&(n[this.nextCorner(e)]=-this.prevCorner(t[0])),void 0===n[this.prevCorner(e)]&&(n[this.prevCorner(e)]=-this.nextCorner(t[t.length-1]))}},{key:"onFaceC",value:function(e){var t=this.indices,n=3*this.currentFace,r=this.currentVertex--;t[n]=r;var i=e.pop();return t[this.nextCorner(i)]=r,t[this.prevCorner(i)]=-this.nextCorner(e[e.length-1]),i=e.shift(),t[this.prevCorner(i)]=r,t[this.nextCorner(i)]=-this.prevCorner(e[0]),e.push(n),e}},{key:"onFaceL",value:function(e){var t=3*this.currentFace;return this.markCorner(e.pop(),e),e.unshift(t+2),e.push(t),e}},{key:"onFaceF",value:function(e,t){return e&&this.mapBoundary(e),this.onFaceE(null,t)}},{key:"onFaceE",value:function(e,t){var n=3*this.currentFace;return e&&t.push(e),[n+2,n+1,n]}},{key:"onFaceR",value:function(e){var t=3*this.currentFace;return this.markCorner(e.pop(),e),e.push(t+1,t),e}},{key:"onHandleEnd",value:function(e,t,n){var r=this.indices,i=3*this.currentFace,a=this.handlesMap[this.currentFace],s=t.splice(0,e);return t.shift(),n.push(s),r[this.nextCorner(a)]=-(i+1),r[this.prevCorner(a)]=-this.nextCorner(s[s.length-1]),r[i]=-this.prevCorner(s[0]),t.push(i),t}},{key:"onHandleStart",value:function(e,t){for(var n,r=this.indices,a=3*this.currentFace,s=this.handlesMap[this.currentFace],o=t.length-1;o>=0;o--){var u=t[o].indexOf(s);if(u>=0){var c,f=(n=t.splice(o,1)[0]).splice(0,u);n.shift(),(c=n).push.apply(c,i(f));break}}return r[this.nextCorner(s)]=-(a+1),r[this.prevCorner(s)]=-this.nextCorner(n[n.length-1]),r[a]=-this.prevCorner(e[0]),(e=n.concat(e)).push(a),e}},{key:"onFaceS",value:function(e,t,n){var r=this.handlesMap,i=this.indices,a=3*this.currentFace;if(r[this.currentFace]){this.markCorner(e.pop(),e);var s=e.indexOf(r[this.currentFace]);e=s>=0?this.onHandleEnd(s,e,n):this.onHandleStart(e,n)}else{var o=e.pop();this.markCorner(o,e),i[a]=-this.nextCorner(o);var u=t.pop();this.markCorner(u.pop(),u),(e=u.concat(e)).push(a)}return e}},{key:"onFaceM",value:function(e,t,n){var r=this.indices,i=3*this.currentFace,a=e.splice(0,this.holes[this.currentHole--]);this.mapHoleBoundary(a);var s=r[this.prevCorner(a[0])];r[i]=s;var o=e.pop();return r[this.prevCorner(o)]=-this.nextCorner(e[e.length-1]),r[this.nextCorner(o)]=s,o=e.shift(),r[this.prevCorner(o)]=s,r[this.nextCorner(o)]=-this.prevCorner(e[0]),e.push(i),e}},{key:"decompress",value:function(){this.readedVertexMap=new Uint8Array(this.vertexCount);var e=this.faceCount,t=this.indices=new Array(3*e);this.currentFace=e-1,this.currentVertex=this.vertexCount-1,this.currentHole=this.holes.length-1;for(var n,r=this.clers,i=[],a=[];this.currentFace>=0;){var s="onFace"+u[r[this.currentFace]];this[s]?n=this[s](n,i,a):console.warn("has no "+s),this.currentFace--}return this.mapBoundary(n),this.fixIndicesAndReadVertice(this.indices),this.geometry.indices=t,this.geometry.dequantize(),this.geometry}},{key:"_onDecompressFace",value:function(e,t){this.onDecompressFace&&this.onDecompressFace(e,t)}}]),e}();e.exports=c},function(e,t,n){"use strict";var r={C:0,R:1,L:2,S:3,E:4,M:5,F:6},i=[];for(var a in r)i[r[a]]=a;r.map=i,e.exports=r},function(e,t,n){"use strict";var r=n(40);function i(e,t,n,r){return n%e.BYTES_PER_ELEMENT?new e(t.slice(n,n+r*e.BYTES_PER_ELEMENT)):new e(t,n,r)}e.exports={read:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new DataView(e),a=new r,s=function(e,t){var n={};return n.version=e.getUint8(t++),n.faceCount=e.getUint32(t,!0),t+=4,n.vertexCount=e.getUint32(t,!0),t+=4,n.attrCount=e.getUint8(t++),n.noParallelogramPrediction=e.getUint8(t++),n.holesCount=e.getUint16(t,!0),t+=2,n.handlesCount=e.getUint16(t,!0),t+=2,n.headerBytes=15,n}(n,t);return t+=s.headerBytes,a.mode="CLERS",t=function(e,t,n,r){return r.holesCount?(e.holes=i(Uint16Array,t.buffer,n,r.holesCount),n+2*r.holesCount):(e.holes=[],n)}(a,n,t,s),t=function(e,t,n,r){return r.handlesCount?(e.handles=i(Uint32Array,t.buffer,n,2*r.handlesCount),n+8*r.handlesCount):(e.handles=[],n)}(a,n,t,s),t=function(e,t,n,r){return e.clers=new Uint8Array(t.buffer,n,r.faceCount),n+r.faceCount}(a,n,t,s),{header:s,geometry:a,offset:t=function(e,t,n,r){for(var a=0;a<r.attrCount;a++){var s={},o=t.getUint16(n,!0);n+=2,s.name=e.attrIdToName(o),s.itemCount=t.getUint8(n++),s.quantizationBit=t.getUint8(n++),s.min=t.getFloat32(n,!0),n+=4,s.max=t.getFloat32(n,!0),n+=4,s.data=i(Int16Array,t.buffer,n,s.itemCount*r.vertexCount),n+=s.itemCount*r.vertexCount*2,e.attrs.push(s)}return n}(a,n,t,s)}}}},function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=n(40),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wasmURL=t.wasmURL||"https://ossgw.alicdn.com/tmall-c3/tmx/70b8d82ccf33e97a124e54c2d6a3e0c7.wasm",this.isReady=!1}return i(e,[{key:"initASMJS",value:function(){this.isReady=!0,this.dv=new DataView(HEAP8.buffer),this.heap8=HEAP8,this.ins={exports:{__Z7AMCinitj:Module.__Z7AMCinitj,__Z12AMDecompressv:Module.__Z12AMDecompressv}}}},{key:"init",value:function(){var e=this,t=this.memory=new WebAssembly.Memory({initial:256});this.dv=new DataView(t.buffer);var n=this.heap8=new Uint8Array(t.buffer),r={global:{NaN:5,Infinity:6},env:{memoryBase:0,memory:t,_malloc:function(){return 2097152},_memset:function(e,t,r){return n.fill(t,e,e+r),e},_printf:function(e,t){for(var r=e;n[r];)r++;var i=String.fromCharCode.apply(String,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.slice(e,r))),a=0;i=i.replace(/%([duf])/g,function(e,n){return"d"===n||"u"===n?dv.getInt32(t+4*a++,!0):"f"===n?dv.getFloat32(t+4*a++,!0):void 0}),console.log(i)}}};return fetch(this.wasmURL).then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,r)}).then(function(t){e.module=t,e.ins=t.instance,e.isReady=!0}).catch(function(e){return console.log("wasm load error, use js ver")})}},{key:"getDataAddr",value:function(e){return this.ins.exports.__Z7AMCinitj(e)}},{key:"decompress",value:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t=this.dv,n=this.heap8,i=this.getDataAddr(e.length);n.set(e,i);var s=this.ins.exports.__Z12AMDecompressv();if(s<=0)throw console.error("decompression error code: "+s),new Error("decompression error code: "+s);for(var o=t.getUint32(s,!0),u=t.getUint32(s+4,!0),c=t.getUint32(s+8,!0),f=t.getUint32(s+12,!0),l=[],h=0;h<f;h++){var d=s+16+12*h;l.push([t.getUint32(d,!0),t.getUint32(d+4,!0),t.getUint32(d+8,!0)])}var _=new Uint32Array(t.buffer,u,3*o);_=c>65536?new Uint32Array(_):new Uint16Array(_);var m=new a(_);return l.forEach(function(e){var n=r(e,3),i=n[0],a=n[1],s=n[2],o=new Float32Array(t.buffer.slice(s,s+c*a*4));m.addAttr(m.attrIdToName(i),o,a)}),m}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(){if("undefined"==typeof WebAssembly||"undefined"==typeof fetch||function(){if(!/iPad|iPhone|iPod/i.test(navigator.userAgent))return!1;if(/OS (\d+)_(\d+)_?(\d+)?/i.test(navigator.userAgent)){var e=Number(RegExp.$1),t=Number(RegExp.$2);if(11===e&&t>=3||e>11)return!1}return!0}())return!1;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)}catch(e){return console.log("err while check WebAssembly",e),!1}}var i;e.exports=function(){return void 0===i&&(i=r()),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(178)),i=c(n(0)),a=c(n(13)),s=c(n(11)),o=c(n(14)),u=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var f=i.default.create({Extends:a.default,isHDRLoader:!0,className:"HDRLoader",constructor:function(){f.superclass.constructor.call(this)},load:function(e){return this.loadRes(e.src,"buffer").then(function(t){try{var n=(0,r.default)(t),i=n.shape,a=n.data,o=new s.default({width:i[0],height:i[1],flipY:e.flipY||!1,image:a,type:u.FLOAT,magFilter:u.NEAREST,minFilter:u.NEAREST,wrapS:u.CLAMP_TO_EDGE,wrapT:u.CLAMP_TO_EDGE,internalFormat:u.RGBA,format:u.RGBA});return Object.assign(o,e),o}catch(e){console.warn("HDRLoader:parse error => ",e)}return null})}});o.default.addLoader("hdr",f),t.default=f},function(e,t,n){"use strict";var r="#\\?RADIANCE",i="#.*",a="EXPOSURE=\\s*([0-9]*[.][0-9]*)",s="FORMAT=32-bit_rle_rgbe",o="-Y ([0-9]+) \\+X ([0-9]+)";e.exports=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t=0,n=e.length,u=10;function c(){var r="";do{var i=e[t];if(i==u){++t;break}r+=String.fromCharCode(i)}while(++t<n);return r}for(var f=0,l=0,h=1,d=!1,_=0;_<20;_++){var m,p=c();if(m=p.match(r));else if(m=p.match(s))d=!0;else if(m=p.match(a))h=Number(m[1]);else if(m=p.match(i));else if(m=p.match(o)){l=Number(m[1]),f=Number(m[2]);break}}if(!d)throw new Error("File is not run length encoded!");var v=new Uint8Array(f*l*4);!function(e,t,n,r,i,a){var s,o,u,c=new Array(4),f=null,l=new Array(2),h=e.length;function d(t){var n=0;do{t[n++]=e[r]}while(++r<h&&n<t.length);return n}function _(t,n,i){var a=0;do{t[n+a++]=e[r]}while(++r<h&&a<i);return a}function m(e,t,n,r){var i=4*r,a=_(t,n,i);if(a<i)throw new Error("Error reading raw pixels: got "+a+" bytes, expected "+i)}for(;a>0;){if(d(c)<c.length)throw new Error("Error reading bytes: expected "+c.length);if(2!=c[0]||2!=c[1]||0!=(128&c[2]))return t[n++]=c[0],t[n++]=c[1],t[n++]=c[2],t[n++]=c[3],void m(0,t,n,i*a-1);if(((255&c[2])<<8|255&c[3])!=i)throw new Error("Wrong scanline width "+((255&c[2])<<8|255&c[3])+", expected "+i);null==f&&(f=new Array(4*i)),s=0;for(var p=0;p<4;p++)for(o=(p+1)*i;s<o;){if(d(l)<l.length)throw new Error("Error reading 2-byte buffer");if((255&l[0])>128){if(0==(u=(255&l[0])-128)||u>o-s)throw new Error("Bad scanline data");for(;u-- >0;)f[s++]=l[1]}else{if(0==(u=255&l[0])||u>o-s)throw new Error("Bad scanline data");if(f[s++]=l[1],--u>0){if(_(f,s,u)<u)throw new Error("Error reading non-run data");s+=u}}}for(p=0;p<i;p++)t[n+0]=f[p],t[n+1]=f[p+i],t[n+2]=f[p+2*i],t[n+3]=f[p+3*i],n+=4;a--}}(e,v,0,t,f,l);for(var g=new Float32Array(f*l*4),E=0;E<v.length;E+=4){var T=v[E+0]/255,M=v[E+1]/255,A=v[E+2]/255,O=v[E+3],y=Math.pow(2,O-128);T*=y,M*=y,A*=y;var S=E;g[S+0]=T,g[S+1]=M,g[S+2]=A,g[S+3]=1}return{shape:[f,l],exposure:h,gamma:1,data:g}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),i=u(n(13)),a=u(n(14)),s=u(n(11)),o=u(n(22));function u(e){return e&&e.__esModule?e:{default:e}}var c=r.default.create({Statics:{HEADER_LEN:64,COMPRESSED_2D:0,COMPRESSED_3D:1,TEX_2D:2,TEX_3D:3},isKhronosTextureContainer:!0,className:"KhronosTextureContainer",constructor:function(e,t){this.arrayBuffer=e;var n=new Uint8Array(this.arrayBuffer,0,12);if(171===n[0]&&75===n[1]&&84===n[2]&&88===n[3]&&32===n[4]&&49===n[5]&&49===n[6]&&187===n[7]&&13===n[8]&&10===n[9]&&26===n[10]&&10===n[11]){var r=new Int32Array(this.arrayBuffer,12,13),i=16909060===r[0];this.glType=i?this.switchEndainness(r[1]):r[1],this.glTypeSize=i?this.switchEndainness(r[2]):r[2],this.glFormat=i?this.switchEndainness(r[3]):r[3],this.glInternalFormat=i?this.switchEndainness(r[4]):r[4],this.glBaseInternalFormat=i?this.switchEndainness(r[5]):r[5],this.pixelWidth=i?this.switchEndainness(r[6]):r[6],this.pixelHeight=i?this.switchEndainness(r[7]):r[7],this.pixelDepth=i?this.switchEndainness(r[8]):r[8],this.numberOfArrayElements=i?this.switchEndainness(r[9]):r[9],this.numberOfFaces=i?this.switchEndainness(r[10]):r[10],this.numberOfMipmapLevels=i?this.switchEndainness(r[11]):r[11],this.bytesOfKeyValueData=i?this.switchEndainness(r[12]):r[12],0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===t?this.loadType=c.COMPRESSED_2D:console.warn("number of faces expected"+t+", but found "+this.numberOfFaces):console.warn("texture arrays not currently supported"):console.warn("only 2D textures currently supported")):console.warn("only compressed formats currently supported")}else console.error("texture missing KTX identifier")},switchEndainness:function(e){return(255&e)<<24|(65280&e)<<8|e>>8&65280|e>>24&255},mipmaps:function(e){for(var t=[],n=c.HEADER_LEN+this.bytesOfKeyValueData,r=this.pixelWidth,i=this.pixelHeight,a=e?this.numberOfMipmapLevels:1,s=0;s<a;s++){for(var o=new Int32Array(this.arrayBuffer,n,1)[0],u=0;u<this.numberOfFaces;u++){var f=new Uint8Array(this.arrayBuffer,n+4,o);t.push({data:f,width:r,height:i}),n+=o+4,n+=3-(o+3)%4}r=Math.max(1,.5*r),i=Math.max(1,.5*i)}return t}}),f=r.default.create({Extends:i.default,Statics:{astc:"WEBGL_compressed_texture_astc",etc:"WEBGL_compressed_texture_etc",etc1:"WEBGL_compressed_texture_etc1",pvrtc:"WEBGL_compressed_texture_pvrtc",s3tc:"WEBGL_compressed_texture_s3tc"},isKTXLoader:!0,className:"KTXLoader",constructor:function(){o.default.use(f.astc),o.default.use(f.atc),o.default.use(f.etc),o.default.use(f.etc1),o.default.use(f.pvrtc),o.default.use(f.s3tc),o.default.use(f.s3tc_srgb),f.superclass.constructor.call(this)},load:function(e){return this.loadRes(e.src,"buffer").then(function(t){var n=new c(t,1),r={mipmaps:n.mipmaps(e.loadMipmaps),width:n.pixelWidth,height:n.pixelHeight,format:n.glInternalFormat,isCubemap:6===n.numberOfFaces,mipmapCount:n.numberOfMipmapLevels};return new s.default({compressed:!0,internalFormat:r.format,image:r.mipmaps[0].data,width:r.mipmaps[0].width,height:r.mipmaps[0].height})})}});a.default.addLoader("ktx",f),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(9)),a=s(n(14));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Mixes:i.default,isLoadQueue:!0,className:"LoadQueue",Statics:{addLoader:function(e,t){console.warn("LoadQueue.addLoader is duplicated, please use Loader.addLoader"),a.default.addLoader(e,t)}},constructor:function(e){this._source=[],this.add(e)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(e){return e&&(e=Array.isArray(e)?e:[e],this._source=this._source.concat(e)),this},get:function(e){if(!e)return null;for(var t=this._source,n=0;n<t.length;n++){var r=t[n];if(r.id===e||r.src===e)return r}return null},getContent:function(e){var t=this.get(e);return t&&t.content},start:function(){return this._loader||(this._loader=new a.default),this._loadNext(),this},_loadNext:function(){var e=this,t=this._source,n=t.length;if(this._loaded>=n)this.fire("complete");else if(this._currentIndex<n-1&&this._connections<this.maxConnections){var r=++this._currentIndex,i=t[r];this._connections++,this._loader.load(i).then(function(t){e._onItemLoad(r,t)},function(t){e._onItemError(r,t)})}},_onItemLoad:function(e,t){var n=this._source[e];n.loaded=!0,n.content=t,this._connections--,this._loaded++,this.fire("load",n),this._loadNext()},_onItemError:function(e,t){var n=this._source[e];n.error=t,this._connections--,this._loaded++,this.fire("error",n),this._loadNext()},getSize:function(e){for(var t=0,n=this._source,r=0;r<n.length;r++){var i=n[r];t+=(e?i.loaded&&i.size:i.size)||0}return t},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length},getAllContent:function(){return this._source.map(function(e){return e.content})}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=s(n(13)),a=s(n(146));function s(e){return e&&e.__esModule?e:{default:e}}var o=r.default.create({Extends:i.default,isShaderMaterialLoader:!0,className:"ShaderMaterialLoader",constructor:function(){o.superclass.constructor.call(this)},load:function(e){var t=[this.loadRes(e.fs),this.loadRes(e.vs)],n=Object.assign({},e);return Promise.all(t).then(function(e){return n.fs=e[0],n.vs=e[1],new a.default(n)},function(e){console.warn("ShaderMaterial Loader Failed for "+e)})}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),i=o(n(13)),a=o(n(11)),s=o(n(14));function o(e){return e&&e.__esModule?e:{default:e}}var u=r.default.create({Extends:i.default,isTextureLoader:!0,className:"TextureLoader",constructor:function(){u.superclass.constructor.call(this)},load:function(e){return this.loadImg(e.src,e.crossOrigin).then(function(t){var n=Object.assign({},e);return n.image=t,delete n.type,new a.default(n)}).catch(function(e){throw console.warn("load Texture failed",e.message,e.stack),e})}});s.default.addLoader("Texture",u),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),i=l(n(15)),a=l(n(21)),s=l(n(7)),o=l(n(8)),u=l(n(18)),c=l(n(4)),f=n(1);function l(e){return e&&e.__esModule?e:{default:e}}var h={x:[0,0,0,1,0,0],y:[0,0,0,0,1,0],z:[0,0,0,0,0,1]},d=r.default.create({Extends:i.default,isAxisHelper:!0,className:"AxisHelper",size:1,constructor:function(e){d.superclass.constructor.call(this,e),this.init()},addAxis:function(e){var t=new a.default({name:"AxisHelper_"+e,geometry:new s.default({mode:f.LINES,vertices:new o.default(new Float32Array(h[e]),3),indices:new o.default(new Uint16Array([0,1]),1)}),material:new u.default({diffuse:new c.default(h[e][3],h[e][4],h[e][5]),lightType:"NONE"})});this.addChild(t)},init:function(){this.setScale(this.size),this.addAxis("x"),this.addAxis("y"),this.addAxis("z")}});t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),i=c(n(21)),a=c(n(7)),s=c(n(18)),o=c(n(4)),u=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var f=r.default.create({Extends:i.default,isAxisNetHelper:!0,className:"AxisNetHelper",size:5,constructor:function(e){f.superclass.constructor.call(this,e),this.color=this.color||new o.default(.5,.5,.5);for(var t=new a.default({mode:u.LINES}),n=this.size,r=2*n+1,i=0;i<r;i++){var c=i/n-1;t.addLine([c,0,-1],[c,0,1]),t.addLine([-1,0,c],[1,0,c])}this.geometry=t,this.material=new s.default({diffuse:this.color,lightType:"NONE"})}});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),i=l(n(21)),a=l(n(7)),s=l(n(8)),o=l(n(18)),u=l(n(3)),c=l(n(4)),f=n(1);function l(e){return e&&e.__esModule?e:{default:e}}var h=new u.default,d=r.default.create({Extends:i.default,isCameraHelper:!0,className:"CameraHelper",camera:null,color:null,constructor:function(e){d.superclass.constructor.call(this,e),this.color||(this.color=new c.default(.3,.9,.6)),this.material=new o.default({lightType:"NONE",diffuse:this.color||new c.default(.5,.5,.5,1)}),this.geometry=new a.default({mode:f.LINES,isStatic:!1,vertices:new s.default(new Float32Array(27),3),indices:new s.default(new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7,8,4,8,5,8,6,8,7]),1)})},onUpdate:function(){this.camera&&(this.camera.updateViewProjectionMatrix(),this._buildGeometry())},_buildGeometry:function(){var e=this.camera,t=this.geometry;t.vertices.set(0,e.unprojectVector(h.set(-1,-1,1))),t.vertices.set(1,e.unprojectVector(h.set(-1,1,1))),t.vertices.set(2,e.unprojectVector(h.set(1,1,1))),t.vertices.set(3,e.unprojectVector(h.set(1,-1,1))),t.vertices.set(4,e.unprojectVector(h.set(-1,-1,-1))),t.vertices.set(5,e.unprojectVector(h.set(-1,1,-1))),t.vertices.set(6,e.unprojectVector(h.set(1,1,-1))),t.vertices.set(7,e.unprojectVector(h.set(1,-1,-1))),t.vertices.set(8,e.worldMatrix.getTranslation(h)),t.vertices.isDirty=!0}});t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(30));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.create({Extends:i.default,isAmbientLight:!0,className:"AmbientLight",autoUpdateWorldMatrix:!1,constructor:function(e){s.superclass.constructor.call(this,e)}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),i=u(n(4)),a=u(n(29)),s=u(n(18)),o=n(5);function u(e){return e&&e.__esModule?e:{default:e}}var c=new s.default({lightType:"NONE"}),f=new i.default(1,1,1),l=new i.default,h=r.default.create({isMeshPicker:!0,className:"MeshPicker",debug:!1,renderer:null,colorMeshMap:null,constructor:function(e){Object.assign(this,e),this.colorMeshMap={},this.init()},createFramebuffer:function(){if(!this.framebuffer){var e=this.renderer;this.framebuffer=new a.default(e,{useVao:e.useVao,width:e.width,height:e.height})}},renderDebug:function(){this.framebuffer.render(0,.7,.3,.3)},createMeshNumberId:function(e){"numberId"in e||(e.numberId=10*Number(e.id.replace(/^.*_(\d+)$/,"$1")),e.color=(0,o.padLeft)(e.numberId.toString(16),6),this.colorMeshMap[e.color]=e)},renderColoredMeshes:function(){var e=this,t=this.renderer,n=this.framebuffer;n.bind(),t.clear(f);var r=t.forceMaterial;t.forceMaterial=c,t.renderList.traverse(function(n){n.forEach(function(n){e.createMeshNumberId(n),c.diffuse.fromHEX(n.color),c.isDirty=!0,t.renderMesh(n)})}),t.forceMaterial=r,n.unbind()},getSelection:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=this.renderer.pixelRatio,a=[],s=this.framebuffer.readPixels(e*i,t*i,n*i,r*i),o=0;o<s.length;o+=4){var u=l.fromUintArray(s,o).toHEX();this.colorMeshMap[u]&&a.push(this.colorMeshMap[u])}return a},init:function(){var e=this;this.createFramebuffer(),this.renderer.on("afterRender",function(){e.renderColoredMeshes(),e.debug&&e.renderDebug()})}});t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(189));t.default=r.default},function(e,t,n){"use strict";var r=n(23),i=n(130),a=r.create({constructor:function(e){this._targetFPS=e||60,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(e){if(void 0===e&&(e=!0),!this._intervalId){this._lastTime=+new Date;var t,n=this,r=this._interval,a=window.requestAnimationFrame||window[i.jsVendor+"RequestAnimationFrame"];e&&a&&r<17?(this._useRAF=!0,t=function(){n._intervalId=a(t),n._tick()}):t=function(){n._intervalId=setTimeout(t,r),n._tick()},this._paused=!1,t()}},stop:function(){this._useRAF?(window.cancelAnimationFrame||window[i.jsVendor+"CancelAnimationFrame"])(this._intervalId):clearTimeout(this._intervalId);this._intervalId=null,this._lastTime=0,this._paused=!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var e=+new Date,t=e-this._lastTime,n=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=e-this._lastTime,this._lastTime=e;for(var r=n.slice(0),i=0,a=r.length;i<a;i++)r[i].tick(t)}},getMeasuredFPS:function(){return Math.min(this._measuredFPS,this._targetFPS)},addTick:function(e){if(!e||"function"!=typeof e.tick)throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(e)},removeTick:function(e){var t=this._tickers,n=t.indexOf(e);n>=0&&t.splice(n,1)},nextTick:function(e){var t=this,n={tick:function(r){t.removeTick(n),e()}};return t.addTick(n),n},timeout:function(e,t){var n=this,r=(new Date).getTime()+t,i={tick:function(){(new Date).getTime()-r>=0&&(n.removeTick(i),e())}};return n.addTick(i),i},interval:function(e,t){var n=(new Date).getTime()+t,r={tick:function(){var r=(new Date).getTime(),i=r-n;i>=0&&(i<t&&(r-=i),n=r+t,e())}};return this.addTick(r),r}});e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={get:function(){if(void 0===this._isWebGLSupport)try{var e=document.createElement("canvas"),t=e.getContext("webgl");t.clearColor(0,1,0,1),t.clear(t.COLOR_BUFFER_BIT);var n=new Uint8Array(4);t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),0===n[0]&&255===n[1]&&0===n[2]&&255===n[3]?this._isWebGLSupport=!0:this._isWebGLSupport=!1,e=null,t=null,n=null}catch(e){this._isWebGLSupport=!1}return this._isWebGLSupport}};t.default=r},,,function(e,t,n){n(148),e.exports=n(157)}]),"undefined"!=typeof window&&window.Hilo3d&&"object"==typeof exports&&"object"==typeof module&&(module.exports=window.Hilo3d);