/**
 * Hilo3d 1.5.7
 * Copyright (c) 2017-present Alibaba Group Holding Ltd.
 * @license MIT
 */
!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=157)}([function(t,e,n){"use strict";var i=n(19);t.exports=i},function(t,e,n){"use strict";var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=0;return function(e){var n=++t;return e&&(n=e+"_"+n),n}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},degToRad:function(t){return t*this.DEG2RAD},radToDeg:function(t){return t*this.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};t.exports=i},function(t,e,n){"use strict";var i=n(8).vec3,r=n(0),s=r.create({className:"Vector3",isVector3:!0,constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.elements=i.fromValues(t,e,n)},copy:function(t){return i.copy(this.elements,t.elements),this},clone:function(){var t=this.elements;return new s(t[0],t[1],t[2])},toArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[0+e]=n[0],t[1+e]=n[1],t[2+e]=n[2],t},fromArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return n[0]=t[e+0],n[1]=t[e+1],n[2]=t[e+2],this},set:function(t,e,n){return i.set(this.elements,t,e,n),this},add:function(t,e){return e||(e=t,t=this),i.add(this.elements,t.elements,e.elements),this},subtract:function(t,e){return e||(e=t,t=this),i.subtract(this.elements,t.elements,e.elements),this},multiply:function(t,e){return e||(e=t,t=this),i.multiply(this.elements,t.elements,e.elements),this},divide:function(t,e){return e||(e=t,t=this),i.divide(this.elements,t.elements,e.elements),this},ceil:function(){return i.ceil(this.elements,this.elements),this},floor:function(){return i.floor(this.elements,this.elements),this},min:function(t,e){return e||(e=t,t=this),i.min(this.elements,t.elements,e.elements),this},max:function(t,e){return e||(e=t,t=this),i.max(this.elements,t.elements,e.elements),this},round:function(){return i.round(this.elements,this.elements),this},scale:function(t){return i.scale(this.elements,this.elements,t),this},scaleAndAdd:function(t,e,n){return n||(n=e,e=this),i.scaleAndAdd(this.elements,e.elements,n.elements,t),this},distance:function(t,e){return e||(e=t,t=this),i.distance(t.elements,e.elements)},squaredDistance:function(t,e){return e||(e=t,t=this),i.distance(t.elements,e.elements)},length:function(){return i.length(this.elements)},squaredLength:function(){return i.squaredLength(this.elements)},negate:function(){return i.negate(this.elements,this.elements),this},inverse:function(t){return t||(t=this),i.inverse(this.elements,t.elements),this},normalize:function(){return i.normalize(this.elements,this.elements),this},dot:function(t,e){return e||(e=t,t=this),i.dot(t.elements,e.elements)},cross:function(t,e){return e||(e=t,t=this),i.cross(this.elements,t.elements,e.elements),this},lerp:function(t,e){return i.lerp(this.elements,this.elements,t.elements,e),this},hermite:function(t,e,n,r,s){return i.hermite(this.elements,t.elements,e.elements,n.elements,r.elements,s),this},bezier:function(t,e,n,r,s){return i.bezier(this.elements,t.elements,e.elements,n.elements,r.elements,s),this},random:function(t){return i.random(this.elements,t),this},transformMat3:function(t){return i.transformMat3(this.elements,this.elements,t.elements),this},transformMat4:function(t){return i.transformMat4(this.elements,this.elements,t.elements),this},transformDirection:function(t){var e=this.elements,n=t.elements,i=e[0],r=e[1],s=e[2];return e[0]=i*n[0]+r*n[4]+s*n[8],e[1]=i*n[1]+r*n[5]+s*n[9],e[2]=i*n[2]+r*n[6]+s*n[10],this},transformQuat:function(t){return i.transformQuat(this.elements,t.elements),this},rotateX:function(t,e){return i.rotateX(this.elements,this.elements,t.elements,e),this},rotateY:function(t,e){return i.rotateY(this.elements,this.elements,t.elements,e),this},rotateZ:function(t,e){return i.rotateZ(this.elements,this.elements,t.elements,e),this},exactEquals:function(t,e){return e||(e=t,t=this),i.exactEquals(t.elements,e.elements)},equals:function(t,e){return e||(e=t,t=this),i.equals(t.elements,e.elements)},x:{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t}},y:{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t}},z:{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t}}});s.prototype.sub=s.prototype.subtract,s.prototype.mul=s.prototype.multiply,s.prototype.div=s.prototype.divide,s.prototype.dist=s.prototype.distance,s.prototype.sqrDist=s.prototype.squaredDistance,s.prototype.len=s.prototype.length,s.prototype.sqrLen=s.prototype.squaredLength,t.exports=s},function(t,e,n){"use strict";var i=n(54),r=n(55),s={};Object.assign(s,i,r),t.exports=s},function(t,e,n){"use strict";var i=n(8).mat4,r=n(0),s=n(2),o=n(14),a=void 0,u=new s,c=new s,h=r.create({className:"Matrix4",isMatrix4:!0,constructor:function(){this.elements=i.create()},copy:function(t){return i.copy(this.elements,t.elements),this},clone:function(){var t=new h;return i.copy(t.elements,this.elements),t},toArray:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,i=0;i<16;i++)t[e+i]=n[i];return t},fromArray:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,i=0;i<16;i++)n[i]=t[e+i];return this},set:function(t,e,n,r,s,o,a,u,c,h,f,l,d,m,_,p){return i.set(this.elements,t,e,n,r,s,o,a,u,c,h,f,l,d,m,_,p),this},identity:function(){return i.identity(this.elements),this},transpose:function(){return i.transpose(this.elements,this.elements),this},invert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return i.invert(this.elements,t.elements),this},adjoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return i.adjoint(this.elements,t.elements),this},determinant:function(){return i.determinant(this.elements)},multiply:function(t,e){return e||(e=t,t=this),i.multiply(this.elements,t.elements,e.elements),this},premultiply:function(t){return this.multiply(t,this),this},translate:function(t){return i.translate(this.elements,this.elements,t.elements),this},scale:function(t){return i.scale(this.elements,this.elements,t.elements),this},rotate:function(t,e){return i.rotate(this.elements,this.elements,t,e),this},rotateX:function(t){return i.rotateX(this.elements,this.elements,t),this},rotateY:function(t){return i.rotateY(this.elements,this.elements,t),this},rotateZ:function(t){return i.rotateZ(this.elements,this.elements,t),this},fromTranslation:function(t){return i.fromTranslation(this.elements,t.elements),this},fromScaling:function(t){return i.fromScaling(this.elements,t.elements),this},fromRotation:function(t,e){return i.fromRotation(this.elements,t,e.elements),this},fromXRotation:function(t){return i.fromXRotation(this.elements,t),this},fromYRotation:function(t){return i.fromYRotation(this.elements,t),this},fromZRotation:function(t){return i.fromZRotation(this.elements,t),this},fromRotationTranslation:function(t,e){return i.fromRotationTranslation(this.elements,t.elements,e.elements),this},getTranslation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s;return i.getTranslation(t.elements,this.elements),t},getScaling:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s;return i.getScaling(t.elements,this.elements),t},getRotation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o;return i.getRotation(t.elements,this.elements),t},fromRotationTranslationScale:function(t,e,n){return i.fromRotationTranslationScale(this.elements,t.elements,e.elements,n.elements),this},fromRotationTranslationScaleOrigin:function(t,e,n,r){return i.fromRotationTranslationScaleOrigin(this.elements,t.elements,e.elements,n.elements,r.elements),this},fromQuat:function(t){return i.fromQuat(this.elements,t.elements),this},frustum:function(t,e,n,r,s,o){return i.frustum(this.elements,t,e,n,r,s,o),this},perspective:function(t,e,n,r){return i.perspective(this.elements,t,e,n,r),this},perspectiveFromFieldOfView:function(t,e,n){return i.perspectiveFromFieldOfView(this.elements,t,e,n),this},ortho:function(t,e,n,r,s,o){return i.ortho(this.elements,t,e,n,r,s,o),this},lookAt:function(t,e,n){return t.isVector3||(t=u.set(t.x,t.y,t.z)),e.isVector3||(e=c.set(e.x,e.y,e.z)),i.lookAt(this.elements,t.elements,e.elements,n.elements),this},targetTo:function(t,e,n){t.isVector3||(t=u.set(t.x,t.y,t.z)),e.isVector3||(e=c.set(e.x,e.y,e.z)),t=t.elements,e=e.elements,n=n.elements;var i=this.elements,r=t[0],s=t[1],o=t[2],a=n[0],h=n[1],f=n[2],l=r-e[0],d=s-e[1],m=o-e[2],_=l*l+d*d+m*m;_>0?(_=1/Math.sqrt(_),l*=_,d*=_,m*=_):m=1;var p=h*m-f*d,g=f*l-a*m,v=a*d-h*l;return _=p*p+g*g+v*v,_>0?(_=1/Math.sqrt(_),p*=_,g*=_,v*=_):(a+=1e-7,p=h*m-f*d,g=f*l-a*m,v=a*d-h*l,_=p*p+g*g+v*v,_=1/Math.sqrt(_),p*=_,g*=_,v*=_),i[0]=p,i[1]=g,i[2]=v,i[3]=0,i[4]=d*v-m*g,i[5]=m*p-l*v,i[6]=l*g-d*p,i[7]=0,i[8]=l,i[9]=d,i[10]=m,i[11]=0,i[12]=r,i[13]=s,i[14]=o,i[15]=1,this},frob:function(){return i.frob(this.elements)},add:function(t,e){return e||(e=t,t=this),i.add(this.elements,t.elements,e.elements),this},subtract:function(t,e){return e||(e=t,t=this),i.subtract(this.elements,t.elements,e.elements),this},exactEquals:function(t,e){return e||(e=t,t=this),i.exactEquals(t.elements,e.elements)},equals:function(t,e){return e||(e=t,t=this),i.equals(t.elements,e.elements)},compose:function(t,e,n,i){return i?this.fromRotationTranslationScaleOrigin(t,e,n,i):this.fromRotationTranslationScale(t,e,n),this},decompose:function(t,e,n,i){return this.getScaling(n),this.getTranslation(e),a||(a=new h),this.determinant()<0&&(n.x*=-1),a.copy(this),u.inverse(n),a.scale(u),t.fromMat4(a),i&&i.set(0,0,0),this}});h.prototype.sub=h.prototype.subtract,h.prototype.mul=h.prototype.multiply,t.exports=h},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(/^(?:http|blob|data:|\/)/.test(e))return e;t=t.replace(/\/[^\/]*?$/,"").split("/"),e=e.split("/");var n=void 0;for(n=0;n<e.length;n++){var i=e[n];if(".."===i)t.pop();else if("."!==i)break}return t.join("/")+"/"+e.slice(n).join("/")}function s(t,e){if(window.TextDecoder)return A||(A=new TextDecoder("utf-8")),t instanceof Uint8Array||(t=new Uint8Array(t)),A.decode(t);for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return e&&(n=decodeURIComponent(escape(n))),n}function o(t){var e=/\/?[^\/]+\.(\w+)(\?\S+)?$/i,n=String(t).match(e);return n&&n[1].toLowerCase()||null}function a(t,e){t&&(Array.isArray(t)?t.forEach(e):Object.keys(t).forEach(function(n){e(t[n],n)}))}function u(t,e,n){if(!t||!t.length)return[0,0];for(var i=t.length,r=0,s=i-1;r<=s;){var o=r+s>>1,a=n(t[o],e);if(0===a)return[o,o];a<0?r=o+1:s=o-1}return r>s?[s,r]:[r,s]}function c(t,e,n){var i=u(t,e,n);t.splice(i[1],0,e)}function h(t,e,n){return e<=t.length?t:new Array(e-t.length+1).join(n||"0")+t}function f(t){return t instanceof Float32Array?M:t instanceof Int8Array?p:t instanceof Uint8Array?g:t instanceof Int16Array?v:t instanceof Uint16Array?T:t instanceof Uint32Array?E:M}function l(t,e,n,i,r){if(t&&e){e.isGeometryData&&(e=e.data);for(var s=0;s<r;s++)t[n+s]=e[i+s]}}function d(t){return"string"==typeof t||"number"==typeof t}function m(t,e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),window.Blob&&window.URL)try{var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}catch(e){console.warn("new Blob error",t)}return"data:"+t+";base64,"+btoa(s(e))}var _=n(3),p=_.BYTE,g=_.UNSIGNED_BYTE,v=_.SHORT,T=_.UNSIGNED_SHORT,E=_.UNSIGNED_INT,M=_.FLOAT,A=void 0,I=function(){var t,e=(t={},i(t,p,Int8Array),i(t,g,Uint8Array),i(t,v,Int16Array),i(t,T,Uint16Array),i(t,E,Uint32Array),i(t,M,Float32Array),t);return function(t){return e[t]||Float32Array}}();t.exports={each:a,getRelativePath:r,convertUint8ArrayToString:s,getExtension:o,getIndexFromSortedArray:u,insertToSortedArray:c,padLeft:h,getTypedArrayClass:I,copyArrayData:l,isStrOrNumber:d,getTypedArrayGLType:f,getBlobUrl:m}},function(t,e,n){"use strict";var i=n(0),r=n(20),s=n(5),o=i.create({Extends:r,className:"Color",isColor:!0,r:{get:function(){return this.x},set:function(t){this.x=t}},g:{get:function(){return this.y},set:function(t){this.y=t}},b:{get:function(){return this.z},set:function(t){this.z=t}},a:{get:function(){return this.w},set:function(t){this.w=t}},constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;t>1&&(t/=255),e>1&&(e/=255),n>1&&(n/=255),i>1&&(i/=255),o.superclass.constructor.call(this,t,e,n,i)},toRGBArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t},fromUintArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.elements[0]=t[e]/255,this.elements[1]=t[e+1]/255,this.elements[2]=t[e+2]/255,this.elements[3]=t[e+3]/255,this},fromHEX:function(t){return"number"==typeof t?t=t.toString(16):("#"===t[0]&&(t=t.slice(1)),3===t.length&&(t=t.replace(/(\w)/g,"$1$1"))),this.elements[0]=parseInt(t.slice(0,2),16)/255,this.elements[1]=parseInt(t.slice(2,4),16)/255,this.elements[2]=parseInt(t.slice(4,6),16)/255,this},toHEX:function(){for(var t="",e=0;e<3;e++)t+=s.padLeft(Math.floor(255*this.elements[e]).toString(16),2);return t}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(5),o=n(29),a=n(2),u=n(20),c=n(21),h=n(4),f=n(14),l=n(134),d=n(9),m=n(3),_=m.TRIANGLES,p=m.LINES,g=m.FRONT,v=m.BACK,T=m.FRONT_AND_BACK,E=new a,M=new a,A=new a,I=new u,S=new o,O=new o,L=new o,R=new c,y=new h,x=new f,N=i.create({isGeometry:!0,className:"Geometry",vertices:null,uvs:null,indices:null,skinIndices:null,skinWeights:null,mode:_,isStatic:!0,isDirty:!0,constructor:function(t){this.id=r.generateUUID(this.className),Object.assign(this,t),this.currentVerticesCount=0,this.currentIndicesCount=0},_needUpdateNormals:!1,normals:{get:function(){return!this._needUpdateNormals&&this._normals||this.calculateNormals(),this._normals},set:function(t){this._normals=t,this._needUpdateNormals=!1}},calculateNormals:function(){this._normals||(this._normals=new d(new Float32Array(this.vertices.realLength),3));var t=this._normals,e=void 0;if(this.indices)e=this.indices.data;else{var n=this.vertices.length/3;e=new Array(n);for(var i=0;i<n;i++)e[i]=i}for(var r=this.vertices,s=0,o=new Uint8Array(r.count),a=0;a<e.length;a+=3){s=e[a],E.copy(r.get(s)),s=e[a+1],M.copy(r.get(s)),s=e[a+2],A.copy(r.get(s)),M.sub(E),A.sub(E),M.cross(A);for(var u=0;u<3;u++){if(s=e[a+u],o[s]){var c=t.get(s);c.scale(o[s]),c.add(M),c.scale(1/(o[s]+1)),t.set(s,c)}else t.set(s,M);o[s]++}}t.isDirty=!0,this._needUpdateNormals=!1},tangents:{get:function(){return this._tangents||this.calculateTangents(),this._tangents},set:function(t){this._tangents=t}},calculateTangents:function(){this._tangents||(this._tangents=new d(new Float32Array(4*this.vertices.count),4));var t=this._tangents,e=void 0;if(this.indices)e=this.indices.data;else{var n=this.vertices.length/3;e=new Array(n);for(var i=0;i<n;i++)e[i]=i}for(var r=this.vertices,s=this.uvs,o=0,a=0;a<e.length;a+=3){o=e[a],E.copy(r.get(o)),S.copy(s.get(o)),o=e[a+1],M.copy(r.get(o)),O.copy(s.get(o)),o=e[a+2],A.copy(r.get(o)),L.copy(s.get(o)),M.sub(E),A.sub(E),O.sub(S),L.sub(S);var u=1/(O.x*L.y-L.x*O.y);Number.isFinite(u)?(E.x=u*(L.y*M.x-O.y*A.x),E.y=u*(L.y*M.y-O.y*A.y),E.z=u*(L.y*M.z-O.y*A.z)):(E.x=0,E.y=0,E.z=1),I.set(E.x,E.y,E.z,-1),t.set(e[a],I),t.set(e[a+1],I),t.set(e[a+2],I)}},convertToLinesMode:function(){if(this.mode!==_)return void console.warn("Only support convert triangles to lines mode!");if(!this.indices)return void console.warn("Has no indices!");for(var t=new Uint16Array(2*this.indices.length),e=this.indices.data,n=0;n<e.length;n+=3)t[2*n]=e[n],t[2*n+1]=e[n+1],t[2*n+2]=e[n+1],t[2*n+3]=e[n+2],t[2*n+4]=e[n+2],t[2*n+5]=e[n];this.indices.data=t,this.mode=p},translate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.transformMat4(y.fromTranslation(E.set(t,e,n))),this},scale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.transformMat4(y.fromScaling(E.set(t,e,n))),this},rotate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.transformMat4(y.fromQuat(x.fromEuler({x:t*r.DEG2RAD,y:e*r.DEG2RAD,z:n*r.DEG2RAD}))),this},transformMat4:function(t){var e=this.vertices;if(e&&e.traverse(function(n,i,r){e.setByOffset(r,n.transformMat4(t))}),R.normalFromMat4(t),this._normals){var n=this.normals;n.traverse(function(t,e,i){n.setByOffset(i,t.transformMat3(R).normalize())})}if(this._tangents){var i=this.tangents;i.traverse(function(t,e,n){i.setByOffset(n,t.transformMat3(R).normalize())})}return this.isDirty=!0,this},ensureData:function(t,e,n,i){var r=this[t];if(!r||n>r.length){var s=new i(n);r?(s.set(r.data),r.data=s):this[t]=new d(s,e)}},addPoints:function(){var t=this,e=[].slice.call(arguments),n=3*(this.currentVerticesCount+e.length);this.ensureData("vertices",3,n,Float32Array);var i=this.vertices.data;return e.forEach(function(e){var n=3*t.currentVerticesCount++;i[n]=e[0],i[n+1]=e[1],i[n+2]=e[2]}),this.currentVerticesCount-e.length},addIndices:function(){var t=this,e=[].slice.call(arguments),n=this.currentIndicesCount+e.length;this.ensureData("indices",1,n,Uint16Array);var i=this.indices.data;e.forEach(function(e){i[t.currentIndicesCount++]=e}),this._needUpdateNormals=!0},addLine:function(t,e){var n=this.addPoints(t,e);this.addIndices(n,n+1)},addFace:function(t,e,n){var i=this.addPoints(t,e,n);this.addIndices(i,i+1,i+2)},addRect:function(t,e,n,i){var r=this.addPoints(t,e,n,i);this.addIndices(r,r+1,r+2,r,r+2,r+3)},setVertexUV:function(t,e){this.ensureData("uvs",2,this.vertices.length/3*2,Float32Array);for(var n=this.uvs.data,i=0;i<e.length;i++)n[t+2*i]=e[i][0],n[t+2*i+1]=e[i][1]},setFaceUV:function(t,e,n,i){this.setVertexUV(t,[e,n,i])},setRectUV:function(t,e,n,i,r){this.setVertexUV(t,[e,n,i,r])},getBounds:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1];e||(e={xMin:1/0,xMax:-1/0,yMin:1/0,yMax:-1/0,zMin:1/0,zMax:-1/0});for(var n=this.vertices.data,i=0;i<n.length;i+=3)E.fromArray(n,i),t&&E.transformMat4(t),e.xMax=Math.max(e.xMax,E.x),e.yMax=Math.max(e.yMax,E.y),e.zMax=Math.max(e.zMax,E.z),e.xMin=Math.min(e.xMin,E.x),e.yMin=Math.min(e.yMin,E.y),e.zMin=Math.min(e.zMin,E.z);return e.width=e.xMax-e.xMin,e.height=e.yMax-e.yMin,e.depth=e.zMax-e.zMin,e.x=(e.xMin+e.xMax)/2,e.y=(e.yMin+e.yMax)/2,e.z=(e.zMin+e.zMax)/2,e},getLocalBounds:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._localBounds&&!t||(this._localBounds=this.getBounds()),this._localBounds},getSphereBounds:function(t){this._sphereBounds||(this._sphereBounds=new l);var e=this._sphereBounds;return e.copy(this.getLocalSphereBounds()),t&&e.transformMat4(t),e},getLocalSphereBounds:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._localSphereBounds||t){var e=this.getLocalBounds(t),n=new l({center:new a(e.x,e.y,e.z)});n.fromPoints(this.vertices.data),this._localSphereBounds=n}return this._localSphereBounds},convertToNoIndices:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(this.mode!==_)return void console.warn("Only support convert triangles to lines mode!");if(!this.indices)return void console.warn("Has no indices!");for(var e=this.indices.data,n=e.length,i=new Float32Array(n*t),r=this.uvs?new Float32Array(2*n):null,o=new Float32Array(3*n),a=this.skinIndices?new Float32Array(4*n):null,u=this.skinWeights?new Float32Array(4*n):null,c=0;c<n;c++){var h=e[c];s.copyArrayData(i,this.vertices,c*t,3*h,3),4===t&&(i[4*c+3]=1),s.copyArrayData(r,this.uvs,2*c,2*h,2),s.copyArrayData(o,this.normals,3*c,3*h,3),s.copyArrayData(a,this.skinIndices,4*c,4*h,4),s.copyArrayData(u,this.skinWeights,4*c,4*h,4)}delete this.indices,this.vertices.data=i,this.uvs&&(this.uvs.data=r),this.normals&&(this.normals.data=o),this.skinIndices&&(this.skinIndices.data=a),this.skinWeights&&(this.skinWeights.data=u)},clone:function(){var t=new this.constructor({mode:this.mode});return this.vertices&&(t.vertices=this.vertices.clone()),this.uvs&&(t.uvs=this.uvs.clone()),this.indices&&(t.indices=this.indices.clone()),this.skinWeights&&(t.skinWeights=this.skinWeights.clone()),this.skinIndices&&(t.skinIndices=this.skinIndices.clone()),this._normals&&(t._normals=this._normals.clone()),this._tangents&&(t._tangents=this._tangents.clone()),this.positionDecodeMat&&(t.positionDecodeMat=this.positionDecodeMat),this.uvDecodeMat&&(t.uvDecodeMat=this.uvDecodeMat),this.normalDecodeMat&&(t.normalDecodeMat=this.normalDecodeMat),t},_raycast:function(t,e){var n=this.vertices,i=this.indices,r=[],s=[],o=void 0;o=i?i.realLength:n.realLength/3;for(var a=0;a<o;a+=3){var u=i?i.get(a):a;E.copy(n.get(u)),u=i?i.get(a+1):a+1,M.copy(n.get(u)),u=i?i.get(a+2):a+2,A.copy(n.get(u));var c=void 0;e===g?(r[0]=E.elements,r[1]=M.elements,r[2]=A.elements,c=t.intersectsTriangle(r)):e===v?(r[1]=E.elements,r[0]=M.elements,r[2]=A.elements,c=t.intersectsTriangle(r)):e===T&&(r[0]=E.elements,r[1]=M.elements,r[2]=A.elements,(c=t.intersectsTriangle(r))||(r[1]=E.elements,r[0]=M.elements,r[2]=A.elements,c=t.intersectsTriangle(r))),c&&s.push(c)}return s.length?s:null},raycast:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._raycast(t,e);return i&&n&&t.sortPoints(i),i},getRenderOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.positionDecodeMat&&(t.QUANTIZED=1,t.POSITION_QUANTIZED=1),this.normalDecodeMat&&(t.QUANTIZED=1,t.NORMAL_QUANTIZED=1),this.uvDecodeMat&&(t.QUANTIZED=1,t.UV_QUANTIZED=1),t}});t.exports=N},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";function i(t){e.ARRAY_TYPE=a=t}function r(t){return t*u}function s(t,e){return Math.abs(t-e)<=o*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=i,e.toRadian=r,e.equals=s;var o=e.EPSILON=1e-6,a=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,u=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function i(){var t=new C.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function s(t){var e=new C.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function a(t,e,n,i,r,s,o,a,u){var c=new C.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=r,c[5]=s,c[6]=o,c[7]=a,c[8]=u,c}function u(t,e,n,i,r,s,o,a,u,c){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function f(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=h*o-a*c,l=-h*s+a*u,d=c*s-o*u,m=n*f+i*l+r*d;return m?(m=1/m,t[0]=f*m,t[1]=(-h*i+r*c)*m,t[2]=(a*i-r*o)*m,t[3]=l*m,t[4]=(h*n-r*u)*m,t[5]=(-a*n+r*s)*m,t[6]=d*m,t[7]=(-c*n+i*u)*m,t[8]=(o*n-i*s)*m,t):null}function l(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8];return t[0]=o*h-a*c,t[1]=r*c-i*h,t[2]=i*a-r*o,t[3]=a*u-s*h,t[4]=n*h-r*u,t[5]=r*s-n*a,t[6]=s*c-o*u,t[7]=i*u-n*c,t[8]=n*o-i*s,t}function d(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],c=t[8];return e*(c*s-o*u)+n*(-c*r+o*a)+i*(u*r-s*a)}function m(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=n[0],d=n[1],m=n[2],_=n[3],p=n[4],g=n[5],v=n[6],T=n[7],E=n[8];return t[0]=l*i+d*o+m*c,t[1]=l*r+d*a+m*h,t[2]=l*s+d*u+m*f,t[3]=_*i+p*o+g*c,t[4]=_*r+p*a+g*h,t[5]=_*s+p*u+g*f,t[6]=v*i+T*o+E*c,t[7]=v*r+T*a+E*h,t[8]=v*s+T*u+E*f,t}function _(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=n[0],d=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=u,t[6]=l*i+d*o+c,t[7]=l*r+d*a+h,t[8]=l*s+d*u+f,t}function p(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=Math.sin(n),d=Math.cos(n);return t[0]=d*i+l*o,t[1]=d*r+l*a,t[2]=d*s+l*u,t[3]=d*o-l*i,t[4]=d*a-l*r,t[5]=d*u-l*s,t[6]=c,t[7]=h,t[8]=f,t}function g(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function v(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function T(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function E(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function M(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function A(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,u=r+r,c=n*o,h=i*o,f=i*a,l=r*o,d=r*a,m=r*u,_=s*o,p=s*a,g=s*u;return t[0]=1-f-m,t[3]=h-g,t[6]=l+p,t[1]=h+g,t[4]=1-c-m,t[7]=d-_,t[2]=l-p,t[5]=d+_,t[8]=1-c-f,t}function I(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],m=e[12],_=e[13],p=e[14],g=e[15],v=n*a-i*o,T=n*u-r*o,E=n*c-s*o,M=i*u-r*a,A=i*c-s*a,I=r*c-s*u,S=h*_-f*m,O=h*p-l*m,L=h*g-d*m,R=f*p-l*_,y=f*g-d*_,x=l*g-d*p,N=v*x-T*y+E*R+M*L-A*O+I*S;return N?(N=1/N,t[0]=(a*x-u*y+c*R)*N,t[1]=(u*L-o*x-c*O)*N,t[2]=(o*y-a*L+c*S)*N,t[3]=(r*y-i*x-s*R)*N,t[4]=(n*x-r*L+s*O)*N,t[5]=(i*L-n*y-s*S)*N,t[6]=(_*I-p*A+g*M)*N,t[7]=(p*E-m*I-g*T)*N,t[8]=(m*A-_*E+g*v)*N,t):null}function S(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function O(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function L(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function R(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function y(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function x(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function N(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t}function b(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function P(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=e[0],l=e[1],d=e[2],m=e[3],_=e[4],p=e[5],g=e[6],v=e[7],T=e[8];return Math.abs(n-f)<=C.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-l)<=C.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-d)<=C.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-m)<=C.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-_)<=C.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-p)<=C.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(u-g)<=C.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-v)<=C.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(h-T)<=C.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.fromMat4=r,e.clone=s,e.copy=o,e.fromValues=a,e.set=u,e.identity=c,e.transpose=h,e.invert=f,e.adjoint=l,e.determinant=d,e.multiply=m,e.translate=_,e.rotate=p,e.scale=g,e.fromTranslation=v,e.fromRotation=T,e.fromScaling=E,e.fromMat2d=M,e.fromQuat=A,e.normalFromMat4=I,e.projection=S,e.str=O,e.frob=L,e.add=R,e.subtract=y,e.multiplyScalar=x,e.multiplyScalarAndAdd=N,e.exactEquals=b,e.equals=P;var w=n(0),C=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(w);e.mul=m,e.sub=y},function(t,e,n){"use strict";function i(){var t=new z.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function r(t){var e=new z.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function o(t,e,n){var i=new z.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function m(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function _(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function p(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function v(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function T(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function E(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}function M(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function A(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function I(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function S(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function O(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function L(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function R(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],u=n[2];return t[0]=r*u-s*a,t[1]=s*o-i*u,t[2]=i*a-r*o,t}function y(t,e,n,i){var r=e[0],s=e[1],o=e[2];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t}function x(t,e,n,i,r,s){var o=s*s,a=o*(2*s-3)+1,u=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return t[0]=e[0]*a+n[0]*u+i[0]*c+r[0]*h,t[1]=e[1]*a+n[1]*u+i[1]*c+r[1]*h,t[2]=e[2]*a+n[2]*u+i[2]*c+r[2]*h,t}function N(t,e,n,i,r,s){var o=1-s,a=o*o,u=s*s,c=a*o,h=3*s*a,f=3*u*o,l=u*s;return t[0]=e[0]*c+n[0]*h+i[0]*f+r[0]*l,t[1]=e[1]*c+n[1]*h+i[1]*f+r[1]*l,t[2]=e[2]*c+n[2]*h+i[2]*f+r[2]*l,t}function b(t,e){e=e||1;var n=2*z.RANDOM()*Math.PI,i=2*z.RANDOM()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t}function P(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function w(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function C(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],u=n[2],c=n[3],h=c*i+a*s-u*r,f=c*r+u*i-o*s,l=c*s+o*r-a*i,d=-o*i-a*r-u*s;return t[0]=h*c+d*-o+f*-u-l*-a,t[1]=f*c+d*-a+l*-o-h*-u,t[2]=l*c+d*-u+h*-a-f*-o,t}function H(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function D(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function F(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function U(t,e){var n=o(t[0],t[1],t[2]),i=o(e[0],e[1],e[2]);O(n,n),O(i,i);var r=L(n,i);return r>1?0:r<-1?Math.PI:Math.acos(r)}function G(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function B(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(n-s)<=z.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=z.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=z.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=r,e.length=s,e.fromValues=o,e.copy=a,e.set=u,e.add=c,e.subtract=h,e.multiply=f,e.divide=l,e.ceil=d,e.floor=m,e.min=_,e.max=p,e.round=g,e.scale=v,e.scaleAndAdd=T,e.distance=E,e.squaredDistance=M,e.squaredLength=A,e.negate=I,e.inverse=S,e.normalize=O,e.dot=L,e.cross=R,e.lerp=y,e.hermite=x,e.bezier=N,e.random=b,e.transformMat4=P,e.transformMat3=w,e.transformQuat=C,e.rotateX=H,e.rotateY=D,e.rotateZ=F,e.angle=U,e.str=G,e.exactEquals=B,e.equals=V;var X=n(0),z=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(X);e.sub=h,e.mul=f,e.div=l,e.dist=E,e.sqrDist=M,e.len=s,e.sqrLen=A,e.forEach=function(){var t=i();return function(e,n,i,r,s,o){var a=void 0,u=void 0;for(n||(n=3),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}()},function(t,e,n){"use strict";function i(){var t=new H.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function r(t){var e=new H.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e,n,i){var r=new H.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function l(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function _(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function p(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function v(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}function T(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+s*s)}function E(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return n*n+i*i+r*r+s*s}function M(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)}function A(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function I(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function S(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function O(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o),t}function L(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function R(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a),t}function y(t,e){return e=e||1,t[0]=H.RANDOM(),t[1]=H.RANDOM(),t[2]=H.RANDOM(),t[3]=H.RANDOM(),O(t,t),g(t,t,e),t}function x(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}function N(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],u=n[2],c=n[3],h=c*i+a*s-u*r,f=c*r+u*i-o*s,l=c*s+o*r-a*i,d=-o*i-a*r-u*s;return t[0]=h*c+d*-o+f*-u-l*-a,t[1]=f*c+d*-a+l*-o-h*-u,t[2]=l*c+d*-u+h*-a-f*-o,t[3]=e[3],t}function b(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function w(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=H.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=H.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-u)<=H.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-c)<=H.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=r,e.fromValues=s,e.copy=o,e.set=a,e.add=u,e.subtract=c,e.multiply=h,e.divide=f,e.ceil=l,e.floor=d,e.min=m,e.max=_,e.round=p,e.scale=g,e.scaleAndAdd=v,e.distance=T,e.squaredDistance=E,e.length=M,e.squaredLength=A,e.negate=I,e.inverse=S,e.normalize=O,e.dot=L,e.lerp=R,e.random=y,e.transformMat4=x,e.transformQuat=N,e.str=b,e.exactEquals=P,e.equals=w;var C=n(0),H=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(C);e.sub=c,e.mul=h,e.div=f,e.dist=T,e.sqrDist=E,e.len=M,e.sqrLen=A,e.forEach=function(){var t=i();return function(e,n,i,r,s,o){var a=void 0,u=void 0;for(n||(n=4),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}()},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var r=n(0),s=i(r),o=n(5),a=i(o),u=n(6),c=i(u),h=n(1),f=i(h),l=n(7),d=i(l),m=n(8),_=i(m),p=n(9),g=i(p),v=n(2),T=i(v),E=n(3),M=i(E);e.glMatrix=s,e.mat2=a,e.mat2d=c,e.mat3=f,e.mat4=d,e.quat=_,e.vec2=g,e.vec3=T,e.vec4=M},function(t,e,n){"use strict";function i(){var t=new y.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function r(t){var e=new y.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,n,i){var r=new y.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function u(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function c(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function h(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*s-r*i;return o?(o=1/o,t[0]=s*o,t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t):null}function f(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function l(t){return t[0]*t[3]-t[2]*t[1]}function d(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],u=n[1],c=n[2],h=n[3];return t[0]=i*a+s*u,t[1]=r*a+o*u,t[2]=i*c+s*h,t[3]=r*c+o*h,t}function m(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+s*a,t[1]=r*u+o*a,t[2]=i*-a+s*u,t[3]=r*-a+o*u,t}function _(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],u=n[1];return t[0]=i*a,t[1]=r*a,t[2]=s*u,t[3]=o*u,t}function p(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function v(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function T(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function E(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]}function M(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function A(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function S(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=y.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=y.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-u)<=y.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-c)<=y.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))}function O(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function L(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=r,e.copy=s,e.identity=o,e.fromValues=a,e.set=u,e.transpose=c,e.invert=h,e.adjoint=f,e.determinant=l,e.multiply=d,e.rotate=m,e.scale=_,e.fromRotation=p,e.fromScaling=g,e.str=v,e.frob=T,e.LDU=E,e.add=M,e.subtract=A,e.exactEquals=I,e.equals=S,e.multiplyScalar=O,e.multiplyScalarAndAdd=L;var R=n(0),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(R);e.mul=d,e.sub=A},function(t,e,n){"use strict";function i(){var t=new R.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function r(t){var e=new R.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function a(t,e,n,i,r,s){var o=new R.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o[4]=r,o[5]=s,o}function u(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function c(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=n*s-i*r;return u?(u=1/u,t[0]=s*u,t[1]=-i*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*a-s*o)*u,t[5]=(i*o-n*a)*u,t):null}function h(t){return t[0]*t[3]-t[1]*t[2]}function f(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=n[0],h=n[1],f=n[2],l=n[3],d=n[4],m=n[5];return t[0]=i*c+s*h,t[1]=r*c+o*h,t[2]=i*f+s*l,t[3]=r*f+o*l,t[4]=i*d+s*m+a,t[5]=r*d+o*m+u,t}function l(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=Math.sin(n),h=Math.cos(n);return t[0]=i*h+s*c,t[1]=r*h+o*c,t[2]=i*-c+s*h,t[3]=r*-c+o*h,t[4]=a,t[5]=u,t}function d(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=n[0],h=n[1];return t[0]=i*c,t[1]=r*c,t[2]=s*h,t[3]=o*h,t[4]=a,t[5]=u,t}function m(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=n[0],h=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=i*c+s*h+a,t[5]=r*c+o*h+u,t}function _(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t}function p(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function g(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function v(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function T(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function E(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function M(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function A(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function I(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t}function S(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function O(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=e[0],c=e[1],h=e[2],f=e[3],l=e[4],d=e[5];return Math.abs(n-u)<=R.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=R.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-h)<=R.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-f)<=R.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-l)<=R.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-d)<=R.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=r,e.copy=s,e.identity=o,e.fromValues=a,e.set=u,e.invert=c,e.determinant=h,e.multiply=f,e.rotate=l,e.scale=d,e.translate=m,e.fromRotation=_,e.fromScaling=p,e.fromTranslation=g,e.str=v,e.frob=T,e.add=E,e.subtract=M,e.multiplyScalar=A,e.multiplyScalarAndAdd=I,e.exactEquals=S,e.equals=O;var L=n(0),R=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(L);e.mul=f,e.sub=M},function(t,e,n){"use strict";function i(){var t=new W.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r(t){var e=new W.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,n,i,r,s,o,a,u,c,h,f,l,d,m,_){var p=new W.ARRAY_TYPE(16);return p[0]=t,p[1]=e,p[2]=n,p[3]=i,p[4]=r,p[5]=s,p[6]=o,p[7]=a,p[8]=u,p[9]=c,p[10]=h,p[11]=f,p[12]=l,p[13]=d,p[14]=m,p[15]=_,p}function a(t,e,n,i,r,s,o,a,u,c,h,f,l,d,m,_,p){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=u,t[8]=c,t[9]=h,t[10]=f,t[11]=l,t[12]=d,t[13]=m,t[14]=_,t[15]=p,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function h(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],m=e[12],_=e[13],p=e[14],g=e[15],v=n*a-i*o,T=n*u-r*o,E=n*c-s*o,M=i*u-r*a,A=i*c-s*a,I=r*c-s*u,S=h*_-f*m,O=h*p-l*m,L=h*g-d*m,R=f*p-l*_,y=f*g-d*_,x=l*g-d*p,N=v*x-T*y+E*R+M*L-A*O+I*S;return N?(N=1/N,t[0]=(a*x-u*y+c*R)*N,t[1]=(r*y-i*x-s*R)*N,t[2]=(_*I-p*A+g*M)*N,t[3]=(l*A-f*I-d*M)*N,t[4]=(u*L-o*x-c*O)*N,t[5]=(n*x-r*L+s*O)*N,t[6]=(p*E-m*I-g*T)*N,t[7]=(h*I-l*E+d*T)*N,t[8]=(o*y-a*L+c*S)*N,t[9]=(i*L-n*y-s*S)*N,t[10]=(m*A-_*E+g*v)*N,t[11]=(f*E-h*A-d*v)*N,t[12]=(a*O-o*R-u*S)*N,t[13]=(n*R-i*O+r*S)*N,t[14]=(_*T-m*M-p*v)*N,t[15]=(h*M-f*T+l*v)*N,t):null}function f(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],m=e[12],_=e[13],p=e[14],g=e[15];return t[0]=a*(l*g-d*p)-f*(u*g-c*p)+_*(u*d-c*l),t[1]=-(i*(l*g-d*p)-f*(r*g-s*p)+_*(r*d-s*l)),t[2]=i*(u*g-c*p)-a*(r*g-s*p)+_*(r*c-s*u),t[3]=-(i*(u*d-c*l)-a*(r*d-s*l)+f*(r*c-s*u)),t[4]=-(o*(l*g-d*p)-h*(u*g-c*p)+m*(u*d-c*l)),t[5]=n*(l*g-d*p)-h*(r*g-s*p)+m*(r*d-s*l),t[6]=-(n*(u*g-c*p)-o*(r*g-s*p)+m*(r*c-s*u)),t[7]=n*(u*d-c*l)-o*(r*d-s*l)+h*(r*c-s*u),t[8]=o*(f*g-d*_)-h*(a*g-c*_)+m*(a*d-c*f),t[9]=-(n*(f*g-d*_)-h*(i*g-s*_)+m*(i*d-s*f)),t[10]=n*(a*g-c*_)-o*(i*g-s*_)+m*(i*c-s*a),t[11]=-(n*(a*d-c*f)-o*(i*d-s*f)+h*(i*c-s*a)),t[12]=-(o*(f*p-l*_)-h*(a*p-u*_)+m*(a*l-u*f)),t[13]=n*(f*p-l*_)-h*(i*p-r*_)+m*(i*l-r*f),t[14]=-(n*(a*p-u*_)-o*(i*p-r*_)+m*(i*u-r*a)),t[15]=n*(a*l-u*f)-o*(i*l-r*f)+h*(i*u-r*a),t}function l(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],c=t[8],h=t[9],f=t[10],l=t[11],d=t[12],m=t[13],_=t[14],p=t[15];return(e*o-n*s)*(f*p-l*_)-(e*a-i*s)*(h*p-l*m)+(e*u-r*s)*(h*_-f*m)+(n*a-i*o)*(c*p-l*d)-(n*u-r*o)*(c*_-f*d)+(i*u-r*a)*(c*m-h*d)}function d(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=e[9],d=e[10],m=e[11],_=e[12],p=e[13],g=e[14],v=e[15],T=n[0],E=n[1],M=n[2],A=n[3];return t[0]=T*i+E*a+M*f+A*_,t[1]=T*r+E*u+M*l+A*p,t[2]=T*s+E*c+M*d+A*g,t[3]=T*o+E*h+M*m+A*v,T=n[4],E=n[5],M=n[6],A=n[7],t[4]=T*i+E*a+M*f+A*_,t[5]=T*r+E*u+M*l+A*p,t[6]=T*s+E*c+M*d+A*g,t[7]=T*o+E*h+M*m+A*v,T=n[8],E=n[9],M=n[10],A=n[11],t[8]=T*i+E*a+M*f+A*_,t[9]=T*r+E*u+M*l+A*p,t[10]=T*s+E*c+M*d+A*g,t[11]=T*o+E*h+M*m+A*v,T=n[12],E=n[13],M=n[14],A=n[15],t[12]=T*i+E*a+M*f+A*_,t[13]=T*r+E*u+M*l+A*p,t[14]=T*s+E*c+M*d+A*g,t[15]=T*o+E*h+M*m+A*v,t}function m(t,e,n){var i=n[0],r=n[1],s=n[2],o=void 0,a=void 0,u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,d=void 0,m=void 0,_=void 0,p=void 0,g=void 0;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(o=e[0],a=e[1],u=e[2],c=e[3],h=e[4],f=e[5],l=e[6],d=e[7],m=e[8],_=e[9],p=e[10],g=e[11],t[0]=o,t[1]=a,t[2]=u,t[3]=c,t[4]=h,t[5]=f,t[6]=l,t[7]=d,t[8]=m,t[9]=_,t[10]=p,t[11]=g,t[12]=o*i+h*r+m*s+e[12],t[13]=a*i+f*r+_*s+e[13],t[14]=u*i+l*r+p*s+e[14],t[15]=c*i+d*r+g*s+e[15]),t}function _(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,n,i){var r=i[0],s=i[1],o=i[2],a=Math.sqrt(r*r+s*s+o*o),u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,d=void 0,m=void 0,_=void 0,p=void 0,g=void 0,v=void 0,T=void 0,E=void 0,M=void 0,A=void 0,I=void 0,S=void 0,O=void 0,L=void 0,R=void 0,y=void 0,x=void 0,N=void 0,b=void 0;return Math.abs(a)<W.EPSILON?null:(a=1/a,r*=a,s*=a,o*=a,u=Math.sin(n),c=Math.cos(n),h=1-c,f=e[0],l=e[1],d=e[2],m=e[3],_=e[4],p=e[5],g=e[6],v=e[7],T=e[8],E=e[9],M=e[10],A=e[11],I=r*r*h+c,S=s*r*h+o*u,O=o*r*h-s*u,L=r*s*h-o*u,R=s*s*h+c,y=o*s*h+r*u,x=r*o*h+s*u,N=s*o*h-r*u,b=o*o*h+c,t[0]=f*I+_*S+T*O,t[1]=l*I+p*S+E*O,t[2]=d*I+g*S+M*O,t[3]=m*I+v*S+A*O,t[4]=f*L+_*R+T*y,t[5]=l*L+p*R+E*y,t[6]=d*L+g*R+M*y,t[7]=m*L+v*R+A*y,t[8]=f*x+_*N+T*b,t[9]=l*x+p*N+E*b,t[10]=d*x+g*N+M*b,t[11]=m*x+v*N+A*b,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],h=e[9],f=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+c*i,t[5]=o*r+h*i,t[6]=a*r+f*i,t[7]=u*r+l*i,t[8]=c*r-s*i,t[9]=h*r-o*i,t[10]=f*r-a*i,t[11]=l*r-u*i,t}function v(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[8],h=e[9],f=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-c*i,t[1]=o*r-h*i,t[2]=a*r-f*i,t[3]=u*r-l*i,t[8]=s*i+c*r,t[9]=o*i+h*r,t[10]=a*i+f*r,t[11]=u*i+l*r,t}function T(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],u=e[3],c=e[4],h=e[5],f=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+c*i,t[1]=o*r+h*i,t[2]=a*r+f*i,t[3]=u*r+l*i,t[4]=c*r-s*i,t[5]=h*r-o*i,t[6]=f*r-a*i,t[7]=l*r-u*i,t}function E(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function M(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e,n){var i=n[0],r=n[1],s=n[2],o=Math.sqrt(i*i+r*r+s*s),a=void 0,u=void 0,c=void 0;return Math.abs(o)<W.EPSILON?null:(o=1/o,i*=o,r*=o,s*=o,a=Math.sin(e),u=Math.cos(e),c=1-u,t[0]=i*i*c+u,t[1]=r*i*c+s*a,t[2]=s*i*c-r*a,t[3]=0,t[4]=i*r*c-s*a,t[5]=r*r*c+u,t[6]=s*r*c+i*a,t[7]=0,t[8]=i*s*c+r*a,t[9]=r*s*c-i*a,t[10]=s*s*c+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function I(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=i+i,u=r+r,c=s+s,h=i*a,f=i*u,l=i*c,d=r*u,m=r*c,_=s*c,p=o*a,g=o*u,v=o*c;return t[0]=1-(d+_),t[1]=f+v,t[2]=l-g,t[3]=0,t[4]=f-v,t[5]=1-(h+_),t[6]=m+p,t[7]=0,t[8]=l+g,t[9]=m-p,t[10]=1-(h+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function R(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function y(t,e){var n=e[0],i=e[1],r=e[2],s=e[4],o=e[5],a=e[6],u=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(n*n+i*i+r*r),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(u*u+c*c+h*h),t}function x(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function N(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],u=r+r,c=s+s,h=o+o,f=r*u,l=r*c,d=r*h,m=s*c,_=s*h,p=o*h,g=a*u,v=a*c,T=a*h,E=i[0],M=i[1],A=i[2];return t[0]=(1-(m+p))*E,t[1]=(l+T)*E,t[2]=(d-v)*E,t[3]=0,t[4]=(l-T)*M,t[5]=(1-(f+p))*M,t[6]=(_+g)*M,t[7]=0,t[8]=(d+v)*A,t[9]=(_-g)*A,t[10]=(1-(f+m))*A,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function b(t,e,n,i,r){var s=e[0],o=e[1],a=e[2],u=e[3],c=s+s,h=o+o,f=a+a,l=s*c,d=s*h,m=s*f,_=o*h,p=o*f,g=a*f,v=u*c,T=u*h,E=u*f,M=i[0],A=i[1],I=i[2],S=r[0],O=r[1],L=r[2];return t[0]=(1-(_+g))*M,t[1]=(d+E)*M,t[2]=(m-T)*M,t[3]=0,t[4]=(d-E)*A,t[5]=(1-(l+g))*A,t[6]=(p+v)*A,t[7]=0,t[8]=(m+T)*I,t[9]=(p-v)*I,t[10]=(1-(l+_))*I,t[11]=0,t[12]=n[0]+S-(t[0]*S+t[4]*O+t[8]*L),t[13]=n[1]+O-(t[1]*S+t[5]*O+t[9]*L),t[14]=n[2]+L-(t[2]*S+t[6]*O+t[10]*L),t[15]=1,t}function P(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,u=r+r,c=n*o,h=i*o,f=i*a,l=r*o,d=r*a,m=r*u,_=s*o,p=s*a,g=s*u;return t[0]=1-f-m,t[1]=h+g,t[2]=l-p,t[3]=0,t[4]=h-g,t[5]=1-c-m,t[6]=d+_,t[7]=0,t[8]=l+p,t[9]=d-_,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e,n,i,r,s,o){var a=1/(n-e),u=1/(r-i),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*u,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function C(t,e,n,i,r){var s=1/Math.tan(e/2),o=1/(i-r);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*o,t[15]=0,t}function H(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+a),c=2/(r+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*u*.5,t[9]=(r-s)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function D(t,e,n,i,r,s,o){var a=1/(e-n),u=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*u,t[14]=(o+s)*c,t[15]=1,t}function F(t,e,n,i){var r=void 0,s=void 0,o=void 0,a=void 0,u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,d=void 0,m=e[0],_=e[1],p=e[2],g=i[0],v=i[1],T=i[2],E=n[0],M=n[1],A=n[2];return Math.abs(m-E)<W.EPSILON&&Math.abs(_-M)<W.EPSILON&&Math.abs(p-A)<W.EPSILON?mat4.identity(t):(h=m-E,f=_-M,l=p-A,d=1/Math.sqrt(h*h+f*f+l*l),h*=d,f*=d,l*=d,r=v*l-T*f,s=T*h-g*l,o=g*f-v*h,d=Math.sqrt(r*r+s*s+o*o),d?(d=1/d,r*=d,s*=d,o*=d):(r=0,s=0,o=0),a=f*o-l*s,u=l*r-h*o,c=h*s-f*r,d=Math.sqrt(a*a+u*u+c*c),d?(d=1/d,a*=d,u*=d,c*=d):(a=0,u=0,c=0),t[0]=r,t[1]=a,t[2]=h,t[3]=0,t[4]=s,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=l,t[11]=0,t[12]=-(r*m+s*_+o*p),t[13]=-(a*m+u*_+c*p),t[14]=-(h*m+f*_+l*p),t[15]=1,t)}function U(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=i[0],u=i[1],c=i[2],h=r-n[0],f=s-n[1],l=o-n[2],d=h*h+f*f+l*l;d>0&&(d=1/Math.sqrt(d),h*=d,f*=d,l*=d);var m=u*l-c*f,_=c*h-a*l,p=a*f-u*h;return t[0]=m,t[1]=_,t[2]=p,t[3]=0,t[4]=f*p-l*_,t[5]=l*m-h*p,t[6]=h*_-f*m,t[7]=0,t[8]=h,t[9]=f,t[10]=l,t[11]=0,t[12]=r,t[13]=s,t[14]=o,t[15]=1,t}function G(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function B(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function V(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function X(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function z(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function j(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function k(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=t[8],f=t[9],l=t[10],d=t[11],m=t[12],_=t[13],p=t[14],g=t[15],v=e[0],T=e[1],E=e[2],M=e[3],A=e[4],I=e[5],S=e[6],O=e[7],L=e[8],R=e[9],y=e[10],x=e[11],N=e[12],b=e[13],P=e[14],w=e[15];return Math.abs(n-v)<=W.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(i-T)<=W.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(r-E)<=W.EPSILON*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(s-M)<=W.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-A)<=W.EPSILON*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(a-I)<=W.EPSILON*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(u-S)<=W.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-O)<=W.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(h-L)<=W.EPSILON*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-R)<=W.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(l-y)<=W.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(d-x)<=W.EPSILON*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(m-N)<=W.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(_-b)<=W.EPSILON*Math.max(1,Math.abs(_),Math.abs(b))&&Math.abs(p-P)<=W.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(g-w)<=W.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=r,e.copy=s,e.fromValues=o,e.set=a,e.identity=u,e.transpose=c,e.invert=h,e.adjoint=f,e.determinant=l,e.multiply=d,e.translate=m,e.scale=_,e.rotate=p,e.rotateX=g,e.rotateY=v,e.rotateZ=T,e.fromTranslation=E,e.fromScaling=M,e.fromRotation=A,e.fromXRotation=I,e.fromYRotation=S,e.fromZRotation=O,e.fromRotationTranslation=L,e.getTranslation=R,e.getScaling=y,e.getRotation=x,e.fromRotationTranslationScale=N,e.fromRotationTranslationScaleOrigin=b,e.fromQuat=P,e.frustum=w,e.perspective=C,e.perspectiveFromFieldOfView=H,e.ortho=D,e.lookAt=F,e.targetTo=U,e.str=G,e.frob=B,e.add=V,e.subtract=X,e.multiplyScalar=z,e.multiplyScalarAndAdd=j,e.exactEquals=Y,e.equals=k;var q=n(0),W=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(q);e.mul=d,e.sub=X},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new E.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function s(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function a(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return 0!=i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function u(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],u=n[1],c=n[2],h=n[3];return t[0]=i*h+o*a+r*c-s*u,t[1]=r*h+o*u+s*a-i*c,t[2]=s*h+o*c+i*u-r*a,t[3]=o*h-i*a-r*u-s*c,t}function c(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*a,t[1]=r*u+s*a,t[2]=s*u-r*a,t[3]=o*u-i*a,t}function h(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u-s*a,t[1]=r*u+o*a,t[2]=s*u+i*a,t[3]=o*u-r*a,t}function f(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*a,t[1]=r*u-i*a,t[2]=s*u+o*a,t[3]=o*u-s*a,t}function l(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function d(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],u=n[0],c=n[1],h=n[2],f=n[3],l=void 0,d=void 0,m=void 0,_=void 0,p=void 0;return d=r*u+s*c+o*h+a*f,d<0&&(d=-d,u=-u,c=-c,h=-h,f=-f),1-d>1e-6?(l=Math.acos(d),m=Math.sin(l),_=Math.sin((1-i)*l)/m,p=Math.sin(i*l)/m):(_=1-i,p=i),t[0]=_*r+p*u,t[1]=_*s+p*c,t[2]=_*o+p*h,t[3]=_*a+p*f,t}function m(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a,t}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function p(t,e){var n=e[0]+e[4]+e[8],i=void 0;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*s+o]-e[3*o+s])*i,t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}function g(t,e,n,i){var r=.5*Math.PI/180;e*=r,n*=r,i*=r;var s=Math.sin(e),o=Math.cos(e),a=Math.sin(n),u=Math.cos(n),c=Math.sin(i),h=Math.cos(i);return t[0]=s*u*h-o*a*c,t[1]=o*a*h+s*u*c,t[2]=o*u*c-s*a*h,t[3]=o*u*h+s*a*c,t}function v(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=r,e.identity=s,e.setAxisAngle=o,e.getAxisAngle=a,e.multiply=u,e.rotateX=c,e.rotateY=h,e.rotateZ=f,e.calculateW=l,e.slerp=d,e.invert=m,e.conjugate=_,e.fromMat3=p,e.fromEuler=g,e.str=v;var T=n(0),E=i(T),M=n(1),A=i(M),I=n(2),S=i(I),O=n(3),L=i(O),R=(e.clone=L.clone,e.fromValues=L.fromValues,e.copy=L.copy,e.set=L.set,e.add=L.add,e.mul=u,e.scale=L.scale,e.dot=L.dot,e.lerp=L.lerp,e.length=L.length),y=(e.len=R,e.squaredLength=L.squaredLength),x=(e.sqrLen=y,e.normalize=L.normalize);e.exactEquals=L.exactEquals,e.equals=L.equals,e.rotationTo=function(){var t=S.create(),e=S.fromValues(1,0,0),n=S.fromValues(0,1,0);return function(i,r,s){var a=S.dot(r,s);return a<-.999999?(S.cross(t,e,r),S.len(t)<1e-6&&S.cross(t,n,r),S.normalize(t,t),o(i,t,Math.PI),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(S.cross(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+a,x(i,i))}}(),e.sqlerp=function(){var t=r(),e=r();return function(n,i,r,s,o,a){return d(t,i,o,a),d(e,r,s,a),d(n,t,e,2*a*(1-a)),n}}(),e.setAxes=function(){var t=A.create();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],x(e,p(e,t))}}()},function(t,e,n){"use strict";function i(){var t=new U.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function r(t){var e=new U.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function s(t,e){var n=new U.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function o(t,e){return t[0]=e[0],t[1]=e[1],t}function a(t,e,n){return t[0]=e,t[1]=n,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function l(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function _(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function p(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function v(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function T(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)}function E(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function M(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function A(t){var e=t[0],n=t[1];return e*e+n*n}function I(t,e){return t[0]=-e[0],t[1]=-e[1],t}function S(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function O(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t}function L(t,e){return t[0]*e[0]+t[1]*e[1]}function R(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function y(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function x(t,e){e=e||1;var n=2*U.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function N(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t}function b(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function P(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function w(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}function C(t){return"vec2("+t[0]+", "+t[1]+")"}function H(t,e){return t[0]===e[0]&&t[1]===e[1]}function D(t,e){var n=t[0],i=t[1],r=e[0],s=e[1];return Math.abs(n-r)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-s)<=U.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=i,e.clone=r,e.fromValues=s,e.copy=o,e.set=a,e.add=u,e.subtract=c,e.multiply=h,e.divide=f,e.ceil=l,e.floor=d,e.min=m,e.max=_,e.round=p,e.scale=g,e.scaleAndAdd=v,e.distance=T,e.squaredDistance=E,e.length=M,e.squaredLength=A,e.negate=I,e.inverse=S,e.normalize=O,e.dot=L,e.cross=R,e.lerp=y,e.random=x,e.transformMat2=N,e.transformMat2d=b,e.transformMat3=P,e.transformMat4=w,e.str=C,e.exactEquals=H,e.equals=D;var F=n(0),U=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(F);e.len=M,e.sub=c,e.mul=h,e.div=f,e.dist=T,e.sqrDist=E,e.sqrLen=A,e.forEach=function(){var t=i();return function(e,n,i,r,s,o){var a=void 0,u=void 0;for(n||(n=2),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}()}])})},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(29),o=n(2),a=n(20),u=n(4),c=n(5),h=c.getTypedArrayGLType,f={2:new s,3:new o,4:new a,16:new u},l=i.create({className:"GeometryData",isGeometryData:!0,size:void 0,normalized:!1,type:void 0,isDirty:!0,bufferViewId:void 0,constructor:function(t,e,n){this.id=r.generateUUID(this.className),this.data=t,this.size=e,Object.assign(this,n),this.bufferViewId||(this.bufferViewId=this.id)},_stride:0,stride:{get:function(){return this._stride},set:function(t){this._stride=t,this.strideSize=0===t?0:t/this.data.BYTES_PER_ELEMENT}},strideSize:0,_offset:0,offset:{get:function(){return this._offset},set:function(t){this._offset=t,this.offsetSize=t/this.data.BYTES_PER_ELEMENT}},offsetSize:0,data:{set:function(t){t&&(this._data=t,this.type=h(t),this.stride=this._stride,this.offset=this._offset,this.isDirty=!0)},get:function(){return this._data}},length:{get:function(){return this._data.length}},realLength:{get:function(){return 0===this.strideSize?this._data.length:this._data.length/this.strideSize*this.size}},count:{get:function(){return 0===this.strideSize?this._data.length/this.size:this._data.length/this.strideSize}},clone:function(){var t=new l;return t.copy(this),t},copy:function(t){var e=t.data;this.data=new e.constructor(e),this.size=t.size,this.stride=t.stride,this.normalized=t.normalized,this.type=t.type,this.offset=t.offset},getOffset:function(t){var e=this.strideSize;return 0===e?t*this.size:t*e+this.offsetSize},getComponentOffset:function(t){var e=this.size;return this.getOffset(Math.floor(t/e))+t%e},get:function(t){var e=this.getOffset(t);return this.getByOffset(e)},set:function(t,e){var n=this.getOffset(t);return this.setByOffset(n,e),n},getByOffset:function(t){var e=this.size;if(e>1){return f[e].fromArray(this._data,t)}return this._data[t]},setByOffset:function(t,e){var n=this.size,i=this._data;n>1?e.toArray(i,t):i[t]=e,this.isDirty=!0},traverse:function(t){for(var e=this.count,n=0;n<e;n++){var i=this.getOffset(n);if(t(this.getByOffset(i),n,i))return!0}return!1},traverseByComponent:function(t){for(var e=this.count,n=this.size,i=this._data,r=0;r<e;r++)for(var s=this.getOffset(r),o=0;o<n;o++){var a=s+o;if(t(i[a],a))return!0}return!1}});t.exports=l},function(t,e,n){"use strict";var i=n(53);t.exports=i},function(t,e,n){"use strict";var i=n(0),r=n(10),s=n(4),o=n(2),a=n(26),u=n(14),c=n(1),h=new o(0,1,0),f=new s,l=i.create({Mixes:r,isNode:!0,className:"Node",name:"",autoUpdateWorldMatrix:!0,parent:null,_x:0,_y:0,_z:0,_scaleX:1,_scaleY:1,_scaleZ:1,_rotationX:0,_rotationRadX:0,_rotationY:0,_rotationRadY:0,_rotationZ:0,_rotationRadZ:0,_pivotX:0,_pivotY:0,_pivotZ:0,_positionDirty:!1,_scaleDirty:!1,_rotationDirty:!1,_pivotDirty:!1,_matrixDirty:!1,needCallChildUpdate:!0,visible:!0,constructor:function(t){this.id=c.generateUUID(this.className),this.up=h.clone(),this.children=[],this.worldMatrix=new s,this._matrix=new s,this._position=new o,this._scale=new o(1,1,1),this._pivot=new o,this._euler=new a,this.quaternion=new u,Object.assign(this,t)},clone:function(t){var e=new this.constructor;return e.name=this.name,e.jointName=this.jointName,e.setPosition(this.x,this.y,this.z),e.setScale(this.scaleX,this.scaleY,this.scaleZ),e.setRotation(this.rotationX,this.rotationY,this.rotationZ),this.children.forEach(function(t){e.addChild(t.clone(!0))}),t||(this.anim&&(e.anim=this.anim.clone(e)),e.resetSkinedMeshRootNode()),e},setAnim:function(t){this.anim=t,t.rootNode=this},resetSkinedMeshRootNode:function(){var t=this;this.traverse(function(e){e.isSkinedMesh&&e.jointNames&&(e.rootNode=t)})},getChildrenNameMap:function(){var t={};return this.traverse(function(e){t[e.name]=e}),t},addChild:function(t){t.parent&&t.removeFromParent(),t.parent=this,this.children.push(t)},removeChild:function(t){var e=this.children.indexOf(t);e>-1&&(this.children.splice(e,1),t.parent=null)},addTo:function(t){return t.addChild(this),this},removeFromParent:function(){this.parent&&this.parent.removeChild(this)},updateMatrix:function(){var t=!1;this._positionDirty&&(this._positionDirty=!1,t=!0,this._position.set(this._x,this._y,this._z)),this._scaleDirty&&(this._scaleDirty=!1,t=!0,this._scale.set(this._scaleX,this._scaleY,this._scaleZ)),this._rotationDirty&&(this._rotationDirty=!1,t=!0,this._euler.set(this._rotationRadX,this._rotationRadY,this._rotationRadZ),this._quaternion.fromEuler(this._euler,!0)),this._pivotDirty&&(this._pivotDirty=!1,t=!0,this._pivot.set(this._pivotX,this._pivotY,this._pivotZ)),this._matrixDirty&&(this._matrixDirty=!1,t=!0),t&&this._matrix.compose(this._quaternion,this._position,this._scale,this._pivot)},updateTransform:function(){this._matrix.decompose(this._quaternion,this._position,this._scale,this._pivot);var t=this._position,e=this._scale,n=this._pivot;this._x=t.x,this._y=t.y,this._z=t.z,this._scaleX=e.x,this._scaleY=e.y,this._scaleZ=e.z,this._pivotX=n.x,this._pivotY=n.y,this._pivotZ=n.z,this._onQuaternionChange(),this._positionDirty=this._rotationDirty=this._scaleDirty=this.pivot=this._matrixDirty=!1},updateMatrixWorld:function(t){this.traverse(function(e){(e.autoUpdateWorldMatrix||t)&&(e.parent?e.worldMatrix.multiply(e.parent.worldMatrix,e.matrix):e.worldMatrix.copy(e.matrix))})},getConcatenatedMatrix:function(t){for(var e=new s,n=this;n&&n!==t;n=n.parent)e.multiply(n.matrix,e);return e},traverse:function(t){t(this)||this.children.forEach(function(e){e.traverse(t)})},traverseUpdate:function(t){this.traverse(function(e){return e.onUpdate&&e.onUpdate(t),!e.needCallChildUpdate})},getChildByFn:function(t){var e=null;return this.traverse(function(n){return!!t(n)&&(e=n,!0)}),e},getChildrenByFn:function(t){var e=[];return this.traverse(function(n){t(n)&&e.push(n)}),e},getChildByName:function(t){return this.getChildByFn(function(e){return e.name===t})},getChildrenByName:function(t){return this.getChildrenByFn(function(e){return e.name===t})},getChildById:function(t){return this.getChildByFn(function(e){return e.id===t})},getChildrenByClassName:function(t){return this.getChildrenByFn(function(e){return e.className===t})},setScale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this.scaleX=t,this.scaleY=e,this.scaleZ=n},setPosition:function(t,e,n){this.x=t,this.y=e,this.z=n},setRotation:function(t,e,n){this.rotationX=t,this.rotationY=e,this.rotationZ=n},setPivot:function(t,e,n){this.pivotX=t,this.pivotY=e,this.pivotZ=n},lookAt:function(t){this.isCamera?f.targetTo(this,t,this.up):f.targetTo(t,this,this.up),this._quaternion.fromMat4(f)},raycast:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];return this.traverse(function(e){if(e.isMesh){var i=e.raycast(t,!1);i&&(n=n.concat(i.map(function(t){return{mesh:e,point:t}})))}}),n.length?(e&&t.sortPoints(n,"point"),n):null},matrix:{get:function(){return this.updateMatrix(),this._matrix},set:function(t){this._matrix=t,this.updateTransform()}},x:{get:function(){return this._x},set:function(t){this._x=t,this._positionDirty=!0}},y:{get:function(){return this._y},set:function(t){this._y=t,this._positionDirty=!0}},z:{get:function(){return this._z},set:function(t){this._z=t,this._positionDirty=!0}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this._scaleDirty=!0}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this._scaleDirty=!0}},scaleZ:{get:function(){return this._scaleZ},set:function(t){this._scaleZ=t,this._scaleDirty=!0}},rotationX:{get:function(){return this._rotationX},set:function(t){this._rotationX=t,this._rotationRadX=c.DEG2RAD*t,this._rotationDirty=!0}},rotationY:{get:function(){return this._rotationY},set:function(t){this._rotationY=t,this._rotationRadY=c.DEG2RAD*t,this._rotationDirty=!0}},rotationZ:{get:function(){return this._rotationZ},set:function(t){this._rotationZ=t,this._rotationRadZ=c.DEG2RAD*t,this._rotationDirty=!0}},pivotX:{get:function(){return this._pivotX},set:function(t){this._pivotX=t,this._pivotDirty=!0}},pivotY:{get:function(){return this._pivotY},set:function(t){this._pivotY=t,this._pivotDirty=!0}},pivotZ:{get:function(){return this._pivotZ},set:function(t){this._pivotZ=t,this._pivotDirty=!0}},quaternion:{get:function(){return this._quaternion},set:function(t){var e=this;this._quaternion=t,this._matrixDirty=!0,this._onQuaternionChange(),this._quaternion.on("change",function(){e._onQuaternionChange(),e._matrixDirty=!0})}},_onQuaternionChange:function(){var t=this._euler,e=this._quaternion;t.fromQuat(e),this._rotationRadX=t.x,this._rotationRadY=t.y,this._rotationRadZ=t.z,this._rotationX=t.x*c.RAD2DEG,this._rotationY=t.y*c.RAD2DEG,this._rotationZ=t.z*c.RAD2DEG},getBounds:function(t,e,n){return e?e.multiply(this.matrix):e=this.getConcatenatedMatrix(t),this.children.forEach(function(t){n=t.getBounds(null,e.clone(),n)}),this.isMesh&&(n=this.geometry.getBounds(e,n)),n}});t.exports=l},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(0),s=r.create({constructor:function(){this._cache={}},get:function(t){return this._cache[t]},add:function(t,e){"object"===(void 0===e?"undefined":i(e))&&(e.__cacheId=t),this._cache[t]=e},remove:function(t){this._cache[t]=null},removeAll:function(){this._cache={}},each:function(t){var e=this._cache;for(var n in e)t(e[n])}});t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(10),s=n(139),o=n(5),a=new s,u=i.create({Mixes:r,Statics:{_cache:a,deleteCache:function(t){a.remove(t)},clearCache:function(){a.clear()}},load:function(t){var e=t.src,n=t.type;if(!n){/^(?:png|jpe?g|gif|webp|bmp)$/i.test(o.getExtension(e))&&(n="img")}return"img"===n?this.loadImg(e,t.crossOrigin):this.loadRes(e,n)},isCrossOrigin:function(t){var e=window.location,n=document.createElement("a");return n.href=t,n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol},loadImg:function(t,e){var n=this,i=a.get(t);return i?a.wait(i):new Promise(function(i,r){var o=new Image;a.update(t,s.PENDING),o.onload=function(){o.onerror=null,o.onabort=null,o.onload=null,a.update(t,s.LOADED,o),i(o)},o.onerror=function(){o.onerror=null,o.onabort=null,o.onload=null;var e=new Error("Image load failed for "+t.slice(0,100));a.update(t,s.FAILED,e),r(e)},o.onabort=o.onerror,(e||n.isCrossOrigin(t))&&(o.crossOrigin="anonymous"),o.src=t})},loadRes:function(t,e){var n=this;if(/^data:(.+?);base64,/.test(t)){var i=RegExp.$1,r=t.slice(13+i.length),o=atob(r);return"json"===e?o=JSON.parse(o):"buffer"===e&&(o=Uint8Array.from(o,function(t){return t.charCodeAt(0)}).buffer),Promise.resolve(o)}var u=a.get(t);return u?a.wait(u):(a.update(t,s.PENDING),this.fire("beforeload"),this.request({url:t,type:e}).then(function(e){return n.fire("loaded"),a.update(t,s.LOADED,e),e},function(e){throw n.fire("failed",e),a.update(t,s.FAILED),new Error("Resource load failed for "+t+", "+e)}))},request:function(t){var e=this;return new Promise(function(n,i){var r=new XMLHttpRequest;r.onload=function(){if(r.status<200||r.status>=300)return void i(new TypeError("Network request failed for "+r.status));var e="response"in r?r.response:r.responseText;if("json"===t.type)try{e=JSON.parse(e)}catch(t){return void i(new TypeError("JSON.parse error"+t))}n(e)},r.onprogress=function(n){e.fire("progress",{url:t.url,loaded:n.loaded,total:n.total})},r.onerror=function(){i(new TypeError("Network request failed"))},r.ontimeout=function(){i(new TypeError("Network request timed out"))},r.open(t.method||"GET",t.url,!0),"include"===t.credentials&&(r.withCredentials=!0),"buffer"===t.type&&(r.responseType="arraybuffer"),o.each(t.headers,function(t,e){r.setRequestHeader(e,t)}),r.send(t.body||null)})}});t.exports=u},function(t,e,n){"use strict";var i=n(21),r=n(2),s=n(0),o=n(10),a=n(8),u=a.quat,c=new i,h=s.create({Mixes:o,className:"Quaternion",isQuaternion:!0,constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.elements=u.fromValues(t,e,n,i)},copy:function(t,e){return u.copy(this.elements,t.elements),e||this.fire("change"),this},clone:function(){var t=this.elements;return new this.constructor(t[0],t[1],t[2],t[3])},toArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t},fromArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=this.elements;return i[0]=t[e],i[1]=t[e+1],i[2]=t[e+2],i[3]=t[e+3],n||this.fire("change"),this},set:function(t,e,n,i,r){return u.set(this.elements,t,e,n,i),r||this.fire("change"),this},identity:function(t){return u.identity(this.elements),t||this.fire("change"),this},rotationTo:function(t,e,n){return u.rotationTo(this.elements,t.elements,e.elements),n||this.fire("change"),this},setAxes:function(t,e,n,i){return u.setAxes(this.elements,t.elements,e.elements,n.elements),i||this.fire("change"),this},setAxisAngle:function(t,e,n){return u.setAxisAngle(this.elements,t,e),n||this.fire("change"),this},getAxisAngle:function(t){return t=t||new r,u.getAxisAngle(t.elements,this.elements)},add:function(t,e){return u.add(this.elements,this.elements,t.elements),e||this.fire("change"),this},multiply:function(t,e){return u.multiply(this.elements,this.elements,t.elements),e||this.fire("change"),this},premultiply:function(t,e){return u.multiply(this.elements,t.elements,this.elements),e||this.fire("change"),this},scale:function(t,e){return u.scale(this.elements,this.elements,t),e||this.fire("change"),this},rotateX:function(t,e){return u.rotateX(this.elements,this.elements,t),e||this.fire("change"),this},rotateY:function(t,e){return u.rotateY(this.elements,this.elements,t),e||this.fire("change"),this},rotateZ:function(t,e){return u.rotateZ(this.elements,this.elements,t),e||this.fire("change"),this},calculateW:function(t){return u.calculateW(this.elements,this.elements),t||this.fire("change"),this},dot:function(t){return u.dot(this.elements,t.elements)},lerp:function(t,e,n){return u.lerp(this.elements,this.elements,t.elements,e),n||this.fire("change"),this},slerp:function(t,e,n){return u.slerp(this.elements,this.elements,t.elements,e),n||this.fire("change"),this},sqlerp:function(t,e,n,i,r){return u.sqlerp(this.elements,t.elements,e.elements,n.elements,i),r||this.fire("change"),this},invert:function(t){return u.invert(this.elements,this.elements),t||this.fire("change"),this},conjugate:function(t){return u.conjugate(this.elements,this.elements),t||this.fire("change"),this},length:function(){return u.length(this.elements)},squaredLength:function(){return u.squaredLength(this.elements)},normalize:function(t){return u.normalize(this.elements,this.elements),t||this.fire("change"),this},fromMat3:function(t,e){return u.fromMat3(this.elements,t.elements),e||this.fire("change"),this},fromMat4:function(t,e){return c.fromMat4(t),this.fromMat3(c,e),this},exactEquals:function(t){return u.exactEquals(this.elements,t.elements)},equals:function(t){return u.equals(this.elements,t.elements)},fromEuler:function(t,e){var n=.5*t.x,i=.5*t.y,r=.5*t.z,s=t.order,o=Math.sin(n),a=Math.cos(n),u=Math.sin(i),c=Math.cos(i),h=Math.sin(r),f=Math.cos(r),l=this.elements;return"XYZ"===s?(l[0]=o*c*f+a*u*h,l[1]=a*u*f-o*c*h,l[2]=a*c*h+o*u*f,l[3]=a*c*f-o*u*h):"YXZ"===s?(l[0]=o*c*f+a*u*h,l[1]=a*u*f-o*c*h,l[2]=a*c*h-o*u*f,l[3]=a*c*f+o*u*h):"ZXY"===s?(l[0]=o*c*f-a*u*h,l[1]=a*u*f+o*c*h,l[2]=a*c*h+o*u*f,l[3]=a*c*f-o*u*h):"ZYX"===s?(l[0]=o*c*f-a*u*h,l[1]=a*u*f+o*c*h,l[2]=a*c*h-o*u*f,l[3]=a*c*f+o*u*h):"YZX"===s?(l[0]=o*c*f+a*u*h,l[1]=a*u*f+o*c*h,l[2]=a*c*h-o*u*f,l[3]=a*c*f-o*u*h):"XZY"===s&&(l[0]=o*c*f-a*u*h,l[1]=a*u*f-o*c*h,l[2]=a*c*h+o*u*f,l[3]=a*c*f+o*u*h),e||this.fire("change"),this},x:{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t,this.fire("change")}},y:{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t,this.fire("change")}},z:{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t,this.fire("change")}},w:{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t,this.fire("change")}}});h.prototype.mul=h.prototype.multiply,h.prototype.len=h.prototype.length,h.prototype.sqrLen=h.prototype.squaredLength,t.exports=h},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(16),o=n(12),a=n(65),u=n(3),c=u.TEXTURE_2D,h=u.RGBA,f=u.LINEAR,l=u.NEAREST,d=u.REPEAT,m=u.CLAMP_TO_EDGE,_=u.UNSIGNED_BYTE,p=new o,g=i.create({Statics:{cache:{get:function(){return p}},reset:function(t){p.each(function(e){e.destroy(t)})}},isTexture:!0,className:"Texture",image:null,target:c,level:0,internalFormat:h,format:h,type:_,width:0,height:0,border:0,magFilter:f,minFilter:f,wrapS:d,wrapT:d,name:"",premultiplyAlpha:!1,flipY:!1,compressed:!1,needUpdate:!0,autoUpdate:!1,constructor:function(t){this.id=r.generateUUID(this.className),Object.assign(this,t),p.add(this.id,this)},isImgPowerOfTwo:function(t){return r.isPowerOfTwo(t.width)&&r.isPowerOfTwo(t.height)},resizeImgToPowerOfTwo:function(t){if(this.isImgPowerOfTwo(t))return t;var e=r.nextPowerOfTwo(t.width),n=r.nextPowerOfTwo(t.height),i=this._canvasImage;return i||(i=document.createElement("canvas"),this._canvasImage=i),i.width=e,i.height=n,i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,n),a.warnOnce("resizeImgToPowerOfTwo"+this.id,"image is not power of two ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t.src),i},_glUploadTexture:function(t,e,n){var i=t.gl;this.compressed?i.compressedTexImage2D(e,this.level,this.internalFormat,this.width,this.height,this.border,n):n.width?i.texImage2D(e,this.level,this.internalFormat,this.format,this.type,n):i.texImage2D(e,this.level,this.internalFormat,this.width,this.height,this.border,this.format,this.type,n)},_uploadTexture:function(t){this._glUploadTexture(t,this.target,this.image)},updateTexture:function(t){var e=t.gl;if(this.needUpdate||this.autoUpdate){this._originImage&&this.image===this._canvasImage&&(this.image=this._originImage);var n=this.minFilter!==f&&this.minFilter!==l;(this.wrapS!==m||this.wrapT!==m||n)&&(this._originImage=this.image,this.image=this.resizeImgToPowerOfTwo(this.image)),t.activeTexture(e.TEXTURE0+s.MAX_TEXTURE_INDEX),t.bindTexture(this.target,this.tex),t.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!this.flipY),this._uploadTexture(t),n&&e.generateMipmap(this.target),this.needUpdate=!1}},getGLTexture:function(t){var e=t.gl;return this.tex?(this.updateTexture(t),this.tex):(this.tex=e.createTexture(),this.needUpdate=!0,this.updateTexture(t),e.texParameterf(this.target,e.TEXTURE_MAG_FILTER,this.magFilter),e.texParameterf(this.target,e.TEXTURE_MIN_FILTER,this.minFilter),e.texParameterf(this.target,e.TEXTURE_WRAP_S,this.wrapS),e.texParameterf(this.target,e.TEXTURE_WRAP_T,this.wrapT),this.tex)},destroy:function(t){this.tex&&(t.deleteTexture(this.tex),delete this.tex)}});t.exports=g},function(t,e,n){"use strict";var i={MAX_TEXTURE_INDEX:null,MAX_PRECISION:null,MAX_VERTEX_PRECISION:null,MAX_FRAGMENT_PRECISION:null,VERTEX_TEXTURE_FLOAT:null,FRAGMENT_TEXTURE_FLOAT:null,init:function(t,e){var n=this;this.gl=t,["MAX_RENDERBUFFER_SIZE","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_VARYING_VECTORS","MAX_VERTEX_ATTRIBS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_VECTORS","MAX_COMBINED_TEXTURE_IMAGE_UNITS"].forEach(function(t){n.get(t)}),this.MAX_TEXTURE_INDEX=this.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,this.MAX_VERTEX_PRECISION=this._getMaxSupportPrecision(t.VERTEX_SHADER),this.MAX_FRAGMENT_PRECISION=this._getMaxSupportPrecision(t.FRAGMENT_SHADER),this.MAX_PRECISION=this.getMaxPrecision(this.MAX_FRAGMENT_PRECISION,this.MAX_VERTEX_PRECISION),this.VERTEX_TEXTURE_FLOAT=!!e.texFloat&&this.MAX_VERTEX_TEXTURE_IMAGE_UNITS>0,this.FRAGMENT_TEXTURE_FLOAT=!!e.texFloat},get:function(t){var e=this.gl,n=this[t];return void 0===n&&(n=this[t]=e.getParameter(e[t])),n},_getMaxSupportPrecision:function(t){var e=this.gl,n="lowp";if(e.getShaderPrecisionFormat)for(var i=[{name:"highp",type:e.HIGH_FLOAT},{name:"mediump",type:e.MEDIUM_FLOAT}],r=0;r<i.length;r++){var s=i[r],o=e.getShaderPrecisionFormat(t,s.type)||{};if(o.precision>0){n=s.name;break}}else n="mediump";return n},getMaxPrecision:function(t,e){return t===e?t:"highp"===t||"mediump"===t&&"lowp"===e?e:t}};t.exports=i},function(t,e){t.exports="#define GLSLIFY 1\n#define HILO_FRONT_SIDE 1028\n#define HILO_BACK_SIDE 1029\n#define HILO_FRONT_AND_BACK_SIDE 1032"},function(t,e,n){"use strict";var i=n(0),r=n(31),s=n(6),o=i.create({Extends:r,isBasicMaterial:!0,className:"BasicMaterial",lightType:"PHONG",diffuse:null,ambient:null,specular:null,emission:null,skyboxMap:null,skyboxMatrix:null,reflectivity:0,refractRatio:0,refractivity:0,shininess:32,usedUniformVectors:11,transparency:1,constructor:function(t){this.diffuse=new s(.5,.5,.5),this.specular=new s(1,1,1),this.emission=new s(0,0,0),o.superclass.constructor.call(this,t),Object.assign(this.uniforms,{u_diffuse:"DIFFUSE",u_specular:"SPECULAR",u_ambient:"AMBIENT",u_emission:"EMISSION",u_normalMap:"NORMALMAP",u_shininess:"SHININESS",u_reflectivity:"REFLECTIVITY",u_refractRatio:"REFRACTRATIO",u_refractivity:"REFRACTIVITY",u_transparency:"TRANSPARENCY",u_skyboxMap:"SKYBOXMAP",u_skyboxMatrix:"SKYBOXMATRIX"})},getRenderOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.superclass.getRenderOption.call(this,t);var e=this.lightType;"PHONG"!==e&&"BLINN"!==e||(t.HAS_SPECULAR=1);var n=!1,i=this.diffuse;return i&&i.isTexture&&(i.isCubeTexture?t.DIFFUSE_CUBE_MAP=1:(t.DIFFUSE_MAP=1,n=!0)),this.transparency&&this.transparency.isTexture&&(t.TRANSPARENCY_MAP=1,n=!0),t.HAS_LIGHT&&(this.specular&&this.specular.isTexture&&(t.SPECULAR_MAP=1,n=!0),this.emission&&this.emission.isTexture&&(t.EMISSION_MAP=1,n=!0),this.ambient&&this.ambient.isTexture&&(t.AMBIENT_MAP=1,n=!0),this.skyboxMap&&(t.SKYBOX_MAP=1)),n&&(t.HAS_TEXCOORD0=1),t}});t.exports=o},function(t,e){var n=function(){var t,e,n=function(t){t=t||{};var e=t.hasOwnProperty("constructor")?t.constructor:function(){};return i.call(e,t),e},i=function(t){var e,n,i={};for(e in t)n=t[e],r.hasOwnProperty(e)?r[e].call(this,n):i[e]=n;o(this.prototype,i)},r={Extends:function(t){var e=this.prototype,n=s(t.prototype);o(this,t),o(n,e),n.constructor=this,this.prototype=n,this.superclass=t.prototype},Mixes:function(t){t instanceof Array||(t=[t]);for(var e,n=this.prototype;e=t.shift();)o(n,e.prototype||e)},Statics:function(t){o(this,t)}},s=function(){if(Object.__proto__)return function(t){return{__proto__:t}};var t=function(){};return function(e){return t.prototype=e,new t}}(),o=function(t){for(var n=1,i=arguments.length;n<i;n++){var r,s=arguments[n];for(var o in s){var a=s[o];!a||"object"!=typeof a||void 0===a.value&&"function"!=typeof a.get&&"function"!=typeof a.set?t[o]=a:(r=r||{},r[o]=a)}r&&e(t,r)}return t};try{t=Object.defineProperty,e=Object.defineProperties,t({},"$",{value:0})}catch(n){"__defineGetter__"in Object&&(t=function(t,e,n){return"value"in n&&(t[e]=n.value),"get"in n&&t.__defineGetter__(e,n.get),"set"in n&&t.__defineSetter__(e,n.set),t},e=function(e,n){for(var i in n)n.hasOwnProperty(i)&&t(e,i,n[i]);return e})}return{create:n,mix:o}}();t.exports=n},function(t,e,n){"use strict";var i=n(8).vec4,r=n(0),s=r.create({className:"Vector4",isVector4:!0,constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.elements=i.fromValues(t,e,n,r)},copy:function(t){return i.copy(this.elements,t.elements),this},clone:function(){var t=this.elements;return new s(t[0],t[1],t[2],t[3])},toArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[0+e]=n[0],t[1+e]=n[1],t[2+e]=n[2],t[3+e]=n[3],t},fromArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return n[0]=t[e+0],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],this},set:function(t,e,n,r){return i.set(this.elements,t,e,n,r),this},add:function(t,e){return e||(e=t,t=this),i.add(this.elements,t.elements,e.elements),this},subtract:function(t,e){return e||(e=t,t=this),i.subtract(this.elements,t.elements,e.elements),this},multiply:function(t,e){return e||(e=t,t=this),i.multiply(this.elements,t.elements,e.elements),this},divide:function(t,e){return e||(e=t,t=this),i.divide(this.elements,t.elements,e.elements),this},ceil:function(){return i.ceil(this.elements,this.elements),this},floor:function(){return i.floor(this.elements,this.elements),this},min:function(t,e){return e||(e=t,t=this),i.min(this.elements,t.elements,e.elements),this},max:function(t,e){return e||(e=t,t=this),i.max(this.elements,t.elements,e.elements),this},round:function(){return i.round(this.elements,this.elements),this},scale:function(t){return i.scale(this.elements,this.elements,t),this},scaleAndAdd:function(t,e,n){return n||(n=e,e=this),i.scaleAndAdd(this.elements,e.elements,n.elements,t),this},distance:function(t,e){return e||(e=t,t=this),i.distance(t.elements,e.elements)},squaredDistance:function(t,e){return e||(e=t,t=this),i.distance(t.elements,e.elements)},length:function(){return i.length(this.elements)},squaredLength:function(){return i.squaredLength(this.elements)},negate:function(){return i.negate(this.elements,this.elements),this},inverse:function(t){return t||(t=this),i.inverse(this.elements,t.elements),this},normalize:function(){return i.normalize(this.elements,this.elements),this},dot:function(t,e){return e||(e=t,t=this),i.dot(t.elements,e.elements)},lerp:function(t,e){return i.lerp(this.elements,this.elements,t.elements,e),this},random:function(t){return i.random(this.elements,t),this},transformMat4:function(t){return i.transformMat4(this.elements,this.elements,t.elements),this},transformQuat:function(t){return i.transformQuat(this.elements,t.elements),this},exactEquals:function(t,e){return e||(e=t,t=this),i.exactEquals(t.elements,e.elements)},equals:function(t,e){return e||(e=t,t=this),i.equals(t.elements,e.elements)},x:{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t}},y:{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t}},z:{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t}},w:{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t}}});s.prototype.sub=s.prototype.subtract,s.prototype.mul=s.prototype.multiply,s.prototype.div=s.prototype.divide,s.prototype.dist=s.prototype.distance,s.prototype.sqrDist=s.prototype.squaredDistance,s.prototype.len=s.prototype.length,s.prototype.sqrLen=s.prototype.squaredLength,t.exports=s},function(t,e,n){"use strict";var i=n(8).mat3,r=n(0),s=r.create({className:"Matrix3",isMatrix3:!0,constructor:function(){this.elements=i.create()},copy:function(t){return i.copy(this.elements,t.elements),this},clone:function(){var t=new s;return i.copy(t.elements,this.elements),t},toArray:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,i=0;i<9;i++)t[e+i]=n[i];return t},fromArray:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements,i=0;i<9;i++)n[i]=t[e+i];return this},set:function(t,e,n,r,s,o,a,u,c){return i.set(this.elements,t,e,n,r,s,o,a,u,c),this},identity:function(){return i.identity(this.elements),this},transpose:function(){return i.transpose(this.elements,this.elements),this},invert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return i.invert(this.elements,t.elements),this},adjoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return i.adjoint(this.elements,t),this},determinant:function(){return i.determinant(this.elements)},multiply:function(t,e){return e||(e=t,t=this),i.multiply(this.elements,t.elements,e.elements),this},premultiply:function(t){return this.multiply(t,this),this},translate:function(t){return i.translate(this.elements,this.elements,t.elements),this},rotate:function(t){return i.rotate(this.elements,this.elements,t),this},scale:function(t){return i.scale(this.elements,this.elements,t.elements),this},fromTranslation:function(t){return i.fromTranslation(this.elements,t),this},fromRotation:function(t){return i.fromRotation(this.elements,t),this},fromScaling:function(t){return i.fromScaling(this.elements,t),this},fromQuat:function(t){return i.fromQuat(this.elements,t.elements),this},normalFromMat4:function(t){return i.normalFromMat4(this.elements,t.elements),this},fromMat4:function(t){return i.fromMat4(this.elements,t.elements),this},frob:function(){return i.frob(this.elements)},add:function(t,e){return e||(e=t,t=this),i.add(this.elements,t.elements,e.elements),this},subtract:function(t,e){return e||(e=t,t=this),i.subtract(this.elements,t.elements,e.elements),this},exactEquals:function(t,e){return e||(e=t,t=this),i.exactEquals(t.elements,e.elements)},equals:function(t,e){return e||(e=t,t=this),i.equals(t.elements,e.elements)}});s.prototype.sub=s.prototype.subtract,s.prototype.mul=s.prototype.multiply,t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(11),s=n(37),o=n(4),a=new s,u=new o,c=i.create({Extends:r,isMesh:!0,className:"Mesh",geometry:null,material:null,useInstanced:!0,frustumTest:!1,constructor:function(t){c.superclass.constructor.call(this,t)},clone:function(t){var e=r.prototype.clone.call(this,t);return Object.assign(e,{geometry:this.geometry,material:this.material}),e},raycast:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.geometry,i=this.material,r=this.worldMatrix;if(n&&i){u.invert(r),a.copy(t),a.transformMat4(u);var s=n.raycast(a,i.side,e);if(s)return s.forEach(function(t){t.transformMat4(r)}),s}return null},getRenderOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.geometry.getRenderOption(t),t}});t.exports=c},function(t,e){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}t.exports=n},function(t,e){t.exports="#ifdef GL_ES\nprecision HILO_MAX_FRAGMENT_PRECISION float;\n#define GLSLIFY 1\n#endif"},function(t,e,n){"use strict";var i=n(0),r=n(11),s=n(6),o=i.create({Extends:r,isLight:!0,className:"Light",constructor:function(t){this.color=new s(1,1,1),o.superclass.constructor.call(this,t)}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(4),o=new s,a=i.create({className:"Euler",isEuler:!0,order:"ZYX",constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.elements=[t,e,n]},set:function(t,e,n){return this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this},fromArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.elements[0]=t[e],this.elements[1]=t[e+1],this.elements[2]=t[e+2],this},toArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.elements[0],t[e+1]=this.elements[1],t[e+2]=this.elements[2],t},fromMat4:function(t,e){var n=t.elements,i=n[0],s=n[1],o=n[2],a=n[4],u=n[5],c=n[6],h=n[8],f=n[9],l=n[10];e=e||this.order,this.order=e;var d=r.clamp;return"XYZ"===e?(this.y=Math.asin(d(h,-1,1)),Math.abs(h)<.99999?(this.x=Math.atan2(-f,l),this.z=Math.atan2(-a,i)):(this.x=Math.atan2(c,u),this.z=0)):"YXZ"===e?(this.x=Math.asin(-d(f,-1,1)),Math.abs(f)<.99999?(this.y=Math.atan2(h,l),this.z=Math.atan2(s,u)):(this.y=Math.atan2(-o,i),this.z=0)):"ZXY"===e?(this.x=Math.asin(d(c,-1,1)),Math.abs(c)<.99999?(this.y=Math.atan2(-o,l),this.z=Math.atan2(-a,u)):(this.y=0,this.z=Math.atan2(s,i))):"ZYX"===e?(this.y=Math.asin(-d(o,-1,1)),Math.abs(o)<.99999?(this.x=Math.atan2(c,l),this.z=Math.atan2(s,i)):(this.x=0,this.z=Math.atan2(-a,u))):"YZX"===e?(this.z=Math.asin(d(s,-1,1)),Math.abs(s)<.99999?(this.x=Math.atan2(-f,u),this.y=Math.atan2(-o,i)):(this.x=0,this.y=Math.atan2(h,l))):"XZY"===e?(this.z=Math.asin(-d(a,-1,1)),Math.abs(a)<.99999?(this.x=Math.atan2(c,u),this.y=Math.atan2(h,i)):(this.x=Math.atan2(-f,l),this.y=0)):console.warn("Euler fromMat4() unsupported order: "+e),this},fromQuat:function(t,e){return o.fromQuat(t),this.fromMat4(o,e)},x:{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t}},y:{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t}},z:{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t}}});t.exports=a},function(t,e,n){"use strict";var i=(n(38),n(2)),r=n(21),s=n(4),o=(new i,new r),a=new s,u=new Float32Array([.5,.5,.5,1]),c=void 0,h=void 0,f=void 0,l=void 0,d=void 0,m={state:null,camera:null,lightManager:null,fog:null,gl:null,init:function(t,e,n,i){l=this.state=t,c=this.camera=e,f=this.lightManager=n,d=this.fog=i,h=this.gl=l.gl},setCamera:function(t){c=this.camera=t},handlerColorOrTexture:function(t,e){if(t&&t.isTexture){var n=t.getGLTexture(l);return l.activeTexture(h.TEXTURE0+e),l.bindTexture(t.target,n),e}return t&&t.isColor?t.toArray(u):u[0]=u[1]=u[2]=.5,u},POSITION:{get:function(t,e,n){return t.geometry.vertices}},NORMAL:{get:function(t,e,n){return t.geometry.normals}},TANGENT:{get:function(t,e,n){if(t.material.normalMap&&t.material.normalMap.isTexture)return t.geometry.tangents}},TEXCOORD_0:{get:function(t,e,n){if(t.geometry.uvs)return t.geometry.uvs}},SKININDICES:{get:function(t,e,n){return t.geometry.skinIndices}},SKINWEIGHTS:{get:function(t,e,n){return t.geometry.skinWeights}},LOCAL:{get:function(t,e,n){return t.matrix.elements},isDependMesh:!0},MODEL:{get:function(t,e,n){return t.worldMatrix.elements},isDependMesh:!0},VIEW:{get:function(t,e,n){return c.viewMatrix.elements}},PROJECTION:{get:function(t,e,n){return c.projectionMatrix.elements}},MODELVIEW:{get:function(t,e,n){return c.getModelViewMatrix(t,a).elements},isDependMesh:!0},MODELVIEWPROJECTION:{get:function(t,e,n){return c.getModelProjectionMatrix(t,a).elements},isDependMesh:!0},MODELINVERSE:{get:function(t,e,n){return a.invert(t.worldMatrix).elements},isDependMesh:!0},VIEWINVERSE:{get:function(t,e,n){return c.worldMatrix.elements}},PROJECTIONINVERSE:{get:function(t,e,n){return a.invert(c.projectionMatrix).elements}},MODELVIEWINVERSE:{get:function(t,e,n){return a.invert(c.getModelViewMatrix(t,a)).elements},isDependMesh:!0},MODELVIEWPROJECTIONINVERSE:{get:function(t,e,n){return a.invert(c.getModelProjectionMatrix(t,a)).elements},isDependMesh:!0},MODELINVERSETRANSPOSE:{get:function(t,e,n){return o.normalFromMat4(t.worldMatrix).elements},isDependMesh:!0},MODELVIEWINVERSETRANSPOSE:{get:function(t,e,n){return o.normalFromMat4(c.getModelViewMatrix(t,a)).elements},isDependMesh:!0},VIEWPORT:{get:function(t,e,n){console.warn("no this semantic:",name)}},JOINTMATRIX:{get:function(t,e,n){if(t.isSkinedMesh)return t.getJointMat();console.warn("Current mesh is not SkinedMesh!",t.id)},isDependMesh:!0,notSupportInstanced:!0},JOINTMATRIXTEXTURE:{get:function(t,e,n){if(t.isSkinedMesh)return t.updateJointMatTexture(),m.handlerColorOrTexture(t.jointMatTexture,n.textureIndex);console.warn("Current mesh is not SkinedMesh!",t.id)},isDependMesh:!0,notSupportInstanced:!0},JOINTMATRIXTEXTURESIZE:{get:function(t,e,n){if(t.isSkinedMesh)return t.initJointMatTexture(),[t.jointMatTexture.width,t.jointMatTexture.height];console.warn("Current mesh is not SkinedMesh!",t.id)},isDependMesh:!0,notSupportInstanced:!0},DIFFUSE:{get:function(t,e,n){return m.handlerColorOrTexture(e.diffuse,n.textureIndex)}},SPECULAR:{get:function(t,e,n){return m.handlerColorOrTexture(e.specular,n.textureIndex)}},EMISSION:{get:function(t,e,n){return m.handlerColorOrTexture(e.emission,n.textureIndex)}},AMBIENT:{get:function(t,e,n){return m.handlerColorOrTexture(e.ambient,n.textureIndex)}},NORMALMAP:{get:function(t,e,n){if(e.normalMap&&e.normalMap.isTexture)return m.handlerColorOrTexture(e.normalMap,n.textureIndex)}},SHININESS:{get:function(t,e,n){return e.shininess}},TRANSPARENCY:{get:function(t,e,n){return"transparency"in e?e.transparency.isTexture?m.handlerColorOrTexture(e.transparency,n.textureIndex):e.transparency:1}},SKYBOXMAP:{get:function(t,e,n){if(e.skyboxMap&&e.skyboxMap.isTexture)return m.handlerColorOrTexture(e.skyboxMap,n.textureIndex)}},SKYBOXMATRIX:{get:function(t,e,n){return e.skyboxMap&&e.skyboxMatrix?e.skyboxMatrix.elements:(a.identity(),a.elements)}},REFLECTIVITY:{get:function(t,e,n){return e.reflectivity}},REFRACTRATIO:{get:function(t,e,n){return e.refractRatio}},REFRACTIVITY:{get:function(t,e,n){return e.refractivity}},AMBIENTLIGHTSCOLOR:{get:function(t,e,n){return f.ambientInfo}},DIRECTIONALLIGHTSCOLOR:{get:function(t,e,n){return f.directionalInfo.colors}},DIRECTIONALLIGHTSINFO:{get:function(t,e,n){return f.directionalInfo.infos}},DIRECTIONALLIGHTSSHADOWMAP:{get:function(t,e,n){return f.directionalInfo.shadowMap.map(function(t,e){return l.activeTexture(h.TEXTURE0+n.textureIndex+e),l.bindTexture(h.TEXTURE_2D,t),n.textureIndex+e})}},DIRECTIONALLIGHTSSHADOWMAPSIZE:{get:function(t,e,n){return f.directionalInfo.shadowMapSize}},DIRECTIONALLIGHTSSHADOWBIAS:{get:function(t,e,n){return f.directionalInfo.shadowBias}},DIRECTIONALLIGHTSPACEMATRIX:{get:function(t,e,n){return f.directionalInfo.lightSpaceMatrix}},POINTLIGHTSPOS:{get:function(t,e,n){return f.pointInfo.poses}},POINTLIGHTSCOLOR:{get:function(t,e,n){return f.pointInfo.colors}},POINTLIGHTSINFO:{get:function(t,e,n){return f.pointInfo.infos}},SPOTLIGHTSPOS:{get:function(t,e,n){return f.spotInfo.poses}},SPOTLIGHTSDIR:{get:function(t,e,n){return f.spotInfo.dirs}},SPOTLIGHTSCOLOR:{get:function(t,e,n){return f.spotInfo.colors}},SPOTLIGHTSCUTOFFS:{get:function(t,e,n){return f.spotInfo.cutoffs}},SPOTLIGHTSINFO:{get:function(t,e,n){return f.spotInfo.infos}},SPOTLIGHTSSHADOWMAP:{get:function(t,e,n){return f.spotInfo.shadowMap.map(function(t,e){return l.activeTexture(h.TEXTURE0+n.textureIndex+e),l.bindTexture(h.TEXTURE_2D,t),n.textureIndex+e})}},SPOTLIGHTSSHADOWMAPSIZE:{get:function(t,e,n){return f.spotInfo.shadowMapSize}},SPOTLIGHTSSHADOWBIAS:{get:function(t,e,n){return f.spotInfo.shadowBias}},SPOTLIGHTSPACEMATRIX:{get:function(t,e,n){return f.spotInfo.lightSpaceMatrix}},FOGCOLOR:{get:function(t,e,n){if(d)return d.color.elements}},FOGINFO:{get:function(t,e,n){if(d)return d.getInfo()}},POSITIONDECODEMAT:{get:function(t,e,n){return t.geometry.positionDecodeMat},isDependMesh:!0},NORMALDECODEMAT:{get:function(t,e,n){return t.geometry.normalDecodeMat},isDependMesh:!0},UVDECODEMAT:{get:function(t,e,n){return t.geometry.uvDecodeMat},isDependMesh:!0},BASECOLOR:{get:function(t,e,n){return e.baseColor.elements}},BASECOLORMAP:{get:function(t,e,n){return m.handlerColorOrTexture(e.baseColorMap,n.textureIndex)}},METALLIC:{get:function(t,e,n){return e.metallic}},METALLICMAP:{get:function(t,e,n){return m.handlerColorOrTexture(e.metallicMap,n.textureIndex)}},ROUGHNESS:{get:function(t,e,n){return e.roughness}},ROUGHNESSMAP:{get:function(t,e,n){return m.handlerColorOrTexture(e.roughnessMap,n.textureIndex)}},METALLICROUGHNESS:{get:function(t,e,n){if(e.metallicRoughness&&e.metallicRoughness.isTexture)return m.handlerColorOrTexture(e.metallicRoughness,n.textureIndex)}},AO:{get:function(t,e,n){var i=e.ao;return i.isTexture?m.handlerColorOrTexture(i,n.textureIndex):i}},DIFFUSEENVMAP:{get:function(t,e,n){var i=e.diffuseEnvMap;if(i&&i.isCubeTexture)return m.handlerColorOrTexture(i,n.textureIndex)}},BRDFLUT:{get:function(t,e,n){var i=e.brdfLUT;if(i&&i.isTexture)return m.handlerColorOrTexture(i,n.textureIndex)}},SPECULARENVMAP:{get:function(t,e,n){var i=e.specularEnvMap;if(i&&i.isCubeTexture)return m.handlerColorOrTexture(i,n.textureIndex)}},GLOSSINESS:{get:function(t,e,n){return e.glossiness}},SPECULARGLOSSINESSMAP:{get:function(t,e,n){var i=e.specularGlossinessMap;if(i&&i.isTexture)return m.handlerColorOrTexture(i,n.textureIndex)}},ALPHACUTOFF:{get:function(t,e,n){return e.alphaCutoff}},MORPHWEIGHTS:{isDependMesh:!0,notSupportInstanced:!0,get:function(t,e,n){var i=t.geometry;if(i.isMorphGeometry&&i.weights)return i.weights}}};[["POSITION","vertices"],["NORMAL","normals"],["TANGENT","tangents"]].forEach(function(t){for(var e=0;e<8;e++)m["MORPH"+t[0]+e]={get:function(t,e){return function(n,i,r){var s=n.geometry;if(s.isMorphGeometry&&s.targets&&s.targets[t]){var o=s._originalMorphIndices?s._originalMorphIndices[e]:e,a=s.targets[t][o],u="_target_"+t+"_"+e;return s[u]!==o&&(a.isDirty=!0,s[u]=o),a}}}(t[1],e)}}),t.exports=m},function(t,e,n){"use strict";var i={instanced:void 0,vao:void 0,texFloat:void 0,loseContext:void 0,_usedExtensions:{},init:function(t){this.reset(t)},reset:function(t){this.gl=t;var e=this._usedExtensions;for(var n in e){var i=e[n];this[i]=void 0,this.get(n,i)}},use:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.gl?this.get(t,e):this._usedExtensions[t]=e},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.gl,i=this[e];return void 0===i&&(i=n.getExtension(t)||n.getExtension("WEBKIT_"+t)||n.getExtension("MOZ_"+t)||null,this[e]=i),i}};i.use("ANGLE_instanced_arrays","instanced"),i.use("OES_vertex_array_object","vao"),i.use("OES_texture_float","texFloat"),i.use("WEBGL_lose_context","loseContext"),i.use("OES_element_index_uint","uintIndices"),t.exports=i},function(t,e,n){"use strict";var i=n(8).vec2,r=n(0),s=r.create({className:"Vector2",isVector2:!0,constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.elements=i.fromValues(t,e)},copy:function(t){return i.copy(this.elements,t.elements),this},clone:function(){var t=this.elements;return new s(t[0],t[1])},toArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[0+e]=n[0],t[1+e]=n[1],t},fromArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return n[0]=t[e+0],n[1]=t[e+1],this},set:function(t,e){return i.set(this.elements,t,e),this},add:function(t,e){return e||(e=t,t=this),i.add(this.elements,t.elements,e.elements),this},subtract:function(t,e){return e||(e=t,t=this),i.subtract(this.elements,t.elements,e.elements),this},multiply:function(t,e){return e||(e=t,t=this),i.multiply(this.elements,t.elements,e.elements),this},divide:function(t,e){return e||(e=t,t=this),i.divide(this.elements,t.elements,e.elements),this},ceil:function(){return i.ceil(this.elements,this.elements),this},floor:function(){return i.floor(this.elements,this.elements),this},min:function(t,e){return e||(e=t,t=this),i.min(this.elements,t.elements,e.elements),this},max:function(t,e){return e||(e=t,t=this),i.max(this.elements,t.elements,e.elements),this},round:function(){return i.round(this.elements,this.elements),this},scale:function(t){return i.scale(this.elements,this.elements,t),this},scaleAndAdd:function(t,e,n){return n||(n=e,e=this),i.scaleAndAdd(this.elements,e.elements,n.elements,t),this},distance:function(t,e){return e||(e=t,t=this),i.distance(t.elements,e.elements)},squaredDistance:function(t,e){return e||(e=t,t=this),i.distance(t.elements,e.elements)},length:function(){return i.length(this.elements)},squaredLength:function(){return i.squaredLength(this.elements)},negate:function(){return i.negate(this.elements,this.elements),this},inverse:function(t){return t||(t=this),i.inverse(this.elements,t.elements),this},normalize:function(){return i.normalize(this.elements,this.elements),this},dot:function(t,e){return e||(e=t,t=this),i.dot(t.elements,e.elements)},cross:function(t,e){return e||(e=t,t=this),i.cross(this.elements,t.elements,e.elements),this},lerp:function(t,e){return i.lerp(this.elements,this.elements,t.elements,e),this},random:function(t){return i.random(this.elements,t),this},transformMat3:function(t){return i.transformMat3(this.elements,this.elements,t.elements),this},transformMat4:function(t){return i.transformMat4(this.elements,this.elements,t.elements),this},exactEquals:function(t,e){return e||(e=t,t=this),i.exactEquals(t.elements,e.elements)},equals:function(t,e){return e||(e=t,t=this),i.equals(t.elements,e.elements)},x:{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t}},y:{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t}}});s.prototype.sub=s.prototype.subtract,s.prototype.mul=s.prototype.multiply,s.prototype.div=s.prototype.divide,s.prototype.dist=s.prototype.distance,s.prototype.sqrDist=s.prototype.squaredDistance,s.prototype.len=s.prototype.length,s.prototype.sqrLen=s.prototype.squaredLength,t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(39),s=n(90),o=n(91),a=n(12),u=n(46),c=n(47),h=n(5),f=n(1),l=n(9),d=n(16),m=n(3),_=m.TEXTURE_2D,p=m.RGBA,g=m.UNSIGNED_BYTE,v=m.COLOR_ATTACHMENT0,T=m.DEPTH_STENCIL,E=m.DEPTH_TEST,M=m.CULL_FACE,A=m.BLEND,I=m.TRIANGLE_STRIP,S=new a,O=i.create({Statics:{cache:{get:function(){return S}},reset:function(t){S.each(function(t){t.reset()})}},className:"Framebuffer",isFramebuffer:!0,bufferInternalFormat:T,target:_,internalFormat:p,format:p,type:g,attachment:v,needRenderbuffer:!0,useVao:!0,renderer:null,texture:null,renderbuffer:null,_isInit:!1,constructor:function(t,e){this.id=f.generateUUID(this.className),this.renderer=t,Object.assign(this,e),S.add(this.id,this)},init:function(){if(!this._isInit&&this.renderer.isInit){this._isInit=!0;var t=this.renderer;this.gl=t.gl,this.state=t.state,this.reset()}},reset:function(){var t=this.gl;this.framebuffer=t.createFramebuffer(),this.bind(),this.needRenderbuffer&&(this.renderbuffer=this.createRenderbuffer()),this.texture=this.createTexture(),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&console.warn("Framebuffer is not complete"),this.unbind()},bind:function(){this.init(),this._isInit&&this.state.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer)},unbind:function(){if(this.init(),this._isInit){var t=this.state;t.bindFramebuffer(this.gl.FRAMEBUFFER,t.preFramebuffer)}},render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments[4];if(this._isInit){var h=this.gl,f=this.state;f.disable(E),f.disable(M),f.disable(A),a&&(h.clearColor(a.r,a.g,a.b,a.a),h.clear(h.COLOR_BUFFER_BIT));var d=r.getCustomShader(s,o,"","FramebufferTextureShader"),m=u.getProgram(d,f);m.useProgram();var _=t+"_"+e+"_"+n+"_"+i+"_"+m.id,p=c.getVao(h,_,{useVao:this.useVao,useInstanced:!1,mode:I});if(p.isDirty){p.isDirty=!1,t=2*t-1,e=1-2*e,n*=2,i*=2;var g=[t,e,t+n,e,t,e-i,t+n,e-i];p.addAttribute(new l(new Float32Array(g)),m.attributes.a_position),p.addAttribute(new l(new Float32Array([0,1,1,1,0,0,1,0])),m.attributes.a_texcoord0)}f.activeTexture(h.TEXTURE0),f.bindTexture(h.TEXTURE_2D,this.texture),p.draw()}},createRenderbuffer:function(){var t=this.gl,e=this.width,n=this.height,i=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e,n),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i),i},createTexture:function(){var t=this.state,e=t.gl,n=e.createTexture();return t.activeTexture(e.TEXTURE0+d.MAX_TEXTURE_INDEX),t.bindTexture(this.target,n),e.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,null),e.texParameteri(this.target,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(this.target,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(this.target,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(this.target,e.TEXTURE_MAG_FILTER,e.NEAREST),e.framebufferTexture2D(e.FRAMEBUFFER,this.attachment,this.target,n,0),n},readPixels:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=h.getTypedArrayClass(this.type),s=new r(n*i*4);if(this._isInit){var o=this.gl;e=this.height-e-i,this.bind(),o.readPixels(t,e,n,i,this.format,this.type,s),this.unbind()}return s}});t.exports=O},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(27),o=n(3),a=o.LESS,u=o.BACK,c=o.FRONT,h=o.FRONT_AND_BACK,f=o.ZERO,l=o.ONE,d=o.FUNC_ADD,m=o.ONE_MINUS_SRC_ALPHA,_={isBlankInfo:!0,get:function(){}},p=i.create({isMaterial:!0,className:"Material",lightType:"NONE",wireframe:!1,depthTest:!0,depthMask:!0,depthRange:[0,1],depthFunc:a,_cullFace:!0,cullFace:{get:function(){return this._cullFace},set:function(t){this._cullFace=t,t?this.cullFaceType=this._cullFaceType:this._side=h}},_cullFaceType:u,cullFaceType:{get:function(){return this._cullFaceType},set:function(t){this._cullFaceType=t,this._cullFace&&(t===u?this._side=c:t===c&&(this._side=u))}},_side:c,side:{get:function(){return this._side},set:function(t){this._side!==t&&(this._side=t,t===h?this._cullFace=!1:(this._cullFace=!0,t===c?this._cullFaceType=u:t===u&&(this._cullFaceType=c)))}},blend:!1,blendEquation:d,blendEquationAlpha:d,blendSrc:l,blendDst:f,blendSrcAlpha:l,blendDstAlpha:f,isDirty:!1,_transparent:!1,transparent:{get:function(){return this._transparent},set:function(t){this._transparent!==t&&(this._transparent=t,t?(this.blend=!0,this.blendSrc=l,this.blendDst=m,this.blendSrcAlpha=l,this.blendDstAlpha=m,this.depthMask=!1):(this.blend=!1,this.depthMask=!0))}},alphaCutoff:0,constructor:function(t){var e=this;this.id=r.generateUUID(this.className),this.uniforms={u_normalMatrix:"MODELVIEWINVERSETRANSPOSE",u_modelViewMatrix:"MODELVIEW",u_modelViewProjectionMatrix:"MODELVIEWPROJECTION",u_ambientLightsColor:"AMBIENTLIGHTSCOLOR",u_directionalLightsColor:"DIRECTIONALLIGHTSCOLOR",u_directionalLightsInfo:"DIRECTIONALLIGHTSINFO",u_directionalLightsShadowMap:"DIRECTIONALLIGHTSSHADOWMAP",u_directionalLightsShadowMapSize:"DIRECTIONALLIGHTSSHADOWMAPSIZE",u_directionalLightsShadowBias:"DIRECTIONALLIGHTSSHADOWBIAS",u_directionalLightSpaceMatrix:"DIRECTIONALLIGHTSPACEMATRIX",u_pointLightsPos:"POINTLIGHTSPOS",u_pointLightsColor:"POINTLIGHTSCOLOR",u_pointLightsInfo:"POINTLIGHTSINFO",u_spotLightsPos:"SPOTLIGHTSPOS",u_spotLightsDir:"SPOTLIGHTSDIR",u_spotLightsColor:"SPOTLIGHTSCOLOR",u_spotLightsCutoffs:"SPOTLIGHTSCUTOFFS",u_spotLightsInfo:"SPOTLIGHTSINFO",u_spotLightsShadowMap:"SPOTLIGHTSSHADOWMAP",u_spotLightsShadowMapSize:"SPOTLIGHTSSHADOWMAPSIZE",u_spotLightsShadowBias:"SPOTLIGHTSSHADOWBIAS",u_spotLightSpaceMatrix:"SPOTLIGHTSPACEMATRIX",u_jointMat:"JOINTMATRIX",u_jointMatTexture:"JOINTMATRIXTEXTURE",u_jointMatTextureSize:"JOINTMATRIXTEXTURESIZE",u_fogColor:"FOGCOLOR",u_fogInfo:"FOGINFO",u_alphaCutoff:"ALPHACUTOFF",u_positionDecodeMat:"POSITIONDECODEMAT",u_normalDecodeMat:"NORMALDECODEMAT",u_uvDecodeMat:"UVDECODEMAT",u_morphWeights:"MORPHWEIGHTS"},this.attributes={a_position:"POSITION",a_normal:"NORMAL",a_tangent:"TANGENT",a_texcoord0:"TEXCOORD_0",a_skinIndices:"SKININDICES",a_skinWeights:"SKINWEIGHTS"},["POSITION","NORMAL","TANGENT"].forEach(function(t){for(var n=t.slice(0,1)+t.slice(1).toLowerCase(),i=0;i<8;i++)e.attributes["a_morph"+n+i]="MORPH"+t+i}),Object.assign(this,t)},getRenderOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t["LIGHT_TYPE_"+this.lightType]=1,t.SIDE=this.side,t.HAS_LIGHT&&(t.HAS_NORMAL=1,this.normalMap&&(t.HAS_NORMAL_MAP=1,t.HAS_TEXCOORD0=!0)),this.alphaCutoff>0&&(t.ALPHA_CUTOFF=1),t},getInstancedUniforms:function(){var t=this._instancedUniforms;if(!this._instancedUniforms){var e=this.uniforms;t=this._instancedUniforms=[];for(var n in e){var i=this.getUniformInfo(n);i.isDependMesh&&!i.notSupportInstanced&&t.push({name:n,info:i})}}return t},getUniformData:function(t,e,n){return this.getUniformInfo(t).get(e,this,n)},getAttributeData:function(t,e){return this.getAttributeInfo(t).get(e)},getUniformInfo:function(t){return this.getInfo("uniforms",t)},getAttributeInfo:function(t){return this.getInfo("attributes",t)},getInfo:function(t,e){var n=this[t],i=n[e];return"string"==typeof i&&(i=s[i]),i&&i.get||(console.warn("Material.getInfo: no this semantic:"+e),i=_),i},clone:function(){var t=new this.constructor;for(var e in this)"id"!==e&&(t[e]=this[e]);return t}});t.exports=p},function(t,e){function n(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}t.exports=n},function(t,e){function n(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}t.exports=n},function(t,e){function n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}t.exports=n},function(t,e){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}t.exports=n},function(t,e,n){"use strict";var i=n(0),r=n(2),s=i.create({constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.normal=t,this.distance=e},set:function(t,e,n,i){return this.normal.set(t,e,n),this.distance=i,this},normalize:function(){var t=1/this.normal.length();return this.normal.scale(t),this.distance*=t,this},distanceToPoint:function(t){return this.normal.dot(t)+this.distance}});t.exports=s},function(t,e,n){"use strict";var i=n(56),r=n(0),s=n(2),o=r.create({className:"Ray",isRay:!0,origin:{get:function(){return this._origin},set:function(t){this._origin=t,this._ray.origin=t.elements}},direction:{get:function(){return this._direction},set:function(t){this._direction=t,this._ray.direction=t.elements}},constructor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._ray=new i,this.origin=t.origin||new s(0,0,0),this.direction=t.direction||new s(0,0,-1)},set:function(t,e){return this.origin=t,this.direction=e,this},copy:function(t){this.origin.copy(t.origin),this.direction.copy(t.direction)},clone:function(){return new o(this.origin.clone(),this.direction.clone())},fromCamera:function(t,e,n,i,r){t.isPerspectiveCamera?(t.worldMatrix.getTranslation(this.origin),this.direction.set(e,n,0),this.direction.copy(t.unprojectVector(this.direction,i,r)),this.direction.sub(this.origin).normalize()):t.OrthographicCamera&&(this.origin.set(e,n,(t.near+t.far)/(t.near-t.far)),this.origin.copy(t.unprojectVector(this.origin,i,r)),this.direction.set(0,0,-1).transformDirection(t.worldMatrix).normalize())},transformMat4:function(t){this.origin.transformMat4(t),this.direction.transformDirection(t).normalize()},sortPoints:function(t,e){var n=this;e?t.sort(function(t,i){return n.squaredDistance(t[e])-n.squaredDistance(i[e])}):t.sort(function(t,e){return n.squaredDistance(t)-n.squaredDistance(e)})},squaredDistance:function(t){return this.origin.squaredDistance(t)},distance:function(t){return this.origin.distance(t)},intersectsSphere:function(t,e){var n=this._ray.intersectsSphere(t,e);return this._getRes(n)},intersectsPlane:function(t,e){var n=this._ray.intersectsPlane(t,e);return this._getRes(n)},intersectsTriangle:function(t){var e=this._ray.intersectsTriangle(t);return this._getRes(e)},intersectsBox:function(t){var e=this._ray.intersectsBox(t);return this._getRes(e)},intersectsTriangleCell:function(t,e){var n=this._ray.intersectsTriangleCell(t,e);return this._getRes(n)},_getRes:function(t){return t?new s(t[0],t[1],t[2]):null}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(15),o=n(5),a=n(3),u=a.TEXTURE_2D,c=a.RGBA,h=a.NEAREST,f=a.CLAMP_TO_EDGE,l=a.FLOAT,d=i.create({Extends:s,isDataTexture:!0,className:"DataTexture",target:u,internalFormat:c,format:c,type:l,magFilter:h,minFilter:h,wrapS:f,wrapT:f,dataLength:0,resetSize:function(t){if(t!==this.dataLength){this.dataLength=t;var e=r.nextPowerOfTwo(t/4),n=Math.max(Math.log2(e),4),i=Math.floor(n/2),s=n-i;this.width=Math.pow(2,i),this.height=Math.pow(2,s),this.DataClass=o.getTypedArrayClass(this.type)}},data:{get:function(){return this.image},set:function(t){if(this.image!==t){this.resetSize(t.length);var e=this.width*this.height*4;e===t.length&&t instanceof this.DataClass?this.image=t:(this.image&&this.image.length===e||(this.image=new this.DataClass(e)),this.image.set(t,0)),this.needUpdate=!0}}},constructor:function(t){d.superclass.constructor.call(this,t)}});t.exports=d},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(12),o=n(16),a=n(118),u=n(119),c=n(122),h=n(123),f=new s,l=i.create({isShader:!0,className:"Shader",vs:"",fs:"",Statics:{shaders:{"diffuse.frag":n(70),"diffuse_main.frag":n(78),"fog.frag":n(42),"fog_main.frag":n(44),"joint.vert":n(81),"joint_main.vert":n(86),"light.frag":n(40),"lightFog.vert":n(84),"lightFog_main.vert":n(89),"phong.frag":n(75),"phong_main.frag":n(79),"normal.vert":n(83),"normal_main.vert":n(88),"precision.vert":n(45),"precision.frag":n(24),"transparency.frag":n(41),"transparency_main.frag":n(43),"unQuantize.vert":n(80),"unQuantize_main.vert":n(85),"uv.vert":n(82),"uv_main.vert":n(87),"getDiffuse.glsl":n(71),"getPointAttenuation.glsl":n(73),"getShadow.glsl":n(74),"getSpecular.glsl":n(72),"screen.vert":n(90),"screen.frag":n(91)},init:function(t){this.renderer=t,this.commonHeader=this._getCommonHeader(this.renderer)},cache:{get:function(){return f}},reset:function(t){f.removeAll()},getHeaderKey:function(t,e,n,i){var r="header_"+e.id+"_"+n.lightInfo.uid;return t.isSkinedMesh&&(r+="_joint"+t.jointNames.length),i&&(r+="_fog"),t.geometry.isMorphGeometry&&(r+="_"+t.geometry.id),r},getHeader:function(t,e,n,i){var r=this.getHeaderKey(t,e,n,i),s=f.get(r);if(!s||e.isDirty){var o={},a=e.lightType;a&&"NONE"!==a&&n.getRenderOption(o),e.getRenderOption(o),t.getRenderOption(o),i&&(o.HAS_FOG=1),o.HAS_NORMAL&&o.HAS_NORMAL_MAP&&(o.HAS_TANGENT=1),s=Object.keys(o).map(function(t){return"#define HILO_"+t+" "+o[t]}).join("\n")+"\n",f.add(r,s)}return s},_getCommonHeader:function(t){var e=o.getMaxPrecision(o.MAX_VERTEX_PRECISION,t.vertexPrecision),n=o.getMaxPrecision(o.MAX_FRAGMENT_PRECISION,t.fragmentPrecision);return"\n#define HILO_MAX_PRECISION "+o.getMaxPrecision(e,n)+"\n#define HILO_MAX_VERTEX_PRECISION "+e+"\n#define HILO_MAX_FRAGMENT_PRECISION "+n+"\n"},getShader:function(t,e,n,i,r){var s=this.getHeader(t,e,i,r);return e.isBasicMaterial||e.isPBRMaterial?this.getBasicShader(e,n,s):e.isShaderMaterial?this.getCustomShader(e.vs,e.fs,s,e.id):null},getBasicShader:function(t,e,n){var i=[];e&&(i=t.getInstancedUniforms().map(function(t){return t.name})),i=i.join("|");var r=t.className+":"+i+":"+n,s=f.get(r);if(!s){var o="",l=u;if(t.isBasicMaterial?t.isShadowMaterial?o+=c:o+=a:t.isPBRMaterial&&(o+=h),i){var d=new RegExp("^\\s*uniform\\s+(\\w+)\\s+("+i+");","gm");l=l.replace(d,"attribute $1 $2;")}s=this.getCustomShader(l,o,n,r)}return s},getCustomShader:function(t,e,n,i){var r=f.get(i),s=this.commonHeader;return r||(r=new l({vs:s+n+t,fs:s+n+e}),i&&f.add(i,r)),r}},constructor:function(t){this.id=r.generateUUID(this.className),Object.assign(this,t)}});t.exports=l},function(t,e,n){t.exports="#define GLSLIFY 1\n#ifdef HILO_DIRECTIONAL_LIGHTS\n    uniform vec3 u_directionalLightsColor[HILO_DIRECTIONAL_LIGHTS];\n    uniform vec3 u_directionalLightsInfo[HILO_DIRECTIONAL_LIGHTS];\n    #ifdef HILO_DIRECTIONAL_LIGHTS_SMC\n        uniform sampler2D u_directionalLightsShadowMap[HILO_DIRECTIONAL_LIGHTS_SMC];\n        uniform vec2 u_directionalLightsShadowMapSize[HILO_DIRECTIONAL_LIGHTS_SMC];\n        uniform mat4 u_directionalLightSpaceMatrix[HILO_DIRECTIONAL_LIGHTS_SMC];\n        uniform vec2 u_directionalLightsShadowBias[HILO_DIRECTIONAL_LIGHTS_SMC];\n    #endif\n#endif\n\n#ifdef HILO_SPOT_LIGHTS\n    uniform vec3 u_spotLightsPos[HILO_SPOT_LIGHTS];\n    uniform vec3 u_spotLightsDir[HILO_SPOT_LIGHTS];\n    uniform vec3 u_spotLightsColor[HILO_SPOT_LIGHTS];\n    uniform vec2 u_spotLightsCutoffs[HILO_SPOT_LIGHTS];\n    uniform vec3 u_spotLightsInfo[HILO_SPOT_LIGHTS];\n    #ifdef HILO_SPOT_LIGHTS_SMC\n        uniform sampler2D u_spotLightsShadowMap[HILO_SPOT_LIGHTS_SMC];\n        uniform vec2 u_spotLightsShadowMapSize[HILO_SPOT_LIGHTS_SMC];\n        uniform mat4 u_spotLightSpaceMatrix[HILO_SPOT_LIGHTS_SMC];\n        uniform vec2 u_spotLightsShadowBias[HILO_SPOT_LIGHTS_SMC];\n    #endif\n#endif\n\n#ifdef HILO_POINT_LIGHTS\n    uniform vec3 u_pointLightsPos[HILO_POINT_LIGHTS];\n    uniform vec3 u_pointLightsColor[HILO_POINT_LIGHTS];\n    uniform vec3 u_pointLightsInfo[HILO_POINT_LIGHTS];\n#endif\n\n#ifdef HILO_AMBIENT_LIGHTS\n    uniform vec3 u_ambientLightsColor;\n#endif\n\n"+n(71)+"\n"+n(72)+"\n"+n(73)+"\n"+n(74)},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_TRANSPARENCY_MAP\n    uniform sampler2D u_transparency;\n#else\n    uniform float u_transparency;\n#endif\n\n#ifdef HILO_ALPHA_CUTOFF\n    uniform float u_alphaCutoff;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_FOG\n    varying float v_dist;\n    uniform vec4 u_fogColor;\n    uniform vec2 u_fogInfo;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\nfloat transparency = 1.0;\n#ifdef HILO_TRANSPARENCY_MAP\n    transparency = texture2D(u_transparency, v_texcoord0).r;\n#else\n    transparency = u_transparency;\n#endif\ncolor.a *= transparency;\n#ifdef HILO_ALPHA_CUTOFF\n    if (color.a < u_alphaCutoff) {\n        discard;\n    } else {\n        color.a = 1.0;\n    }\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_FOG\n    float fogFactor = (u_fogInfo.y - v_dist)/(u_fogInfo.y - u_fogInfo.x);\n    if(fogFactor < 0.0){\n        fogFactor = 0.0;\n    }\n    else if(fogFactor > 1.0){\n        fogFactor = 1.0;\n    }\n    color = fogFactor * color + (1.0 - fogFactor) * u_fogColor;\n#endif"},function(t,e){t.exports="#ifdef GL_ES\nprecision HILO_MAX_VERTEX_PRECISION float;\n#define GLSLIFY 1\n#endif"},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(12),o=n(92),a=n(28),u=new s,c=i.create({Statics:{cache:{get:function(){return u}},reset:function(t){u.removeAll()},getProgram:function(t,e){var n=t.id,i=u.get(n);return i||(i=new c({state:e,vertexShader:t.vs,fragShader:t.fs}),u.add(n,i)),i}},className:"Program",isProgram:!0,state:null,fragShader:"",vertexShader:"",constructor:function(t){this.id=r.generateUUID(this.className),Object.assign(this,t),this._dict={},this.attributes={},this.uniforms={},this.gl=this.state.gl,this.program=this.createProgram(),this.initAttributes(),this.initUniforms()},createProgram:function(){var t=this.gl,e=t.createProgram(),n=this.createShader(t.VERTEX_SHADER,this.vertexShader),i=this.createShader(t.FRAGMENT_SHADER,this.fragShader);if(t.attachShader(e,n),t.attachShader(e,i),t.linkProgram(e),t.deleteShader(n),t.deleteShader(i),!t.getProgramParameter(e,t.LINK_STATUS)){var r=t.getProgramInfoLog(e);return console.error("compileProgramError: "+r),t.deleteProgram(e),null}return e},useProgram:function(){this.state.useProgram(this.program)},createShader:function(t,e){var n=this.gl,i=n.createShader(t);if(n.shaderSource(i,e),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){var r=n.getShaderInfoLog(i);return console.error("compileShaderError: "+r),null}return i},initAttributes:function(){for(var t=this,e=this.gl,n=this.program,i=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),r=a.instanced,s=0;s<i;s++)!function(i){var s=e.getActiveAttrib(n,i),a=s.name,u=s.type,c=s.size,h=e.getAttribLocation(n,a),f=o.get(u),l=function(t){var n=t.type,i=void 0===n?e.FLOAT:n,r=t.normalized,s=void 0!==r&&r,o=t.stride,a=void 0===o?0:o,u=t.offset,c=void 0===u?0:u;e.vertexAttribPointer(h,f.size,i,s,a,c)},d=function(){e.enableVertexAttribArray(h)},m=function(){},_=function(t,e){t[h]=e};if(r&&(m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r.vertexAttribDivisorANGLE(h,t)}),"Matrix"===f.type){var p=f.byteSize,g=f.size,v=Math.sqrt(g),T=4*v,E=function(t){for(var e=0;e<v;e++)t(h+e,e)};l=function(t){var n=t.type,i=void 0===n?e.FLOAT:n,r=t.normalized,s=void 0!==r&&r,o=t.stride,a=void 0===o?0:o,u=t.offset,c=void 0===u?0:u,h=void 0;h=0===a?p:a,E(function(t,n){e.vertexAttribPointer(t,v,i,s,h,c+T*n)})},d=function(){E(function(t){e.enableVertexAttribArray(t)})},_=function(t,e){E(function(n){t[n]=e})},r&&(m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;E(function(e){r.vertexAttribDivisorANGLE(e,t)})})}t.attributes[a]={name:a,location:h,type:u,size:c,glTypeInfo:f,pointer:l,enable:d,divisor:m,addTo:_}}(s)},initUniforms:function(){for(var t=this,e=this.gl,n=this.program,i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS),r=0,s=0;s<i;s++)!function(i){var s=e.getActiveUniform(n,i),a=s.name,u=s.size,c=s.type;a=a.replace("[0]","");var h=e.getUniformLocation(n,a),f=o.get(c),l=f.uniformArray,d=f.uniform;t.uniforms[a]={name:a,location:h,type:c,size:u,glTypeInfo:f},c!==e.SAMPLER_2D&&c!==e.SAMPLER_CUBE||(t.uniforms[a].textureIndex=r,r+=u),Object.defineProperty(t,a,{set:f.size>1||u>1?function(t){l(h,t)}:function(e){t._dict[a]!==e&&(t._dict[a]=e,d(h,e))}})}(s)}});t.exports=c},function(t,e,n){"use strict";var i=n(0),r=n(28),s=n(48),o=n(128),a=n(12),u=n(9),c=n(3),h=c.TRIANGLES,f=[],l=null,d=new a,m=i.create({Statics:{cache:{get:function(){return d}},getVao:function(t,e,n){var i=d.get(e);return i||(i=new m(t,e,n),d.add(e,i)),i},reset:function(t){l=null,f=[],this.bindSystemVao(),d.each(function(e){e.destroy(t)})},bindSystemVao:function(){r.vao&&r.vao.bindVertexArrayOES(null)}},className:"VertexArrayObject",isVertexArrayObject:!0,vertexCount:null,useVao:!1,useInstanced:!1,mode:h,isDirty:!0,constructor:function(t,e,n){this.gl=t,this.id=e,this.vaoExtension=r.vao,this.instancedExtension=r.instanced,Object.assign(this,n),this.vaoExtension||(this.useVao=!1),this.instancedExtension||(this.useInstanced=!1),this.useVao&&(this.vao=this.vaoExtension.createVertexArrayOES()),this.attributes=[],this.activeStates=[],this.indexBuffer=null},bind:function(){l!==this&&(this.useVao?this.vaoExtension.bindVertexArrayOES(this.vao):this.bindSystemVao(),l=this)},bindSystemVao:function(){var t=this.gl;l&&l.useVao&&l.unbind();var e=this.activeStates,n=void 0;this.attributes.forEach(function(t){var e=t.buffer,i=t.attribute,r=t.geometryData;n!==e&&(n=e,e.bind()),i.enable(),i.pointer(r),t.useInstanced?i.divisor(1):i.divisor(0)}),f.forEach(function(n,i){var r=e[i];n&&!r&&(n.attribute.divisor(0),t.disableVertexAttribArray(i))}),this.indexBuffer&&this.indexBuffer.bind(),f=e},unbind:function(){this.useVao&&this.vaoExtension.bindVertexArrayOES(null),l=null},draw:function(){this.bind();var t=this.gl,e=this.mode;this.indexBuffer?t.drawElements(e,this.vertexCount,this.indexType,0):t.drawArrays(e,0,this.getVertexCount())},getVertexCount:function(){if(null===this.vertexCount){var t=this.attributes[0];this.vertexCount=t?t.buffer.data.length/t.attribute.glTypeInfo.size:0}return this.vertexCount},drawInstance:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.bind();var e=this.gl,n=this.mode;this.useInstanced&&(this.indexBuffer?this.instancedExtension.drawElementsInstancedANGLE(n,this.vertexCount,e.UNSIGNED_SHORT,0,t):this.instancedExtension.drawArraysInstancedANGLE(n,0,this.getVertexCount(),t))},addIndexBuffer:function(t,e){this.bind();var n=this.gl,i=this.indexBuffer;this.indexType=t.type,i?t.isDirty&&(t.isDirty=!1,i.upload(t.data),this.vertexCount=t.length):(i=s.createIndexBuffer(n,t,e),i.bind(),this.indexBuffer=i,this.vertexCount=t.length,t.isDirty=!1)},addAttribute:function(t,e,n,i){this.bind();var r=this.gl,o=e.name,a=this[o];if(a)t.isDirty&&(t.isDirty=!1,a.buffer.upload(t.data));else{t.isDirty=!1;var u=s.createVertexBuffer(r,t,n);u.bind(),e.enable(),e.pointer(t),a={attribute:e,buffer:u,geometryData:t},this.attributes.push(a),this[o]=a,e.addTo(this.activeStates,a),i&&i(a)}return a},addInstancedAttribute:function(t,e,n){this.bind();var i=this.gl,r=t.name,s=t.glTypeInfo,a=o.getTypedArray(Float32Array,e.length*s.size);e.forEach(function(t,e){void 0!==n(t)?o.fillArrayData(a,n(t),e*s.size):console.warn("no attributeData:"+r+"-"+t.name)});var c=this[r],h=void 0;c?(h=c.geometryData,h.data=a):h=new u(a),this.addAttribute(h,t,i.DYNAMIC_DRAW,function(e){t.divisor(1),e.useInstanced=!0})},destroy:function(){var t=this;this.useVao&&this.vaoExtension.deleteVertexArrayOES(this.vao),this.gl=null,this.indexBuffer=null,this.attributes.forEach(function(e){t[e.name]=null}),this.attributes=null,this.activeStates=null,d.remove(this.__cacheId)}});t.exports=m},function(t,e,n){"use strict";var i=n(0),r=n(12),s=new r,o=i.create({Statics:{cache:{get:function(){return s}},reset:function(t){s.each(function(t){t.destroy()})},createVertexBuffer:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.STATIC_DRAW;return this.createBuffer(t,t.ARRAY_BUFFER,e,n)},createBuffer:function(t,e,n,i){var r=n.bufferViewId,a=s.get(r);return a||(a=new o(t,e,n.data,i),s.add(r,a),a)},createIndexBuffer:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.STATIC_DRAW;return this.createBuffer(t,t.ELEMENT_ARRAY_BUFFER,e,n)}},className:"Buffer",isBuffer:!0,constructor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ARRAY_BUFFER,n=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.STATIC_DRAW;this.gl=t,this.target=e,this.usage=i,this.buffer=t.createBuffer(),n&&this.upload(n)},bind:function(){this.gl.bindBuffer(this.target,this.buffer)},upload:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.gl,i=this.target,r=this.usage;this.bind(),!this.data||this.data.byteLength<t.byteLength?n.bufferData(i,t,r):n.bufferSubData(i,e,t),this.data=t},destroy:function(){this.gl.deleteBuffer(this.buffer),this.data=null,s.remove(this.__cacheId)}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(11),s=n(4),o=n(50),a=new s,u=i.create({Extends:r,isCamera:!0,className:"Camera",constructor:function(t){this.viewMatrix=new s,this.projectionMatrix=new s,this.viewProjectionMatrix=new s,this._frustum=new o,u.superclass.constructor.call(this,t)},updateViewMatrix:function(){this.updateMatrixWorld(!0),this.viewMatrix.invert(this.worldMatrix)},updateProjectionMatrix:function(){},getGeometry:function(t){},updateViewProjectionMatrix:function(){this.updateProjectionMatrix(),this.updateViewMatrix(),this.viewProjectionMatrix.multiply(this.projectionMatrix,this.viewMatrix),this.updateFrustum(this.viewProjectionMatrix)},getModelViewMatrix:function(t,e){return e=e||new s,e.multiply(this.viewMatrix,t.worldMatrix),e},getModelProjectionMatrix:function(t,e){return e=e||new s,e.multiply(this.viewProjectionMatrix,t.worldMatrix),e},projectVector:function(t,e,n){var i=t.clone();return i.transformMat4(this.viewProjectionMatrix),e&&n&&(i.x=(i.x+1)/2*e,i.y=n-(i.y+1)/2*n),i},unprojectVector:function(t,e,n){var i=t.clone();return e&&n&&(i.x=i.x/e*2-1,i.y=1-i.y/n*2),a.invert(this.viewProjectionMatrix),i.transformMat4(a),i},isMeshVisible:function(t){var e=t.geometry;if(e){var n=e.getSphereBounds(t.worldMatrix);if(this._frustum.intersectsSphere(n))return!0}return!1},updateFrustum:function(t){this._frustum.fromMatrix(t)}});t.exports=u},function(t,e,n){"use strict";var i=n(0),r=n(36),s=i.create({constructor:function(){this.planes=[];for(var t=6;t--;)this.planes.push(new r)},fromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],u=n[5],c=n[6],h=n[7],f=n[8],l=n[9],d=n[10],m=n[11],_=n[12],p=n[13],g=n[14],v=n[15];e[0].set(o-i,h-a,m-f,v-_).normalize(),e[1].set(o+i,h+a,m+f,v+_).normalize(),e[2].set(o+r,h+u,m+l,v+p).normalize(),e[3].set(o-r,h-u,m-l,v-p).normalize(),e[4].set(o-s,h-c,m-d,v-g).normalize(),e[5].set(o+s,h+c,m+d,v+g).normalize()},intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}});t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(49),o=n(7),a=i.create({Extends:s,isPerspectiveCamera:!0,className:"PerspectiveCamera",near:.1,far:2e3,fov:50,aspect:1,constructor:function(t){a.superclass.constructor.call(this,t),this.updateProjectionMatrix()},updateProjectionMatrix:function(){this.projectionMatrix.perspective(r.degToRad(this.fov),this.aspect,this.near,this.far)},getGeometry:function(t){if(t||!this._geometry){var e=new o,n=Math.tan(this.fov/2*Math.PI/180),i=this.near,r=this.far,s=i*n,a=r*n,u=this.aspect*s,c=this.aspect*a,h=[-u,-s,-i],f=[u,-s,-i],l=[u,s,-i],d=[-u,s,-i],m=[-c,-a,-r],_=[c,-a,-r],p=[c,a,-r],g=[-c,a,-r];e.addRect(m,_,p,g),e.addRect(_,f,l,p),e.addRect(f,h,d,l),e.addRect(h,m,g,d),e.addRect(g,p,l,d),e.addRect(h,f,_,m),this._geometry=e}return this._geometry}});t.exports=a},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(19),r={_listeners:null,on:function(t,e,n){for(var i=this._listeners=this._listeners||{},r=i[t]=i[t]||[],s=0,o=r.length;s<o;s++){if(r[s].listener===e)return}return r.push({listener:e,once:n}),this},off:function(t,e){if(0==arguments.length)return this._listeners=null,this;var n=this._listeners&&this._listeners[t];if(n){if(1==arguments.length)return delete this._listeners[t],this;for(var i=0,r=n.length;i<r;i++){if(n[i].listener===e){n.splice(i,1),0===n.length&&delete this._listeners[t];break}}}return this},fire:function(t,e){var n,i;"string"==typeof t?i=t:(n=t,i=t.type);var r=this._listeners;if(!r)return!1;var o=r[i];if(o){var a=o.slice(0);if(n=n||new s(i,this,e),n._stopped)return!1;for(var u=0;u<a.length;u++){var c=a[u];if(c.listener.call(this,n),c.once){var h=o.indexOf(c);h>-1&&o.splice(h,1)}}return 0==o.length&&delete r[i],!0}return!1}},s=i.create({constructor:function(t,e,n){this.type=t,this.target=e,this.detail=n,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),o=window.Event;if(o){var a=o.prototype,u=a.stopImmediatePropagation;a.stopImmediatePropagation=function(){u&&u.call(this),this._stopped=!0}}t.exports=r},function(t,e){t.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},function(t,e,n){"use strict";var i={VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795};t.exports=i},function(t,e,n){function i(t,e){this.origin=t||[0,0,0],this.direction=e||[0,0,-1]}var r=n(57),s=n(59),o=n(60),a=n(63),u=n(35),c=[[0,0,0],[0,0,0],[0,0,0]],h=[0,0,0];t.exports=i,i.prototype.set=function(t,e){this.origin=t,this.direction=e},i.prototype.copy=function(t){u(this.origin,t.origin),u(this.direction,t.direction)},i.prototype.clone=function(){var t=new i;return t.copy(this),t},i.prototype.intersectsSphere=function(t,e){return o(h,this.origin,this.direction,t,e)},i.prototype.intersectsPlane=function(t,e){return s(h,this.origin,this.direction,t,e)},i.prototype.intersectsTriangle=function(t){return r(h,this.origin,this.direction,t)},i.prototype.intersectsBox=function(t){return a(h,this.origin,this.direction,t)},i.prototype.intersectsTriangleCell=function(t,e){var n=t[0],i=t[1],r=t[2];return c[0]=e[n],c[1]=e[i],c[2]=e[r],this.intersectsTriangle(c)}},function(t,e,n){function i(t,e,n,i){o(u,i[1],i[0]),o(c,i[2],i[0]),r(f,n,c);var d=s(u,f);if(d<a)return null;o(h,e,i[0]);var m=s(h,f);if(m<0||m>d)return null;r(l,h,u);var _=s(n,l);if(_<0||m+_>d)return null;var p=s(c,l)/d;return t[0]=e[0]+p*n[0],t[1]=e[1]+p*n[1],t[2]=e[2]+p*n[2],t}var r=n(58),s=n(23),o=n(32),a=1e-6,u=[0,0,0],c=[0,0,0],h=[0,0,0],f=[0,0,0],l=[0,0,0];t.exports=i},function(t,e){function n(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],u=n[2];return t[0]=r*u-s*a,t[1]=s*o-i*u,t[2]=i*a-r*o,t}t.exports=n},function(t,e,n){function i(t,e,n,i,c){var h=r(n,i);if(0!==h){var f=-(r(e,i)+c)/h;return f<0?null:(o(u,n,f),s(t,e,u))}return r(i,e)+c===0?a(t,e):null}var r=n(23),s=n(33),o=n(34),a=n(35);t.exports=i;var u=[0,0,0]},function(t,e,n){function i(t,e,n,i,f){o(h,i,e);var l=s(n,h);if(l<0)return null;a(h,e,n,l);var d=r(i,h),m=f*f;return d>m?null:(u(t,n,l-Math.sqrt(m-d)),c(t,t,e))}var r=n(61),s=n(23),o=n(32),a=n(62),u=n(34),c=n(33),h=[0,0,0];t.exports=i},function(t,e){function n(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}t.exports=n},function(t,e){function n(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}t.exports=n},function(t,e){function n(t,e,n,r){var s=i(e,n,r);if(s===1/0)t=null;else{t=t||[];for(var o=0;o<e.length;o++)t[o]=e[o]+n[o]*s}return t}function i(t,e,n){for(var i=t.length,r=-1/0,s=1/0,o=0;o<i;o++){var a=(n[0][o]-t[o])/e[o],u=(n[1][o]-t[o])/e[o];if(a>u){var c=a;a=u,u=c}if(u<r||a>s)return 1/0;a>r&&(r=a),u<s&&(s=u)}return r>s?1/0:r}t.exports=n,t.exports.distance=i},function(t,e,n){"use strict";var i=n(0),r=n(22),s=n(4),o=n(38),a=n(16),u=new s,c=new s,h=i.create({Extends:r,isSkinedMesh:!0,className:"SkinedMesh",_rootNode:null,rootNode:{get:function(){return this._rootNode},set:function(t){this._rootNode=t,this.initJointNodeList()}},jointNodeList:null,useInstanced:!1,jointMatTexture:null,constructor:function(t){this.jointNames=[],this.bindShapeMatrix=new s,this.inverseBindMatrices=[],h.superclass.constructor.call(this,t)},initJointNodeList:function(){var t=this;if(this._rootNode){var e={};this._rootNode.traverse(function(t){"jointName"in t&&(e[t.jointName]=t)}),this.jointNodeList=[],this.jointNames.forEach(function(n){t.jointNodeList.push(e[n])})}},getJointMat:function(){var t=this;if(this.jointNodeList)return this.jointMat||(this.jointMat=new Float32Array(16*this.jointNodeList.length)),this._rootNode||!this.clonedFrom?c.invert(this.worldMatrix):c.invert(this.clonedFrom.worldMatrix),this.jointNodeList.forEach(function(e,n){u.copy(c),u.multiply(e.worldMatrix),u.multiply(t.inverseBindMatrices[n]),u.multiply(t.bindShapeMatrix),u.toArray(t.jointMat,16*n)}),this.jointMat},initJointMatTexture:function(){if(!this.jointMatTexture){var t=this.getJointMat();this.jointMatTexture=new o({data:t})}return this.jointMatTexture},updateJointMatTexture:function(){if(this.jointMatTexture){var t=this.getJointMat();this.jointMatTexture.data.set(t,0),this.jointMatTexture.needUpdate=!0}else this.initJointMatTexture()},clone:function(t){var e=r.prototype.clone.call(this,t);return Object.assign(e,{useInstanced:this.useInstanced,jointNames:this.jointNames.slice(),bindShapeMatrix:this.bindShapeMatrix.clone(),inverseBindMatrices:this.inverseBindMatrices.map(function(t){return t.clone()}),jointNodeList:this.jointNodeList}),e.clonedFrom=this,e},getRenderOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.superclass.getRenderOption.call(this,t);var e=this.jointNames.length;if(e&&(t.JOINT_COUNT=e,a.VERTEX_TEXTURE_FLOAT)){e>(a.MAX_VERTEX_UNIFORM_VECTORS-22)/4&&(t.JOINT_MAT_MAP=1)}return t}});t.exports=h},function(t,e,n){"use strict";var i={},r={_cache:i,log:function(){console.log.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)},logOnce:function(t,e){i["log_"+t]||(i["log_"+t]=!0,this.log(e))},warnOnce:function(t,e){i["warn_"+t]||(i["warn_"+t]=!0,this.warn(e))},errorOnce:function(t,e){i["error_"+t]||(i["error_"+t]=!0,this.error(e))}};t.exports=r},function(t,e,n){"use strict";var i=n(0),r=n(27),s=n(6),o=n(39),a=n(46),u=n(126),c=n(127),h=n(47),f=n(48),l=n(30),d=n(28),m=n(16),_=n(92),p=n(129),g=n(130),v=n(10),T=n(15),E=n(3),M=E.DEPTH_TEST,A=E.CULL_FACE,I=E.FRONT_AND_BACK,S=E.BLEND,O=E.LINES,L=E.STATIC_DRAW,R=E.DYNAMIC_DRAW,y=i.create({Mixes:v,className:"WebGLRenderer",isWebGLRenderer:!0,gl:null,width:0,height:0,pixelRatio:1,domElement:null,useInstanced:!1,useVao:!0,alpha:!1,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!1,useFramebuffer:!1,vertexPrecision:"highp",fragmentPrecision:"mediump",fog:null,offsetX:0,offsetY:0,_isInit:!1,_isContextLost:!1,constructor:function(t){this.clearColor=new s(1,1,1),this.renderInfo=new u,this.renderList=new c,this.lightManager=new g,Object.assign(this,t)},resize:function(t,e,n){if(n||this.width!==t||this.height!==e){var i=this.domElement;this.width=t,this.height=e,i.width=t,i.height=e,this.viewport()}},setOffset:function(t,e){this.offsetX===t&&this.offsetY===e||(this.offsetX=t,this.offsetY=e,this.viewport())},viewport:function(t,e,n,i){var r=this.state,s=this.gl;r&&(void 0===t?t=this.offsetX:this.offsetX=t,void 0===e?e=this.offsetY:this.offsetY=e,void 0===n&&(n=s.drawingBufferWidth),void 0===i&&(i=s.drawingBufferHeight),r.viewport(t,e,n,i))},isInit:{get:function(){return this._isInit}},initContext:function(){var t=this;if(!this._isInit){this._isInit=!0;var e=this.gl=this.domElement.getContext("webgl",{alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat});e.viewport(0,0,this.width,this.height),_.init(e),d.init(e),m.init(e,d),o.init(this),this.state=new p(e),d.instanced||(this.useInstanced=!1),d.vao||(this.useVao=!1),this.useFramebuffer&&(this.framebuffer=new l(this,{useVao:this.useVao,width:this.width,height:this.height})),this.domElement.addEventListener("webglcontextlost",function(e){t._onContextLost(e)},!1),this.domElement.addEventListener("webglcontextrestored",function(e){t._onContextRestore(e)},!1),this.fire("init")}},_onContextLost:function(t){var e=this.gl;this._isContextLost=!0,t.preventDefault(),a.reset(e),o.reset(e),T.reset(e),f.reset(e),h.reset(e),this.state.reset(e),this._lastMaterial=null},_onContextRestore:function(t){var e=this.gl;this._isContextLost=!1,d.reset(e),l.reset(e)},setupDepthTest:function(t,e){var n=this.state;e.depthTest?(n.enable(M),n.depthFunc(e.depthFunc),n.depthMask(e.depthMask),n.depthRange(e.depthRange[0],e.depthRange[1])):n.disable(M)},setupCullFace:function(t,e){var n=this.state;e.cullFace&&e.cullFaceType!==I?(n.enable(A),n.cullFace(e.cullFaceType)):n.disable(A)},setupBlend:function(t,e){var n=this.state;e.blend?(n.enable(S),n.blendFuncSeparate(e.blendSrc,e.blendDst,e.blendSrcAlpha,e.blendDstAlpha),n.blendEquationSeparate(e.blendEquation,e.blendEquationAlpha)):n.disable(S)},setupUniforms:function(t,e,n,i){var r=this.forceMaterial||e.material;for(var s in t.uniforms){var o=r.getUniformInfo(s),a=t.uniforms[s];if(!o.isBlankInfo&&(i||o.isDependMesh&&!n)){var u=o.get(e,r,a);void 0===u&&null===u||(t[s]=u)}}},setupVao:function(t,e,n){var i=n.geometry,r=i.isStatic;if(t.isDirty||!r||i.isDirty){t.isDirty=!1;var s=this.forceMaterial||n.material,o=s.attributes,a=r?L:R;for(var u in o){var c=e.attributes[u];if(c){var h=s.getAttributeData(u,n);void 0!==h&&t.addAttribute(h,c,a)}}i.indices&&t.addIndexBuffer(i.indices,a),i.isDirty=!1}},setupMaterial:function(t,e,n){var i=this.gl,r=this.forceMaterial||e.material;r.isDirty||this._lastMaterial!==r?(this.setupDepthTest(i,r),this.setupCullFace(i,e.material),this.setupBlend(i,r),this.setupUniforms(t,e,n,!0),this._lastMaterial=r):this.setupUniforms(t,e,n,!1),r.isDirty=!1},setupMesh:function(t,e){var n=this.gl,i=this.state,r=this.lightManager,s=t.geometry,u=this.forceMaterial||t.material,c=o.getShader(t,u,e,r,this.fog),f=a.getProgram(c,i);f.useProgram(),this.setupMaterial(f,t,e),t.material.wireframe&&s.mode!==O&&s.convertToLinesMode();var l=s.id+f.id,d=h.getVao(n,l,{useInstanced:e,useVao:this.useVao,mode:s.mode});return this.setupVao(d,f,t),{vao:d,program:f,geometry:s}},addRenderInfo:function(t,e){var n=this.renderInfo;n.addFaceCount(t),n.addDrawCount(e)},renderMeshes:function(t){var e=t[0],n=this.forceMaterial||e.material;this.useInstanced&&e.useInstanced&&t.length>1?this.renderInstancedMeshes(e,t,n):this.renderMultipleMeshes(t)},render:function(t,e){if(this.initContext(),!this._isContextLost){var n=this.renderList,i=this.renderInfo,s=this.lightManager,o=this.state;this.fog=t.fog,s.reset(),i.reset(),n.reset(),r.init(o,e,s,this.fog),t.updateMatrixWorld(),e.updateViewProjectionMatrix(),t.traverse(function(t){return!t.visible||(t.isMesh?n.addMesh(t,e):t.isLight&&s.addLight(t),!1)}),s.createShadowMap(this,e),s.updateInfo(e),this.fire("beforeRender"),this.useFramebuffer?(this.framebuffer.bind(),this.clear(),this.renderScene(),this.renderToScreen(this.framebuffer)):(this.clear(),this.renderScene()),this.fire("afterRender")}},renderScene:function(){var t=this;this.renderList.traverse(function(e){t.renderMeshes(e)})},clear:function(t){var e=this.gl,n=this.state;t=t||this.clearColor,n.depthMask(!0),this._lastMaterial=null,e.clearColor(t.r,t.g,t.b,t.a),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},clearDepth:function(){var t=this.gl;this.state.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},renderToScreen:function(t){this.state.bindSystemFramebuffer(),t.render(0,0,1,1,this.clearColor)},renderMesh:function(t){var e=this.setupMesh(t,!1).vao;e.draw(),this.addRenderInfo(e.vertexCount/3,1)},renderInstancedMeshes:function(t,e,n){var i=this.setupMesh(t,!0),r=i.vao,s=i.program;n.getInstancedUniforms().forEach(function(t){var n=t.name,i=t.info,o=s.attributes[n];o&&r.addInstancedAttribute(o,e,function(t){return i.get(t)})}),r.drawInstance(e.length),this.addRenderInfo(r.vertexCount/3*e.length,1)},renderMultipleMeshes:function(t){var e=this;t.forEach(function(t){e.renderMesh(t)})}});t.exports=y},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_TEXCOORD0\n    varying vec2 v_texcoord0;\n#endif\n\n#ifdef HILO_DIFFUSE_CUBE_MAP\n    varying vec3 v_position;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_NORMAL\n    varying vec3 v_normal;\n    #ifdef HILO_HAS_NORMAL_MAP\n        uniform sampler2D u_normalMap;\n        varying mat3 v_TBN;\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_LIGHT\n    varying vec3 v_fragPos;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#if defined(HILO_DIFFUSE_MAP)\n    uniform sampler2D u_diffuse;\n#elif defined(HILO_DIFFUSE_CUBE_MAP)\n    uniform samplerCube u_diffuse;\n#else\n    uniform vec4 u_diffuse;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\nfloat getDiffuse(vec3 normal, vec3 lightDir){\n    return max(dot(normal, lightDir), 0.0);\n}\n\n"},function(t,e){t.exports="#define GLSLIFY 1\nfloat getSpecular(vec3 cameraPos, vec3 fragPos, vec3 lightDir, vec3 normal, float shininess){\n    vec3 viewDir = normalize(cameraPos - fragPos);\n    vec3 reflectDir = reflect(-lightDir, normal);\n    return pow(max(dot(viewDir, reflectDir), 0.0), shininess);\n}\n\n"},function(t,e){t.exports="#define GLSLIFY 1\nfloat getPointAttenuation(vec3 distanceVec, vec3 info){\n    float distance = length(distanceVec);\n    return 1.0/(info.x + info.y * distance + info.z * distance * distance);\n}\n\n"},function(t,e){t.exports="#define GLSLIFY 1\nbool isOutOfRange(vec2 pos) {\n    if (pos.x < 0.0 || pos.x > 1.0 || pos.y < 0.0 || pos.y > 1.0) {\n        return true;\n    }\n    return false;\n}\n\nfloat getShadow(sampler2D shadowMap, vec2 shadowMapSize, float bias, vec3 fragPos, mat4 lightSpaceMatrix) {\n    vec4 fragPosLightSpace = lightSpaceMatrix * vec4(fragPos, 1.0);\n    vec3 projCoords = fragPosLightSpace.xyz / fragPosLightSpace.w;\n    projCoords = projCoords * 0.5 + 0.5;\n    if (isOutOfRange(projCoords.xy)) {\n        return 1.0;\n    }\n    float currentDepth = projCoords.z;\n    float shadow = 0.0;\n    vec2 texelSize = 1.0 / shadowMapSize;\n    for (int x = -1; x <= 1; ++x) {\n        for (int y = -1; y <= 1; ++y) {\n            vec2 pos = projCoords.xy + vec2(x, y) * texelSize;\n            if (isOutOfRange(pos)) {\n                shadow += 1.0;\n            } else {\n                float pcfDepth = texture2D(shadowMap, pos).r;\n                shadow += currentDepth - bias > pcfDepth ? 1.0 : 0.0;\n            }\n        }\n    }\n    return 1.0 - shadow / 9.0;\n}\n\n"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_LIGHT\n    #ifdef HILO_HAS_SPECULAR\n        uniform float u_shininess;\n        #ifdef HILO_SPECULAR_MAP\n            uniform sampler2D u_specular;\n        #else\n            uniform vec4 u_specular;\n        #endif\n    #endif\n    #ifdef HILO_EMISSION_MAP\n        uniform sampler2D u_emission;\n    #else\n        uniform vec4 u_emission;\n    #endif\n    #ifdef HILO_AMBIENT_MAP\n        uniform sampler2D u_ambient;\n    #endif\n    #ifdef HILO_SKYBOX_MAP\n        uniform samplerCube u_skyboxMap;\n        uniform mat4 u_skyboxMatrix;\n        uniform float u_reflectivity;\n        uniform float u_refractRatio;\n        uniform float u_refractivity;\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_NORMAL_MAP\n    vec3 normal = texture2D(u_normalMap, v_texcoord0).rgb * 2.0 - 1.0;\n    normal = normalize(v_TBN * normal);\n#elif defined(HILO_HAS_NORMAL)\n    vec3 normal = normalize(v_normal);\n#else\n    vec3 normal = vec3(0, 0, 1);\n#endif\n\n#if HILO_SIDE == HILO_BACK_SIDE\n    normal = -normal;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_LIGHT\n    #if HILO_SIDE == HILO_FRONT_AND_BACK_SIDE\n        if(dot(-v_fragPos, normal) < 0.0){\n            normal = -normal;\n        }\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#if defined(HILO_DIFFUSE_MAP)\n    diffuse = texture2D(u_diffuse, v_texcoord0);\n#elif defined(HILO_DIFFUSE_CUBE_MAP)\n    diffuse = textureCube(u_diffuse, v_position);\n#else\n    diffuse = u_diffuse;\n#endif\ncolor.a = diffuse.a;"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_LIGHT\n    vec3 lightDiffuse = vec3(0, 0, 0);\n    vec3 lightAmbient = vec3(0, 0, 0);\n    vec3 viewPos = vec3(0, 0, 0);\n\n    #ifdef HILO_AMBIENT_MAP\n        lightAmbient = texture2D(u_ambient, v_texcoord0).rgb;\n    #else\n        lightAmbient = diffuse.rgb;\n    #endif\n\n    #ifdef HILO_HAS_SPECULAR\n        vec3 lightSpecular = vec3(0, 0, 0);\n        #ifdef HILO_SPECULAR_MAP\n            vec4 specular = texture2D(u_specular, v_texcoord0);\n        #else\n            vec4 specular = u_specular;\n        #endif\n    #endif\n    \n    #ifdef HILO_EMISSION_MAP\n        vec4 emission = texture2D(u_emission, v_texcoord0);\n    #else\n        vec4 emission = u_emission;\n    #endif\n\n    #ifdef HILO_DIRECTIONAL_LIGHTS\n        for(int i = 0;i < HILO_DIRECTIONAL_LIGHTS;i++){\n            vec3 lightDir = -u_directionalLightsInfo[i];\n\n            float shadow = 1.0;\n            #ifdef HILO_DIRECTIONAL_LIGHTS_SMC\n                if (i < HILO_DIRECTIONAL_LIGHTS_SMC) {\n                    float bias = max(u_directionalLightsShadowBias[i][1] * (1.0 - dot(normal, lightDir)), u_directionalLightsShadowBias[i][0]);\n                    shadow = getShadow(u_directionalLightsShadowMap[i], u_directionalLightsShadowMapSize[i], bias, v_fragPos, u_directionalLightSpaceMatrix[i]);\n                }\n            #endif\n\n            float diff = getDiffuse(normal, lightDir);\n            lightDiffuse += diff * u_directionalLightsColor[i] * shadow;\n\n            #ifdef HILO_HAS_SPECULAR\n                float spec = getSpecular(viewPos, v_fragPos, lightDir, normal, u_shininess);\n                lightSpecular += spec * u_directionalLightsColor[i] * shadow;\n            #endif\n        }\n    #endif\n\n    #ifdef HILO_SPOT_LIGHTS\n        for(int i = 0; i < HILO_SPOT_LIGHTS; i++){\n            vec3 lightDir = -u_spotLightsDir[i];\n            vec3 distanceVec = u_spotLightsPos[i] - v_fragPos;\n\n            float shadow = 1.0;\n            #ifdef HILO_SPOT_LIGHTS_SMC\n                if (i < HILO_SPOT_LIGHTS_SMC) {\n                    float bias = max(u_spotLightsShadowBias[i][1] * (1.0 - dot(normal, lightDir)), u_spotLightsShadowBias[i][0]);\n                    shadow = getShadow(u_spotLightsShadowMap[i], u_spotLightsShadowMapSize[i], bias, v_fragPos, u_spotLightSpaceMatrix[i]);\n                }\n            #endif\n            \n            float diff = getDiffuse(normal, normalize(distanceVec));\n            float theta = dot(normalize(distanceVec), lightDir);\n            float epsilon = u_spotLightsCutoffs[i][0] - u_spotLightsCutoffs[i][1];\n            float intensity = clamp((theta - u_spotLightsCutoffs[i][1]) / epsilon, 0.0, 1.0);\n            float attenuation = getPointAttenuation(distanceVec, u_spotLightsInfo[i]);\n\n            lightDiffuse += intensity * attenuation * shadow * diff * u_spotLightsColor[i];\n\n            #ifdef HILO_HAS_SPECULAR\n                float spec = getSpecular(viewPos, v_fragPos, lightDir, normal, u_shininess);\n                lightSpecular += intensity * attenuation * shadow * spec * u_spotLightsColor[i];\n            #endif\n        }\n    #endif\n\n    #ifdef HILO_POINT_LIGHTS\n        for(int i = 0;i < HILO_POINT_LIGHTS;i++){\n            vec3 distanceVec = u_pointLightsPos[i] - v_fragPos;\n            vec3 lightDir = normalize(distanceVec);\n\n            float diff = getDiffuse(normal, lightDir);\n            float attenuation = getPointAttenuation(distanceVec, u_pointLightsInfo[i]);\n            lightDiffuse += diff * attenuation * u_pointLightsColor[i];\n\n            #ifdef HILO_HAS_SPECULAR\n                float spec = getSpecular(viewPos, v_fragPos, lightDir, normal, u_shininess);\n                lightSpecular += spec * attenuation * u_pointLightsColor[i];\n            #endif\n        }\n    #endif\n\n    #ifdef HILO_AMBIENT_LIGHTS\n        color.rgb += u_ambientLightsColor * lightAmbient;\n    #endif\n\n    #if defined(HILO_SKYBOX_MAP) && defined(HILO_HAS_SPECULAR)\n        vec3 I = normalize(v_fragPos - viewPos);\n        if (u_reflectivity > 0.0) {\n            vec3 R = reflect(I, normal);\n            R = normalize(vec3(u_skyboxMatrix * vec4(R, 1.0)));\n            lightSpecular += textureCube(u_skyboxMap, R).rgb * u_reflectivity;\n        }\n        if (u_refractivity > 0.0) {\n            vec3 R = refract(I, normal, u_refractRatio);\n            R = normalize(vec3(u_skyboxMatrix * vec4(R, 1.0)));\n            lightSpecular += textureCube(u_skyboxMap, R).rgb * u_refractivity;\n        }\n    #endif\n\n    color.rgb += lightDiffuse * diffuse.rgb;\n    #ifdef HILO_HAS_SPECULAR\n        color.rgb += lightSpecular * specular.rgb;\n    #endif\n\n    color.rgb += emission.rgb;\n#else\n    color = diffuse;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_QUANTIZED\n    #ifdef HILO_POSITION_QUANTIZED\n        uniform mat4 u_positionDecodeMat;\n    #endif\n    #ifdef HILO_NORMAL_QUANTIZED\n        uniform mat4 u_normalDecodeMat;\n    #endif\n    #ifdef HILO_UV_QUANTIZED\n        uniform mat3 u_uvDecodeMat;\n    #endif\n\n    vec2 unQuantize(vec2 data, mat3 decodeMat) {\n        vec3 result = vec3(data, 1.0);\n        result = decodeMat * result;\n        return result.xy;\n    }\n\n    vec3 unQuantize(vec3 data, mat4 decodeMat) {\n        vec4 result = vec4(data, 1.0);\n        result = decodeMat * result;\n        return result.xyz;\n    }\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_JOINT_COUNT\n    attribute vec4 a_skinIndices;\n    attribute vec4 a_skinWeights;\n    #ifdef HILO_JOINT_MAT_MAP\n        uniform sampler2D u_jointMatTexture;\n        uniform vec2 u_jointMatTextureSize;\n        mat4 getJointMat(float index) {\n            index *= 4.0;\n            float x = float(mod(index, u_jointMatTextureSize.x));\n            float y = float(floor(index / u_jointMatTextureSize.x));\n            float dx = 1.0 / float(u_jointMatTextureSize.x);\n            float dy = 1.0 / float(u_jointMatTextureSize.y);\n            y = dy * (y + 0.5);\n            vec4 v1 = texture2D(u_jointMatTexture, vec2(dx * (x + 0.5), y));\n            vec4 v2 = texture2D(u_jointMatTexture, vec2(dx * (x + 1.5), y));\n            vec4 v3 = texture2D(u_jointMatTexture, vec2(dx * (x + 2.5), y));\n            vec4 v4 = texture2D(u_jointMatTexture, vec2(dx * (x + 3.5), y));\n            mat4 mat = mat4(v1, v2, v3, v4);\n            return mat;\n        }\n    #else\n        uniform mat4 u_jointMat[HILO_JOINT_COUNT];\n        mat4 getJointMat(float index) {\n            return u_jointMat[int(index)];\n        }\n    #endif\n\n    mat4 getJointMat(vec4 weights, vec4 indices) {\n        mat4 mat = weights.x * getJointMat(indices.x);\n        mat += weights.y * getJointMat(indices.y);\n        mat += weights.z * getJointMat(indices.z);\n        mat += weights.w * getJointMat(indices.w);\n        return mat;\n    }\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_TEXCOORD0\n    attribute vec2 a_texcoord0;\n    varying vec2 v_texcoord0;\n#endif\n\n#ifdef HILO_DIFFUSE_CUBE_MAP\n    varying vec3 v_position;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_NORMAL\n    attribute vec3 a_normal;\n    uniform mat3 u_normalMatrix;\n    varying vec3 v_normal;\n\n    #ifdef HILO_HAS_NORMAL_MAP\n        attribute vec4 a_tangent;\n        varying mat3 v_TBN;\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#if defined(HILO_HAS_LIGHT) || defined(HILO_HAS_FOG)\n    uniform mat4 u_modelViewMatrix;\n    #ifdef HILO_HAS_FOG\n        varying float v_dist;\n    #endif\n\n    #ifdef HILO_HAS_LIGHT\n        varying vec3 v_fragPos;\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_QUANTIZED\n    #ifdef HILO_POSITION_QUANTIZED\n        pos.xyz = unQuantize(pos.xyz, u_positionDecodeMat);\n    #endif\n    #if defined(HILO_HAS_TEXCOORD0) && defined(HILO_UV_QUANTIZED)\n        uv = unQuantize(uv, u_uvDecodeMat);\n    #endif\n    #if defined(HILO_HAS_NORMAL) && defined(HILO_NORMAL_QUANTIZED)\n        normal = unQuantize(normal, u_normalDecodeMat);\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_JOINT_COUNT\n    mat4 skinMat = getJointMat(a_skinWeights, a_skinIndices);\n    pos = skinMat * pos;\n\n    #ifdef HILO_HAS_NORMAL\n        normal = mat3(skinMat) * normal;\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_TEXCOORD0\n    v_texcoord0 = uv;\n#endif\n#ifdef HILO_DIFFUSE_CUBE_MAP\n    v_position = pos.xyz;\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_HAS_NORMAL\n    #ifdef HILO_HAS_NORMAL_MAP\n        vec3 T = normalize(u_normalMatrix * tangent.xyz);\n        vec3 N = normalize(u_normalMatrix * normal);\n        T = normalize(T - dot(T, N) * N);\n        vec3 B = cross(T, N) * tangent.w;\n        v_TBN = mat3(T, B, N);\n    #endif\n    v_normal = normalize(u_normalMatrix * normal);\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#if defined(HILO_HAS_LIGHT) || defined(HILO_HAS_FOG)\n    vec3 fragPos = (u_modelViewMatrix * pos).xyz;\n\n    #ifdef HILO_HAS_LIGHT\n        v_fragPos = fragPos;\n    #endif\n\n    #ifdef HILO_HAS_FOG\n        v_dist = length(fragPos);\n    #endif\n#endif"},function(t,e,n){t.exports="#define GLSLIFY 1\n"+n(17)+"\n"+n(45)+"\n\nattribute vec2 a_position;\nattribute vec2 a_texcoord0;\nvarying vec2 v_texcoord0;\n\n\nvoid main(void) {\n    vec4 pos = vec4(a_position, 0.0, 1.0);\n    gl_Position = pos;\n    v_texcoord0 = a_texcoord0;\n}"},function(t,e,n){t.exports="#define GLSLIFY 1\n"+n(17)+"\n"+n(24)+"\n\nvarying vec2 v_texcoord0;\nuniform sampler2D u_diffuse;\n\nvoid main(void) {  \n    gl_FragColor = texture2D(u_diffuse, v_texcoord0);\n}"},function(t,e,n){"use strict";var i=[{name:"FLOAT",byteSize:4,uniformFuncName:"uniform1f",type:"Scalar",size:1},{name:"FLOAT_VEC2",byteSize:8,uniformFuncName:"uniform2f",type:"Vector",size:2},{name:"FLOAT_VEC3",byteSize:12,uniformFuncName:"uniform3f",type:"Vector",size:3},{name:"FLOAT_VEC4",byteSize:16,uniformFuncName:"uniform4f",type:"Vector",size:4},{name:"FLOAT_MAT2",byteSize:16,uniformFuncName:"uniformMatrix2fv",type:"Matrix",size:4},{name:"FLOAT_MAT3",byteSize:36,uniformFuncName:"uniformMatrix3fv",type:"Matrix",size:9},{name:"FLOAT_MAT4",byteSize:64,uniformFuncName:"uniformMatrix4fv",type:"Matrix",size:16},{name:"INT",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1},{name:"INT_VEC2",byteSize:8,uniformFuncName:"uniform2i",type:"Vector",size:2},{name:"INT_VEC3",byteSize:12,uniformFuncName:"uniform3i",type:"Vector",size:3},{name:"INT_VEC4",byteSize:16,uniformFuncName:"uniform4i",type:"Vector",size:4},{name:"BOOL",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1},{name:"BOOL_VEC2",byteSize:8,uniformFuncName:"uniform2i",type:"Vector",size:2},{name:"BOOL_VEC3",byteSize:12,uniformFuncName:"uniform3i",type:"Vector",size:3},{name:"BOOL_VEC4",byteSize:16,uniformFuncName:"uniform4i",type:"Vector",size:4},{name:"SAMPLER_2D",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1},{name:"SAMPLER_CUBE",byteSize:4,uniformFuncName:"uniform1i",type:"Scalar",size:1}],r={},s={dict:r,init:function(t){i.forEach(function(e){var n=e.name,i=void 0,s=void 0,o=e.uniformFuncName,a=o+"v";"Matrix"===e.type?i=s=function(e,n){void 0!==n&&t[o](e,!1,n)}:(i=function(e,n){void 0!==n&&t[o](e,n)},s=function(e,n){t[a](e,n)}),r[t[n]]=Object.assign(e,{glValue:t[n],uniform:i,uniformArray:s})})},get:function(t){return r[t]}};t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(49),s=n(7),o=i.create({Extends:r,isOrthographicCamera:!0,className:"OrthographicCamera",left:-1,right:1,bottom:-1,top:1,near:.1,far:1,constructor:function(t){o.superclass.constructor.call(this,t),this.updateProjectionMatrix()},updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},getGeometry:function(t){if(t||!this._geometry){var e=new s,n=[this.left,this.bottom,-this.near],i=[this.right,this.bottom,-this.near],r=[this.right,this.top,-this.near],o=[this.left,this.top,-this.near],a=[this.left,this.bottom,-this.far],u=[this.right,this.bottom,-this.far],c=[this.right,this.top,-this.far],h=[this.left,this.top,-this.far];e.addRect(a,u,c,h),e.addRect(u,i,r,c),e.addRect(i,n,o,r),e.addRect(n,a,h,o),e.addRect(h,c,r,o),e.addRect(n,i,u,a),this._geometry=e}return this._geometry}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(13),s=n(140),o=i.create({Extends:r,constructor:function(){o.superclass.constructor.call(this)},load:function(t){var e=this;return this.loadRes(t.src,"buffer").then(function(n){var i=new s(n,t);return i.parse(),i.loadResources(e).then(function(){return i.parseScene()})}).catch(function(t){throw console.warn("load gltf failed",t.message,t.stack),t})}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(6),s=n(31),o=i.create({Extends:s,isPBRMaterial:!0,className:"PBRMaterial",lightType:"PBR",baseColor:null,baseColorMap:null,metallic:1,metallicMap:null,roughness:1,roughnessMap:null,metallicRoughness:null,ao:1,aoInMetallicRoughness:!1,normalMap:null,diffuseEnvMap:null,brdfLUT:null,specularEnvMap:null,emission:null,isSpecularGlossiness:!1,specular:null,glossiness:1,specularGlossinessMap:null,usedUniformVectors:11,transparency:1,constructor:function(t){this.baseColor=new r(1,1,1),this.specular=new r(1,1,1),o.superclass.constructor.call(this,t),Object.assign(this.uniforms,{u_emission:"EMISSION",u_baseColor:"BASECOLOR",u_baseColorMap:"BASECOLORMAP",u_metallic:"METALLIC",u_metallicMap:"METALLICMAP",u_roughness:"ROUGHNESS",u_roughnessMap:"ROUGHNESSMAP",u_metallicRoughness:"METALLICROUGHNESS",u_ao:"AO",u_diffuseEnvMap:"DIFFUSEENVMAP",u_brdfLUT:"BRDFLUT",u_specularEnvMap:"SPECULARENVMAP",u_specular:"SPECULAR",u_glossiness:"GLOSSINESS",u_specularGlossinessMap:"SPECULARGLOSSINESSMAP",u_normalMap:"NORMALMAP",u_transparency:"TRANSPARENCY"})},getRenderOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.superclass.getRenderOption.call(this,t);var e=!1;return this.baseColorMap&&(t.BASECOLOR_MAP=1,e=!0),this.metallicMap&&(t.METALLIC_MAP=1,e=!0),this.roughnessMap&&(t.ROUGHNESS_MAP=1,e=!0),this.metallicRoughness&&(t.METALLIC_ROUGHNESS=1,e=!0),this.ao&&this.ao.isTexture&&(t.AO_MAP=1,e=!0),this.aoInMetallicRoughness&&(t.AO_IN_METALLIC_ROUGHNESS=1),this.diffuseEnvMap&&(t.DIFFUSE_ENV_MAP=1),this.brdfLUT&&this.specularEnvMap&&(t.SPECULAR_ENV_MAP=1),this.isSpecularGlossiness&&(t.PBR_SPECULAR_GLOSSINESS=1,this.specularGlossinessMap&&(t.SPECULAR_GLOSSINESS_MAP=1,e=!0)),this.emission&&(t.EMISSION_MAP=1,e=!0),this.transparency.isTexture&&(t.TRANSPARENCY_MAP=1,e=!0),e&&(t.HAS_TEXCOORD0=1),t}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(15),s=n(13),o=new Image;o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";var a=i.create({Extends:r,isLazyTexture:!0,className:"LazyTexture",_src:"",crossOrigin:!1,autoLoad:!0,src:{get:function(){return this._src},set:function(t){this._src!==t&&(this._src=t,this.autoLoad&&this.load())}},constructor:function(t){t&&("crossOrigin"in t&&(this.crossOrigin=t.crossOrigin),"autoLoad"in t&&(this.autoLoad=t.autoLoad)),a.superclass.constructor.call(this,t),this.image=t.placeHolder||o},load:function(){var t=this;return a.loader=a.loader||new s,a.loader.loadImg(this.src,this.crossOrigin).then(function(e){t.image=e,t.needUpdate=!0},function(t){console.warn("LazyTexture Failed "+t)})}});t.exports=a},function(t,e,n){"use strict";function i(t,e){return t-e}var r=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(0),o=n(1),a=n(2),u=n(14),c=n(26),h=n(5),f=new a,l=new a,d=new u,m=new u,_=new c,p=s.create({Statics:{interpolation:{LINEAR:function(t,e,n){return t.slerp?t.slerp(e,n):t.lerp?t.lerp(e,n):t+n*(e-t)},STEP:function(t,e,n){return t},CATMULLROMSPLINE:function(t,e,n){return t},CUBICSPLINE:function(t,e,n){return t}},StateType:{TRANSLATE:"Translation",POSITION:"Translation",TRANSLATION:"Translation",SCALE:"Scale",ROTATE:"Rotation",ROTATION:"Rotation",QUATERNION:"Quaternion",WEIGHTS:"Weights"},getType:function(t){return t=String(t).toUpperCase(),p.StateType[t]}},isAnimationStates:!0,className:"AnimationStates",nodeName:"",type:"",interpolationType:"LINEAR",constructor:function(t){this.id=o.generateUUID(this.className),this.keyTime=[],this.states=[],Object.assign(this,t)},findIndexByTime:function(t){return h.getIndexFromSortedArray(this.keyTime,t,i)},getState:function(t){if(this.type===p.StateType.WEIGHTS)return this.getWeightsState(t);var e=this.findIndexByTime(t),n=r(e,2),i=n[0],s=n[1];if(i<0||s>=this.keyTime.length)return null;var o=this.keyTime[i],a=this.keyTime[s],u=this.states[i],c=this.states[s];if(u?c||(c=u):u=c,u===c)return this.type===p.StateType.ROTATION?(d.fromEuler(_.fromArray(u)),d.elements):u;var h=(t-o)/(a-o);return this.type===p.StateType.ROTATION?(d.fromEuler(_.fromArray(u)),m.fromEuler(_.fromArray(c)),this.interpolation(d,m,h).elements):this.type===p.StateType.QUATERNION?(d.fromArray(u),m.fromArray(c),this.interpolation(d,m,h).elements):(f.fromArray(u),l.fromArray(c),this.interpolation(f,l,h).elements)},getWeightsState:function(t){var e=this.findIndexByTime(t),n=r(e,2),i=n[0],s=n[1],o=this.keyTime[i],a=this.keyTime[s],u=this.states.length/this.keyTime.length,c=this.states.slice(i*u,i*u+u);if(i===s)return c;for(var h=this.states.slice(s*u,s*u+u),f=(t-o)/(a-o),l=0;l<u;l++)c[l]=this.interpolation(c[l],h[l],f);return c},interpolation:function(t,e,n){return p.interpolation[this.interpolationType](t,e,n)},updateNodeTranslation:function(t,e){t.x=e[0],t.y=e[1],t.z=e[2]},updateNodeScale:function(t,e){t.scaleX=e[0],t.scaleY=e[1],t.scaleZ=e[2]},updateNodeQuaternion:function(t,e){t.quaternion.fromArray(e)},updateNodeWeights:function(t,e){for(var n=this._originalWeightIndices=this._originalWeightIndices||[],i=e.length,r=0;r<i;r++)n[r]=r;for(var s=0;s<i;s++)for(var o=s+1;o<i;o++)if(e[o]>e[s]){var a=e[s];e[s]=e[o],e[o]=a,a=n[s],n[s]=n[o],n[o]=a}t.traverse(function(t){t.isMesh&&t.geometry&&t.geometry.isMorphGeometry&&t.geometry.update(e,n)})},updateNodeState:function(t,e){if(e){var n=this.type;n===p.StateType.ROTATION&&(n=p.StateType.QUATERNION);var i=this.getState(t);i&&this["updateNode"+n](e,i)}},clone:function(){return new this.constructor({keyTime:this.keyTime,states:this.states,type:this.type,nodeName:this.nodeName})}});t.exports=p},function(t,e,n){"use strict";var i=n(0),r=n(1),s=i.create({Statics:{_anims:[],tick:function(t){this._anims.forEach(function(e){return e.tick(t)})}},isAnimation:!0,className:"Animation",paused:!1,currentLoopCount:0,loop:1/0,currentTime:0,timeScale:1,startTime:0,endTime:0,totalTime:0,nodeNameMap:null,_rootNode:null,rootNode:{get:function(){return this._rootNode},set:function(t){this._rootNode=t,this.initNodeNameMap()}},constructor:function(t){this.id=r.generateUUID(this.className),this.animStatesList=[],this.clips={},Object.assign(this,t),this.initTotalTime()},addClip:function(t,e,n){this.clips[t]={start:e,end:n}},removeClip:function(t){this.clips[t]=null},initTotalTime:function(){var t=0;this.animStatesList.forEach(function(e){t=Math.max(Math.max.apply(Math,e.keyTime),t)}),this.totalTime=t},initNodeNameMap:function(){this._rootNode&&(this.nodeNameMap=this._rootNode.getChildrenNameMap())},tick:function(t){var e=this;if(!this.paused){if(this.currentTime+=t/1e3*this.timeScale,this.currentTime>this.endTime){if(this.currentLoopCount++,!this.loop||this.currentLoopCount>=this.loop)return void this.stop();this.currentTime=this.startTime}this.animStatesList.forEach(function(t){t.updateNodeState(e.currentTime,e.nodeNameMap[t.nodeName])})}},play:function(t,e){var n=void 0;if("string"==typeof t){var i=this.clips[t];i?(n=i.start,e=i.end):console.warn("no this animation clip name:"+t)}else n=t;void 0===n&&(n=0),void 0===e&&(e=this.totalTime),this.endTime=Math.min(e,this.totalTime),this.startTime=Math.min(n,this.endTime),this.currentTime=this.startTime,this.currentLoopCount=0,this.stop(),this.paused=!1,s._anims.push(this)},stop:function(){this.paused=!0;var t=s._anims,e=t.indexOf(this);-1!==e&&t.splice(e,1)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},clone:function(t){var e=new this.constructor({rootNode:t,animStatesList:this.animStatesList,timeScale:this.timeScale,loop:this.loop,paused:this.paused,currentTime:this.currentTime,startTime:this.startTime,endTime:this.endTime,clips:this.clips});return this.paused||e.play(),e}});t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(13),s=n(15),o=i.create({Extends:r,constructor:function(){o.superclass.constructor.call(this)},load:function(t){return this.loadImg(t.src,t.crossOrigin).then(function(e){var n=Object.assign({},t);return n.image=e,delete n.type,new s(n)}).catch(function(t){throw console.warn("load Texture failed",t.message,t.stack),t})}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(13),s=n(101),o=i.create({Extends:r,constructor:function(){o.superclass.constructor.call(this)},load:function(t){var e=this,n=void 0;return n=t.images&&Array.isArray(t.images)?t.images:[t.right,t.left,t.top,t.bottom,t.front,t.back],Promise.all(n.map(function(n){return e.loadImg(n,t.crossOrigin)})).then(function(e){var n=Object.assign({},t);return delete n.images,delete n.type,delete n.right,delete n.left,delete n.top,delete n.bottom,delete n.front,delete n.back,n.image=e,new s(n)}).catch(function(t){throw console.warn("load CubeTexture failed",t.message,t.stack),t})}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(15),s=n(3),o=s.TEXTURE_CUBE_MAP,a=s.RGB,u=s.LINEAR,c=s.CLAMP_TO_EDGE,h=s.TEXTURE_CUBE_MAP_POSITIVE_X,f=i.create({Extends:r,isCubeTexture:!0,className:"CubeTexture",target:o,internalFormat:a,format:a,magFilter:u,minFilter:u,wrapS:c,wrapT:c,constructor:function(t){f.superclass.constructor.call(this,t),this.image=this.image||[]},_uploadTexture:function(t){var e=this;if(!Array.isArray(this.image)||6!==this.image.length)return void console.error("CubeTexture image must be an Array of length 6",this.image);this.image.forEach(function(n,i){e._glUploadTexture(t,h+i,n)})},right:{get:function(){return this.image[0]},set:function(t){this.image[0]=t}},left:{get:function(){return this.image[1]},set:function(t){this.image[1]=t}},top:{get:function(){return this.image[2]},set:function(t){this.image[2]=t}},bottom:{get:function(){return this.image[3]},set:function(t){this.image[3]=t}},front:{get:function(){return this.image[4]},set:function(t){this.image[4]=t}},back:{get:function(){return this.image[5]},set:function(t){this.image[5]=t}}});t.exports=f},function(t,e,n){"use strict";var i=n(0),r=n(31),s=i.create({Extends:r,isShaderMaterial:!0,className:"ShaderMaterial",vs:"",fs:"",constructor:function(t){s.superclass.constructor.call(this,t)},getRenderOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.superclass.getRenderOption.call(this,t),this.getCustomRenderOption&&(t=this.getCustomRenderOption(t)),t},getCustomRenderOption:null});t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(93),o=n(51),a=n(30),u=n(27),c=n(146),h=n(6),f=n(4),l=null,d=new h(1,1,1),m=new f,_=i.create({isLightShadow:!0,className:"LightShadow",light:null,renderer:null,framebuffer:null,camera:null,width:1024,height:1024,maxBias:.05,minBias:.005,debug:!1,constructor:function(t){this.id=r.generateUUID(this.className),Object.assign(this,t)},createFramebuffer:function(){this.framebuffer||(this.framebuffer=new a(this.renderer,{width:this.width,height:this.height}),this.debug&&this.showShadowMap())},updateLightCamera:function(t){this.light.isDirectionalLight?this.updateDirectionalLightCamera(t):this.light.isSpotLight&&this.updateSpotLightCamera(t)},updateDirectionalLightCamera:function(t){var e=this.light;this.camera.lookAt(e.direction),this.camera.updateViewMatrix(),m.multiply(this.camera.viewMatrix,t.worldMatrix);var n=t.getGeometry(),i=n.getBounds(m);this.camera.near=i.zMin,this.camera.far=i.zMax,this.camera.left=i.xMin,this.camera.right=i.xMax,this.camera.bottom=i.yMin,this.camera.top=i.yMax},updateSpotLightCamera:function(t){var e=this.light;this.camera.lookAt(e.direction),this.camera.fov=2*e.outerCutoff,this.camera.near=.01,this.camera.far=t.far,this.camera.aspect=1,this.camera.updateViewMatrix()},createCamera:function(t){this.camera||(this.light.isDirectionalLight?this.camera=new s:this.light.isSpotLight&&(this.camera=new o),this.camera.addTo(this.light),this.updateLightCamera(t))},createShadowMap:function(t){this.createFramebuffer(),this.createCamera(t);var e=this.renderer,n=this.framebuffer,i=this.camera;l||(l=new c),n.bind(),e.state.viewport(0,0,this.width,this.height),e.clear(d),i.updateViewProjectionMatrix(),u.setCamera(i),e.forceMaterial=l,e.renderScene(),delete e.forceMaterial,n.unbind(),u.setCamera(t),e.viewport()},showShadowMap:function(){var t=this;this.renderer.on("afterRender",function(){t.framebuffer.render(0,.7,.3,.3)})}});t.exports=_},function(t,e){var n=function(){var t=navigator.userAgent,e=document,n=window,i=e.documentElement,r={iphone:/iphone/i.test(t),ipad:/ipad/i.test(t),ipod:/ipod/i.test(t),ios:/iphone|ipad|ipod/i.test(t),android:/android/i.test(t),webkit:/webkit/i.test(t),chrome:/chrome/i.test(t),safari:/safari/i.test(t),firefox:/firefox/i.test(t),ie:/msie/i.test(t),opera:/opera/i.test(t),supportTouch:"ontouchstart"in n,supportCanvas:null!=e.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in n||"orientation"in n.screen,supportDeviceMotion:"ondevicemotion"in n};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),r.supportStorage=!0}catch(t){}var s=r.jsVendor=r.webkit?"webkit":r.firefox?"webkit":r.opera?"o":r.ie?"ms":"",o=r.cssVendor="-"+s+"-",a=e.createElement("div"),u=a.style,c=void 0!=u[s+"Transform"],h=void 0!=u[s+"Perspective"];return h&&(a.id="test3d",u=e.createElement("style"),u.textContent="@media ("+o+"transform-3d){#test3d{height:3px}}",e.head.appendChild(u),i.appendChild(a),h=3==a.offsetHeight,e.head.removeChild(u),i.removeChild(a)),r.supportTransform=c,r.supportTransform3D=h,r}();t.exports=n},function(t,e,n){"use strict";var i={math:n(1),Color:n(6),Euler:n(26),Frustum:n(50),Vector2:n(29),Vector3:n(2),Vector4:n(20),Matrix3:n(21),Matrix4:n(4),Plane:n(36),Quaternion:n(14),Ray:n(37)};t.exports=i},function(t,e,n){"use strict";Object.assign||(Object.assign=n(107)),Object.keys||(Object.keys=n(108)),Object.values||(Object.values=n(109)),"undefined"==typeof Promise&&(window.Promise=n(110))},function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,u=i(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var h in n)s.call(n,h)&&(u[h]=n[h]);if(r){a=r(n);for(var f=0;f<a.length;f++)o.call(n,a[f])&&(u[a[f]]=n[a[f]])}}return u}},function(t,e,n){"use strict";!function(){Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var s,o,a=[];for(s in r)t.call(r,s)&&a.push(s);if(e)for(o=0;o<i;o++)t.call(r,n[o])&&a.push(n[o]);return a}}())}()},function(t,e,n){"use strict";t.exports=function(t){for(var e=Object.keys(t),n=[],i=0;i<e.length;i++)n.push(t[e[i]]);return n}},function(t,e,n){"use strict";t.exports="function"==typeof Promise?Promise:n(111)},function(t,e,n){"use strict";(function(e,n){function i(){for(var t=0;t<S.length;t++)S[t][0](S[t][1]);S=[],p=!1}function r(t,e){S.push([t,e]),p||(p=!0,I(i,0))}function s(t,e){function n(t){u(e,t)}function i(t){h(e,t)}try{t(n,i)}catch(t){i(t)}}function o(t){var e=t.owner,n=e._state,i=e._data,r=t[n],s=t.then;if("function"==typeof r){n=T;try{i=r(i)}catch(t){h(s,t)}}a(s,i)||(n===T&&u(s,i),n===E&&h(s,i))}function a(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var i=e.then;if("function"==typeof i)return i.call(e,function(i){n||(n=!0,e===i?c(t,i):u(t,i))},function(e){n||(n=!0,h(t,e))}),!0}}catch(e){return n||h(t,e),!0}return!1}function u(t,e){t!==e&&a(t,e)||c(t,e)}function c(t,e){t._state===g&&(t._state=v,t._data=e,r(l,t))}function h(t,e){t._state===g&&(t._state=v,t._data=e,r(d,t))}function f(t){t._then=t._then.forEach(o)}function l(t){t._state=T,f(t)}function d(t){t._state=E,f(t),!t._handled&&A&&e.process.emit("unhandledRejection",t._data,t)}function m(t){e.process.emit("rejectionHandled",t)}function _(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof _==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],s(t,this)}var p,g="pending",v="settled",T="fulfilled",E="rejected",M=function(){},A=void 0!==e&&void 0!==e.process&&"function"==typeof e.process.emit,I=void 0===n?setTimeout:n,S=[];_.prototype={constructor:_,_state:g,_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(M),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,this._state===E&&A&&r(m,this)),this._state===T||this._state===E?r(o,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},_.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new _(function(e,n){for(var i,r=[],s=0,o=0;o<t.length;o++)i=t[o],i&&"function"==typeof i.then?i.then(function(t){return s++,function(n){r[t]=n,--s||e(r)}}(o),n):r[o]=i;s||e(r)})},_.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new _(function(e,n){for(var i,r=0;r<t.length;r++)i=t[r],i&&"function"==typeof i.then?i.then(e,n):e(i)})},_.resolve=function(t){return t&&"object"==typeof t&&t.constructor===_?t:new _(function(e){e(t)})},_.reject=function(t){return new _(function(e,n){n(t)})},t.exports=_}).call(e,n(52),n(112).setImmediate)},function(t,e,n){function i(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(113),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function i(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,a(u),u++}function r(t){delete c[t]}function s(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function o(t){if(h)setTimeout(o,0,t);else{var e=c[t];if(e){h=!0;try{s(e)}finally{r(t),h=!1}}}}if(!t.setImmediate){var a,u=1,c={},h=!1,f=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){o(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},a=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;a=function(e){var n=f.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){a=function(t){setTimeout(o,0,t)}}(),l.setImmediate=i,l.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(52),n(114))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function s(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function o(){_&&d&&(_=!1,d.length?m=d.concat(m):p=-1,m.length&&a())}function a(){if(!_){var t=r(o);_=!0;for(var e=m.length;e;){for(d=m,m=[];++p<e;)d&&d[p].run();p=-1,e=m.length}d=null,_=!1,s(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var h,f,l=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var d,m=[],_=!1,p=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new u(t,e)),1!==m.length||_||r(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.prependListener=c,l.prependOnceListener=c,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";var i={Class:n(0),EventMixin:n(10),Fog:n(116),Mesh:n(22),Node:n(11),SkinedMesh:n(64),Stage:n(117),Tween:n(131),Geometry:n(7),GeometryData:n(9),PlaneGeometry:n(135),BoxGeometry:n(136),SphereGeometry:n(137),Camera:n(49),PerspectiveCamera:n(51),OrthographicCamera:n(93),WebGLRenderer:n(66),capabilities:n(16),extensions:n(28),Framebuffer:n(30),VertexArrayObject:n(47),Program:n(46),Buffer:n(48),LoadQueue:n(138),BasicLoader:n(13),GLTFLoader:n(94),TextureLoader:n(99),CubeTextureLoader:n(100),ShaderMaterialLoader:n(142),Texture:n(15),LazyTexture:n(96),CubeTexture:n(101),DataTexture:n(38),Shader:n(39),semantic:n(27),Material:n(31),BasicMaterial:n(18),PBRMaterial:n(95),ShaderMaterial:n(102),AxisHelper:n(143),AxisNetHelper:n(144),Light:n(25),DirectionalLight:n(145),PointLight:n(147),SpotLight:n(148),AmbientLight:n(149),Animation:n(98),AnimationStates:n(97),MeshPicker:n(150),Ticker:n(151),util:n(5),log:n(65),Cache:n(12),browser:n(153),WebGLSupport:n(154),version:"1.5.7",constants:{}};Object.assign(i,n(105)),Object.assign(i.constants,n(3)),"undefined"!=typeof window&&(window.Hilo3d=i),t.exports=i},function(t,e,n){"use strict";var i=n(0),r=n(6),s=n(1),o=i.create({isFog:!0,className:"Fog",constructor:function(t){this.id=s.generateUUID(this.className),this.color=new r(1,1,1,1),this.near=0,this.far=10,this.info=new Float32Array(2),Object.assign(this,t)},getInfo:function(){return this.info[0]=this.near,this.info[1]=this.far,this.info}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(11),s=n(66),o=i.create({Extends:r,isStage:!0,className:"Stage",renderer:null,camera:null,pixelRatio:null,offsetX:0,offsetY:0,constructor:function(t){t.pixelRatio||(t.pixelRatio=Math.min(2,window.devicePixelRatio||1)),o.superclass.constructor.call(this,t),this.initRenderer(t)},initRenderer:function(t){var e=this.canvas=this.createCanvas(t);this.renderer=new s(Object.assign(t,{domElement:e})),this.resize(this.width,this.height,this.pixelRatio,!0)},createCanvas:function(t){var e=void 0;return e=t.canvas?t.canvas:document.createElement("canvas"),t.container&&t.container.appendChild(e),e},resize:function(t,e,n,i){if(void 0===n&&(n=this.pixelRatio),i||this.width!==t||this.height!==this.height||this.pixelRatio!==n){this.width=t,this.height=e,this.pixelRatio=n,this.rendererWidth=t*n,this.rendererHeight=e*n;var r=this.canvas;this.renderer.resize(this.rendererWidth,this.rendererHeight,i),r.style.width=this.width+"px",r.style.height=this.height+"px"}},setOffset:function(t,e){if(this.offsetX!==t||this.offsetY!==e){this.offsetX=t,this.offsetY=e;var n=this.pixelRatio;this.renderer.setOffset(t*n,e*n)}},viewport:function(t,e,n,i){this.resize(n,i,this.pixelRatio,!0),this.setOffset(t,e)},tick:function(t){this.traverseUpdate(t),this.renderer.render(this,this.camera)}});t.exports=o},function(t,e,n){t.exports="#define GLSLIFY 1\n"+n(17)+"\n"+n(24)+"\n\n"+n(67)+"\n"+n(68)+"\n"+n(69)+"\n"+n(70)+"\n"+n(40)+"\n"+n(75)+"\n"+n(41)+"\n"+n(42)+"\n\nvoid main(void) {\n    vec4 diffuse = vec4(0., 0., 0., 1.);\n    vec4 color = vec4(0., 0., 0., 1.);\n\n    "+n(76)+"\n    "+n(77)+"\n    "+n(78)+"\n    "+n(79)+"\n    "+n(43)+"\n    "+n(44)+"\n\n    color.rgb *= color.a;\n    gl_FragColor = color;\n}"},function(t,e,n){t.exports="#define GLSLIFY 1\n"+n(17)+"\n"+n(45)+"\n\nattribute vec3 a_position;\nuniform mat4 u_modelViewProjectionMatrix;\n\n"+n(80)+"\n"+n(81)+"\n"+n(82)+"\n"+n(83)+"\n"+n(84)+"\n"+n(120)+"\n\nvoid main(void) {\n    vec4 pos = vec4(a_position, 1.0);\n    #ifdef HILO_HAS_TEXCOORD0\n        vec2 uv = a_texcoord0;\n    #endif\n    #ifdef HILO_HAS_NORMAL\n        vec3 normal = a_normal;\n    #endif\n    #ifdef HILO_HAS_NORMAL_MAP\n        vec4 tangent = a_tangent;\n    #endif\n\n    "+n(85)+"\n    "+n(121)+"\n    "+n(86)+"\n    "+n(87)+"\n    "+n(88)+"\n    "+n(89)+"\n\n    gl_Position = u_modelViewProjectionMatrix * pos;\n}"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_MORPH_TARGET_COUNT\n    uniform float u_morphWeights[HILO_MORPH_TARGET_COUNT];\n\n    #if HILO_MORPH_TARGET_COUNT > 0\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition0;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal0;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent0;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 1\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition1;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal1;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent1;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 2\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition2;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal2;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent2;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 3\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition3;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal3;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent3;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 4\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition4;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal4;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent4;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 5\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition5;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal5;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent5;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 6\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition6;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal6;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent6;\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 7\n        #ifdef HILO_MORPH_HAS_POSITION\n            attribute vec3 a_morphPosition7;\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            attribute vec3 a_morphNormal7;\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            attribute vec3 a_morphTangent7;\n        #endif\n    #endif\n#endif"},function(t,e){t.exports="#define GLSLIFY 1\n#ifdef HILO_MORPH_TARGET_COUNT\n    #if HILO_MORPH_TARGET_COUNT > 0\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition0 * u_morphWeights[0];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal0 * u_morphWeights[0];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent0 * u_morphWeights[0];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 1\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition1 * u_morphWeights[1];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal1 * u_morphWeights[1];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent1 * u_morphWeights[1];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 2\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition2 * u_morphWeights[2];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal2 * u_morphWeights[2];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent2 * u_morphWeights[2];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 3\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition3 * u_morphWeights[3];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal3 * u_morphWeights[3];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent3 * u_morphWeights[3];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 4\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition4 * u_morphWeights[4];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal4 * u_morphWeights[4];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent4 * u_morphWeights[4];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 5\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition5 * u_morphWeights[5];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal5 * u_morphWeights[5];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent5 * u_morphWeights[5];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 6\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition6 * u_morphWeights[6];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal6 * u_morphWeights[6];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent6 * u_morphWeights[6];\n        #endif\n    #endif\n\n    #if HILO_MORPH_TARGET_COUNT > 7\n        #ifdef HILO_MORPH_HAS_POSITION\n            pos.xyz += a_morphPosition7 * u_morphWeights[7];\n        #endif\n        #if defined(HILO_MORPH_HAS_NORMAL) && defined(HILO_HAS_NORMAL)\n            normal += a_morphNormal7 * u_morphWeights[7];\n        #endif\n        #if defined(HILO_MORPH_HAS_TANGENT) && defined(HILO_HAS_TANGENT)\n            tangent.xyz += a_morphTangent7 * u_morphWeights[7];\n        #endif\n    #endif\n#endif"},function(t,e,n){t.exports="#define GLSLIFY 1\n"+n(17)+"\n"+n(24)+"\n\n// varying vec3 v_fragPos;\n\nvoid main(void) {\n    // gl_FragColor = vec4(gl_FragCoord.x, gl_FragCoord.y, gl_FragCoord.z, 1.0);\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n    // float z = (1.0 - gl_FragCoord.z) / 2.0;\n    // float z = 2.0 * gl_FragCoord.z - 1.0;\n    \n    float z = gl_FragCoord.z;\n    gl_FragColor = vec4(z, z, z, 1.0);\n}"},function(t,e,n){t.exports="#define GLSLIFY 1\n"+n(17)+"\n"+n(24)+"\n\n"+n(67)+"\n"+n(68)+"\n"+n(69)+"\n"+n(124)+"\n"+n(40)+"\n"+n(41)+"\n"+n(42)+"\n\nvoid main(void) {\n    vec4 color = vec4(0., 0., 0., 1.);\n\n    "+n(76)+"\n    "+n(77)+"\n    "+n(125)+"\n    "+n(44)+"\n\n    color.rgb *= color.a;\n    gl_FragColor = color;\n}"},function(t,e){t.exports='#define GLSLIFY 1\nuniform vec4 u_baseColor;\n#ifdef HILO_BASECOLOR_MAP\n    uniform sampler2D u_baseColorMap;\n#endif\nuniform float u_metallic;\n#ifdef HILO_METALLIC_MAP\n    uniform sampler2D u_metallicMap;\n#endif\n  uniform float u_roughness;\n#ifdef HILO_ROUGHNESS_MAP\n    uniform sampler2D u_roughnessMap;\n#endif\n#ifdef HILO_METALLIC_ROUGHNESS\n    uniform sampler2D u_metallicRoughness;\n#endif\n#ifdef HILO_AO_MAP\n    uniform sampler2D u_ao;\n#else\n    uniform float u_ao;\n#endif\n\n#ifdef HILO_DIFFUSE_ENV_MAP\n    uniform samplerCube u_diffuseEnvMap;\n#endif\n#ifdef HILO_SPECULAR_ENV_MAP\n    uniform sampler2D u_brdfLUT;\n    uniform samplerCube u_specularEnvMap;\n#endif\n\n#ifdef HILO_EMISSION_MAP\n    uniform sampler2D u_emission;\n#endif\n\n#ifdef HILO_PBR_SPECULAR_GLOSSINESS\n    uniform vec4 u_specular;\n    uniform float u_glossiness;\n    #ifdef HILO_SPECULAR_GLOSSINESS_MAP\n        uniform sampler2D u_specularGlossinessMap;\n    #endif\n#endif\n\n// PBR Based on https://github.com/KhronosGroup/glTF-WebGL-PBR\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float roughness;\n  float metalness;\n  vec3 baseColor;\n  vec3 reflectance0;\n  vec3 reflectance90;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\n// The following equations model the diffuse term of the lighting equation\n// Implementation of diffuse from "Physically-Based Shading at Disney" by Brent Burley\nvec3 disneyDiffuse(PBRInfo pbrInputs) {\n  float f90 = 2.*pbrInputs.LdotH*pbrInputs.LdotH*pbrInputs.roughness - 0.5;\n\n  return (pbrInputs.baseColor/M_PI)*(1.0+f90*pow((1.0-pbrInputs.NdotL),5.0))*(1.0+f90*pow((1.0-pbrInputs.NdotV),5.0));\n}\n\n// basic Lambertian diffuse, implementation from Lambert\'s Photometria https://archive.org/details/lambertsphotome00lambgoog\nvec3 lambertianDiffuse(PBRInfo pbrInputs) {\n  return pbrInputs.baseColor / M_PI;\n}\n\n// The following equations model the Fresnel reflectance term of the spec equation (aka F())\n// implementation of fresnel from “An Inexpensive BRDF Model for Physically based Rendering” by Christophe Schlick\nvec3 fresnelSchlick2(PBRInfo pbrInputs) {\n    return pbrInputs.reflectance0 + (pbrInputs.reflectance90 - pbrInputs.reflectance0) * pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n// Simplified implementation of fresnel from “An Inexpensive BRDF Model for Physically based Rendering” by Christophe Schlick\nvec3 fresnelSchlick(PBRInfo pbrInputs) {\n  return pbrInputs.metalness + (vec3(1.0) - pbrInputs.metalness) * pow(1.0 - pbrInputs.VdotH, 5.0);\n}\n\n// The following equations model the geometric occlusion term of the spec equation  (aka G())\n// Implementation from “A Reflectance Model for Computer Graphics” by Robert Cook and Kenneth Torrance,\nfloat geometricOcclusionCookTorrance(PBRInfo pbrInputs) {\n  return min(min(2.*pbrInputs.NdotV*pbrInputs.NdotH/pbrInputs.VdotH, 2.*pbrInputs.NdotL*pbrInputs.NdotH/pbrInputs.VdotH),1.0);\n}\n\n// implementation of microfacet occlusion from “An Inexpensive BRDF Model for Physically based Rendering” by Christophe Schlick\nfloat geometricOcclusionSchlick(PBRInfo pbrInputs) {\n  float k = pbrInputs.roughness * 0.79788; // 0.79788 = sqrt(2.0/3.1415);\n  // alternately, k can be defined with\n  // float k = (pbrInputs.roughness + 1)*(pbrInputs.roughness + 1)/8;\n\n  float l = pbrInputs.LdotH / (pbrInputs.LdotH * (1.0 - k) + k);\n  float n = pbrInputs.NdotH / (pbrInputs.NdotH * (1.0 - k) + k);\n  return l * n;\n}\n\n// the following Smith implementations are from “Geometrical Shadowing of a Random Rough Surface” by Bruce G. Smith\nfloat geometricOcclusionSmith(PBRInfo pbrInputs) {\n  float NdotL2 = pbrInputs.NdotL * pbrInputs.NdotL;\n  float NdotV2 = pbrInputs.NdotV * pbrInputs.NdotV;\n  float v = ( -1. + sqrt ( pbrInputs.roughness * (1. - NdotL2 ) / NdotL2 + 1.)) * 0.5;\n  float l = ( -1. + sqrt ( pbrInputs.roughness * (1. - NdotV2 ) / NdotV2 + 1.)) * 0.5;\n  return (1. / max((1. + v + l ),0.000001));\n}\n\nfloat SmithG1_var2(float NdotV, float r) {\n    float tanSquared = (1.0 - NdotV * NdotV) / max((NdotV * NdotV),0.00001);\n    return 2.0 / (1.0 + sqrt(1.0 + r * r * tanSquared));\n}\n\nfloat SmithG1(float NdotV, float r) {\n  return 2.0 * NdotV / (NdotV + sqrt(r*r+(1.0-r*r)*(NdotV*NdotV)));\n}\n\nfloat geometricOcclusionSmithGGX(PBRInfo pbrInputs) {\n    return SmithG1_var2(pbrInputs.NdotL, pbrInputs.roughness) * SmithG1_var2(pbrInputs.NdotV, pbrInputs.roughness);\n}\n\n// The following equation(s) model the distribution of microfacet normals across the area being drawn (aka D())\n// implementation from “Average Irregularity Representation of a Roughened Surface for Ray Reflection” by T. S. Trowbridge, and K. P. Reitz\nfloat GGX(PBRInfo pbrInputs) {\n  float roughnessSq = pbrInputs.roughness*pbrInputs.roughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\n\nvec3 calculateLo(vec3 N, vec3 V, vec3 L, float metallic, float roughness, vec3 diffuseColor, vec3 R0, vec3 R90) {\n    vec3 H = normalize(L + V);\n    float NdotL = clamp(dot(N, L), 0.001, 1.0);\n    float NdotV = abs(dot(N, V)) + 0.001;\n    float NdotH = clamp(dot(N, H), 0.0, 1.0);\n    float LdotH = clamp(dot(L, H), 0.0, 1.0);\n    float VdotH = clamp(dot(V, H), 0.0, 1.0);\n    PBRInfo pbrInputs = PBRInfo(\n        NdotL,\n        NdotV,\n        NdotH,\n        LdotH,\n        VdotH,\n        roughness,\n        metallic,\n        diffuseColor,\n        R0,\n        R90\n    );\n    vec3 F = fresnelSchlick2(pbrInputs);\n    float G = geometricOcclusionSmithGGX(pbrInputs);\n    float D = GGX(pbrInputs);\n    vec3 diffuseContrib = (1.0 - F) * lambertianDiffuse(pbrInputs);\n    vec3 specContrib = F * G * D / (4.0 * NdotL * NdotV);\n    return NdotL * (diffuseContrib + specContrib);\n}'},function(t,e,n){t.exports="#define GLSLIFY 1\nvec4 baseColor = u_baseColor;\n#ifdef HILO_BASECOLOR_MAP\n    baseColor = texture2D(u_baseColorMap, v_texcoord0) * u_baseColor;\n#endif\ncolor.a = baseColor.a;\n\n"+n(43)+"\n\n#ifdef HILO_HAS_LIGHT\n    vec3 viewPos = vec3(0, 0, 0);\n    vec3 N = normal;\n    vec3 V = normalize(viewPos - v_fragPos);\n\n    #ifdef HILO_AO_MAP\n        float ao  = texture2D(u_ao, v_texcoord0).r;\n    #else\n        float ao = u_ao;\n    #endif\n\n    #ifdef HILO_PBR_SPECULAR_GLOSSINESS\n        vec3 specular = u_specular.rgb;\n        float glossiness = u_glossiness;\n        #ifdef HILO_SPECULAR_GLOSSINESS_MAP\n            vec4 specularGlossiness = texture2D(u_specularGlossinessMap, v_texcoord0);\n            specular = specularGlossiness.rgb * specular;\n            glossiness = specularGlossiness.a * glossiness;\n        #endif\n        float roughness = 1.0 - glossiness;\n        float metallic = 0.0;\n        vec3 diffuseColor = baseColor.rgb * (1.0 - max(max(specular.r, specular.g), specular.b));\n        vec3 specularColor = specular;\n    #else\n        float metallic = u_metallic;\n        float roughness = u_roughness;\n        #ifdef HILO_METALLIC_MAP\n            metallic = texture2D(u_metallicMap, v_texcoord0).r * u_metallic;\n        #endif\n        #ifdef HILO_ROUGHNESS_MAP\n            roughness  = texture2D(u_roughnessMap, v_texcoord0).r * u_roughness;\n        #endif\n        #ifdef HILO_METALLIC_ROUGHNESS\n            vec4 metallicRoughness = texture2D(u_metallicRoughness, v_texcoord0);\n            #ifdef HILO_AO_IN_METALLIC_ROUGHNESS\n                ao = metallicRoughness.r;\n            #endif\n            roughness = metallicRoughness.g * u_roughness;\n            metallic = metallicRoughness.b * u_metallic;\n        #endif\n        roughness = clamp(roughness, 0.04, 1.0);\n        metallic = clamp(metallic, 0.0, 1.0);\n        vec3 f0 = vec3(0.04);\n        vec3 diffuseColor = mix(baseColor.rgb * (1.0 - f0), vec3(0., 0., 0.), metallic);\n        vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    #endif\n\n\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n    // For typical incident reflectance range (between 4% to 100%) set the grazing reflectance to 100% for typical fresnel effect.\n    // For very low reflectance range on highly diffuse objects (below 4%), incrementally reduce grazing reflecance to 0%.\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 Lo = vec3(0.0);\n    #ifdef HILO_DIRECTIONAL_LIGHTS\n        for(int i = 0;i < HILO_DIRECTIONAL_LIGHTS;i++){\n            vec3 L = normalize(-u_directionalLightsInfo[i]);\n            vec3 radiance = u_directionalLightsColor[i];\n            float shadow = 1.0;\n            #ifdef HILO_DIRECTIONAL_LIGHTS_SMC\n                if (i < HILO_DIRECTIONAL_LIGHTS_SMC) {\n                    float bias = max(u_directionalLightsShadowBias[i][1] * (1.0 - dot(N, L)), u_directionalLightsShadowBias[i][0]);\n                    shadow = getShadow(u_directionalLightsShadowMap[i], u_directionalLightsShadowMapSize[i], bias, v_fragPos, u_directionalLightSpaceMatrix[i]);\n                }\n            #endif\n\n            Lo += shadow * radiance * calculateLo(N, V, L, metallic, roughness, diffuseColor, specularEnvironmentR0, specularEnvironmentR90);\n        }\n    #endif\n\n    #ifdef HILO_SPOT_LIGHTS\n        for(int i = 0; i < HILO_SPOT_LIGHTS; i++){\n            vec3 lightDir = normalize(-u_spotLightsDir[i]);\n            vec3 distanceVec = u_spotLightsPos[i] - v_fragPos;\n\n            float theta = dot(normalize(distanceVec), lightDir);\n            float epsilon = u_spotLightsCutoffs[i][0] - u_spotLightsCutoffs[i][1];\n            float intensity = clamp((theta - u_spotLightsCutoffs[i][1]) / epsilon, 0.0, 1.0);\n            float attenuation = getPointAttenuation(distanceVec, u_spotLightsInfo[i]);\n            vec3 radiance = intensity * attenuation * u_spotLightsColor[i];\n\n            float shadow = 1.0;\n            #ifdef HILO_SPOT_LIGHTS_SMC\n                if (i < HILO_SPOT_LIGHTS_SMC) {\n                    float bias = max(u_spotLightsShadowBias[i][1] * (1.0 - dot(N, lightDir)), u_spotLightsShadowBias[i][0]);\n                    shadow = getShadow(u_spotLightsShadowMap[i], u_spotLightsShadowMapSize[i], bias, v_fragPos, u_spotLightSpaceMatrix[i]);\n                }\n            #endif\n            Lo += shadow * radiance * calculateLo(N, V, lightDir, metallic, roughness, diffuseColor, specularEnvironmentR0, specularEnvironmentR90);\n        }\n    #endif\n\n    #ifdef HILO_POINT_LIGHTS\n        for(int i = 0; i < HILO_POINT_LIGHTS; i++){\n            vec3 distanceVec = u_pointLightsPos[i] - v_fragPos;\n            vec3 lightDir = normalize(distanceVec);\n\n            float attenuation = getPointAttenuation(distanceVec, u_pointLightsInfo[i]);\n            vec3 radiance = attenuation * u_pointLightsColor[i];\n\n            Lo += radiance * calculateLo(N, V, lightDir, metallic, roughness, diffuseColor, specularEnvironmentR0, specularEnvironmentR90);\n        }\n    #endif\n\n    #ifdef HILO_DIFFUSE_ENV_MAP\n        vec3 diffuseLight = textureCube(u_diffuseEnvMap, N).rgb;\n        color.rgb += ao * diffuseLight * diffuseColor;\n    #endif\n\n    #ifdef HILO_SPECULAR_ENV_MAP\n        vec3 R = -normalize(reflect(V, N));\n        float NdotV = abs(dot(N, V)) + 0.001;\n        vec3 brdf = texture2D(u_brdfLUT, vec2(NdotV, 1.0 - roughness)).rgb;\n        #ifdef HILO_USE_TEX_LOD\n            float mipCount = 9.0; // resolution of 512x512\n            float lod = (roughness * mipCount);\n            vec3 specularLight = textureCubeLodEXT(u_specularEnvMap, R, lod).rgb;\n        #else\n            vec3 specularLight = textureCube(u_specularEnvMap, R).rgb;\n        #endif\n        color.rgb += ao * specularLight * specularColor * (brdf.x + brdf.y);\n    #endif\n\n    #if defined(HILO_AMBIENT_LIGHTS) && !defined(HILO_DIFFUSE_ENV_MAP)\n        color.rgb += u_ambientLightsColor * baseColor.rgb * ao;\n    #endif\n\n    #ifdef HILO_EMISSION_MAP\n        color.rgb += texture2D(u_emission, v_texcoord0).rgb;\n    #endif\n\n    color.rgb += Lo;\n#else\n    color = baseColor;\n#endif"},function(t,e,n){"use strict";var i=n(0),r=i.create({className:"RenderInfo",isRenderInfo:!0,constructor:function(){this.reset()},addFaceCount:function(t){this._currentFaceCount+=t},addDrawCount:function(t){this._currentDrawCount+=t},reset:function(){this.faceCount=Math.floor(this._currentFaceCount),this.drawCount=Math.floor(this._currentDrawCount),this._currentFaceCount=0,this._currentDrawCount=0}});t.exports=r},function(t,e,n){"use strict";var i=n(0),r=n(2),s=n(5),o=new r,a=i.create({className:"RenderList",isRenderList:!0,constructor:function(){this.dict={},this.transparentList=[]},reset:function(){this.dict={},this.transparentList.length=0},traverse:function(t){var e=this.dict;for(var n in e)t(e[n]);this.transparentList.forEach(function(e){t([e])})},addMesh:function(t,e){var n=t.material,i=t.geometry;if(n&&i){if(t.frustumTest&&!e.isMeshVisible(t))return;var r=n.id+"_"+i.id;if(t.instanceId=r,n.transparent)t.worldMatrix.getTranslation(o),o.transformMat4(e.viewProjectionMatrix),t._sortRenderZ=o.z,s.insertToSortedArray(this.transparentList,t,function(t,e){return e._sortRenderZ-t._sortRenderZ});else{(this.dict[r]=this.dict[r]||[]).push(t)}}else console.warn("Mesh must have material and geometry",t)}});t.exports=a},function(t,e,n){"use strict";var i=new ArrayBuffer(1),r={getTypedArray:function(t,e){return this._updateBuffer(e*t.BYTES_PER_ELEMENT),new t(i,0,e)},fillArrayData:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,r=e.length;i<r;i++)t[n+i]=e[i]},_updateBuffer:function(t){i.byteLength<t&&(i=new ArrayBuffer(2*t))}};t.exports=r},function(t,e,n){"use strict";var i=n(0),r=i.create({className:"State",isState:!0,systemFramebuffer:null,constructor:function(t){this.gl=t,this.reset()},reset:function(){this._dict={},this.activeTextureIndex=null,this.textureUnitDict={},this.currentFramebuffer=null,this.preFramebuffer=null,this._pixelStorei={}},enable:function(t){!0!==this._dict[t]&&(this._dict[t]=!0,this.gl.enable(t))},disable:function(t){!1!==this._dict[t]&&(this._dict[t]=!1,this.gl.disable(t))},bindFramebuffer:function(t,e){this.currentFramebuffer!==e&&(this.preFramebuffer=this.currentFramebuffer,this.currentFramebuffer=e,this.gl.bindFramebuffer(t,e))},bindSystemFramebuffer:function(){this.bindFramebuffer(this.gl.FRAMEBUFFER,this.systemFramebuffer)},useProgram:function(t){this.set1("useProgram",t)},depthFunc:function(t){this.set1("depthFunc",t)},depthMask:function(t){this.set1("depthMask",t)},depthRange:function(t,e){this.set2("depthRange",t,e)},cullFace:function(t){this.set1("cullFace",t)},blendFuncSeparate:function(t,e,n,i){this.set4("blendFuncSeparate",t,e,n,i)},blendEquationSeparate:function(t,e){this.set2("blendEquationSeparate",t,e)},pixelStorei:function(t,e){this._pixelStorei[t]!==e&&(this._pixelStorei[t]=e,this.gl.pixelStorei(t,e))},viewport:function(t,e,n,i){this.set4("viewport",t,e,n,i)},activeTexture:function(t){this.activeTextureIndex!==t&&(this.activeTextureIndex=t,this.gl.activeTexture(t))},bindTexture:function(t,e){var n=this.getActiveTextureUnit();n[t]!==e&&(n[t]=e,this.gl.bindTexture(t,e))},getActiveTextureUnit:function(){var t=this.textureUnitDict[this.activeTextureIndex];return t||(t=this.textureUnitDict[this.activeTextureIndex]={}),t},set1:function(t,e){this._dict[t]!==e&&(this._dict[t]=e,this.gl[t](e))},set2:function(t,e,n){var i=this._dict[t];i||(i=this._dict[t]=[]),i[0]===e&&i[1]===n||(i[0]=e,i[1]=n,this.gl[t](e,n))},set3:function(t,e,n,i){var r=this._dict[t];r||(r=this._dict[t]=[]),r[0]===e&&r[1]===n&&r[2]===i||(r[0]=e,r[1]=n,r[2]=i,this.gl[t](e,n,i))},set4:function(t,e,n,i,r){var s=this._dict[t];s||(s=this._dict[t]=[]),s[0]===e&&s[1]===n&&s[2]===i&&s[3]===r||(s[0]=e,s[1]=n,s[2]=i,s[3]=r,this.gl[t](e,n,i,r))},get:function(t){return this._dict[t]}});t.exports=r},function(t,e,n){"use strict";var i=n(0),r=n(4),s=n(2),o=n(5),a=new r,u=new s,c=new Float32Array([0,0,0]),h=i.create({constructor:function(t){this.ambientLights=[],this.directionalLights=[],this.pointLights=[],this.spotLights=[],this.lightInfo={AMBIENT_LIGHTS:0,POINT_LIGHTS:0,DIRECTIONAL_LIGHTS:0,SPOT_LIGHTS:0,uid:0},Object.assign(this,t)},getRenderOption:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;return o.each(this.lightInfo,function(i,r){if("uid"!==r&&i){e[r]=i,n=!0;var s=t.getShadowMapCount(r);s&&(e[r+"_SMC"]=s)}}),n&&(e.HAS_LIGHT=1),e},addLight:function(t){var e=null;t.isAmbientLight?e=this.ambientLights:t.isDirectionalLight?e=this.directionalLights:t.isPointLight?e=this.pointLights:t.isSpotLight?e=this.spotLights:console.warn("Not support this light:",t),e&&(t.shadow?e.unshift(t):e.push(t))},getDirectionalInfo:function(t){var e=[],n=[],i=[],r=[],s=[],o=[];this.directionalLights.forEach(function(u,c){var h=3*c;u.color.toRGBArray(e,h),u.getViewDirection(t).toArray(n,h),u.shadow&&u.lightShadow&&(i.push(u.lightShadow.framebuffer.texture),r.push(u.lightShadow.width),r.push(u.lightShadow.height),o.push(u.lightShadow.minBias,u.lightShadow.maxBias),a.copy(t.worldMatrix),a.premultiply(u.lightShadow.camera.viewProjectionMatrix),a.toArray(s,16*c))});var u={colors:new Float32Array(e),infos:new Float32Array(n)};return i.length&&(u.shadowMap=i,u.shadowMapSize=new Float32Array(r),u.shadowBias=new Float32Array(o),u.lightSpaceMatrix=new Float32Array(s)),u},getSpotInfo:function(t){var e=[],n=[],i=[],r=[],s=[],o=[],c=[],h=[],f=[];this.spotLights.forEach(function(l,d){var m=3*d;l.color.toRGBArray(e,m),l.toInfoArray(n,m),l.getViewDirection(t).toArray(r,m),s.push(l._cutoffCos,l._outerCutoffCos),t.getModelViewMatrix(l,a),a.getTranslation(u),u.toArray(i,m),l.shadow&&l.lightShadow&&(o.push(l.lightShadow.framebuffer.texture),c.push(l.lightShadow.width),c.push(l.lightShadow.height),f.push(l.lightShadow.minBias,l.lightShadow.maxBias),a.copy(t.worldMatrix),a.premultiply(l.lightShadow.camera.viewProjectionMatrix),a.toArray(h,16*d))});var l={colors:new Float32Array(e),infos:new Float32Array(n),poses:new Float32Array(i),dirs:new Float32Array(r),cutoffs:new Float32Array(s)};return o.length&&(l.shadowMap=o,l.shadowMapSize=new Float32Array(c),l.shadowBias=new Float32Array(f),l.lightSpaceMatrix=new Float32Array(h)),l},getPointInfo:function(t){var e=[],n=[],i=[];return this.pointLights.forEach(function(r,s){var o=3*s;r.color.toRGBArray(e,o),r.toInfoArray(n,o),t.getModelViewMatrix(r,a),a.getTranslation(u),u.toArray(i,o)}),{colors:new Float32Array(e),infos:new Float32Array(n),poses:new Float32Array(i)}},getAmbientInfo:function(){return c[0]=c[1]=c[2]=0,this.ambientLights.forEach(function(t){var e=t.color,n=t.amount;c[0]+=e.r*n,c[1]+=e.g*n,c[2]+=e.b*n}),c[0]=Math.min(1,c[0]),c[1]=Math.min(1,c[1]),c[2]=Math.min(1,c[2]),c},updateInfo:function(t){var e=this.lightInfo,n=this.ambientLights,i=this.directionalLights,r=this.pointLights,s=this.spotLights;e.AMBIENT_LIGHTS=n.length,e.POINT_LIGHTS=r.length,e.DIRECTIONAL_LIGHTS=i.length,e.SPOT_LIGHTS=s.length,e.uid=[e.AMBIENT_LIGHTS,e.POINT_LIGHTS,e.DIRECTIONAL_LIGHTS,e.SPOT_LIGHTS].join("_"),this.directionalInfo=this.getDirectionalInfo(t),this.pointInfo=this.getPointInfo(t),this.spotInfo=this.getSpotInfo(t),this.ambientInfo=this.getAmbientInfo()},getInfo:function(){return this.lightInfo},reset:function(){this.ambientLights.length=0,this.directionalLights.length=0,this.pointLights.length=0,this.spotLights.length=0},getShadowMapCount:function(t){var e=[];"POINT_LIGHTS"===t?e=this.pointLights:"DIRECTIONAL_LIGHTS"===t?e=this.directionalLights:"SPOT_LIGHTS"===t&&(e=this.spotLights);var n=0;return e.forEach(function(t){n+=t.shadow?1:0}),n},createShadowMap:function(t,e){this.directionalLights.forEach(function(n){n.createShadowMap(t,e)}),this.spotLights.forEach(function(n){n.createShadowMap(t,e)})}});t.exports=h},function(t,e,n){"use strict";var i=n(132);i.Ease=n(133),t.exports=i},function(t,e,n){var i=n(19),r=function(){function t(){return+new Date}return i.create({constructor:function(t,e,n,i){var r=this;r.target=t,r._startTime=0,r._seekTime=0,r._pausedTime=0,r._pausedStartTime=0,r._reverseFlag=1,r._repeatCount=0,3==arguments.length&&(i=n,n=e,e=null);for(var s in i)r[s]=i[s];r.setProps(e,n),!i.duration&&i.time&&(r.duration=i.time||0,r.time=0)},target:null,duration:1e3,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(t,e){var n=this,i=n.target,r=t||e,s=n._fromProps={},o=n._toProps={};t=t||i,e=e||i;for(var a in r)o[a]=e[a]||0,i[a]=s[a]=t[a]||0;return n},start:function(){var e=this;return e._startTime=t()+e.delay,e._seekTime=0,e._pausedTime=0,e.paused=!1,r.add(e),e},stop:function(){return r.remove(this),this},pause:function(){var e=this;return e.paused=!0,e._pausedStartTime=t(),e},resume:function(){var e=this;return e.paused=!1,e._pausedStartTime&&(e._pausedTime+=t()-e._pausedStartTime),e._pausedStartTime=0,e},seek:function(e,n){var i=this,s=t();return i._startTime=s,i._seekTime=e,i._pausedTime=0,void 0!==n&&(i.paused=n),i._update(s,!0),r.add(i),i},link:function(t){var e,n,i=this,s=t.delay,o=i._startTime;return"string"==typeof s&&(e=0==s.indexOf("+"),n=0==s.indexOf("-"),s=e||n?Number(s.substr(1))*(e?1:-1):Number(s)),t.delay=s,t._startTime=e||n?o+i.duration+s:o+s,i._next=t,r.remove(t),i},_render:function(t){var e,n=this,i=n.target,r=n._fromProps;for(e in r)i[e]=r[e]+(n._toProps[e]-r[e])*t},_update:function(e,n){var i=this;if(!i.paused||n){var s=e-i._startTime-i._pausedTime+i._seekTime;if(!(s<0)){var o,a=s/i.duration,u=!1;a=a<=0?0:a>=1?1:a;var c=i.ease?i.ease(a):a;i.reverse&&(i._reverseFlag<0&&(a=1-a,c=1-c),a<1e-7&&(i.repeat>0&&i._repeatCount++>=i.repeat||0==i.repeat&&!i.loop?u=!0:(i._startTime=t(),i._pausedTime=0,i._reverseFlag*=-1))),0==i.time&&(o=i.onStart)&&o.call(i,i),i.time=s,i._render(c),(o=i.onUpdate)&&o.call(i,a,i),a>=1&&(i.reverse?(i._startTime=t(),i._pausedTime=0,i._reverseFlag*=-1):i.loop||i.repeat>0&&i._repeatCount++<i.repeat?(i._startTime=t()+i.repeatDelay,i._pausedTime=0):u=!0);var h=i._next;if(h&&h.time<=0){var f=h._startTime;f>0&&f<=e?(h._render(a),h.time=s,r.add(h)):u&&(f<0||f>e)&&h.start()}return u?((o=i.onComplete)&&o.call(i,i),!0):void 0}}},Statics:{_tweens:[],tick:function(){var e,n,i=r._tweens,s=i.length;for(n=0;n<s;n++)(e=i[n])&&e._update(t())&&(i.splice(n,1),n--);return r},add:function(t){var e=r._tweens;return-1==e.indexOf(t)&&e.push(t),r},remove:function(t){var e,n;if(t instanceof Array){for(e=0,n=t.length;e<n;e++)r.remove(t[e]);return r}var i=r._tweens;if(t instanceof r)(e=i.indexOf(t))>-1&&i.splice(e,1);else for(e=0;e<i.length;e++)i[e].target===t&&(i.splice(e,1),e--);return r},removeAll:function(){return r._tweens.length=0,r},fromTo:function(t,e,n,i){i=i||{};var s=t instanceof Array;t=s?t:[t];var o,a,u=i.stagger,c=[];for(a=0;a<t.length;a++)o=new r(t[a],e,n,i),u&&(o.delay=(i.delay||0)+(a*u||0)),o.start(),c.push(o);return s?c:o},to:function(t,e,n){return r.fromTo(t,null,e,n)},from:function(t,e,n){return r.fromTo(t,e,null,n)}}})}();t.exports=r},function(t,e){var n=function(){function t(t,e,n,i,r){return t=t||{},e&&(t.EaseIn=e),n&&(t.EaseOut=n),i&&(t.EaseInOut=i),r&&(t.EaseNone=r),t}var e=t(null,null,null,null,function(t){return t}),n=t(null,function(t){return t*t},function(t){return-t*(t-2)},function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}),i=t(null,function(t){return t*t*t},function(t){return--t*t*t+1},function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}),r=t(null,function(t){return t*t*t*t},function(t){return-(--t*t*t*t-1)},function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}),s=t(null,function(t){return t*t*t*t*t},function(t){return(t-=1)*t*t*t*t+1},function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}),o=Math,a=o.PI,u=.5*a,c=o.sin,h=o.cos,f=o.pow,l=o.sqrt,d=t(null,function(t){return 1-h(t*u)},function(t){return c(t*u)},function(t){return-.5*(h(a*t)-1)}),m=t(null,function(t){return 0==t?0:f(2,10*(t-1))},function(t){return 1==t?1:1-f(2,-10*t)},function(t){return 0==t||1==t?t:(t*=2)<1?.5*f(2,10*(t-1)):.5*(2-f(2,-10*(t-1)))}),_=t(null,function(t){return-(l(1-t*t)-1)},function(t){return l(1- --t*t)},function(t){return(t/=.5)<1?-.5*(l(1-t*t)-1):.5*(l(1-(t-=2)*t)+1)}),p=t({a:1,p:.4,s:.1,config:function(t,e){p.a=t,p.p=e,p.s=e/(2*a)*Math.asin(1/t)||0}},function(t){return-p.a*f(2,10*(t-=1))*c((t-p.s)*(2*a)/p.p)},function(t){return p.a*f(2,-10*t)*c((t-p.s)*(2*a)/p.p)+1},function(t){return(t*=2)<1?p.a*f(2,10*(t-=1))*c((t-p.s)*(2*a)/p.p)*-.5:p.a*f(2,-10*(t-=1))*c((t-p.s)*(2*a)/p.p)*.5+1}),g=t({o:1.70158,s:2.59491,config:function(t){g.o=t,g.s=1.525*t}},function(t){return t*t*((g.o+1)*t-g.o)},function(t){return(t-=1)*t*((g.o+1)*t+g.o)+1},function(t){return(t*=2)<1?t*t*((g.s+1)*t-g.s)*.5:.5*((t-=2)*t*((g.s+1)*t+g.s)+2)}),v=t(null,function(t){return 1-v.EaseOut(1-t)},function(t){return(t/=1)<.36364?7.5625*t*t:t<.72727?7.5625*(t-=.54545)*t+.75:t<.90909?7.5625*(t-=.81818)*t+.9375:7.5625*(t-=.95455)*t+.984375},function(t){return t<.5?.5*v.EaseIn(2*t):.5*v.EaseOut(2*t-1)+.5});return{Linear:e,Quad:n,Cubic:i,Quart:r,Quint:s,Sine:d,Expo:m,Circ:_,Elastic:p,Back:g,Bounce:v}}();t.exports=n},function(t,e,n){"use strict";var i=n(0),r=n(2),s=new r,o=i.create({radius:0,constructor:function(t){Object.assign(this,t),this.center||(this.center=new r(0,0,0))},clone:function(){var t=new o;return t.copy(this),t},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},fromPoints:function(t){for(var e=this.center,n=0,i=0;i<t.length;i+=3){var r=t[i]-e.x,s=t[i+1]-e.y,o=t[i+2]-e.z;n=Math.max(r*r+s*s+o*o,n)}this.radius=Math.sqrt(n)},transformMat4:function(t){this.center.transformMat4(t);var e=t.getScaling(s);this.radius*=Math.max(e.x,e.y,e.z)}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(7),s=n(9),o=n(3),a=o.FRONT,u=o.BACK,c=[0,0,1],h=i.create({Extends:r,isPlaneGeometry:!0,className:"PlaneGeometry",width:1,height:1,widthSegments:1,heightSegments:1,constructor:function(t){h.superclass.constructor.call(this,t),this.build()},build:function(){for(var t=this.widthSegments,e=this.heightSegments,n=(t+1)*(e+1),i=this.width/t,r=this.height/e,o=new Float32Array(3*n),a=new Float32Array(3*n),u=new Float32Array(2*n),c=new Uint16Array(t*e*6),h=0,f=0;f<=e;f++)for(var l=0;l<=t;l++){var d=f*(t+1)+l;if(o[3*d]=l*i-this.width/2,o[3*d+1]=this.height/2-f*r,a[3*d]=0,a[3*d+1]=0,a[3*d+2]=1,u[2*d]=l/t,u[2*d+1]=1-f/e,f<e&&l<t){var m=(f+1)*(t+1)+l;c[h++]=d,c[h++]=m,c[h++]=m+1,c[h++]=d,c[h++]=m+1,c[h++]=d+1}}this.vertices=new s(o,3),this.indices=new s(c,1),this.normals=new s(a,3),this.uvs=new s(u,2)},_raycast:function(t,e){var n=t.origin.z,i=t.direction.z;if(e===a&&(i>0||n<0))return null;if(e===u&&(i<0||n>0))return null;var r=t.intersectsPlane(c,0);if(r){var s=r.x,o=r.y,h=.5*this.width,f=.5*this.height;if(s>=-h&&s<=h&&o>=-f&&o<=f)return[r]}return null}});t.exports=h},function(t,e,n){"use strict";var i=n(0),r=n(7),s=n(9),o=i.create({Extends:r,isBoxGeometry:!0,className:"BoxGeometry",width:1,height:1,depth:1,widthSegments:1,heightSegments:1,depthSegments:1,constructor:function(t){o.superclass.constructor.call(this,t),this.isSegments()?this.buildWithSegments():this.build()},buildWithSegments:function(){var t=this.width,e=this.height,n=this.depth,i=this.widthSegments,r=this.heightSegments,o=this.depthSegments,a=(r+1)*(o+1),u=(i+1)*(o+1),c=(i+1)*(r+1),h=r*o*6,f=i*o*6,l=i*r*6,d=2*(a+u+c),m=new Float32Array(3*d),_=new Float32Array(3*d),p=new Float32Array(2*d),g=new Uint16Array(2*(h+f+l));this.vertices=new s(m,3),this.normals=new s(_,3),this.uvs=new s(p,2),this.indices=new s(g,1);var v=[0,0];this.buildPlane(v,2,1,0,-1,1,n,e,t/2,o,r),this.buildPlane(v,2,1,0,1,1,n,e,-t/2,o,r),this.buildPlane(v,0,2,1,1,-1,t,n,e/2,i,o),this.buildPlane(v,0,2,1,1,1,t,n,-e/2,i,o),this.buildPlane(v,0,1,2,1,1,t,e,n/2,i,r),this.buildPlane(v,0,1,2,-1,1,t,e,-n/2,i,r)},buildPlane:function(t,e,n,i,r,s,o,a,u,c,h){for(var f=o/c,l=a/h,d=o/2,m=a/2,_=t[0],p=t[1],g=this.vertices.data,v=this.normals.data,T=this.uvs.data,E=this.indices.data,M=0;M<=h;M++)for(var A=(M*l-m)*s,I=0;I<=c;I++){if(g[3*_+e]=(I*f-d)*r,g[3*_+n]=A,g[3*_+i]=u,v[3*_+e]=0,v[3*_+n]=0,v[3*_+i]=u<0?-1:1,T[2*_]=I/c,T[2*_+1]=1-M/h,I<c&&M<h){var S=t[0]+(M+1)*(c+1)+I;E[p++]=S,E[p++]=_,E[p++]=S+1,E[p++]=S+1,E[p++]=_,E[p++]=_+1}_++}t[0]=_,t[1]=p},build:function(){var t=new Float32Array(72),e=new Uint16Array(36);this.vertices=new s(t,3),this.indices=new s(e,1);var n=this.width/2,i=this.height/2,r=this.depth/2,o=[-n,-i,-r],a=[n,-i,-r],u=[n,i,-r],c=[-n,i,-r],h=[-n,-i,r],f=[n,-i,r],l=[n,i,r],d=[-n,i,r];this.addRect(f,a,u,l),this.addRect(o,h,d,c),this.addRect(d,l,u,c),this.addRect(o,a,f,h),this.addRect(h,f,l,d),this.addRect(a,o,c,u)},isSegments:function(){return this.widthSegments>1||this.heightSegments>1||this.depthSegments>1},setFrontUV:function(t){if(this.isSegments())return void console.warn("segmented BoxGeometry dont support setFrontUV!");this.setVertexUV(32,t)},setRightUV:function(t){if(this.isSegments())return void console.warn("segmented BoxGeometry dont support setRightUV!");this.setVertexUV(0,t)},setBackUV:function(t){if(this.isSegments())return void console.warn("segmented BoxGeometry dont support setBackUV!");this.setVertexUV(40,t)},setLeftUV:function(t){if(this.isSegments())return void console.warn("segmented BoxGeometry dont support setLeftUV!");this.setVertexUV(8,t)},setTopUV:function(t){if(this.isSegments())return void console.warn("segmented BoxGeometry dont support setTopUV!");this.setVertexUV(16,t)},setBottomUV:function(t){if(this.isSegments())return void console.warn("segmented BoxGeometry dont support setBottomUV!");this.setVertexUV(24,t)},setAllRectUV:function(t){if(this.isSegments())return void console.warn("segmented BoxGeometry dont support setAllRectUV!");for(var e=0;e<6;e++)this.setVertexUV(8*e,t)},_raycast:function(t,e){return o.superclass._raycast.call(this,t,e)}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(7),s=n(9),o=i.create({Extends:r,isPlaneGeometry:!0,className:"SphereGeometry",radius:1,heightSegments:16,widthSegments:32,constructor:function(t){o.superclass.constructor.call(this,t),this.build()},build:function(){for(var t=this.radius,e=this.heightSegments,n=this.widthSegments,i=(n+1)*(e+1),r=n*e,o=new Float32Array(3*i),a=new Float32Array(4*i),u=new Float32Array(2*i),c=new Uint16Array(6*r),h=0,f=0,l=0,d=0,m=0,_=2*Math.PI,p=Math.PI,g=0;g<=e;g++)for(var v=g/e,T=p*v,E=Math.cos(T)*t,M=Math.sin(T)*t,A=0;A<=n;A++){var I=A/n,S=_*I,O=Math.cos(S),L=Math.sin(S),R=O*M,y=L*M,x=L,N=-O;if(a[l++]=x,a[l++]=0,a[l++]=N,a[l++]=1,o[f++]=R,o[f++]=E,o[f++]=y,u[d++]=I,u[d++]=v,g>0&&A>0){var b=m,P=b-1,w=P-n-1,C=b-n-1;c[h++]=w,c[h++]=C,c[h++]=b,c[h++]=w,c[h++]=b,c[h++]=P}m++}this.vertices=new s(o,3),this.indices=new s(c,1),this.uvs=new s(u,2),this.tangents=new s(a,4),this.normals=new s(new Float32Array(o),3)},_raycast:function(t,e){return o.superclass._raycast.call(this,t,e)}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(10),s=n(5),o=n(13),a=n(94),u=n(99),c=n(100),h={Texture:u,CubeTexture:c,glb:a,gltf:a},f=i.create({Mixes:r,Statics:{addLoader:function(t,e){h[t]=e}},constructor:function(t){this._source=[],this.add(t)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(t){return t&&(t=Array.isArray(t)?t:[t],this._source=this._source.concat(t)),this},get:function(t){if(!t)return null;for(var e=this._source,n=0;n<e.length;n++){var i=e[n];if(i.id===t||i.src===t)return i}return null},getContent:function(t){var e=this.get(t);return e&&e.content},start:function(){return this._loadNext(),this},_loadNext:function(){var t=this,e=this._source,n=e.length;if(this._loaded>=n)return void this.fire("complete");if(this._currentIndex<n-1&&this._connections<this.maxConnections){var i=++this._currentIndex,r=e[i],s=this._getLoader(r);s&&(this._connections++,s.load(r).then(function(e){t._onItemLoad(i,e)},function(e){t._onItemError(i,e)})),this._loadNext()}},_getLoader:function(t){var e=t.loader;if(e)return e;var n=t.type||s.getExtension(t.src);return new(h[n]||o)},_onItemLoad:function(t,e){var n=this._source[t];n.loaded=!0,n.content=e,this._connections--,this._loaded++,this.fire("load",n),this._loadNext()},_onItemError:function(t,e){var n=this._source[t];n.error=e,this._connections--,this._loaded++,this.fire("error",n),this._loadNext()},getSize:function(t){for(var e=0,n=this._source,i=0;i<n.length;i++){var r=n[i];e+=(t?r.loaded&&r.size:r.size)||0}return e},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length},getAllContent:function(){return this._source.map(function(t){return t.content})}});t.exports=f},function(t,e,n){"use strict";var i=n(0),r=n(10),s=i.create({Mixes:r,Statics:{PENDING:1,LOADED:2,FAILED:3},enabled:!0,constructor:function(){this._files={}},update:function(t,e,n){if(this.enabled){var i={key:t,state:e,data:n};this._files[t]=i,this.fire("update",i),this.fire("update:"+i.key,i)}},get:function(t){return this.enabled?this._files[t]:null},remove:function(t){delete this._files[t]},clear:function(){this._files={}},wait:function(t){var e=this;return t?t.state===s.LOADED?Promise.resolve(t.data):t.state===s.FAILED?Promise.reject():new Promise(function(n,i){e.on("update:"+t.key,function(t){var e=t.detail;e.state===s.LOADED?n(e.data):e.state===s.FAILED&&i(e.data)},!0)}):Promise.reject()}});t.exports=s},function(t,e,n){"use strict";var i=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(0),s=n(11),o=n(18),a=n(95),u=n(7),c=n(141),h=n(9),f=n(22),l=n(64),d=n(96),m=n(1),_=n(4),p=n(6),g=n(5),v=n(97),T=n(98),E=n(51),M=n(3),A=M.BLEND,I=M.DEPTH_TEST,S=M.CULL_FACE,O=M.FRONT,L=M.BACK,R=M.FRONT_AND_BACK,y={5120:[1,Int8Array],5121:[1,Uint8Array],5122:[2,Int16Array],5123:[2,Uint16Array],5125:[4,Uint32Array],5126:[4,Float32Array]},x={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},N={POSITION:{name:"vertices",decodeMatName:"positionDecodeMat"},TEXCOORD_0:{name:"uvs",decodeMatName:"uvDecodeMat"},NORMAL:{name:"normals",decodeMatName:"normalDecodeMat"},JOINT:{name:"skinIndices"},JOINTS_0:{name:"skinIndices"},WEIGHT:{name:"skinWeights"},WEIGHTS_0:{name:"skinWeights"},TANGENT:{name:"tangents"}},b=r.create({Statics:{MAGIC:"glTF"},isProgressive:!1,isUnQuantizeInShader:!0,preHandlerImageURI:null,customMaterialCreator:null,src:"",constructor:function(t,e){Object.assign(this,e),this.content=t},parse:function(){if(this.content instanceof ArrayBuffer){var t=this.content;if(g.convertUint8ArrayToString(new Uint8Array(t,0,4))===b.MAGIC)this.parseBinary(t);else{var e=g.convertUint8ArrayToString(new Uint8Array(t),!0);this.json=JSON.parse(e)}}else this.json=JSON.parse(this.content);this.glTFVersion=parseFloat(this.json.asset.version),this.glTFVersion>=2&&(this.isGLTF2=!0),console.log("glTFVersion",this.glTFVersion),this.parseExtensionUsed()},parseExtensionUsed:function(){var t=this;this.extensionsUsed={},g.each(this.json.extensionsUsed,function(e){t.extensionsUsed[e]=!0}),this.extensionsUsed.WEB3D_quantized_attributes||(this.isUnQuantizeInShader=!1)},parseBinary:function(t){this.isBinary=!0;var e=new DataView(t),n=e.getUint32(4,!0),i=e.getUint32(8,!0),r=void 0;console.log("parseBinary",n,i);var s=12;if(n<2){var o=e.getUint32(s,!0);r=new Uint8Array(t,20,o),r=g.convertUint8ArrayToString(r,!0),this.json=JSON.parse(r),this.binaryBody=t.slice(20+o)}else{if(2!==n)throw new Error("Dont support glTF version "+n);for(;s<i;){var a=e.getUint32(s,!0),u=e.getUint32(s+4,!0);1313821514===u?(r=new Uint8Array(t,s+8,a),r=g.convertUint8ArrayToString(r,!0),this.json=JSON.parse(r)):5130562===u&&(this.binaryBody=t.slice(s+8,s+8+a)),s+=8+a}}},loadResources:function(t){var e=this;return this.isBinary?this.loadBuffers(t).then(function(){return e.loadTextures(t)}):Promise.all([this.loadBuffers(t),this.loadTextures(t)])},loadBuffers:function(t){var e=this;return this.buffers={},this.isBinary?(this.isGLTF2?this.buffers[0]=this.binaryBody:this.buffers.binary_glTF=this.binaryBody,this.parseBufferViews(),Promise.resolve()):Promise.all(Object.keys(this.json.buffers).map(function(n){var i=g.getRelativePath(e.src,e.json.buffers[n].uri);return t.loadRes(i,"buffer").then(function(t){e.buffers[n]=t})})).then(function(){e.parseBufferViews()})},getImageUri:function(t){var e=this.json.images[t],n=e.uri;if(e.extensions&&e.extensions.KHR_binary_glTF){var i=e.extensions.KHR_binary_glTF,r=this.bufferViews[i.bufferView],s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return g.getBlobUrl(i.mimeType,s)}if(!n&&"bufferView"in e){var o=this.bufferViews[e.bufferView],a=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);return g.getBlobUrl(e.mimeType,a)}return n},getUsedTextureNameMap:function(){var t=this,e={};return g.each(this.json.materials,function(n){var i=n,r=!1;if(n.extensions&&n.extensions.KHR_materials_common&&(r=!0,i=n.extensions.KHR_materials_common.values),t.isGLTF2&&!r){if(i.normalTexture&&(e[i.normalTexture.index]=!0),i.occlusionTexture&&(e[i.occlusionTexture.index]=!0),i.emissiveTexture&&(e[i.emissiveTexture.index]=!0),i.transparencyTexture&&(e[i.transparencyTexture.index]=!0),i.extensions&&i.extensions.KHR_materials_pbrSpecularGlossiness){var s=i.extensions.KHR_materials_pbrSpecularGlossiness;s.diffuseTexture&&(e[s.diffuseTexture.index]=!0),s.specularGlossinessTexture&&(e[s.specularGlossinessTexture.index]=!0)}else if(i.pbrMetallicRoughness){var o=i.pbrMetallicRoughness;o.baseColorTexture&&(e[o.baseColorTexture.index]=!0),o.metallicRoughnessTexture&&(e[o.metallicRoughnessTexture.index]=!0)}}else r||(i=n.values),["diffuse","specular","emission","ambient","transparency","normalMap"].forEach(function(n){g.isStrOrNumber(i[n])&&t.json.textures[i[n]]&&(e[i[n]]=!0)})}),e},loadTextures:function(){var t=this;if(this.textures={},!this.json.textures)return Promise.resolve();var e=this.getUsedTextureNameMap();return Promise.all(Object.keys(this.json.textures).filter(function(t){return e[t]}).map(function(e){var n=t.json.textures[e],i=t.getImageUri(n.source);i=g.getRelativePath(t.src,i),t.preHandlerImageURI&&(i=t.preHandlerImageURI(i,e));var r=new d(n);return r.autoLoad=t.isProgressive,r.crossOrigin=!0,r.src=i,r.name=n.name||e,t.json.samplers&&Object.assign(r,t.json.samplers[n.sampler]),t.textures[e]=r,t.isProgressive?Promise.resolve():r.load()}))},parseBufferViews:function(){var t=this;this.bufferViews={},g.each(this.json.bufferViews,function(e,n){var i=t.buffers[e.buffer],r=e.byteOffset||0,s=e.byteLength;t.bufferViews[n]={id:m.generateUUID("bufferView"),byteOffset:r,byteLength:s,buffer:i,byteStride:e.byteStride}}),this.isBinary||delete this.buffers},getColorOrTexture:function(t){return Array.isArray(t)?new p(t[0],t[1],t[2]):this.textures[t]},createPBRMaterial:function(t){var e=new a,n=t;if("BLEND"===n.alphaMode?e.transparent=!0:"MASK"===n.alphaMode&&(e.alphaCutoff="alphaCutoff"in n?n.alphaCutoff:.5),n.doubleSided?e.side=R:e.side=O,n.normalTexture&&(e.normalMap=this.textures[n.normalTexture.index]),n.occlusionTexture&&(e.ao=this.textures[n.occlusionTexture.index]),n.emissiveTexture&&(e.emission=this.textures[n.emissiveTexture.index]),n.transparencyTexture&&(e.transparency=this.textures[n.transparencyTexture.index]),n.extensions&&n.extensions.KHR_materials_pbrSpecularGlossiness){var i=n.extensions.KHR_materials_pbrSpecularGlossiness;i.diffuseFactor&&e.baseColor.fromArray(i.diffuseFactor),i.diffuseTexture&&(e.baseColorMap=this.textures[i.diffuseTexture.index]),i.specularFactor&&(e.specular.fromArray(i.specularFactor),e.specular.a=1),"glossinessFactor"in i&&(e.glossiness=i.glossinessFactor),i.specularGlossinessTexture&&(e.specularGlossinessMap=this.textures[i.specularGlossinessTexture.index]),e.isSpecularGlossiness=!0}else if(n.pbrMetallicRoughness){var r=n.pbrMetallicRoughness;r.baseColorFactor&&e.baseColor.fromArray(r.baseColorFactor),r.baseColorTexture&&(e.baseColorMap=this.textures[r.baseColorTexture.index]),r.metallicRoughnessTexture&&(e.metallicRoughness=this.textures[r.metallicRoughnessTexture.index],e.ao===e.metallicRoughness&&(e.ao=1,e.aoInMetallicRoughness=!0)),"roughnessFactor"in r&&(e.roughness=r.roughnessFactor),"metallicFactor"in r&&(e.metallic=r.metallicFactor)}return e},createKMCMaterial:function(t,e){var n=new o,i=void 0;return e?(i=e.values,n.lightType=e.technique):i=t.values,n.diffuse=this.getColorOrTexture(i.diffuse)||n.diffuse,n.specular=this.getColorOrTexture(i.specular)||n.specular,n.emission=this.getColorOrTexture(i.emission)||n.emission,n.ambient=this.getColorOrTexture(i.ambient)||n.ambient,i.normalMap&&(n.normalMap=this.getColorOrTexture(i.normalMap)),"number"==typeof i.transparency?(n.transparency=i.transparency,n.transparency<1&&(n.transparent=!0)):"string"==typeof i.transparency&&(n.transparency=this.getColorOrTexture(i.transparency),n.transparent=!0),!0===i.transparent&&(n.transparent=!0),"shininess"in i&&(n.shininess=i.shininess),n},parseMaterials:function(){var t=this;this.materials={},g.each(this.json.materials,function(e,n){if(t.customMaterialCreator)return void(t.materials[n]=t.customMaterialCreator(n,e,t.json));var i=null;e.extensions&&e.extensions.KHR_materials_common&&(i=e.extensions.KHR_materials_common);var r=void 0;r=t.isGLTF2&&!i?t.createPBRMaterial(e):t.createKMCMaterial(e,i),r.name=e.name||n,t.materials[n]=r,t.parseTechnique(e,r)})},unQuantizeData:function(t,e){if(!e)return t;var n=Math.sqrt(e.length),i=n-1,r=new Float32Array(t.length),s=[];return t.traverse(function(t,o){t.toArray?t.toArray(s):s[0]=t;for(var a=o*i,u=0;u<n;u++){r[a+u]=0;for(var c=0;c<n;c++){var h=c===i?1:s[c];r[a+u]+=e[c*n+u]*h}}}),t.data=r,t.stride=0,t.offset=0,t},sparseAccessorHandler:function(t,e){if(!e)return t;var n=e.count,i=t.data.constructor,r=new i(t.realLength);r.set(t.data),t.data=r;var s=this.bufferViews[e.values.bufferView],o=new i(s.buffer,s.byteOffset+e.values.byteOffset,n*t.size);i=y[e.indices.componentType][1],s=this.bufferViews[e.indices.bufferView];for(var a=new i(s.buffer,s.byteOffset+e.indices.byteOffset,n),u=0;u<n;u++)g.copyArrayData(r,o,a[u]*t.size,u*t.size,t.size);return t},getAccessorData:function(t,e){var n=this.json.accessors[t];if(n.data)return n.data;var r=i(y[n.componentType],2),s=r[1],o=x[n.type],a=this.bufferViews[n.bufferView],u=n.count*o,c=void 0;if(a.byteStride&&a.byteStride>o*s.BYTES_PER_ELEMENT)a.array||(a.array=new s(a.buffer,a.byteOffset,a.byteLength/s.BYTES_PER_ELEMENT)),c=new h(a.array,o,{offset:n.byteOffset||0,stride:a.byteStride,bufferViewId:a.id});else{var f=(n.byteOffset||0)+a.byteOffset,l=void 0;if(f%s.BYTES_PER_ELEMENT){l=new s(a.buffer.slice(f,f+u*s.BYTES_PER_ELEMENT))}else l=new s(a.buffer,f,u);c=new h(l,o)}if(n.sparse&&(c=this.sparseAccessorHandler(c,n.sparse)),n.extensions&&n.extensions.WEB3D_quantized_attributes){var d=n.extensions.WEB3D_quantized_attributes.decodeMatrix;e?c=this.unQuantizeData(c,d):c.decodeMat=d}return n.data=c,c},getArrayByAccessor:function(t,e){var n=this.json.accessors[t];if(n.array)return n.array;var i=this.getAccessorData(t,e);if(!i.stride&&!i.offset&&1===i.size)return i.data;var r=[];return i.traverse(function(t){r.push(t.toArray?t.toArray():t)}),n.array=r,r},parseTechnique:function(t,e){var n=null;this.json.techniques&&(n=this.json.techniques[t.technique]),n&&n.states&&(n.states.enable.forEach(function(t){switch(t){case A:e.blend=!0;break;case I:e.depthTest=!0;break;case S:e.cullFace=!0}}),g.each(n.states.functions,function(t,n){switch(n){case"blendEquationSeparate":e.blendEquation=t[0],e.blendEquationAlpha=t[1];break;case"blendFuncSeparate":e.blendSrc=t[0],e.blendDst=t[1],e.blendSrcAlpha=t[2],e.blendDstAlpha=t[3];break;case"depthMask":e.depthMask=t[0];break;case"cullFace":e.cullFaceType=t[0];break;default:e[n]=t}}),e.cullFace?e.side=e.cullFaceType===O?L:O:e.side=R)},createMorphGeometry:function(t,e){var n=this,i=new c,r=i.targets={};return g.each(t.targets,function(t){g.each(t,function(t,e){var i=N[e].name;r[i]||(r[i]=[]);var s=n.getAccessorData(t,!0);r[i].push(s)})}),i.weights=e||new Float32Array(t.targets.length),i},handlerGeometry:function(t,e){"indices"in e&&(t.indices=this.getAccessorData(e.indices));var n=e.attributes;for(var i in n){var r=N[i];if(r){var s=!(this.isUnQuantizeInShader&&r.decodeMatName);t[r.name]=this.getAccessorData(n[i],s),s||(t[r.decodeMatName]=t[r.name].decodeMat,delete t[r.name].decodeMat)}else console.warn("Unknow attribute named "+i+"!")}},handlerSkinedMesh:function(t,e){if(e){var n=(e.jointNames||e.joints).length;t.bindShapeMatrix=new _,e.bindShapeMatrix&&t.bindShapeMatrix.fromArray(e.bindShapeMatrix);for(var i=this.getArrayByAccessor(e.inverseBindMatrices,!0),r=0;r<n;r++)t.inverseBindMatrices.push((new _).fromArray(i[r]));t.jointNames=e.jointNames||e.joints,this.useInstanced&&(t.useInstanced=!0)}},parseMesh:function(t,e,n){var i=this,r=this.json.meshes[t];r.primitives.forEach(function(s){if(s.meshNode)return void e.addChild(s.meshNode.clone());var a=void 0;a=s.targets&&s.targets.length?i.createMorphGeometry(s,r.weights):new u,i.handlerGeometry(a,s);var c=i.materials[s.material]||new o,h=i.json.skins&&i.json.skins[n.skin],d=h?l:f,m=new d({geometry:a,material:c,name:"mesh-"+(r.name||t)});i.handlerSkinedMesh(m,h),s.meshNode=m,e.addChild(m),i.meshes.push(m)})},parseCameras:function(){var t=this;this.cameras={};var e=window.innerWidth/window.innerHeight;g.each(this.json.cameras,function(n,i){if("perspective"===n.type){var r=new E;r.name=n.name||i,r.fov=m.radToDeg(n.perspective.yfov),r.near=n.perspective.znear,r.far=n.perspective.zfar,n.aspectRatio?r.aspect=n.aspectRatio:r.aspect=e,t.cameras[i]=r}})},handlerNodeTransform:function(t,e){if(e.matrix){var n=new _;n.fromArray(e.matrix),t.matrix=n}else e.rotation&&t.quaternion.fromArray(e.rotation),e.scale&&t.setScale(e.scale[0],e.scale[1],e.scale[2]),e.translation&&(t.x=e.translation[0],t.y=e.translation[1],t.z=e.translation[2])},parseNode:function(t,e){var n=this,i=void 0,r=this.json.nodes[t];i=r.camera&&this.cameras[r.camera]?this.cameras[r.camera]:new s({name:this.isGLTF2?r.name||t:t}),this.handlerNodeTransform(i,r),r.jointName?(i.jointName=r.jointName,this.jointMap[i.jointName]=i):this.isGLTF2&&(i.jointName=t,this.jointMap[t]=i),r.meshes?r.meshes.forEach(function(t){return n.parseMesh(t,i,r)}):"mesh"in r&&this.parseMesh(r.mesh,i,r),r.children&&r.children.forEach(function(t){return n.parseNode(t,i)}),e.addChild(i)},parseAnimations:function(){var t=this;if(!this.json.animations)return null;var e=[];for(var n in this.json.animations)!function(n){var i=t.json.animations[n];i.channels.forEach(function(n){var r=n.target.path,s=n.target.id;t.isGLTF2&&(s=n.target.node,t.json.nodes[s].name&&(s=t.json.nodes[s].name));var o=i.samplers[n.sampler],a=t.isGLTF2?o.input:i.parameters[o.input],u=t.isGLTF2?o.output:i.parameters[r],c=t.getArrayByAccessor(a,!0),h=t.getArrayByAccessor(u,!0);"rotation"===r&&(r="quaternion");var f=new v({interpolationTpye:o.interpolation,nodeName:s,keyTime:c,states:h,type:v.getType(r)});e.push(f)})}(n);if(!e.length)return null;var i=new T({rootNode:this.node,animStatesList:e});return this.parseAnimationClipsExtension(i),i},parseAnimationClipsExtension:function(t){var e=this.json.extensions,n=e&&e.HILO_animation_clips;if(n)for(var i in n){var r=n[i];t.addClip(i,r[0],r[1])}},parseScene:function(){var t=this;this.parseMaterials(),this.jointMap={},this.meshes=[],this.node=new s({needCallChildUpdate:!1}),this.parseCameras(),this.json.scenes[this.json.scene||0].nodes.forEach(function(e){return t.parseNode(e,t.node)}),this.node.resetSkinedMeshRootNode();var e=this.parseAnimations();return e&&(this.node.setAnim(e),e.play()),{node:this.node,meshes:this.meshes,anim:e,cameras:Object.values(this.cameras),lights:[],textures:Object.values(this.textures),materials:Object.values(this.materials)}}});t.exports=b},function(t,e,n){"use strict";var i=n(5),r=n(0),s=n(7),o=r.create({Extends:s,isMorphGeometry:!0,className:"MorphGeometry",isStatic:!1,weights:null,targets:null,constructor:function(t){o.superclass.constructor.call(this,t),this.weights=this.weights||[]},update:function(t,e){this.weights=t,this._originalMorphIndices=e},clone:function(){return s.prototype.clone.call(this,{targets:this.targets,weights:this.weights})},getRenderOption:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.superclass.getRenderOption.call(this,e),this.targets&&(this._maxMorphTargetCount||(this._maxMorphTargetCount=Math.floor(8/Object.keys(this.targets).length)),i.each(this.targets,function(n,i){e.MORPH_TARGET_COUNT=Math.min(n.length,t._maxMorphTargetCount),"vertices"===i?e.MORPH_HAS_POSITION=1:"normals"===i?e.MORPH_HAS_NORMAL=1:"tangents"===i&&(e.MORPH_HAS_TANGENT=1)})),e}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(13),s=n(102),o=i.create({Extends:r,constructor:function(){o.superclass.constructor.call(this)},load:function(t){var e=[this.loadRes(t.fs),this.loadRes(t.vs)],n=Object.assign({},t);return Promise.all(e).then(function(t){return n.fs=t[0],n.vs=t[1],new s(n)},function(t){console.warn("ShaderMaterial Loader Failed for "+t)})}});t.exports=o},function(t,e,n){"use strict";var i=n(0),r=n(11),s=n(22),o=n(7),a=n(9),u=n(18),c=n(6),h=n(3),f=h.LINES,l={x:[0,0,0,1,0,0],y:[0,0,0,0,1,0],z:[0,0,0,0,0,1]},d=i.create({Extends:r,isAxisHelper:!0,className:"AxisHelper",size:1,constructor:function(t){d.superclass.constructor.call(this,t),this.init()},addAxis:function(t){var e=new s({name:"AxisHelper_"+t,geometry:new o({mode:f,vertices:new a(new Float32Array(l[t])),indices:new a(new Uint16Array([0,1]))}),material:new u({diffuse:new c(l[t][3],l[t][4],l[t][5]),lightType:"NONE"})});this.addChild(e)},init:function(){this.setScale(this.size),this.addAxis("x"),this.addAxis("y"),this.addAxis("z")}});t.exports=d},function(t,e,n){"use strict";var i=n(0),r=n(22),s=n(7),o=n(18),a=n(6),u=n(3),c=u.LINES,h=i.create({Extends:r,isAxisNetHelper:!0,className:"AxisNetHelper",size:5,constructor:function(t){h.superclass.constructor.call(this,t),this.color=this.color||new a(.5,.5,.5);for(var e=new s({mode:c}),n=this.size,i=2*n+1,r=0;r<i;r++){var u=r/n-1;e.addLine([u,0,-1],[u,0,1]),e.addLine([-1,0,u],[1,0,u])}this.geometry=e,this.material=new o({diffuse:this.color,lightType:"NONE"})}});t.exports=h},function(t,e,n){"use strict";var i=n(0),r=n(25),s=n(103),o=n(4),a=n(2),u=new o,c=new a,h=i.create({Extends:r,isDirectionalLight:!0,className:"DirectionalLight",shadow:null,constructor:function(t){this.direction=new a(0,0,1),h.superclass.constructor.call(this,t)},createShadowMap:function(t,e){this.shadow&&(this.lightShadow||(this.lightShadow=new s({light:this,renderer:t,width:this.shadow.width||t.width,height:this.shadow.height||t.height,debug:this.shadow.debug}),"minBias"in this.shadow&&(this.lightShadow.minBias=this.shadow.minBias),"maxBias"in this.shadow&&(this.lightShadow.maxBias=this.shadow.maxBias)),this.lightShadow.createShadowMap(e))},getWorldDirection:function(){return c.copy(this.direction).transformDirection(this.worldMatrix).normalize(),c},getViewDirection:function(t){var e=t.getModelViewMatrix(this,u);return c.copy(this.direction).transformDirection(e).normalize(),c}});t.exports=h},function(t,e,n){"use strict";var i=n(0),r=n(18),s=n(3),o=s.FRONT,a=i.create({Extends:r,isShadowMaterial:!0,className:"ShadowMaterial",cullFace:!0,cullFaceType:o,lightType:"NONE",constructor:function(t){a.superclass.constructor.call(this,t)}});t.exports=a},function(t,e,n){"use strict";var i=n(0),r=n(25),s=i.create({Extends:r,isPointLight:!0,className:"PointLight",constructor:function(t){this.constantAttenuation=0,this.linearAttenuation=1,this.quadraticAttenuation=1,s.superclass.constructor.call(this,t)},toInfoArray:function(t,e){t[e+0]=this.constantAttenuation,t[e+1]=this.linearAttenuation,t[e+2]=this.quadraticAttenuation}});t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(25),s=n(103),o=n(1),a=n(4),u=n(2),c=new a,h=new u,f=i.create({Extends:r,isSpotLight:!0,className:"SpotLight",shadow:null,_cutoffCos:.9763,_cutoff:12.5,cutoff:{get:function(){return this._cutoff},set:function(t){this._cutoff=t,this._cutoffCos=Math.cos(o.degToRad(t))}},_outerCutoffCos:.9537,_outerCutoff:17.5,outerCutoff:{get:function(){return this._outerCutoff},set:function(t){this._outerCutoff=t,this._outerCutoffCos=Math.cos(o.degToRad(t))}},constantAttenuation:1,linearAttenuation:.09,quadraticAttenuation:.32,constructor:function(t){this.direction=new u(0,0,1),f.superclass.constructor.call(this,t)},createShadowMap:function(t,e){this.shadow&&(this.lightShadow||(this.lightShadow=new s({light:this,renderer:t,width:this.shadow.width||t.width,height:this.shadow.height||t.height,debug:this.shadow.debug}),"minBias"in this.shadow&&(this.lightShadow.minBias=this.shadow.minBias),"maxBias"in this.shadow&&(this.lightShadow.maxBias=this.shadow.maxBias)),this.lightShadow.createShadowMap(e))},getWorldDirection:function(){return h.copy(this.direction).transformDirection(this.worldMatrix).normalize(),h},getViewDirection:function(t){var e=t.getModelViewMatrix(this,c);return h.copy(this.direction).transformDirection(e).normalize(),h},toInfoArray:function(t,e){t[e+0]=this.constantAttenuation,t[e+1]=this.linearAttenuation,t[e+2]=this.quadraticAttenuation}});t.exports=f},function(t,e,n){"use strict";var i=n(0),r=n(25),s=i.create({Extends:r,isAmbientLight:!0,className:"AmbientLight",autoUpdateWorldMatrix:!1,constructor:function(t){this.amount=1,s.superclass.constructor.call(this,t)}});t.exports=s},function(t,e,n){"use strict";var i=n(0),r=n(6),s=n(5),o=n(30),a=n(18),u=new a({lightType:"NONE"}),c=new r(1,1,1),h=new r,f=i.create({isMeshPicker:!0,className:"MeshPicker",debug:!1,renderer:null,colorMeshMap:null,constructor:function(t){Object.assign(this,t),this.colorMeshMap={},this.init()},createFramebuffer:function(){if(!this.framebuffer){var t=this.renderer;this.framebuffer=new o(t,{useVao:t.useVao,width:t.width,height:t.height})}},renderDebug:function(){this.framebuffer.render(0,.7,.3,.3)},createMeshNumberId:function(t){"numberId"in t||(t.numberId=10*Number(t.id.replace(/^.*_(\d+)$/,"$1")),t.color=s.padLeft(t.numberId.toString(16),6),this.colorMeshMap[t.color]=t)},renderColoredMeshes:function(){var t=this,e=this.renderer,n=this.framebuffer;n.bind(),e.clear(c);var i=e.forceMaterial;e.forceMaterial=u,e.renderList.traverse(function(n){n.forEach(function(n){t.createMeshNumberId(n),u.diffuse.fromHEX(n.color),u.isDirty=!0,e.renderMesh(n)})}),e.forceMaterial=i,n.unbind()},getSelection:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=this.renderer.pixelRatio,s=[],o=this.framebuffer.readPixels(t*r,e*r,n*r,i*r),a=0;a<o.length;a+=4){var u=h.fromUintArray(o,a).toHEX();this.colorMeshMap[u]&&s.push(this.colorMeshMap[u])}return s},init:function(){var t=this;this.createFramebuffer(),this.renderer.on("afterRender",function(){t.renderColoredMeshes(),t.debug&&t.renderDebug()})}});t.exports=f},function(t,e,n){"use strict";var i=n(152);t.exports=i},function(t,e,n){var i=n(19),r=n(104),s=i.create({constructor:function(t){this._targetFPS=t||30,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(t){if(!this._intervalId){this._lastTime=+new Date;var e,n=this,i=this._interval,s=window.requestAnimationFrame||window[r.jsVendor+"RequestAnimationFrame"];t&&s&&i<17?(this._useRAF=!0,e=function(){n._intervalId=s(e),n._tick()}):e=function(){n._intervalId=setTimeout(e,i),n._tick()},this._paused=!1,e()}},stop:function(){if(this._useRAF){(window.cancelAnimationFrame||window[r.jsVendor+"CancelAnimationFrame"])(this._intervalId)}else clearTimeout(this._intervalId);this._intervalId=null,this._lastTime=0,this._paused=!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var t=+new Date,e=t-this._lastTime,n=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=t-this._lastTime,this._lastTime=t;for(var i=n.slice(0),r=0,s=i.length;r<s;r++)i[r].tick(e)}},getMeasuredFPS:function(){return Math.min(this._measuredFPS,this._targetFPS)},addTick:function(t){if(!t||"function"!=typeof t.tick)throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(t)},removeTick:function(t){var e=this._tickers,n=e.indexOf(t);n>=0&&e.splice(n,1)},nextTick:function(t){var e=this,n={tick:function(i){e.removeTick(n),t()}};return e.addTick(n),n},timeout:function(t,e){var n=this,i=(new Date).getTime()+e,r={tick:function(){(new Date).getTime()-i>=0&&(n.removeTick(r),t())}};return n.addTick(r),r},interval:function(t,e){var n=this,i=(new Date).getTime()+e,r={tick:function(){var n=(new Date).getTime(),r=n-i;r>=0&&(r<e&&(n-=r),i=n+e,t())}};return n.addTick(r),r}});t.exports=s},function(t,e,n){"use strict";var i=n(104);t.exports=i},function(t,e,n){"use strict";var i={get:function(){if(void 0===this._isWebGLSupport)try{var t=document.createElement("canvas"),e=t.getContext("webgl");e.clearColor(0,1,0,1),e.clear(e.COLOR_BUFFER_BIT);var n=new Uint8Array(4);e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,n),0===n[0]&&255===n[1]&&0===n[2]&&255===n[3]?this._isWebGLSupport=!0:this._isWebGLSupport=!1,t=null,e=null,n=null}catch(t){this._isWebGLSupport=!1}return this._isWebGLSupport}};t.exports=i},,,function(t,e,n){n(106),t.exports=n(115)}]),"undefined"!=typeof window&&window.Hilo3d&&"object"==typeof exports&&"object"==typeof module&&(module.exports=window.Hilo3d);