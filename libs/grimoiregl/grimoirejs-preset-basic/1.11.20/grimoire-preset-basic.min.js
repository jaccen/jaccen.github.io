!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=335)}([function(e,t,n){var r=n(2),o=n(22),i=n(12),a=n(13),u=n(19),s=function(e,t,n){var c,l,f,h,d=e&s.F,p=e&s.G,v=e&s.S,y=e&s.P,m=e&s.B,g=p?r:v?r[t]||(r[t]={}):(r[t]||{}).prototype,_=p?o:o[t]||(o[t]={}),b=_.prototype||(_.prototype={});p&&(n=t);for(c in n)l=!d&&g&&void 0!==g[c],f=(l?g:n)[c],h=m&&l?u(f,r):y&&"function"==typeof f?u(Function.call,f):f,g&&a(g,c,f,e&s.U),_[c]!=f&&i(_,c,h),y&&b[c]!=f&&(b[c]=f)};r.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(60)("wks"),o=n(41),i=n(2).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){e.exports=!n(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(1),o=n(99),i=n(26),a=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(25),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(23);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(7),o=n(37);e.exports=n(6)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(2),o=n(12),i=n(11),a=n(41)("src"),u=Function.toString,s=(""+u).split("toString");n(22).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,u){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(c&&(i(n,a)||o(n,a,e[t]?""+e[t]:s.join(String(t)))),e===r?e[t]=n:u?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||u.call(this)})},function(e,t,n){var r=n(0),o=n(3),i=n(23),a=/"/g,u=function(e,t,n,r){var o=String(i(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),u+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(u),r(r.P+r.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){var r=n(48),o=n(37),i=n(17),a=n(26),u=n(11),s=n(99),c=Object.getOwnPropertyDescriptor;t.f=n(6)?c:function(e,t){if(e=i(e),t=a(t,!0),s)try{return c(e,t)}catch(e){}if(u(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(11),o=n(9),i=n(79)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(47),o=n(23);e.exports=function(e){return r(o(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(10);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){var r=n(19),o=n(47),i=n(9),a=n(8),u=n(64);e.exports=function(e,t){var n=1==e,s=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,d=t||u;return function(t,u,p){for(var v,y,m=i(t),g=o(m),_=r(u,p,3),b=a(g.length),w=0,M=n?d(t,b):s?d(t,0):void 0;b>w;w++)if((h||w in g)&&(v=g[w],y=_(v,w,m),e))if(n)M[w]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:M.push(v)}else if(l)return!1;return f?-1:c||l?l:M}}},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(0),o=n(22),i=n(3);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(120),o=n(0),i=n(60)("metadata"),a=i.store||(i.store=new(n(123))),u=function(e,t,n){var o=a.get(e);if(!o){if(!n)return;a.set(e,o=new r)}var i=o.get(t);if(!i){if(!n)return;o.set(t,i=new r)}return i},s=function(e,t,n){var r=u(t,n,!1);return void 0!==r&&r.has(e)},c=function(e,t,n){var r=u(t,n,!1);return void 0===r?void 0:r.get(e)},l=function(e,t,n,r){u(n,r,!0).set(e,t)},f=function(e,t){var n=u(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},d=function(e){o(o.S,"Reflect",e)};e.exports={store:a,map:u,has:s,get:c,set:l,keys:f,key:h,exp:d}},function(e,t,n){"use strict";if(n(6)){var r=n(33),o=n(2),i=n(3),a=n(0),u=n(62),s=n(85),c=n(19),l=n(31),f=n(37),h=n(12),d=n(38),p=n(25),v=n(8),y=n(118),m=n(40),g=n(26),_=n(11),b=n(46),w=n(4),M=n(9),E=n(71),x=n(34),S=n(16),O=n(35).f,R=n(87),k=n(41),C=n(5),P=n(21),T=n(49),A=n(61),I=n(88),F=n(42),j=n(55),D=n(39),N=n(63),L=n(91),G=n(7),B=n(15),z=G.f,W=B.f,q=o.RangeError,U=o.TypeError,V=o.Uint8Array,H=Array.prototype,Y=s.ArrayBuffer,X=s.DataView,$=P(0),Q=P(2),Z=P(3),J=P(4),K=P(5),ee=P(6),te=T(!0),ne=T(!1),re=I.values,oe=I.keys,ie=I.entries,ae=H.lastIndexOf,ue=H.reduce,se=H.reduceRight,ce=H.join,le=H.sort,fe=H.slice,he=H.toString,de=H.toLocaleString,pe=C("iterator"),ve=C("toStringTag"),ye=k("typed_constructor"),me=k("def_constructor"),ge=u.CONSTR,_e=u.TYPED,be=u.VIEW,we=P(1,function(e,t){return Oe(A(e,e[me]),t)}),Me=i(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Ee=!!V&&!!V.prototype.set&&i(function(){new V(1).set({})}),xe=function(e,t){var n=p(e);if(n<0||n%t)throw q("Wrong offset!");return n},Se=function(e){if(w(e)&&_e in e)return e;throw U(e+" is not a typed array!")},Oe=function(e,t){if(!(w(e)&&ye in e))throw U("It is not a typed array constructor!");return new e(t)},Re=function(e,t){return ke(A(e,e[me]),t)},ke=function(e,t){for(var n=0,r=t.length,o=Oe(e,r);r>n;)o[n]=t[n++];return o},Ce=function(e,t,n){z(e,t,{get:function(){return this._d[n]}})},Pe=function(e){var t,n,r,o,i,a,u=M(e),s=arguments.length,l=s>1?arguments[1]:void 0,f=void 0!==l,h=R(u);if(void 0!=h&&!E(h)){for(a=h.call(u),r=[],t=0;!(i=a.next()).done;t++)r.push(i.value);u=r}for(f&&s>2&&(l=c(l,arguments[2],2)),t=0,n=v(u.length),o=Oe(this,n);n>t;t++)o[t]=f?l(u[t],t):u[t];return o},Te=function(){for(var e=0,t=arguments.length,n=Oe(this,t);t>e;)n[e]=arguments[e++];return n},Ae=!!V&&i(function(){de.call(new V(1))}),Ie=function(){return de.apply(Ae?fe.call(Se(this)):Se(this),arguments)},Fe={copyWithin:function(e,t){return L.call(Se(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return J(Se(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return N.apply(Se(this),arguments)},filter:function(e){return Re(this,Q(Se(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return K(Se(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Se(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){$(Se(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Se(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Se(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Se(this),arguments)},lastIndexOf:function(e){return ae.apply(Se(this),arguments)},map:function(e){return we(Se(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ue.apply(Se(this),arguments)},reduceRight:function(e){return se.apply(Se(this),arguments)},reverse:function(){for(var e,t=this,n=Se(t).length,r=Math.floor(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t},some:function(e){return Z(Se(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Se(this),e)},subarray:function(e,t){var n=Se(this),r=n.length,o=m(e,r);return new(A(n,n[me]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,v((void 0===t?r:m(t,r))-o))}},je=function(e,t){return Re(this,fe.call(Se(this),e,t))},De=function(e){Se(this);var t=xe(arguments[1],1),n=this.length,r=M(e),o=v(r.length),i=0;if(o+t>n)throw q("Wrong length!");for(;i<o;)this[t+i]=r[i++]},Ne={entries:function(){return ie.call(Se(this))},keys:function(){return oe.call(Se(this))},values:function(){return re.call(Se(this))}},Le=function(e,t){return w(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ge=function(e,t){return Le(e,t=g(t,!0))?f(2,e[t]):W(e,t)},Be=function(e,t,n){return!(Le(e,t=g(t,!0))&&w(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?z(e,t,n):(e[t]=n.value,e)};ge||(B.f=Ge,G.f=Be),a(a.S+a.F*!ge,"Object",{getOwnPropertyDescriptor:Ge,defineProperty:Be}),i(function(){he.call({})})&&(he=de=function(){return ce.call(this)});var ze=d({},Fe);d(ze,Ne),h(ze,pe,Ne.values),d(ze,{slice:je,set:De,constructor:function(){},toString:he,toLocaleString:Ie}),Ce(ze,"buffer","b"),Ce(ze,"byteOffset","o"),Ce(ze,"byteLength","l"),Ce(ze,"length","e"),z(ze,ve,{get:function(){return this[_e]}}),e.exports=function(e,t,n,s){s=!!s;var c=e+(s?"Clamped":"")+"Array",f="get"+e,d="set"+e,p=o[c],m=p||{},g=p&&S(p),_=!p||!u.ABV,M={},E=p&&p.prototype,R=function(e,n){var r=e._d;return r.v[f](n*t+r.o,Me)},k=function(e,n,r){var o=e._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[d](n*t+o.o,r,Me)},C=function(e,t){z(e,t,{get:function(){return R(this,t)},set:function(e){return k(this,t,e)},enumerable:!0})};_?(p=n(function(e,n,r,o){l(e,p,c,"_d");var i,a,u,s,f=0,d=0;if(w(n)){if(!(n instanceof Y||"ArrayBuffer"==(s=b(n))||"SharedArrayBuffer"==s))return _e in n?ke(p,n):Pe.call(p,n);i=n,d=xe(r,t);var m=n.byteLength;if(void 0===o){if(m%t)throw q("Wrong length!");if((a=m-d)<0)throw q("Wrong length!")}else if((a=v(o)*t)+d>m)throw q("Wrong length!");u=a/t}else u=y(n),a=u*t,i=new Y(a);for(h(e,"_d",{b:i,o:d,l:a,e:u,v:new X(i)});f<u;)C(e,f++)}),E=p.prototype=x(ze),h(E,"constructor",p)):i(function(){p(1)})&&i(function(){new p(-1)})&&j(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=n(function(e,n,r,o){l(e,p,c);var i;return w(n)?n instanceof Y||"ArrayBuffer"==(i=b(n))||"SharedArrayBuffer"==i?void 0!==o?new m(n,xe(r,t),o):void 0!==r?new m(n,xe(r,t)):new m(n):_e in n?ke(p,n):Pe.call(p,n):new m(y(n))}),$(g!==Function.prototype?O(m).concat(O(g)):O(m),function(e){e in p||h(p,e,m[e])}),p.prototype=E,r||(E.constructor=p));var P=E[pe],T=!!P&&("values"==P.name||void 0==P.name),A=Ne.values;h(p,ye,!0),h(E,_e,c),h(E,be,!0),h(E,me,p),(s?new p(1)[ve]==c:ve in E)||z(E,ve,{get:function(){return c}}),M[c]=p,a(a.G+a.W+a.F*(p!=m),M),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*i(function(){m.of.call(p,1)}),c,{from:Pe,of:Te}),"BYTES_PER_ELEMENT"in E||h(E,"BYTES_PER_ELEMENT",t),a(a.P,c,Fe),D(c),a(a.P+a.F*Ee,c,{set:De}),a(a.P+a.F*!T,c,Ne),r||E.toString==he||(E.toString=he),a(a.P+a.F*i(function(){new p(1).slice()}),c,{slice:je}),a(a.P+a.F*(i(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!i(function(){E.toLocaleString.call([1,2])})),c,{toLocaleString:Ie}),F[c]=T?P:A,r||T||h(E,pe,A)}}else e.exports=function(){}},function(e,t,n){var r=n(5)("unscopables"),o=Array.prototype;void 0==o[r]&&n(12)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t,n){var r=n(41)("meta"),o=n(4),i=n(11),a=n(7).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(3)(function(){return s(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++u,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!s(e))return"F";if(!t)return"E";l(e)}return e[r].i},h=function(e,t){if(!i(e,r)){if(!s(e))return!0;if(!t)return!1;l(e)}return e[r].w},d=function(e){return c&&p.NEED&&s(e)&&!i(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:d}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(19),o=n(102),i=n(71),a=n(1),u=n(8),s=n(87),c={},l={},t=e.exports=function(e,t,n,f,h){var d,p,v,y,m=h?function(){return e}:s(e),g=r(n,f,t?2:1),_=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(d=u(e.length);d>_;_++)if((y=t?g(a(p=e[_])[0],p[1]):g(e[_]))===c||y===l)return y}else for(v=m.call(e);!(p=v.next()).done;)if((y=o(v,g,p.value,t))===c||y===l)return y};t.BREAK=c,t.RETURN=l},function(e,t){e.exports=!1},function(e,t,n){var r=n(1),o=n(108),i=n(67),a=n(79)("IE_PROTO"),u=function(){},s=function(){var e,t=n(66)("iframe"),r=i.length;for(t.style.display="none",n(69).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;r--;)delete s.prototype[i[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[a]=e):n=s(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(110),o=n(67).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(110),o=n(67);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(13);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(2),o=n(7),i=n(6),a=n(5)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(25),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports={}},function(e,t,n){var r=n(7).f,o=n(11),i=n(5)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),o=n(23),i=n(3),a=n(83),u="["+a+"]",s="​",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(e,t,n){var o={},u=i(function(){return!!a[e]()||s[e]()!=s}),c=o[e]=u?t(h):a[e];n&&(o[n]=c),r(r.P+r.F*u,"String",o)},h=f.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var r=n(18),o=n(5)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,n){var r=n(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(17),o=n(8),i=n(40);e.exports=function(e){return function(t,n,a){var u,s=r(t),c=o(s.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if((u=s[l++])!=u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(2),o=n(0),i=n(13),a=n(38),u=n(30),s=n(32),c=n(31),l=n(4),f=n(3),h=n(55),d=n(43),p=n(70);e.exports=function(e,t,n,v,y,m){var g=r[e],_=g,b=y?"set":"add",w=_&&_.prototype,M={},E=function(e){var t=w[e];i(w,e,"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(m||w.forEach&&!f(function(){(new _).entries().next()}))){var x=new _,S=x[b](m?{}:-0,1)!=x,O=f(function(){x.has(1)}),R=h(function(e){new _(e)}),k=!m&&f(function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)});R||(_=t(function(t,n){c(t,_,e);var r=p(new g,t,_);return void 0!=n&&s(n,y,r[b],r),r}),_.prototype=w,w.constructor=_),(O||k)&&(E("delete"),E("has"),y&&E("get")),(k||S)&&E(b),m&&w.clear&&delete w.clear}else _=v.getConstructor(t,e,y,b),a(_.prototype,n),u.NEED=!0;return d(_,e),M[e]=_,o(o.G+o.W+o.F*(_!=g),M),m||v.setStrong(_,e,y),_}},function(e,t,n){"use strict";var r=n(12),o=n(13),i=n(3),a=n(23),u=n(5);e.exports=function(e,t,n){var s=u(e),c=n(a,s,""[e]),l=c[0],f=c[1];i(function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})&&(o(String.prototype,e,l),r(RegExp.prototype,s,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,n){"use strict";var r=n(1);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(18);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(4),o=n(18),i=n(5)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(5)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";e.exports=n(33)||!n(3)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(2)[e]})},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(0),o=n(10),i=n(19),a=n(32);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,u,s=arguments[1];return o(this),t=void 0!==s,t&&o(s),void 0==e?new this:(n=[],t?(r=0,u=i(s,arguments[2],2),a(e,!1,function(e){n.push(u(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){var r=n(2),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){var r=n(1),o=n(10),i=n(5)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){for(var r,o=n(2),i=n(12),a=n(41),u=a("typed_array"),s=a("view"),c=!(!o.ArrayBuffer||!o.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=o[h[f++]])?(i(r.prototype,u,!0),i(r.prototype,s,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:u,VIEW:s}},function(e,t,n){"use strict";var r=n(9),o=n(40),i=n(8);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,u=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:o(s,n);c>u;)t[u++]=e;return t}},function(e,t,n){var r=n(129);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(7),o=n(37);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(4),o=n(2).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(2).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(4),o=n(78).set;e.exports=function(e,t,n){var i,a=t.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},function(e,t,n){var r=n(42),o=n(5)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(34),o=n(37),i=n(43),a={};n(12)(a,n(5)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(33),o=n(0),i=n(13),a=n(12),u=n(11),s=n(42),c=n(72),l=n(43),f=n(16),h=n(5)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,y,m,g){c(n,t,v);var _,b,w,M=function(e){if(!d&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",x="values"==y,S=!1,O=e.prototype,R=O[h]||O["@@iterator"]||y&&O[y],k=R||M(y),C=y?x?M("entries"):k:void 0,P="Array"==t?O.entries||R:R;if(P&&(w=f(P.call(new e)))!==Object.prototype&&w.next&&(l(w,E,!0),r||u(w,h)||a(w,h,p)),x&&R&&"values"!==R.name&&(S=!0,k=function(){return R.call(this)}),r&&!g||!d&&!S&&O[h]||a(O,h,k),s[t]=k,s[E]=p,y)if(_={values:x?k:M("values"),keys:m?k:M("keys"),entries:C},g)for(b in _)b in O||i(O,b,_[b]);else o(o.P+o.F*(d||S),t,_);return _}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var r=n(2),o=n(84).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,u=r.Promise,s="process"==n(18)(a);e.exports=function(){var e,t,n,c=function(){var r,o;for(s&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(s)n=function(){a.nextTick(c)};else if(i){var l=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(u&&u.resolve){var h=u.resolve();n=function(){h.then(c)}}else n=function(){o.call(r,c)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=o(t),this.reject=o(n)}var o=n(10);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(4),o=n(1),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(19)(Function.call,n(15).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){var r=n(60)("keys"),o=n(41);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(25),o=n(23);e.exports=function(e){return function(t,n){var i,a,u=String(o(t)),s=r(n),c=u.length;return s<0||s>=c?e?"":void 0:(i=u.charCodeAt(s),i<55296||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):i:e?u.slice(s,s+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,n){var r=n(54),o=n(23);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){"use strict";var r=n(25),o=n(23);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r,o,i,a=n(19),u=n(100),s=n(69),c=n(66),l=n(2),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,y=0,m={},g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},_=function(e){g.call(e.data)};h&&d||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){u("function"==typeof e?e:Function(e),t)},r(y),y},d=function(e){delete m[e]},"process"==n(18)(f)?r=function(e){f.nextTick(a(g,e,1))}:v&&v.now?r=function(e){v.now(a(g,e,1))}:p?(o=new p,i=o.port2,o.port1.onmessage=_,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(e){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:h,clear:d}},function(e,t,n){"use strict";function r(e,t,n){var r,o,i,a=Array(n),u=8*n-t-1,s=(1<<u)-1,c=s>>1,l=23===t?L(2,-24)-L(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for(e=N(e),e!=e||e===j?(o=e!=e?1:0,r=s):(r=G(B(e)/z),e*(i=L(2,-r))<1&&(r--,i*=2),e+=r+c>=1?l/i:l*L(2,1-c),e*i>=2&&(r++,i/=2),r+c>=s?(o=0,r=s):r+c>=1?(o=(e*i-1)*L(2,t),r+=c):(o=e*L(2,c-1)*L(2,t),r=0));t>=8;a[f++]=255&o,o/=256,t-=8);for(r=r<<t|o,u+=t;u>0;a[f++]=255&r,r/=256,u-=8);return a[--f]|=128*h,a}function o(e,t,n){var r,o=8*n-t-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=e[s--],l=127&c;for(c>>=7;u>0;l=256*l+e[s],s--,u-=8);for(r=l&(1<<-u)-1,l>>=-u,u+=t;u>0;r=256*r+e[s],s--,u-=8);if(0===l)l=1-a;else{if(l===i)return r?NaN:c?-j:j;r+=L(2,t),l-=a}return(c?-1:1)*r*L(2,l-t)}function i(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function u(e){return[255&e,e>>8&255]}function s(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return r(e,52,8)}function l(e){return r(e,23,4)}function f(e,t,n){O(e[C],t,{get:function(){return this[n]}})}function h(e,t,n,r){var o=+n,i=x(o);if(i+t>e[q])throw F(P);var a=e[W]._b,u=i+e[U],s=a.slice(u,u+t);return r?s:s.reverse()}function d(e,t,n,r,o,i){var a=+n,u=x(a);if(u+t>e[q])throw F(P);for(var s=e[W]._b,c=u+e[U],l=r(+o),f=0;f<t;f++)s[c+f]=l[i?f:t-f-1]}var p=n(2),v=n(6),y=n(33),m=n(62),g=n(12),_=n(38),b=n(3),w=n(31),M=n(25),E=n(8),x=n(118),S=n(35).f,O=n(7).f,R=n(63),k=n(43),C="prototype",P="Wrong index!",T=p.ArrayBuffer,A=p.DataView,I=p.Math,F=p.RangeError,j=p.Infinity,D=T,N=I.abs,L=I.pow,G=I.floor,B=I.log,z=I.LN2,W=v?"_b":"buffer",q=v?"_l":"byteLength",U=v?"_o":"byteOffset";if(m.ABV){if(!b(function(){T(1)})||!b(function(){new T(-1)})||b(function(){return new T,new T(1.5),new T(NaN),"ArrayBuffer"!=T.name})){T=function(e){return w(this,T),new D(x(e))};for(var V,H=T[C]=D[C],Y=S(D),X=0;Y.length>X;)(V=Y[X++])in T||g(T,V,D[V]);y||(H.constructor=T)}var $=new A(new T(2)),Q=A[C].setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||_(A[C],{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},!0)}else T=function(e){w(this,T,"ArrayBuffer");var t=x(e);this._b=R.call(Array(t),0),this[q]=t},A=function(e,t,n){w(this,A,"DataView"),w(e,T,"DataView");var r=e[q],o=M(t);if(o<0||o>r)throw F("Wrong offset!");if(n=void 0===n?r-o:E(n),o+n>r)throw F("Wrong length!");this[W]=e,this[U]=o,this[q]=n},v&&(f(T,"byteLength","_l"),f(A,"buffer","_b"),f(A,"byteLength","_l"),f(A,"byteOffset","_o")),_(A[C],{getInt8:function(e){return h(this,1,e)[0]<<24>>24},getUint8:function(e){return h(this,1,e)[0]},getInt16:function(e){var t=h(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=h(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return i(h(this,4,e,arguments[1]))},getUint32:function(e){return i(h(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return o(h(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return o(h(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){d(this,1,e,a,t)},setUint8:function(e,t){d(this,1,e,a,t)},setInt16:function(e,t){d(this,2,e,u,t,arguments[2])},setUint16:function(e,t){d(this,2,e,u,t,arguments[2])},setInt32:function(e,t){d(this,4,e,s,t,arguments[2])},setUint32:function(e,t){d(this,4,e,s,t,arguments[2])},setFloat32:function(e,t){d(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){d(this,8,e,c,t,arguments[2])}});k(T,"ArrayBuffer"),k(A,"DataView"),g(A[C],m.VIEW,!0),t.ArrayBuffer=T,t.DataView=A},function(e,t,n){var r=n(2),o=n(22),i=n(33),a=n(119),u=n(7).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(46),o=n(5)("iterator"),i=n(42);e.exports=n(22).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(29),o=n(103),i=n(42),a=n(17);e.exports=n(73)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(18);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var r=n(9),o=n(40),i=n(8);e.exports=[].copyWithin||function(e,t){var n=r(this),a=i(n.length),u=o(e,a),s=o(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:o(c,a))-s,a-u),f=1;for(s<u&&u<s+l&&(f=-1,s+=l-1,u+=l-1);l-- >0;)s in n?n[u]=n[s]:delete n[u],u+=f,s+=f;return n}},function(e,t,n){var r=n(32);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(10),o=n(9),i=n(47),a=n(8);e.exports=function(e,t,n,u,s){r(t);var c=o(e),l=i(c),f=a(c.length),h=s?f-1:0,d=s?-1:1;if(n<2)for(;;){if(h in l){u=l[h],h+=d;break}if(h+=d,s?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;s?h>=0:f>h;h+=d)h in l&&(u=t(u,l[h],h,c));return u}},function(e,t,n){"use strict";var r=n(10),o=n(4),i=n(100),a=[].slice,u={},s=function(e,t,n){if(!(t in u)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";u[t]=Function("F,a","return new F("+r.join(",")+")")}return u[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),u=function(){var r=n.concat(a.call(arguments));return this instanceof u?s(t,r.length,r):i(t,r,e)};return o(t.prototype)&&(u.prototype=t.prototype),u}},function(e,t,n){"use strict";var r=n(7).f,o=n(34),i=n(38),a=n(19),u=n(31),s=n(32),c=n(73),l=n(103),f=n(39),h=n(6),d=n(30).fastKey,p=n(45),v=h?"_s":"size",y=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){u(e,l,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&s(r,n,e[c],e)});return i(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=y(n,e);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(p(this,t),e)}}),h&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,o,i=y(e,t);return i?i.v=n:(e._l=i={i:o=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[v]++,"F"!==o&&(e._i[o]=i)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){var r=n(46),o=n(92);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){"use strict";var r=n(38),o=n(30).getWeak,i=n(1),a=n(4),u=n(31),s=n(32),c=n(21),l=n(11),f=n(45),h=c(5),d=c(6),p=0,v=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},m=function(e,t){return h(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var c=e(function(e,r){u(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=r&&s(r,n,e[i],e)});return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=o(e);return!0===n?v(f(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=o(e);return!0===n?v(f(this,t)).has(e):n&&l(n,this._i)}}),c},def:function(e,t,n){var r=o(i(t),!0);return!0===r?v(e).set(t,n):r[e._i]=n,e},ufstore:v}},function(e,t,n){"use strict";function r(e,t,n,c,l,f,h,d){for(var p,v,y=l,m=0,g=!!h&&u(h,d,3);m<c;){if(m in n){if(p=g?g(n[m],m,t):n[m],v=!1,i(p)&&(v=p[s],v=void 0!==v?!!v:o(p)),v&&f>0)y=r(e,t,p,a(p.length),y,f-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=p}y++}m++}return y}var o=n(53),i=n(4),a=n(8),u=n(19),s=n(5)("isConcatSpreadable");e.exports=r},function(e,t,n){e.exports=!n(6)&&!n(3)(function(){return 7!=Object.defineProperty(n(66)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t,n){var r=n(1);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(75),o=Math.pow,i=o(2,-52),a=o(2,-23),u=o(2,127)*(2-a),s=o(2,-126),c=function(e){return e+1/i-1/i};e.exports=Math.fround||function(e){var t,n,o=Math.abs(e),l=r(e);return o<s?l*c(o/s/a)*s*a:(t=(1+a/i)*o,n=t-(t-o),n>u||n!=n?l*(1/0):l*n)}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t){e.exports=Math.scale||function(e,t,n,r,o){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||o!=o?NaN:e===1/0||e===-1/0?e:(e-t)*(o-r)/(n-t)+r}},function(e,t,n){"use strict";var r=n(36),o=n(57),i=n(48),a=n(9),u=n(47),s=Object.assign;e.exports=!s||n(3)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=r})?function(e,t){for(var n=a(e),s=arguments.length,c=1,l=o.f,f=i.f;s>c;)for(var h,d=u(arguments[c++]),p=l?r(d).concat(l(d)):r(d),v=p.length,y=0;v>y;)f.call(d,h=p[y++])&&(n[h]=d[h]);return n}:s},function(e,t,n){var r=n(7),o=n(1),i=n(36);e.exports=n(6)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),u=a.length,s=0;u>s;)r.f(e,n=a[s++],t[n]);return e}},function(e,t,n){var r=n(17),o=n(35).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?u(e):o(r(e))}},function(e,t,n){var r=n(11),o=n(17),i=n(49)(!1),a=n(79)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;t.length>s;)r(u,n=t[s++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(36),o=n(17),i=n(48).f;e.exports=function(e){return function(t){for(var n,a=o(t),u=r(a),s=u.length,c=0,l=[];s>c;)i.call(a,n=u[c++])&&l.push(e?[n,a[n]]:a[n]);return l}}},function(e,t,n){var r=n(35),o=n(57),i=n(1),a=n(2).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(i(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(2).parseFloat,o=n(44).trim;e.exports=1/r(n(83)+"-0")!=-1/0?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(2).parseInt,o=n(44).trim,i=n(83),a=/^[-+]?0[xX]/;e.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(1),o=n(4),i=n(77);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(8),o=n(82),i=n(23);e.exports=function(e,t,n,a){var u=String(i(e)),s=u.length,c=void 0===n?" ":String(n),l=r(t);if(l<=s||""==c)return u;var f=l-s,h=o.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),a?h+u:u+h}},function(e,t,n){var r=n(25),o=n(8);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){t.f=n(5)},function(e,t,n){"use strict";var r=n(95),o=n(45);e.exports=n(50)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){n(6)&&"g"!=/./g.flags&&n(7).f(RegExp.prototype,"flags",{configurable:!0,get:n(52)})},function(e,t,n){"use strict";var r=n(95),o=n(45);e.exports=n(50)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,o=n(21)(0),i=n(13),a=n(30),u=n(107),s=n(97),c=n(4),l=n(3),f=n(45),h=a.getWeak,d=Object.isExtensible,p=s.ufstore,v={},y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(c(e)){var t=h(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return s.def(f(this,"WeakMap"),e,t)}},g=e.exports=n(50)("WeakMap",y,m,s,!0,!0);l(function(){return 7!=(new g).set((Object.freeze||Object)(v),7).get(v)})&&(r=s.getConstructor(y,"WeakMap"),u(r.prototype,m),a.NEED=!0,o(["delete","has","get","set"],function(e){var t=g.prototype,n=t[e];i(t,e,function(t,o){if(c(t)&&!d(t)){this._f||(this._f=new r);var i=this._f[e](t,o);return"set"==e?this:i}return n.call(this,t,o)})}))},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(334),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.__NAME__=t.__VERSION__=void 0;var o=n(127),i=r(o),a=n(330),u=r(a),s=t.__VERSION__="1.11.20",c=t.__NAME__="grimoirejs-preset-basic",l={};u.default.notifyRegisteringPlugin(c);var f=(0,i.default)();Object.assign(l,{__VERSION__:s,__NAME__:c}),Object.assign(f||{},l),window.GrimoireJS.lib.preset_basic=l,t.default=f},function(e,t,n){"use strict";(function(e){function t(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(n(327),n(333),n(128),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,n(89))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(331),n(329),n(328),t.default=function(){}},function(e,t,n){n(135),e.exports=n(22).RegExp.escape},function(e,t,n){var r=n(4),o=n(53),i=n(5)("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(3),o=Date.prototype.getTime,i=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!r(function(){i.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:i},function(e,t,n){"use strict";var r=n(1),o=n(26);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),"number"!=e)}},function(e,t,n){var r=n(36),o=n(57),i=n(48);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,u=n(e),s=i.f,c=0;u.length>c;)s.call(e,a=u[c++])&&t.push(a);return t}},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var r=n(0),o=n(133)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return o(e)}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(91)}),n(29)("copyWithin")},function(e,t,n){"use strict";var r=n(0),o=n(21)(4);r(r.P+r.F*!n(20)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(63)}),n(29)("fill")},function(e,t,n){"use strict";var r=n(0),o=n(21)(2);r(r.P+r.F*!n(20)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(21)(6),i="findIndex",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(29)(i)},function(e,t,n){"use strict";var r=n(0),o=n(21)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(29)("find")},function(e,t,n){"use strict";var r=n(0),o=n(21)(0),i=n(20)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(19),o=n(0),i=n(9),a=n(102),u=n(71),s=n(8),c=n(65),l=n(87);o(o.S+o.F*!n(55)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,f,h=i(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v,m=0,g=l(h);if(y&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==g||d==Array&&u(g))for(t=s(h.length),n=new d(t);t>m;m++)c(n,m,y?v(h[m],m):h[m]);else for(f=g.call(h),n=new d;!(o=f.next()).done;m++)c(n,m,y?a(f,v,[o.value,m],!0):o.value);return n.length=m,n}})},function(e,t,n){"use strict";var r=n(0),o=n(49)(!1),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(20)(i)),"Array",{indexOf:function(e){return a?i.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(53)})},function(e,t,n){"use strict";var r=n(0),o=n(17),i=[].join;r(r.P+r.F*(n(47)!=Object||!n(20)(i)),"Array",{join:function(e){return i.call(o(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),o=n(17),i=n(25),a=n(8),u=[].lastIndexOf,s=!!u&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(s||!n(20)(u)),"Array",{lastIndexOf:function(e){if(s)return u.apply(this,arguments)||0;var t=o(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){"use strict";var r=n(0),o=n(21)(1);r(r.P+r.F*!n(20)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(65);r(r.S+r.F*n(3)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),o=n(93);r(r.P+r.F*!n(20)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),o=n(93);r(r.P+r.F*!n(20)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),o=n(69),i=n(18),a=n(40),u=n(8),s=[].slice;r(r.P+r.F*n(3)(function(){o&&s.call(o)}),"Array",{slice:function(e,t){var n=u(this.length),r=i(this);if(t=void 0===t?n:t,"Array"==r)return s.call(this,e,t);for(var o=a(e,n),c=a(t,n),l=u(c-o),f=Array(l),h=0;h<l;h++)f[h]="String"==r?this.charAt(o+h):this[o+h];return f}})},function(e,t,n){"use strict";var r=n(0),o=n(21)(3);r(r.P+r.F*!n(20)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(10),i=n(9),a=n(3),u=[].sort,s=[1,2,3];r(r.P+r.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n(20)(u)),"Array",{sort:function(e){return void 0===e?u.call(i(this)):u.call(i(this),o(e))}})},function(e,t,n){n(39)("Array")},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){var r=n(0),o=n(130);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(26);r(r.P+r.F*n(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=o(this),n=i(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(5)("toPrimitive"),o=Date.prototype;r in o||n(12)(o,r,n(131))},function(e,t,n){var r=Date.prototype,o=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(13)(r,"toString",function(){var e=i.call(this);return e===e?o.call(this):"Invalid Date"})},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(94)})},function(e,t,n){"use strict";var r=n(4),o=n(16),i=n(5)("hasInstance"),a=Function.prototype;i in a||n(7).f(a,i,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(7).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(6)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,n){var r=n(0),o=n(105),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+i(e-1)*i(e+1))}})},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var o=n(0),i=Math.asinh;o(o.S+o.F*!(i&&1/i(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(0),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),o=n(75);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,n){var r=n(0),o=n(74);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(104)})},function(e,t,n){var r=n(0),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,i=0,a=0,u=arguments.length,s=0;a<u;)n=o(arguments[a++]),s<n?(r=s/n,i=i*r*r+1,s=n):n>0?(r=n/s,i+=r*r):i+=n;return s===1/0?1/0:s*Math.sqrt(i)}})},function(e,t,n){var r=n(0),o=Math.imul;r(r.S+r.F*n(3)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r;return 0|o*i+((65535&n>>>16)*i+o*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(105)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(75)})},function(e,t,n){var r=n(0),o=n(74),i=Math.exp;r(r.S+r.F*n(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),o=n(74),i=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(i(e)+i(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){"use strict";var r=n(2),o=n(11),i=n(18),a=n(70),u=n(26),s=n(3),c=n(35).f,l=n(15).f,f=n(7).f,h=n(44).trim,d=r.Number,p=d,v=d.prototype,y="Number"==i(n(34)(v)),m="trim"in String.prototype,g=function(e){var t=u(e,!1);if("string"==typeof t&&t.length>2){t=m?t.trim():h(t,3);var n,r,o,i=t.charCodeAt(0);if(43===i||45===i){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var a,s=t.slice(2),c=0,l=s.length;c<l;c++)if((a=s.charCodeAt(c))<48||a>o)return NaN;return parseInt(s,r)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof d&&(y?s(function(){v.valueOf.call(n)}):"Number"!=i(n))?a(new p(g(t)),n,d):g(t)};for(var _,b=n(6)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;b.length>w;w++)o(p,_=b[w])&&!o(d,_)&&f(d,_,l(p,_));d.prototype=v,v.constructor=d,n(13)(r,"Number",d)}},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),o=n(2).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(101)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),o=n(101),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),o=n(113);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,n){var r=n(0),o=n(114);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,n){"use strict";var r=n(0),o=n(25),i=n(90),a=n(82),u=1..toFixed,s=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=s(r/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=s(n/e),n=n%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)},v=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)(function(){u.call({})})),"Number",{toFixed:function(e){var t,n,r,u,s=i(this,l),c=o(e),y="",m="0";if(c<0||c>20)throw RangeError(l);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(y="-",s=-s),s>1e-21)if(t=v(s*p(2,69,1))-69,n=t<0?s*p(2,-t,1):s/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(p(10,r,1),0),r=t-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),m=d()}else f(0,n),f(1<<-t,0),m=d()+a.call("0",c);return c>0?(u=m.length,m=y+(u<=c?"0."+a.call("0",c-u)+m:m.slice(0,u-c)+"."+m.slice(u-c))):m=y+m,m}})},function(e,t,n){"use strict";var r=n(0),o=n(3),i=n(90),a=1..toPrecision;r(r.P+r.F*(o(function(){return"1"!==a.call(1,void 0)})||!o(function(){a.call({})})),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(107)})},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(34)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(6),"Object",{defineProperties:n(108)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(6),"Object",{defineProperty:n(7).f})},function(e,t,n){var r=n(4),o=n(30).onFreeze;n(24)("freeze",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(17),o=n(15).f;n(24)("getOwnPropertyDescriptor",function(){return function(e,t){return o(r(e),t)}})},function(e,t,n){n(24)("getOwnPropertyNames",function(){return n(109).f})},function(e,t,n){var r=n(9),o=n(16);n(24)("getPrototypeOf",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(4);n(24)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(4);n(24)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(4);n(24)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(134)})},function(e,t,n){var r=n(9),o=n(36);n(24)("keys",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(4),o=n(30).onFreeze;n(24)("preventExtensions",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(4),o=n(30).onFreeze;n(24)("seal",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(78).set})},function(e,t,n){"use strict";var r=n(46),o={};o[n(5)("toStringTag")]="z",o+""!="[object z]"&&n(13)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(0),o=n(113);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(e,t,n){var r=n(0),o=n(114);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(e,t,n){"use strict";var r,o,i,a,u=n(33),s=n(2),c=n(19),l=n(46),f=n(0),h=n(4),d=n(10),p=n(31),v=n(32),y=n(61),m=n(84).set,g=n(76)(),_=n(77),b=n(115),w=n(116),M=s.TypeError,E=s.process,x=s.Promise,S="process"==l(E),O=function(){},R=o=_.f,k=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n(5)("species")]=function(e){e(O,O)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),C=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,o=1==e._s,i=0;n.length>i;)!function(t){var n,i,a=o?t.ok:t.fail,u=t.resolve,s=t.reject,c=t.domain;try{a?(o||(2==e._h&&I(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?s(M("Promise-chain cycle")):(i=C(n))?i.call(n,u,s):u(n)):s(r)}catch(e){s(e)}}(n[i++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){m.call(s,function(){var t,n,r,o=e._v,i=A(e);if(i&&(t=b(function(){S?E.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=S||A(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},A=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!A(t.promise))return!1;return!0},I=function(e){m.call(s,function(){var t;S?E.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},F=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw M("Promise can't be resolved itself");(t=C(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,c(j,r,1),c(F,r,1))}catch(e){F.call(r,e)}}):(n._v=e,n._s=1,P(n,!1))}catch(e){F.call({_w:n,_d:!1},e)}}};k||(x=function(e){p(this,x,"Promise","_h"),d(e),r.call(this);try{e(c(j,this,1),c(F,this,1))}catch(e){F.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(38)(x.prototype,{then:function(e,t){var n=R(y(this,x));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=c(j,e,1),this.reject=c(F,e,1)},_.f=R=function(e){return e===x||e===a?new i(e):o(e)}),f(f.G+f.W+f.F*!k,{Promise:x}),n(43)(x,"Promise"),n(39)("Promise"),a=n(22).Promise,f(f.S+f.F*!k,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(u||!k),"Promise",{resolve:function(e){return w(u&&this===a?x:this,e)}}),f(f.S+f.F*!(k&&n(55)(function(e){x.all(e).catch(O)})),"Promise",{all:function(e){var t=this,n=R(t),r=n.resolve,o=n.reject,i=b(function(){var n=[],i=0,a=1;v(e,!1,function(e){var u=i++,s=!1;n.push(void 0),a++,t.resolve(e).then(function(e){s||(s=!0,n[u]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=R(t),r=n.reject,o=b(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t,n){var r=n(0),o=n(10),i=n(1),a=(n(2).Reflect||{}).apply,u=Function.apply;r(r.S+r.F*!n(3)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=o(e),s=i(n);return a?a(r,t,s):u.call(r,t,s)}})},function(e,t,n){var r=n(0),o=n(34),i=n(10),a=n(1),u=n(4),s=n(3),c=n(94),l=(n(2).Reflect||{}).construct,f=s(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),h=!s(function(){l(function(){})});r(r.S+r.F*(f||h),"Reflect",{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(h&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var s=n.prototype,d=o(u(s)?s:Object.prototype),p=Function.apply.call(e,d,t);return u(p)?p:d}})},function(e,t,n){var r=n(7),o=n(0),i=n(1),a=n(26);o(o.S+o.F*n(3)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){i(e),t=a(t,!0),i(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),o=n(15).f,i=n(1);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),o=n(1),i=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(72)(i,"Object",function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,n){var r=n(15),o=n(0),i=n(1);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,n){var r=n(0),o=n(16),i=n(1);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(i(e))}})},function(e,t,n){function r(e,t){var n,u,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(n=o.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:s(u=i(e))?r(u,t,l):void 0}var o=n(15),i=n(16),a=n(11),u=n(0),s=n(4),c=n(1);u(u.S,"Reflect",{get:r})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),o=n(1),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),!i||i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(112)})},function(e,t,n){var r=n(0),o=n(1),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),o=n(78);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var s,h,d=arguments.length<4?e:arguments[3],p=i.f(l(e),t);if(!p){if(f(h=a(e)))return r(h,t,n,d);p=c(0)}return u(p,"value")?!(!1===p.writable||!f(d))&&(s=i.f(d,t)||c(0),s.value=n,o.f(d,t,s),!0):void 0!==p.set&&(p.set.call(d,n),!0)}var o=n(7),i=n(15),a=n(16),u=n(11),s=n(0),c=n(37),l=n(1),f=n(4);s(s.S,"Reflect",{set:r})},function(e,t,n){var r=n(2),o=n(70),i=n(7).f,a=n(35).f,u=n(54),s=n(52),c=r.RegExp,l=c,f=c.prototype,h=/a/g,d=/a/g,p=new c(h)!==h;if(n(6)&&(!p||n(3)(function(){return d[n(5)("match")]=!1,c(h)!=h||c(d)==d||"/a/i"!=c(h,"i")}))){c=function(e,t){var n=this instanceof c,r=u(e),i=void 0===t;return!n&&r&&e.constructor===c&&i?e:o(p?new l(r&&!i?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&i?s.call(e):t),n?this:f,c)};for(var v=a(l),y=0;v.length>y;)!function(e){e in c||i(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}(v[y++]);f.constructor=c,c.prototype=f,n(13)(r,"RegExp",c)}n(39)("RegExp")},function(e,t,n){n(51)("match",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(51)("replace",2,function(e,t,n){return[function(r,o){"use strict";var i=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},n]})},function(e,t,n){n(51)("search",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(51)("split",2,function(e,t,r){"use strict";var o=n(54),i=r,a=[].push,u="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[u]||2!="ab".split(/(?:ab)*/)[u]||4!=".".split(/(.?)(.?)/)[u]||".".split(/()()/)[u]>1||"".split(/.?/)[u]){var s=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return i.call(n,e,t);var r,c,l,f,h,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,y=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,p+"g");for(s||(r=new RegExp("^"+m.source+"$(?!\\s)",p));(c=m.exec(n))&&!((l=c.index+c[0][u])>v&&(d.push(n.slice(v,c.index)),!s&&c[u]>1&&c[0].replace(r,function(){for(h=1;h<arguments[u]-2;h++)void 0===arguments[h]&&(c[h]=void 0)}),c[u]>1&&c.index<n[u]&&a.apply(d,c.slice(1)),f=c[0][u],v=l,d[u]>=y));)m.lastIndex===c.index&&m.lastIndex++;return v===n[u]?!f&&m.test("")||d.push(""):d.push(n.slice(v)),d[u]>y?d.slice(0,y):d}}else"0".split(void 0,0)[u]&&(r=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(n,o){var i=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i,o):r.call(String(i),n,o)},r]})},function(e,t,n){"use strict";n(121);var r=n(1),o=n(52),i=n(6),a=/./.toString,u=function(e){n(13)(RegExp.prototype,"toString",e,!0)};n(3)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?u(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)}):"toString"!=a.name&&u(function(){return a.call(this)})},function(e,t,n){"use strict";n(14)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(14)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(14)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(14)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";var r=n(0),o=n(80)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(0),o=n(8),i=n(81),a="".endsWith;r(r.P+r.F*n(68)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),u=void 0===n?r:Math.min(o(n),r),s=String(e);return a?a.call(t,s,u):t.slice(u-s.length,u)===s}})},function(e,t,n){"use strict";n(14)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(14)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(14)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){var r=n(0),o=n(40),i=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(0),o=n(81);r(r.P+r.F*n(68)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";n(14)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";var r=n(80)(!0);n(73)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";n(14)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){var r=n(0),o=n(17),i=n(8);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=i(t.length),r=arguments.length,a=[],u=0;n>u;)a.push(String(t[u++])),u<r&&a.push(String(arguments[u]));return a.join("")}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(82)})},function(e,t,n){"use strict";n(14)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";var r=n(0),o=n(8),i=n(81),a="".startsWith;r(r.P+r.F*n(68)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(14)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(14)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(14)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){"use strict";n(44)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(2),o=n(11),i=n(6),a=n(0),u=n(13),s=n(30).KEY,c=n(3),l=n(60),f=n(43),h=n(41),d=n(5),p=n(119),v=n(86),y=n(132),m=n(53),g=n(1),_=n(17),b=n(26),w=n(37),M=n(34),E=n(109),x=n(15),S=n(7),O=n(36),R=x.f,k=S.f,C=E.f,P=r.Symbol,T=r.JSON,A=T&&T.stringify,I=d("_hidden"),F=d("toPrimitive"),j={}.propertyIsEnumerable,D=l("symbol-registry"),N=l("symbols"),L=l("op-symbols"),G=Object.prototype,B="function"==typeof P,z=r.QObject,W=!z||!z.prototype||!z.prototype.findChild,q=i&&c(function(){return 7!=M(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=R(G,t);r&&delete G[t],k(e,t,n),r&&e!==G&&k(G,t,r)}:k,U=function(e){var t=N[e]=M(P.prototype);return t._k=e,t},V=B&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},H=function(e,t,n){return e===G&&H(L,t,n),g(e),t=b(t,!0),g(n),o(N,t)?(n.enumerable?(o(e,I)&&e[I][t]&&(e[I][t]=!1),n=M(n,{enumerable:w(0,!1)})):(o(e,I)||k(e,I,w(1,{})),e[I][t]=!0),q(e,t,n)):k(e,t,n)},Y=function(e,t){g(e);for(var n,r=y(t=_(t)),o=0,i=r.length;i>o;)H(e,n=r[o++],t[n]);return e},X=function(e,t){return void 0===t?M(e):Y(M(e),t)},$=function(e){var t=j.call(this,e=b(e,!0));return!(this===G&&o(N,e)&&!o(L,e))&&(!(t||!o(this,e)||!o(N,e)||o(this,I)&&this[I][e])||t)},Q=function(e,t){if(e=_(e),t=b(t,!0),e!==G||!o(N,t)||o(L,t)){var n=R(e,t);return!n||!o(N,t)||o(e,I)&&e[I][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=C(_(e)),r=[],i=0;n.length>i;)o(N,t=n[i++])||t==I||t==s||r.push(t);return r},J=function(e){for(var t,n=e===G,r=C(n?L:_(e)),i=[],a=0;r.length>a;)!o(N,t=r[a++])||n&&!o(G,t)||i.push(N[t]);return i};B||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(L,n),o(this,I)&&o(this[I],e)&&(this[I][e]=!1),q(this,e,w(1,n))};return i&&W&&q(G,e,{configurable:!0,set:t}),U(e)},u(P.prototype,"toString",function(){return this._k}),x.f=Q,S.f=H,n(35).f=E.f=Z,n(48).f=$,n(57).f=J,i&&!n(33)&&u(G,"propertyIsEnumerable",$,!0),p.f=function(e){return U(d(e))}),a(a.G+a.W+a.F*!B,{Symbol:P});for(var K="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;K.length>ee;)d(K[ee++]);for(var te=O(d.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return o(D,e+="")?D[e]:D[e]=P(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!B,"Object",{create:X,defineProperty:H,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),T&&a(a.S+a.F*(!B||c(function(){var e=P();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&m(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,A.apply(T,r)}}}),P.prototype[F]||n(12)(P.prototype,F,P.prototype.valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){"use strict";var r=n(0),o=n(62),i=n(85),a=n(1),u=n(40),s=n(8),c=n(4),l=n(2).ArrayBuffer,f=n(61),h=i.ArrayBuffer,d=i.DataView,p=o.ABV&&l.isView,v=h.prototype.slice,y=o.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!o.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||c(e)&&y in e}}),r(r.P+r.U+r.F*n(3)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=u(e,n),o=u(void 0===t?n:t,n),i=new(f(this,h))(s(o-r)),c=new d(this),l=new d(i),p=0;r<o;)l.setUint8(p++,c.getUint8(r++));return i}}),n(39)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(62).ABV,{DataView:n(85).DataView})},function(e,t,n){n(28)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){"use strict";var r=n(97),o=n(45);n(50)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),o=n(98),i=n(9),a=n(8),u=n(10),s=n(64);r(r.P,"Array",{flatMap:function(e){var t,n,r=i(this);return u(e),t=a(r.length),n=s(r,0),o(n,r,r,t,0,1,e,arguments[1]),n}}),n(29)("flatMap")},function(e,t,n){"use strict";var r=n(0),o=n(98),i=n(9),a=n(8),u=n(25),s=n(64);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=i(this),n=a(t.length),r=s(t,0);return o(r,t,t,n,0,void 0===e?1:u(e)),r}}),n(29)("flatten")},function(e,t,n){"use strict";var r=n(0),o=n(49)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(29)("includes")},function(e,t,n){var r=n(0),o=n(76)(),i=n(2).process,a="process"==n(18)(i);r(r.G,{asap:function(e){var t=a&&i.domain;o(t?t.bind(e):e)}})},function(e,t,n){var r=n(0),o=n(18);r(r.S,"Error",{isError:function(e){return"Error"===o(e)}})},function(e,t,n){var r=n(0);r(r.G,{global:n(2)})},function(e,t,n){n(58)("Map")},function(e,t,n){n(59)("Map")},function(e,t,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(96)("Map")})},function(e,t,n){var r=n(0);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(0),o=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*o}})},function(e,t,n){var r=n(0),o=n(106),i=n(104);r(r.S,"Math",{fscale:function(e,t,n,r,a){return i(o(e,t,n,r,a))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{iaddh:function(e,t,n,r){var o=e>>>0,i=t>>>0,a=n>>>0;return i+(r>>>0)+((o&a|(o|a)&~(o+a>>>0))>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r,a=n>>16,u=r>>16,s=(a*i>>>0)+(o*i>>>16);return a*u+(s>>16)+((o*u>>>0)+(65535&s)>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{isubh:function(e,t,n,r){var o=e>>>0,i=t>>>0,a=n>>>0;return i-(r>>>0)-((~o&a|~(o^a)&o-a>>>0)>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(0),o=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*o}})},function(e,t,n){var r=n(0);r(r.S,"Math",{scale:n(106)})},function(e,t,n){var r=n(0);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,o=65535&n,i=65535&r,a=n>>>16,u=r>>>16,s=(a*i>>>0)+(o*i>>>16);return a*u+(s>>>16)+((o*u>>>0)+(65535&s)>>>16)}})},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(10),a=n(7);n(6)&&r(r.P+n(56),"Object",{__defineGetter__:function(e,t){a.f(o(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(10),a=n(7);n(6)&&r(r.P+n(56),"Object",{__defineSetter__:function(e,t){a.f(o(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(0),o=n(111)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){var r=n(0),o=n(112),i=n(17),a=n(15),u=n(65);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=i(e),s=a.f,c=o(r),l={},f=0;c.length>f;)void 0!==(n=s(r,t=c[f++]))&&u(l,t,n);return l}})},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(26),a=n(16),u=n(15).f;n(6)&&r(r.P+n(56),"Object",{__lookupGetter__:function(e){var t,n=o(this),r=i(e,!0);do{if(t=u(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(26),a=n(16),u=n(15).f;n(6)&&r(r.P+n(56),"Object",{__lookupSetter__:function(e){var t,n=o(this),r=i(e,!0);do{if(t=u(n,r))return t.set}while(n=a(n))}})},function(e,t,n){var r=n(0),o=n(111)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(22),a=n(76)(),u=n(5)("observable"),s=n(10),c=n(1),l=n(31),f=n(38),h=n(12),d=n(32),p=d.RETURN,v=function(e){return null==e?void 0:s(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},m=function(e){return void 0===e._o},g=function(e){m(e)||(e._o=void 0,y(e))},_=function(e,t){c(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:s(n),this._c=n)}catch(t){return void e.error(t)}m(this)&&y(this)};_.prototype=f({},{unsubscribe:function(){g(this)}});var b=function(e){this._s=e};b.prototype=f({},{next:function(e){var t=this._s;if(!m(t)){var n=t._o;try{var r=v(n.next);if(r)return r.call(n,e)}catch(e){try{g(t)}finally{throw e}}}},error:function(e){var t=this._s;if(m(t))throw e;var n=t._o;t._o=void 0;try{var r=v(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!m(t)){var n=t._o;t._o=void 0;try{var r=v(n.complete);e=r?r.call(n,e):void 0}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var w=function(e){l(this,w,"Observable","_f")._f=s(e)};f(w.prototype,{subscribe:function(e){return new _(e,this._f)},forEach:function(e){var t=this;return new(i.Promise||o.Promise)(function(n,r){s(e);var o=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:n})})}}),f(w,{from:function(e){var t="function"==typeof this?this:w,n=v(c(e)[u]);if(n){var r=c(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(d(e,!1,function(e){if(t.next(e),n)return p})===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)(function(e){var t=!1;return a(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),h(w.prototype,u,function(){return this}),r(r.G,{Observable:w}),n(39)("Observable")},function(e,t,n){"use strict";var r=n(0),o=n(22),i=n(2),a=n(61),u=n(116);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then(function(){return n})}:e,n?function(n){return u(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(0),o=n(77),i=n(115);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(27),o=n(1),i=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,o(n),i(r))}})},function(e,t,n){var r=n(27),o=n(1),i=r.key,a=r.map,u=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:i(arguments[2]),r=a(o(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var s=u.get(t);return s.delete(n),!!s.size||u.delete(t)}})},function(e,t,n){var r=n(122),o=n(92),i=n(27),a=n(1),u=n(16),s=i.keys,c=i.key,l=function(e,t){var n=s(e,t),i=u(e);if(null===i)return n;var a=l(i,t);return a.length?n.length?o(new r(n.concat(a))):a:n};i.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var r=n(27),o=n(1),i=n(16),a=r.has,u=r.get,s=r.key,c=function(e,t,n){if(a(e,t,n))return u(e,t,n);var r=i(t);return null!==r?c(e,r,n):void 0};r.exp({getMetadata:function(e,t){return c(e,o(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(1),i=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return i(o(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(27),o=n(1),i=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return i(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(1),i=n(16),a=r.has,u=r.key,s=function(e,t,n){if(a(e,t,n))return!0;var r=i(t);return null!==r&&s(e,r,n)};r.exp({hasMetadata:function(e,t){return s(e,o(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(1),i=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return i(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(1),i=n(10),a=r.key,u=r.set;r.exp({metadata:function(e,t){return function(n,r){u(e,t,(void 0!==r?o:i)(n),a(r))}}})},function(e,t,n){n(58)("Set")},function(e,t,n){n(59)("Set")},function(e,t,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(96)("Set")})},function(e,t,n){"use strict";var r=n(0),o=n(80)(!0);r(r.P,"String",{at:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(0),o=n(23),i=n(8),a=n(54),u=n(52),s=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};n(72)(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(o(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in s?String(e.flags):u.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=i(e.lastIndex),new c(r,t)}})},function(e,t,n){"use strict";var r=n(0),o=n(117);r(r.P,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";var r=n(0),o=n(117);r(r.P,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";n(44)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(44)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){n(86)("asyncIterator")},function(e,t,n){n(86)("observable")},function(e,t,n){var r=n(0);r(r.S,"System",{global:n(2)})},function(e,t,n){n(58)("WeakMap")},function(e,t,n){n(59)("WeakMap")},function(e,t,n){n(58)("WeakSet")},function(e,t,n){n(59)("WeakSet")},function(e,t,n){for(var r=n(88),o=n(36),i=n(13),a=n(2),u=n(12),s=n(42),c=n(5),l=c("iterator"),f=c("toStringTag"),h=s.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(d),v=0;v<p.length;v++){var y,m=p[v],g=d[m],_=a[m],b=_&&_.prototype;if(b&&(b[l]||u(b,l,h),b[f]||u(b,f,m),s[m]=h,g))for(y in r)b[y]||i(b,y,r[y],!0)}},function(e,t,n){var r=n(0),o=n(84);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){var r=n(2),o=n(0),i=r.navigator,a=[].slice,u=!!i&&/MSIE .\./.test(i.userAgent),s=function(e){return function(t,n){var r=arguments.length>2,o=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};o(o.G+o.B+o.F*u,{setTimeout:s(r.setTimeout),setInterval:s(r.setInterval)})},function(e,t,n){n(255),n(194),n(196),n(195),n(198),n(200),n(205),n(199),n(197),n(207),n(206),n(202),n(203),n(201),n(193),n(204),n(208),n(209),n(161),n(163),n(162),n(211),n(210),n(181),n(191),n(192),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(242),n(247),n(254),n(245),n(237),n(238),n(243),n(248),n(250),n(233),n(234),n(235),n(236),n(239),n(240),n(241),n(244),n(246),n(249),n(251),n(252),n(253),n(156),n(158),n(157),n(160),n(159),n(145),n(143),n(149),n(146),n(152),n(154),n(142),n(148),n(139),n(153),n(137),n(151),n(150),n(144),n(147),n(136),n(138),n(141),n(140),n(155),n(88),n(227),n(232),n(121),n(228),n(229),n(230),n(231),n(212),n(120),n(122),n(123),n(267),n(256),n(257),n(262),n(265),n(266),n(260),n(263),n(261),n(264),n(258),n(259),n(213),n(214),n(215),n(216),n(217),n(220),n(218),n(219),n(221),n(222),n(223),n(224),n(226),n(225),n(270),n(268),n(269),n(311),n(314),n(313),n(315),n(316),n(312),n(317),n(318),n(292),n(295),n(291),n(289),n(290),n(293),n(294),n(276),n(310),n(275),n(309),n(321),n(323),n(274),n(308),n(320),n(322),n(273),n(319),n(272),n(277),n(278),n(279),n(280),n(281),n(283),n(282),n(284),n(285),n(286),n(288),n(287),n(297),n(298),n(299),n(300),n(302),n(301),n(304),n(303),n(305),n(306),n(307),n(271),n(296),n(326),n(325),n(324),e.exports=n(22)},function(e,t,n){(function(t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=115)}([function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Node.Component},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(56),c=r(s),l=n(14),f=r(l),h=n(49),d=r(h),p=n(3),v=r(p),y=n(57),m=r(y),g=n(65),_=r(g),b=n(37),w=r(b),M=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gl=e,n.shaderHeader=t.defaultShaderHeader,n.macro=new _.default,n}return a(t,e),u(t,[{key:"instanciate",value:function(e){return M(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.materialGeneratorResolver.get(e);case 2:return r=n.sent,n.abrupt("return",r(this));case 4:case"end":return n.stop()}},n,this)}))}}],[{key:"get",value:function(e){return v.default.__get(e,t)}},{key:"addMaterialType",value:function(e,t){this.materialGeneratorResolver.register(e,Promise.resolve(t))}},{key:"addSORTMaterial",value:function(e,t){return M(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.materialGeneratorResolver.register(e,function(){return M(r,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.parse(t);case 2:return n=e.sent,e.abrupt("return",function(e){return new w.default(e.gl,n)});case 4:case"end":return e.stop()}},e,this)}))}()));case 1:case"end":return n.stop()}},n,this)}))}},{key:"addSORTMaterialFromURL",value:function(e,t){var n=this;return this.materialGeneratorResolver.register(e,function(){return M(n,void 0,void 0,regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.resolve(t);case 2:return n=e.sent,e.next=5,m.default.parse(n);case 5:return r=e.sent,e.abrupt("return",function(e){return new w.default(e.gl,r)});case 7:case"end":return e.stop()}},e,this)}))}())}},{key:"getMaterialStatus",value:function(e){return this.materialGeneratorResolver.getStatus(e)}}]),t}(v.default);t.default=E,E.registryName="MaterialFactory",E.defaultShaderHeader=c.default,E.materialGeneratorResolver=new f.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(38),c=r(s),l=n(83),f=r(l),h=n(6),d=r(h),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,WebGLRenderingContext.TEXTURE_2D));return t.maxTextureSize||(t.maxTextureSize=e.getParameter(WebGLRenderingContext.MAX_TEXTURE_SIZE)),n}return a(t,e),u(t,[{key:"update",value:function(e,t,n,r,o,i,a,u){this.gl.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.resourceReference);var s=void 0,c=void 0,l=void 0,f=void 0;if(void 0===n?(s=Object.assign({flipY:!0,premultipliedAlpha:!1},t),c=e):(f=e,l=t,s=Object.assign({flipY:!0,premultipliedAlpha:!1},u)),this.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,s.flipY?1:0),this.gl.pixelStorei(WebGLRenderingContext.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultipliedAlpha?1:0),void 0===n){var h=this.__ensurePOT(c);this._width=h.width,this._height=h.height,this.gl.texImage2D(this.textureType,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,h.result),this.__type=WebGLRenderingContext.UNSIGNED_BYTE,this.__format=WebGLRenderingContext.RGBA}else void 0===a&&(a=null),0!==l&&0!==n||(l=1,n=1,o=WebGLRenderingContext.RGB,i=WebGLRenderingContext.UNSIGNED_BYTE,a=new Uint8Array([0,0,0])),this._width=l,this._height=n,this.gl.texImage2D(this.textureType,f,o,l,n,r,o,i,a),this.__format=o,this.__type=i;this.__ensureMipmap(),this.valid=!0}},{key:"updateDrawerCanvas",value:function(){for(var e=this.drawerContext.createImageData(this.width,this.height),t=this.getRawPixels(),n=this.width*this.height*c.default.formatToElementCount(this.format),r=0;r<n;r++)e.data[r]=t[r];this.drawerContext.putImageData(e,0,0),this.drawerContext.setTransform(1,0,0,-1,0,this.height),this.drawerContext.drawImage(this.drawerContext.canvas,0,0)}},{key:"getRawPixels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.width,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.height;return this.__getRawPixels(this.type,this.format,e,t,n,r,WebGLRenderingContext.TEXTURE_2D)}},{key:"applyDraw",value:function(){this._drawerContext&&this.update(this._drawerContext.canvas)}},{key:"__ensureMipmap",value:function(){this.__needMipmap(this.minFilter)&&(this.gl.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.resourceReference),this.gl.generateMipmap(WebGLRenderingContext.TEXTURE_2D))}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"viewport",get:function(){return new d.default(0,0,this.width,this.height)}},{key:"drawerContext",get:function(){if(!this._drawerContext){var e=document.createElement("canvas");e.width=this._width,e.height=this.height,this._drawerContext=e.getContext("2d"),this.updateDrawerCanvas()}return this._drawerContext}}],[{key:"generateDefaultTexture",value:function(e){t.defaultTextures.set(e,null);var n=new t(e);n.update(0,1,1,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),t.defaultTextures.set(e,n)}}]),t}(f.default);t.default=p,p.defaultTextures=new Map},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"__get",value:function(t,n){var r=t;if(void 0===r.__id__)throw new Error("Supplied gl context seems not initialized by Grimoire.js");if(void 0===e._glRelatedRegistry[r.__id__]&&(e._glRelatedRegistry[r.__id__]={}),void 0!==e._glRelatedRegistry[r.__id__][n.registryName])return e._glRelatedRegistry[r.__id__][n.registryName];var o=new n(r);return e._glRelatedRegistry[r.__id__][n.registryName]=o,o}},{key:"__getAll",value:function(t){var n=[];for(var r in e._glRelatedRegistry){var o=e._glRelatedRegistry[r];void 0!==o[t.registryName]&&n.push(o[t.registryName])}return n}}]),e}();t.default=i,i._glRelatedRegistry={}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t,n){if(r(this,e),this.gl=t,this.resourceReference=n,this.destroyed=!1,this._metadata={},!t)throw new Error("missing WebGLRenderingContext");this.index=e._maxIndex++,a.default.debug&&(n.__SPECTOR_Metadata=this._metadata,this.setMetadata("GL Resource Index",this.index)),this.valid=!1}return o(e,[{key:"setMetadata",value:function(e,t){this._metadata[e]=t}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"valid",get:function(){return this._valid},set:function(e){var t=this;this._valid!==e&&(this._valid=e,this._valid?this._validResolve(this):this.validPromise=new Promise(function(e){t._validResolve=e}))}},{key:"metadata",get:function(){return this._metadata}}]),e}();u._maxIndex=0,t.default=u},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(84),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"configure",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.viewport(0,0,this.Width,this.Height):e.viewport(this.Left,this.Bottom,this.Width,this.Height)}}]),t}(s.default);t.default=c},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.Vector3:void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(36),c=r(s),l=n(17),f=r(l),h=n(7),d=r(h),p=n(18),v=r(p),y=n(0),m=r(y),g=c.default.mat4,_=c.default.vec3,b=c.default.vec4,w=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.localTransform=new f.default,e._children=[],e._cachePVM=new f.default,e._cacheVM=new f.default,e._forward=new d.default([0,0,-1,0]),e._up=new d.default([0,1,0,0]),e._right=new d.default([1,0,0,0]),e._globalPosition=new d.default([0,0,0]),e._globalScale=new d.default([1,1,1]),e._matrixTransformMode=!1,e._updatedTransform=!0,e._globalTransform=new f.default,e}return a(t,e),u(t,[{key:"calcPVM",value:function(e){return g.mul(this._cachePVM.rawElements,e.ProjectionViewMatrix.rawElements,this.globalTransform.rawElements),this._cachePVM}},{key:"calcVM",value:function(e){return g.mul(this._cacheVM.rawElements,e.ViewMatrix.rawElements,this.globalTransform.rawElements),this._cacheVM}},{key:"$awake",value:function(){var e=this;this.getAttributeRaw("position").watch(function(t){e.notifyUpdateTransform()}),this.getAttributeRaw("rotation").watch(function(t){e.notifyUpdateTransform()}),this.getAttributeRaw("scale").watch(function(t){e.notifyUpdateTransform()}),this.__bindAttributes()}},{key:"$mount",value:function(){this._parentTransform=this.node.parent.getComponent(t),this._parentTransform&&this._parentTransform._children.push(this),this._updateTransform()}},{key:"$unmount",value:function(){this._parentTransform&&(this._parentTransform._children.splice(this._parentTransform._children.indexOf(this),1),this._parentTransform=null)}},{key:"notifyUpdateTransform",value:function(){this._updatedTransform||(this._updatedTransform=!0,this._children.forEach(function(e){return e.notifyUpdateTransform()}))}},{key:"applyMatrix",value:function(e){this.setAttribute("scale",e.getScaling()),this.setAttribute("rotation",e.getRotation()),this.setAttribute("position",e.getTranslation())}},{key:"_updateTransform",value:function(e){this._updatedTransform&&(this._updatedTransform=!1,g.fromRotationTranslationScale(this.localTransform.rawElements,this.rotation.rawElements,this.position.rawElements,this.scale.rawElements),this._updateGlobalTransform(e))}},{key:"_updateGlobalTransform",value:function(e){this._parentTransform?g.mul(this._globalTransform.rawElements,this._parentTransform.globalTransform.rawElements,this.localTransform.rawElements):g.copy(this._globalTransform.rawElements,this.localTransform.rawElements),this._globalTransformInverse&&g.invert(this._globalTransformInverse.rawElements,this._globalTransform.rawElements),e||this._updateDirections(),this._updateGlobalProperty(),this.node.emit("transformUpdated",this)}},{key:"_updateDirections",value:function(){b.transformMat4(this._forward.rawElements,t._forwardBase.rawElements,this.globalTransform.rawElements),b.transformMat4(this._up.rawElements,t._upBase.rawElements,this.globalTransform.rawElements),b.transformMat4(this._right.rawElements,t._rightBase.rawElements,this.globalTransform.rawElements)}},{key:"_updateGlobalProperty",value:function(){this._parentTransform?(_.transformMat4(this._globalPosition.rawElements,this.position.rawElements,this._parentTransform.globalTransform.rawElements),_.transformMat4(this._globalScale.rawElements,this.scale.rawElements,this._parentTransform.globalTransform.rawElements)):(_.copy(this._globalPosition.rawElements,this.position.rawElements),_.copy(this._globalScale.rawElements,this.scale.rawElements))}},{key:"globalTransform",get:function(){return this._updateTransform(),this._globalTransform}},{key:"globalTransformInverse",get:function(){return this._globalTransformInverse?this._updateTransform():this._globalTransformInverse=f.default.inverse(this.globalTransform),this._globalTransformInverse}},{key:"globalPosition",get:function(){return this._updateTransform(),this._globalPosition}},{key:"globalScale",get:function(){return this._updateTransform(),this._globalScale}},{key:"forward",get:function(){return this._updateTransform(),this._forward}},{key:"up",get:function(){return this._updateTransform(),this._up}},{key:"right",get:function(){return this._updateTransform(),this._right}}]),t}(m.default);t.default=w,w.attributes={position:{converter:"Vector3",default:[0,0,0]},rotation:{converter:"Rotation3",default:[0,0,0,1]},scale:{converter:"Vector3",default:[1,1,1]}},w._forwardBase=new v.default(0,0,-1,0),w._upBase=new v.default(0,1,0,0),w._rightBase=new v.default(1,0,0,0)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"calcHash",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(69),u=r(a),s=n(7),c=r(s),l=n(70),f=r(l),h=n(20),d=r(h),p=n(9),v=r(p),y=function(){function e(t){o(this,e),this.gl=t,this.buffers=[],this.indices={},this.accessors={},this.aabb=new u.default([c.default.Zero]),this._accessorHashCache=0,d.default.request("ANGLE_instanced_arrays",!0),this.instanciator=d.default.get(t).extensions.ANGLE_instanced_arrays}return i(e,[{key:"addAttributes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WebGLRenderingContext.STATIC_DRAW,r=this.buffers.length,o=!1;for(var i in t){var a=t[i];if(a.bufferIndex=r,void 0===a.size)throw new Error('Accessor specified with the semantics "'+i+'" is not containing size as paranmeter.');void 0===a.type&&(a.type=WebGLRenderingContext.FLOAT),void 0===a.stride&&(a.stride=a.size*this._attribTypeToByteSize(a.type)),void 0===a.offset&&(a.offset=0),void 0===a.normalized&&(a.normalized=!1),void 0===a.keepOnBuffer&&(a.keepOnBuffer="POSITION"===i),o=o||!!a.keepOnBuffer,this.accessors[i]=a}e=this._ensureToBeVertexBuffer(e,n,o),this.buffers.push(e),this._recalculateAccsessorHash()}},{key:"addIndex",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments[6],u=void 0,s=void 0,c=void 0,l=void 0,h=void 0;if("number"==typeof t?(h=t,u=n,s=r,c=o,l=i,a||(a=0),"number"!=typeof c&&(c=0),"number"!=typeof s&&(s=WebGLRenderingContext.TRIANGLES)):(u=t,s=n,c=r,l=o,a=i,"number"!=typeof s&&(s=WebGLRenderingContext.TRIANGLES),"number"!=typeof c&&(c=0)),!l){if(u instanceof f.default||u instanceof ArrayBuffer||u instanceof DataView)throw new Error("The argument 'count' is necessary if you specified buffer with an instance of Buffer or ArrayBuffer");l=u.length}0===a&&(a=this._indexTypeFromCount(l)),u=this._ensureToBeIndexBuffer(u,a),this.indices[e]={byteOffset:c,byteSize:this._indexTypeToByteSize(a),type:a,topology:s,count:l,index:u,instanceCount:h}}},{key:"drawByDefault",value:function(t,n,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.MAX_VALUE,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;n.forEach(function(t){e.bindBufferToAttribute(o,r,t,t)}),e.drawWithCurrentVertexBuffer(this,t,i,a)}},{key:"clone",value:function(){var t=new e(this.gl);return t.buffers=[].concat(this.buffers),t.accessors=Object.assign({},this.accessors),t.indices=Object.assign({},this.indices),t.aabb=new u.default([this.aabb.pointLBF,this.aabb.pointRTN]),t}},{key:"_ensureToBeVertexBuffer",value:function(e,t,n){if(!(e instanceof f.default)){var r=e;Array.isArray(r)&&(r=new Float32Array(r)),e=new f.default(this.gl,WebGLRenderingContext.ARRAY_BUFFER,t),e.keepSource=n,e.update(r)}return e}},{key:"_ensureToBeIndexBuffer",value:function(e,t){if(e instanceof f.default){if(e.target!==WebGLRenderingContext.ELEMENT_ARRAY_BUFFER)throw new Error("The usage of buffer specified as index buffer is not ELEMENT_ARRAY_BUFFER")}else{var n=e;Array.isArray(n)&&(n=new(this._indexTypeToArrayConstructor(t))(n)),e=new f.default(this.gl,WebGLRenderingContext.ELEMENT_ARRAY_BUFFER,WebGLRenderingContext.STATIC_DRAW),e.update(n)}return e}},{key:"_indexTypeFromCount",value:function(e){if(e<256)return WebGLRenderingContext.UNSIGNED_BYTE;if(e<65536)return WebGLRenderingContext.UNSIGNED_SHORT;if(e<4294967296)return WebGLRenderingContext.UNSIGNED_INT;throw new Error("Index count exceeds 4,294,967,296. WebGL can not handle such a big index buffer")}},{key:"_indexTypeToArrayConstructor",value:function(e){switch(e){case WebGLRenderingContext.UNSIGNED_BYTE:return Uint8Array;case WebGLRenderingContext.UNSIGNED_SHORT:return Uint16Array;case WebGLRenderingContext.UNSIGNED_INT:return Uint32Array;default:throw new Error("Unsupported index type")}}},{key:"_indexTypeToByteSize",value:function(e){switch(e){case WebGLRenderingContext.UNSIGNED_BYTE:return 1;case WebGLRenderingContext.UNSIGNED_SHORT:return 2;case WebGLRenderingContext.UNSIGNED_INT:return 4;default:throw new Error("Unsupported index type")}}},{key:"_attribTypeToByteSize",value:function(e){switch(e){case WebGLRenderingContext.FLOAT:case WebGLRenderingContext.UNSIGNED_INT:return 4;case WebGLRenderingContext.UNSIGNED_SHORT:return 2;case WebGLRenderingContext.UNSIGNED_BYTE:return 1;default:throw new Error('Unsupported attribute variable type "'+e+'"')}}},{key:"_recalculateAccsessorHash",value:function(){var e="";for(var t in this.accessors)e+=t+"|";this._accessorHashCache=v.default.calcHash(e)}},{key:"accessorHash",get:function(){return this._accessorHashCache}}],[{key:"bindBufferToAttribute",value:function(e,t,n,r){var o=t.findAttributeLocation(n);if(o<0)return!1;var i=e.accessors[r];if(!i)throw new Error('Specified buffer "'+r+' was not found on this geometry while attempt to bind "'+n+'" of attribute variables.\n\n      All of the vertex buffer available on this geometry is '+Object.keys(e.accessors)+'"');return e.buffers[i.bufferIndex].bind(),t.gl.vertexAttribPointer(o,i.size,i.type,i.normalized,i.stride,i.offset),i.instancingDivisor>0&&e.instanciator.vertexAttribDivisorANGLE(o,i.instancingDivisor),!0}},{key:"drawWithCurrentVertexBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e.indices[t];if(void 0===o)throw new Error('Specified index buffer "'+t+'" was not found on this geometry.All of the index buffer available on this geometry is "'+Object.keys(e.indices)+'"');o.index.bind(),o.instanceCount>0?e.instanciator.drawElementsInstancedANGLE(o.topology,Math.min(o.count,n),o.type,Math.min(r*o.byteSize+o.byteOffset,o.byteOffset+(o.count-1)*o.byteSize),o.instanceCount):o.index.gl.drawElements(o.topology,Math.min(o.count,n),o.type,Math.min(r*o.byteSize+o.byteOffset,o.byteOffset+(o.count-1)*o.byteSize))}}]),e}();t.default=y,y._lastGeometry=new Map},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UniformResolverRegistry=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(82),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=t.UniformResolverRegistry=function(){function e(){r(this,e),this._generators={}}return o(e,[{key:"add",value:function(e,t){if("function"!=typeof t)throw new Error("secound argument of add must be function");this._generators[e.toUpperCase()]=t}},{key:"generateRegisterers",value:function(e,t){var n=[],r=[],o={};for(var i in t.uniforms){var u=t.uniforms[i],s=u.semantic,c=this._generators[s];if(!c)throw new Error("There was no suitable registerer for specified semantic "+s);var l=c(u,e,e.technique,e.material);"function"==typeof l?n.push(l):(n.push(l.register),l.dispose&&r.push(l.dispose),l.update&&(o[i]=l.update))}return new a.default(n,r,o)}}]),e}();t.default=new u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){r(this,e)}return o(e,null,[{key:"getPow2Size",value:function(e,t){var n=Math.pow(2,Math.ceil(Math.log2(e))),r=Math.pow(2,Math.ceil(Math.log2(t)));return{width:Math.max(1,Math.min(n,a.default.maxTextureSize)),height:Math.max(1,Math.min(r,a.default.maxTextureSize))}}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(2),f=r(l),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$mount",value:function(){var e=this;this.texture=new f.default(this.companion.get("gl")),this.texture.magFilter=this.getAttribute("magFilter"),this.texture.minFilter=this.getAttribute("minFilter"),this.texture.wrapT=this.getAttribute("wrapT"),this.texture.wrapS=this.getAttribute("wrapS"),this.getAttributeRaw("magFilter").watch(function(t){return e.texture.magFilter=t}),this.getAttributeRaw("minFilter").watch(function(t){return e.texture.minFilter=t}),this.getAttributeRaw("wrapS").watch(function(t){return e.texture.wrapS=t}),this.getAttributeRaw("wrapT").watch(function(t){return e.texture.wrapT=t})}},{key:"$unmount",value:function(){this.texture.destroy(),this.texture=null}}]),t}(c.default);t.default=h,h.attributes={minFilter:{converter:"Enum",default:"LINEAR",table:{LINEAR:WebGLRenderingContext.LINEAR,NEAREST:WebGLRenderingContext.NEAREST,NEAREST_MIPMAP_NEAREST:WebGLRenderingContext.NEAREST_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:WebGLRenderingContext.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_NEAREST:WebGLRenderingContext.LINEAR_MIPMAP_NEAREST,LINEAR_MIPMAP_LINEAR:WebGLRenderingContext.LINEAR_MIPMAP_LINEAR}},magFilter:{converter:"Enum",default:"LINEAR",table:{LINEAR:WebGLRenderingContext.LINEAR,NEAREST:WebGLRenderingContext.NEAREST}},wrapS:{converter:"Enum",default:"REPEAT",table:{REPEAT:WebGLRenderingContext.REPEAT,MIRRORED_REPEAT:WebGLRenderingContext.MIRRORED_REPEAT,CLAMP_TO_EDGE:WebGLRenderingContext.CLAMP_TO_EDGE}},wrapT:{converter:"Enum",default:"REPEAT",table:{REPEAT:WebGLRenderingContext.REPEAT,MIRRORED_REPEAT:WebGLRenderingContext.MIRRORED_REPEAT,CLAMP_TO_EDGE:WebGLRenderingContext.CLAMP_TO_EDGE}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},a=function(){function e(){r(this,e),this._resolved={},this._resolvers={},this._handlers={}}return o(e,[{key:"get",value:function(e){return void 0!==this._resolved[e]?Promise.resolve(this._resolved[e]):this._waitForResolved(e)}},{key:"getStatus",value:function(t){return void 0!==this._resolvers[t]?e.RESOLVING:void 0!==this._resolved[t]?e.RESOLVED:e.UNLOADED}},{key:"register",value:function(e,t){return i(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._isPromise(t)){n.next=19;break}if(n.prev=1,void 0===this._resolvers[e]){n.next=4;break}throw new Error("Dupelicated named resource '"+e+"' was registered.");case 4:return this._resolvers[e]=t,n.next=7,t;case 7:return r=n.sent,this._resolvers[e]=void 0,this._callHandlers(e,r),this._resolved[e]=r,n.abrupt("return",r);case 14:throw n.prev=14,n.t0=n.catch(1),new Error("Unexpected error has occured during resolution of named resource '"+e+"'\n"+n.t0);case 17:n.next=20;break;case 19:return n.abrupt("return",this.register(e,Promise.resolve(t)));case 20:case"end":return n.stop()}},n,this,[[1,14]])}))}},{key:"_waitForResolved",value:function(e){var t=this;return new Promise(function(n,r){void 0===t._handlers[e]&&(t._handlers[e]=[]),t._handlers[e].push(function(e){n(e)})})}},{key:"_callHandlers",value:function(e,t){void 0!==this._handlers[e]&&(this._handlers[e].forEach(function(e){return e(t)}),delete this._handlers[e])}},{key:"_isPromise",value:function(e){return"function"==typeof e.then}}]),e}();t.default=a,a.UNLOADED=0,a.RESOLVING=1,a.RESOLVED=2},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(35),c=r(s),l=n(0),f=r(l),h=n(34),d=r(h),p=n(16),v=r(p),y=function(){function e(){a(this,e),this.coroutines=[]}return u(e,[{key:"callCoroutine",value:function(e,t){var n=this,r=void 0;this.coroutines.forEach(function(n){if(n.next<=e){if(n.container.disposed)return r||(r=[]),void r.push(n);if(!n.container.isActive)return;var o=n.coroutine.next(t);o.done||o.value<0?(r||(r=[]),r.push(n)):n.next+o.value<e?n.next=e:n.next=n.next+o.value}}),r&&r.forEach(function(e){var t=n.coroutines.indexOf(e);n.coroutines.splice(t,1)})}},{key:"register",value:function(e,t,n){var r=t.call(e);this.coroutines.push({coroutine:r,next:0,container:e,tag:n})}},{key:"unregister",value:function(e,t){var n=this,r=[];t?this.coroutines.forEach(function(n){n.container===e&&n.tag===t&&r.push(n)}):this.coroutines.forEach(function(t){t.container===e&&r.push(t)}),r.forEach(function(e){var t=n.coroutines.indexOf(e);n.coroutines.splice(t)})}}]),e}(),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"__registerTimerCoroutine",value:function(e,t){var n=this.companion.get("timer-coroutine");n||(n=new y,this.loopManager.register(function(e){return n.callCoroutine(e.time,e)},100),this.companion.set(c.default.define(this.node.name.ns.qualifiedName).for("timer-coroutine"),n)),n.register(this,e,t)}},{key:"__registerFrameCoroutine",value:function(e,t){var n=this.companion.get("frame-coroutine");n||(n=new y,this.loopManager.register(function(e){return n.callCoroutine(e.frameCount,e)},100),this.companion.set(c.default.define(this.node.name.ns.qualifiedName).for("frame-coroutine"),n)),n.register(this,e,t)}},{key:"__invoke",value:function(e,t){var n=this;this.__registerTimerCoroutine(regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t;case 2:o=r.sent,e.call(n,o);case 4:case"end":return r.stop()}},r,this)}))}},{key:"__unregisterTimerCoroutine",value:function(e){var t=this.companion.get("timer-coroutine");t&&t.unregister(this,e)}},{key:"__unregisterFrameCoroutine",value:function(e){var t=this.companion.get("frame-coroutine");t&&t.unregister(this,e)}},{key:"__registerAssetLoading",value:function(e){return this.assetLoadingManager.loader.register(e,this)}},{key:"loopManager",get:function(){return this._loopManagerBackingStore||(this._loopManagerBackingStore=this.node.getComponentInAncestor(v.default)),this._loopManagerBackingStore}},{key:"assetLoadingManager",get:function(){return this._assetLoadingManagerBackingStore||(this._assetLoadingManagerBackingStore=this.node.getComponentInAncestor(d.default)),this._assetLoadingManagerBackingStore}}]),t}(f.default);t.default=m,m.attributes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(51),f=r(l),h=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._loopActions=[],e}return a(t,e),u(t,[{key:"$awake",value:function(){var e=this;this._registerNextLoop=window.requestAnimationFrame?function(){window.requestAnimationFrame(e._loop.bind(e))}:function(){window.setTimeout(e._loop.bind(e),1e3/60)}}},{key:"$mount",value:function(){var e=this;this.getAttributeRaw("loopEnabled").watch(function(t){t&&e._begin()}),this._timer=new f.default,this.getAttributeRaw("fpsRestriction").watch(function(t){e._timer.fpsRestriction=t},!0),this._timer.internalUpdate()}},{key:"register",value:function(e,t){this._loopActions.push({action:e,priorty:t}),this._loopActions.sort(function(e,t){return e.priorty-t.priorty})}},{key:"_begin",value:function(){this._registerNextLoop()}},{key:"_loop",value:function(){var e=this;this._timer.internalUpdate()&&(this.node.emit("loop",{timer:this._timer}),this._loopActions.forEach(function(t){return t.action(e._timer)})),this._registerNextLoop()}}]),t}(c.default);t.default=h,h.attributes={loopEnabled:{default:!1,converter:"Boolean"},fpsRestriction:{default:60,converter:"Number"}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.Matrix:void 0},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.Vector4:void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(54),f=r(l),h=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.queueRegistory=new f.default,e}return a(t,e),u(t,[{key:"$mount",value:function(){var e=this;this.sceneDescription={},t._sceneDescriptionCreationHandlers.forEach(function(t){return t(e.sceneDescription,e)})}},{key:"updateScene",value:function(e){if(this._lastUpdateIndex!==e.frameCount){var t={sceneDescription:this.sceneDescription,timer:e};this.node.broadcastMessage("update",t),this._lastUpdateIndex=e.frameCount}}}],[{key:"onSceneDescriptionCreation",value:function(e){t._sceneDescriptionCreationHandlers.push(e)}}]),t}(c.default);t.default=h,h.attributes={},h._sceneDescriptionCreationHandlers=[]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=r(s),l=n(3),f=r(l),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gl=e,n.extensions={},n._readyExtensions={},n._resolveRequested(),t._requestObserver.push(n._resolveExtensionSafely.bind(n)),n}return a(t,e),u(t,[{key:"_resolveRequested",value:function(){var e=this;t._requestedExtensions.forEach(function(t){e._resolveExtensionSafely(t.extensionName)})}},{key:"_resolveExtensionSafely",value:function(e){var n=t._requestedExtensions[t._requestIndexOf(e)];if(!this._resolveExtension(n.extensionName)&&n.isNecessary)throw new Error("A WebGL extension '"+n.extensionName+"' was requested. But that is not supported on this device.")}},{key:"_resolveExtension",value:function(e){if(this._readyExtensions[e])return!0;var n=void 0;return n=void 0===t._customExtensionResolvers[e]?this.extensions[e]=this.gl.getExtension(e):this.extensions[e]=t._customExtensionResolvers[e](this.gl),this._readyExtensions[e]=void 0!==this.extensions[e],n&&c.default.get(this.gl).macro.setValue(e.toUpperCase(),""),!!this._readyExtensions[e]}}],[{key:"get",value:function(e){return this.__get(e,t)}},{key:"supported",value:function(e){var n=t._getFirst();if(n)return void 0!==n.extensions[e]&&null!==n.extensions[e];throw new Error("There was no WebGLRenderingContext initialized yet")}},{key:"request",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t._requestIndexOf(e);r>-1&&n?t._requestedExtensions[r]={extensionName:e,isNecessary:n}:-1===r&&t._requestedExtensions.push({extensionName:e,isNecessary:n}),t._requestObserver.forEach(function(t){return t(e)})}},{key:"_getFirst",value:function(){return t.__getAll(t)[0]}},{key:"_requestIndexOf",value:function(e){for(var n=0;n<t._requestedExtensions.length;n++)if(t._requestedExtensions[n].extensionName===e)return n;return-1}}]),t}(f.default);t.default=h,h.registryName="GLExtensionRequestor",h._customExtensionResolvers={},h._requestObserver=[],h._requestedExtensions=[],h._customExtensionResolvers.WEBGL_color_buffer_float=function(e){var t=void 0;if(null===e.getExtension("WEBGL_color_buffer_float")){var n=e.createFramebuffer(),r=e.createTexture();e.bindFramebuffer(e.FRAMEBUFFER,n),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.FLOAT,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),t=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE,e.deleteTexture(r),e.deleteFramebuffer(n)}else t=!0;return t}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gl=e,n}return i(t,e),a(t,[{key:"instanciate",value:function(e,n){return c(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,i,a,u,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.factoryDelegates[e]){r.next=3;break}throw new Error("Can not instanciate unknown geometry type "+e);case 3:return r.next=5,o(this.gl,n);case 5:if(i=r.sent,void 0===t.factoryExtentions[e]){r.next=17;break}a=t.factoryExtentions[e],u=0;case 9:if(!(u<a.length)){r.next=17;break}if(!(s=a[u](i,n))){r.next=14;break}return r.next=14,s;case 14:u++,r.next=9;break;case 17:return r.abrupt("return",i);case 18:case"end":return r.stop()}},r,this)}))}},{key:"instanciateAsDefault",value:function(e){var n=t.factoryArgumentDeclarations[e],r={};for(var o in n){var i=n[o];r[o]=i.default}return this.instanciate(e,r)}}],[{key:"get",value:function(e){return this.__get(e,t)}},{key:"addType",value:function(e,n,r){t.factoryDelegates[e]=r,t.factoryArgumentDeclarations[e]=n}},{key:"extend",value:function(e,n){void 0===t.factoryExtentions[e]&&(t.factoryExtentions[e]=[]),t.factoryExtentions[e].push(n)}}]),t}(s.default);t.default=l,l.registryName="GeometryFactory",l.factoryDelegates={},l.factoryArgumentDeclarations={},l.factoryExtentions={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),c=r(s),l=n(88),f=r(l),h=n(40),d=r(h),p=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},v=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.materialArgs={},e.materialReady=!1,e.useMaterial=!1,e}return a(t,e),u(t,[{key:"getDrawPriorty",value:function(e,t){if(!this.materialReady&&!this.isActive)return Number.MAX_VALUE;var n=void 0;if(void 0===(n="Auto"===this._drawOrder?"Auto"===this.material.techniques[t].drawOrder?f.default[this._transparent?"UseAlpha":"NoAlpha"]:f.default[this.material.techniques[t].drawOrder]:f.default[this._drawOrder]))throw new Error('Specified drawing order "'+this.material.techniques[t].drawOrder+'" is not defined');return n.descending?(1-e/1e4)*n.priorty:e/1e4*n.priorty}},{key:"$mount",value:function(){this.getAttributeRaw("material").watch(this._onMaterialChanged.bind(this)),this.__registerAssetLoading(this._onMaterialChanged()),this.getAttributeRaw("drawOrder").boundTo("_drawOrder"),this.getAttributeRaw("transparent").boundTo("_transparent")}},{key:"_onMaterialChanged",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=this.getAttribute("material"))){e.next=4;break}return this.useMaterial=!1,e.abrupt("return");case 4:if(this.useMaterial=!0,this._registeredAttributes&&this.__removeExposedMaterialParameters(),this._materialComponent){e.next=11;break}return e.next=9,this._prepareInternalMaterial(t);case 9:e.next=13;break;case 11:return e.next=13,this._prepareExternalMaterial(t);case 13:case"end":return e.stop()}},e,this)}))}},{key:"_prepareExternalMaterial",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:n=t.sent,this.material=n,this.materialArgs=this._materialComponent.materialArgs,this.materialReady=!0;case 6:case"end":return t.stop()}},t,this)}))}},{key:"_prepareInternalMaterial",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e;case 4:n=t.sent,this.material=n,this.__exposeMaterialParameters(this.material),this._registeredAttributes=!0,this.materialReady=!0;case 9:case"end":return t.stop()}},t,this)}))}}],[{key:"rewriteDefaultMaterial",value:function(e){e!==t._defaultMaterial&&(t._defaultMaterial=e,c.default.componentDeclarations.get("MaterialContainer").attributes.material.default="new("+e+")")}},{key:"defaultMaterial",get:function(){return this._defaultMaterial}}]),t}(d.default);t.default=v,v.attributes={material:{converter:"Material",default:"new(unlit)",componentBoundTo:"_materialComponent"},drawOrder:{converter:"String",default:"Auto"},transparent:{converter:"Boolean",default:!0}},v._defaultMaterial="unlit"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(92),f=r(l),h=n(24),d=r(h),p=n(12),v=r(p),y=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._wasInside=!1,e}return a(t,e),u(t,[{key:"$awake",value:function(){var e=this;this.getAttributeRaw("camera").boundTo("camera"),this.getAttributeRaw("viewport").watch(function(t){e._viewportSizeGenerator=t,e.$resizeCanvas()}),this._viewportSizeGenerator=this.getAttribute("viewport");var t=this.getAttribute("regionName");t||(t="renderer-"+this.node.index),this.renderingTarget=new f.default(this.companion.get("gl")),this.renderingTarget.setViewport(this.viewport),d.default.get(this.companion.get("gl")).setRenderingTarget(t,this.renderingTarget),this._initializeMouseHandlers()}},{key:"$mount",value:function(){var e=this;this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement"),this.getAttributeRaw("handleMouse").watch(function(t){t?e._enableMouseHandling():e._disableMouseHandling()},!0),0===this.node.children.length&&this.node.addChildByName("render-scene",{}),this.$resizeCanvas()}},{key:"$unmount",value:function(){this._disableMouseHandling()}},{key:"$treeInitialized",value:function(){this.$resizeCanvas()}},{key:"$resizeCanvas",value:function(){this._viewportCache=this._viewportSizeGenerator(this._canvas),this.renderingTarget.setViewport(this._viewportCache);var e=v.default.getPow2Size(this._viewportCache.Width,this._viewportCache.Height);this.node.broadcastMessage("resizeViewport",{width:this._viewportCache.Width,height:this._viewportCache.Height,pow2Width:e.width,pow2Height:e.height})}},{key:"$renderViewport",value:function(e){this.node.broadcastMessage("render",{camera:this.camera,viewport:this._viewportCache,timer:e.timer})}},{key:"_initializeMouseHandlers",value:function(){var e=this;this._mouseMoveHandler=function(t){e._isViewportInside(t)?(e._wasInside||e._sendMouseEvent("mouseenter",t),e._sendMouseEvent("mousemove",t),e._wasInside=!0):(e._wasInside&&e._sendMouseEvent("mouseleave",t),e._wasInside=!1)},this._mouseEnterHandler=function(t){e._isViewportInside(t)&&(e._sendMouseEvent("mouseenter",t),e._wasInside=!0)},this._mouseLeaveHandler=function(t){e._wasInside&&e._sendMouseEvent("mouseleave",t),e._wasInside=!1},this._mouseClickHandler=function(t){e._sendMouseEvent("click",t)},this._dblClickHandler=function(t){e._sendMouseEvent("dblclick",t)},this._mouseDownHandler=function(t){e._isViewportInside(t)&&(e._sendMouseEvent("mousedown",t),e._wasInside=!0)},this._mouseUpHandler=function(t){e._sendMouseEvent("mouseup",t)}}},{key:"_enableMouseHandling",value:function(){this._canvas.addEventListener("mousemove",this._mouseMoveHandler),this._canvas.addEventListener("mouseleave",this._mouseLeaveHandler),this._canvas.addEventListener("mouseenter",this._mouseEnterHandler),this._canvas.addEventListener("mousedown",this._mouseDownHandler),this._canvas.addEventListener("mouseup",this._mouseUpHandler),this._canvas.addEventListener("click",this._mouseClickHandler),this._canvas.addEventListener("dblclick",this._dblClickHandler)}},{key:"_disableMouseHandling",value:function(){this._canvas.removeEventListener("mousemove",this._mouseMoveHandler),this._canvas.removeEventListener("mouseleave",this._mouseLeaveHandler),this._canvas.removeEventListener("mouseenter",this._mouseEnterHandler),this._canvas.removeEventListener("mousedown",this._mouseDownHandler),this._canvas.removeEventListener("mouseup",this._mouseUpHandler),this._canvas.removeEventListener("click",this._mouseClickHandler),this._canvas.removeEventListener("dblclick",this._dblClickHandler)}},{key:"_sendMouseEvent",value:function(e,t){this.isActive&&(this.node.emit(e),this.node.broadcastMessage(e,this._toViewportMouseArgs(t)))}},{key:"_isViewportInside",value:function(e){var t=this._getRelativePosition(e),n=this._viewportCache.toLocalNormalized(t[0],t[1]);return n[0]>=0&&n[0]<=1&&n[1]>=0&&n[1]<=1}},{key:"_getRelativePosition",value:function(e){var t=this._canvas.getBoundingClientRect(),n=t.left+window.pageXOffset,r=t.top+window.pageYOffset;return[e.pageX-n,t.height-(e.pageY-r),t.width,t.height]}},{key:"_toViewportMouseArgs",value:function(e){var t=this._getRelativePosition(e),n=this._viewportCache.toLocal(t[0],t[1]),r=this._viewportCache.toLocalNormalized(t[0],t[1]);return Object.assign({},e,{viewportX:n[0],viewportY:n[1],viewportNormalizedX:r[0],viewportNormalizedY:r[1],canvasX:t[0],canvasY:t[1],canvasNormalizedX:t[0]/t[2],canvasNormalizedY:t[1]/t[3],inside:this._isViewportInside(e)})}},{key:"viewport",get:function(){return this._viewportCache?this._viewportCache:(this._viewportCache=this._viewportSizeGenerator(this.companion.get("gl").canvas),this._viewportCache)}}]),t}(c.default);t.default=y,y.attributes={regionName:{converter:"String",default:null},camera:{converter:"Component",default:"camera",target:"Camera"},viewport:{converter:"Viewport",default:"auto"},handleMouse:{converter:"Boolean",default:!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),c=r(s),l=n(41),f=r(l),h=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gl=e,n._renderingTargets={},n._renderingTargetResolver={},n.setRenderingTarget("canvas",new f.default(e)),n}return a(t,e),u(t,[{key:"setRenderingTarget",value:function(e,t){if("default"===e)throw new Error("Rendering target can't be named as 'default'.");this._renderingTargets[e]=t,this._resolveRenderingTargets(e,t)}},{key:"getRenderingTarget",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this._renderingTargets[e])){t.next=5;break}return t.abrupt("return",n);case 5:return t.abrupt("return",this._waitForRenderingTarget(e));case 6:case"end":return t.stop()}},t,this)}))}},{key:"_waitForRenderingTarget",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===this._renderingTargetResolver[e]&&(this._renderingTargetResolver[e]=[]),t.abrupt("return",new Promise(function(t,r){n._renderingTargetResolver[e].push(t)}));case 2:case"end":return t.stop()}},t,this)}))}},{key:"_resolveRenderingTargets",value:function(e,t){var n=this._renderingTargetResolver[e];n&&n.forEach(function(e){return e(t)})}},{key:"targetNames",get:function(){return Object.keys(this._renderingTargets)}}],[{key:"get",value:function(e){return this.__get(e,t)}}]),t}(c.default);t.default=d,d.registryName="RenderingTargetRegistry"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(4),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,e.createRenderbuffer()))}return i(t,e),a(t,[{key:"update",value:function(e,t,n){this.gl.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,this.resourceReference),this.gl.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,e,t,n),this.valid=!0}},{key:"bind",value:function(){this.gl.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,this.resourceReference)}},{key:"destroy",value:function(){this.gl.deleteRenderbuffer(this.resourceReference),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gl=e,n.backbuffers={},n.depthBuffers={},n}return i(t,e),a(t,[{key:"setBackbuffer",value:function(e,t){this.backbuffers[e]=t}},{key:"getBackbuffer",value:function(e){return this.backbuffers[e]}},{key:"setDepthBuffer",value:function(e,t){this.depthBuffers[e]=t}},{key:"getDepthBuffer",value:function(e){return this.depthBuffers[e]}}],[{key:"get",value:function(e){return this.__get(e,t)}}]),t}(s.default);t.default=c,c.registryName="RenderingBufferResourceRegistry"},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(15),c=r(s),l=n(44),f=r(l),h=n(28),d=r(h),p=n(45),v=r(p),y=function(t){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),u(n,[{key:"resize",value:function(e,t){}},{key:"$awake",value:function(){var t=this;if(!this.node.getComponent(d.default)){var r=this.getAttribute("resizerType"),o=n.resizers[r];if(!o)throw new Error("Specified resizer '"+r+"' is not yet registered to resizable resource updator");e(function(){t.node.addComponent(o)})}}}]),n}(c.default);t.default=y,y.resizers={ViewportSize:v.default,Constant:f.default},y.attributes={resizerType:{converter:"String",default:"Constant"}}}).call(t,n(95).setImmediate)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(12),f=r(l),h=n(27),d=r(h),p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._lastWidth=0,e._lastHeight=0,e}return a(t,e),u(t,[{key:"__resizeResources",value:function(e,t){if(this.getAttribute("keepPow2Size")){var n=f.default.getPow2Size(e,t);e=n.width,t=n.height}e===this._lastWidth&&t===this._lastHeight||(this.node.getComponents(d.default).forEach(function(n){return n.resize(e,t)}),this._lastWidth=e,this._lastHeight=t)}}]),t}(c.default);t.default=p,p.attributes={keepPow2Size:{converter:"Boolean",default:!0}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(98),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"$awake",value:function(){var e=this;this.getAttributeRaw("clearColor").boundTo("clearColor"),this.getAttributeRaw("clearColorEnabled").boundTo("clearColorEnabled"),this.getAttributeRaw("clearDepthEnabled").boundTo("clearDepthEnabled"),this.getAttributeRaw("clearDepth").boundTo("clearDepth"),this.getAttributeRaw("out").watch(function(t){e._out=t,t.then(function(t){return e.out=t})},!0)}},{key:"__beforeRender",value:function(){if(!u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__beforeRender",this).call(this))return!1;if(!this.out)return!1;var e=0;return this.clearColorEnabled&&(e|=WebGLRenderingContext.COLOR_BUFFER_BIT),this.clearDepthEnabled&&(e|=WebGLRenderingContext.DEPTH_BUFFER_BIT),this.out.beforeDraw(e,this.clearColor.rawElements,this.clearDepth),!0}}]),t}(c.default);t.default=l,l.attributes={out:{converter:"RenderingTarget",default:"default"},clearColor:{default:"#0000",converter:"Color4"},clearColorEnabled:{default:!0,converter:"Boolean"},clearDepthEnabled:{default:!0,converter:"Boolean"},clearDepth:{default:1,converter:"Number"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(27),l=r(c),f=n(13),h=r(f),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$awake",this).call(this),this.textureComponent=this.node.getComponent(h.default)}},{key:"__texture",get:function(){return this.textureComponent.texture}}]),t}(l.default);t.default=d,d.attributes={flipY:{converter:"Boolean",default:!0},premultipliedAlpha:{converter:"Boolean",default:!1}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},a=function(){function e(t){r(this,e),this.toAbsolute=t,this.cache={},this.resolvers={}}return o(e,[{key:"resolve",value:function(e,t){return i(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.toAbsolute(e),!this._cached(r)){n.next=5;break}return n.abrupt("return",this.cache[r]);case 5:if(!this._resolving(r)){n.next=11;break}return n.next=8,this.resolvers[r];case 8:return n.abrupt("return",n.sent);case 11:return this.resolvers[r]=t(r),n.next=14,this.resolvers[r];case 14:return o=n.sent,this._resolved(r,o),n.abrupt("return",o);case 17:case"end":return n.stop()}},n,this)}))}},{key:"_cached",value:function(e){return void 0!==this.cache[e]}},{key:"_resolving",value:function(e){return void 0!==this.resolvers[e]}},{key:"_resolved",value:function(e,t){delete this.resolvers[e],this.cache[e]=t}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(31),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t._toAbsolute))}return i(t,e),a(t,null,[{key:"isDataURL",value:function(e){return!!e.match(/^\s*data\:.*;base64/)}},{key:"_toAbsolute",value:function(e){if(e.match(/^blob\:/m)||t.isDataURL(e))return e;var n=document.createElement("a");return n.href=e,n.protocol+"//"+n.host+n.pathname+n.search+n.hash}}]),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageResolver=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(32),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=t.ImageResolver=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"resolve",value:function(e){var n=this;return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolve",this).call(this,e,function(t){return new Promise(function(r,o){var i=new Image;i.crossOrigin=n._getCORSConfig(t),i.onload=function(){r(i)},i.onerror=function(n){o('Error has been occured during loading "'+t+"("+e+')"\n'+n)},i.src=t})})}},{key:"_getCORSConfig",value:function(e){for(var n=null,r=0;r<t.corsResolvers.length&&null===(n=t.corsResolvers[r](e));r++);return null===n&&(n=t.defaultCORSConfig),n}}]),t}(c.default);l.defaultCORSConfig="anonymous",l.corsResolvers=[],t.default=new l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(117),f=r(l),h=n(48),d=r(h),p=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},v=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.loader=new d.default,e}return a(t,e),u(t,[{key:"$treeInitialized",value:function(){this.getAttribute("autoStart")&&this._autoStart(),this._documentResolver()}},{key:"$awake",value:function(){var e=this;this.companion.set(this.name.ns.for("loader"),this.loader),this.loader.register(new Promise(function(t){e._documentResolver=t}),this);var t=this.companion.get("canvasContainer");if(this.getAttribute("enableLoader")){var n=document.createElement("div");n.innerHTML=f.default,n.style.width=n.style.height="100%",t.appendChild(n),this._loaderElement=n}}},{key:"_autoStart",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loader.promise;case 2:this._loaderElement&&this._loaderElement.remove(),this.node.emit("asset-load-completed"),this.tree("goml").setAttribute("loopEnabled",!0),t=this.companion.get("canvasElement"),t.classList.add("gr-resource-loaded-canvas");case 7:case"end":return e.stop()}},e,this)}))}}]),t}(c.default);t.default=v,v.attributes={loadingProgress:{default:0,converter:"Number"},autoStart:{default:!0,converter:"Boolean"},enableLoader:{default:!0,converter:"Boolean"}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Base.Namespace},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.GLM:void 0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(67),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t,n){r(this,e),this.gl=t,this.techniqueRecipes=n,this.techniques={};for(var o in n)this.techniques[o]=new a.default(this,n[o])}return o(e,[{key:"draw",value:function(e){var t=this.techniques[e.technique];t&&t.draw(e)}},{key:"clone",value:function(){var t=new e(this.gl,this.techniqueRecipes);for(var n in this.techniques){var r=this.techniques[n],o=t.techniques[n];for(var i in r.passes){var a=r.passes[i],u=o.passes[i];for(var s in a.arguments)u[s]=a[s]}}return t}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"typeToTypedArrayConstructor",value:function(e){switch(e){case WebGLRenderingContext.UNSIGNED_BYTE:return Uint8Array;case WebGLRenderingContext.UNSIGNED_SHORT:return Uint16Array;case WebGLRenderingContext.UNSIGNED_INT:return Uint32Array;case WebGLRenderingContext.BYTE:return Int8Array;case WebGLRenderingContext.SHORT:return Int16Array;case WebGLRenderingContext.INT:return Int32Array;case WebGLRenderingContext.FLOAT:return Float32Array;default:throw new Error("Element type "+e+" is not valid for buffer elements")}}},{key:"arrayBufferToElementType",value:function(e){if(e instanceof Uint8Array)return WebGLRenderingContext.UNSIGNED_BYTE;if(e instanceof Uint16Array)return WebGLRenderingContext.UNSIGNED_SHORT;if(e instanceof Uint32Array)return WebGLRenderingContext.UNSIGNED_INT;if(e instanceof Int8Array)return WebGLRenderingContext.BYTE;if(e instanceof Int16Array)return WebGLRenderingContext.SHORT;if(e instanceof Int32Array)return WebGLRenderingContext.INT;if(e instanceof Float32Array)return WebGLRenderingContext.FLOAT;throw new Error("Unknown buffer element type")}},{key:"formatToElementCount",value:function(e){switch(e){case WebGLRenderingContext.RGBA:return 4;case WebGLRenderingContext.RGB:return 3;default:throw new Error("Unknown buffer format")}}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=r(s),l=n(40),f=r(l),h=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},d=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.materialArgs={},e}return a(t,e),u(t,[{key:"$mount",value:function(){var e=this.getAttribute("type");if(!e||"string"!=typeof e)throw new Error("Material type name must be sppecified and string");var t=c.default.get(this.companion.get("gl"));this.materialPromise=t.instanciate(e),this._registerAttributes()}},{key:"_registerAttributes",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.materialPromise;case 2:this.material=e.sent,this.__exposeMaterialParameters(this.material),this.ready=!0;case 5:case"end":return e.stop()}},e,this)}))}}]),t}(f.default);t.default=d,d.attributes={type:{converter:"String",default:null}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(35),c=r(s),l=n(15),f=r(l),h=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._lastParameters={},e}return a(t,e),u(t,[{key:"__exposeMaterialParameters",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={};for(var o in e.techniques){var i=e.techniques[o];for(var a in i.passes)!function(e){var a=i.passes[e],u=c.default.define(o+".pass"+e);for(var s in a.argumentDeclarations)!function(e){var o=u.for(e).fqn;r[o]=a.argumentDeclarations[e],t.__addAttribute(o,a.argumentDeclarations[e]);try{void 0!==a.arguments[e]?t.setAttribute(o,a.arguments[e]):n&&void 0!==t._lastParameters[o]&&t._lastParameters[o].converter===a.argumentDeclarations[e].converter&&t.setAttribute(o,t._lastParameters[o].__lastValue),t.getAttributeRaw(o).watch(function(t,n){a.setArgument(e,t,n)},!0)}catch(e){throw new Error("Parsing variable failed")}}(s)}(a)}this._lastParameters=r}},{key:"__removeExposedMaterialParameters",value:function(){for(var e in this._lastParameters)this._lastParameters[e].__lastValue=this.getAttribute(e),this.__removeAttributes(e)}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t){r(this,e),this.gl=t}return o(e,[{key:"beforeDraw",value:function(e,t,n){if(this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),e){this.__configureClearScissor();var r=0;0!=(e&WebGLRenderingContext.COLOR_BUFFER_BIT)&&t&&(this.gl.clearColor.apply(this.gl,t),r|=WebGLRenderingContext.COLOR_BUFFER_BIT),0!=(e&WebGLRenderingContext.DEPTH_BUFFER_BIT)&&null!==n&&(this.gl.clearDepth(n),r|=WebGLRenderingContext.DEPTH_BUFFER_BIT),0!==r&&this.gl.clear(r)}this.getViewport().configure(this.gl)}},{key:"getBufferWidth",value:function(){return this.gl.canvas.width}},{key:"getBufferHeight",value:function(){return this.gl.canvas.height}},{key:"getViewport",value:function(){return new a.default(0,0,this.getBufferWidth(),this.getBufferHeight())}},{key:"__configureClearScissor",value:function(){this.gl.disable(WebGLRenderingContext.SCISSOR_TEST)}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(4),l=r(c),f=n(25),h=r(f),d=n(2),p=r(d),v=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,e.createFramebuffer()))}return a(t,e),u(t,[{key:"update",value:function(e,t,n){if(this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.resourceReference),e instanceof p.default){if(void 0===n&&(n=0),void 0===t&&(t=0),this.gl.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0+n,WebGLRenderingContext.TEXTURE_2D,e.resourceReference,t),this.gl.checkFramebufferStatus(WebGLRenderingContext.FRAMEBUFFER)!==WebGLRenderingContext.FRAMEBUFFER_COMPLETE)throw new Error("INCOMPLETE framebuffer")}else if(e instanceof h.default){var r=void 0===t?WebGLRenderingContext.DEPTH_ATTACHMENT:t;this.gl.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,r,WebGLRenderingContext.RENDERBUFFER,e.resourceReference)}this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)}},{key:"bind",value:function(){this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.resourceReference)}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteFramebuffer(this.resourceReference)}}]),t}(l.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(25),l=r(c),f=n(26),h=r(f),d=n(27),p=r(d),v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$awake",this).call(this),this.buffer=new l.default(this.companion.get("gl")),this.buffer.update(WebGLRenderingContext.DEPTH_COMPONENT16,1,1);var e=this.getAttribute("name");e&&h.default.get(this.companion.get("gl")).setDepthBuffer(e,this.buffer)}},{key:"$unmount",value:function(){this.buffer.destroy(),this.buffer=null}},{key:"resize",value:function(e,t){this.buffer.update(WebGLRenderingContext.DEPTH_COMPONENT16,e,t)}}]),t}(p.default);t.default=v,v.attributes={name:{converter:"String",default:null}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"$mount",value:function(){var e=this;this.getAttributeRaw("resolution").watch(function(t){var n=t;e.__resizeResources(n.X,n.Y)},!0)}}]),t}(s.default);t.default=c,c.attributes={resolution:{converter:"Vector2",default:"512,512"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),c=r(s),l=n(28),f=r(l),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$mount",value:function(){var e=this.node.getComponentInAncestor(c.default);if(!e)throw new Error("Resizable resource with ViewportSizeResourceResizer must be child of RendererComponent");this.__resizeResources(e.viewport.Width,e.viewport.Height)}},{key:"$resizeViewport",value:function(e){var t=this.getAttribute("resolutionScale");this.__resizeResources(e.width*t.X,e.height*t.Y)}}]),t}(f.default);t.default=h,h.attributes={resolutionScale:{converter:"Vector2",default:"1"},keepPow2Size:{converter:"Boolean",default:!0}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(18),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){r(this,e)}return o(e,null,[{key:"fromIndex",value:function(e){return new a.default((511&e)/255,((130816&e)>>8)/255,((33488896&e)>>16)/255,((-16777216&e)>>24)/255)}},{key:"fromColor",value:function(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(29),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"$awake",value:function(){var e=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$awake",this).call(this),this.metadata.type="scene",this.getAttributeRaw("layer").boundTo("layer"),this.getAttributeRaw("camera").boundTo("_camera"),this.getAttributeRaw("technique").boundTo("technique"),this.getAttributeRaw("camera").watch(function(t){e.metadata.camera=t?t.node.id:null},!0),this.getAttributeRaw("technique").watch(function(t){e.metadata.technique=t},!0),this.getAttributeRaw("layer").watch(function(t){e.metadata.layer=t},!0)}},{key:"$mount",value:function(){this._gl=this.companion.get("gl")}},{key:"$render",value:function(e){var t=this.camera?this.camera:e.camera;t&&this.__beforeRender()&&(t.updateContainedScene(e.timer),t.renderScene({renderer:this,camera:t,layer:this.layer,viewport:this.out.getViewport(),timer:e.timer,technique:this.technique,sceneDescription:{},rendererDescription:this.rendererDescription}))}}]),t}(c.default);t.default=l,l.attributes={layer:{converter:"String",default:"default"},camera:{default:null,converter:"Component",target:"Camera"},technique:{default:"default",converter:"String"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(116),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},l=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.registerCount=0,e.loadCount=0,e.completeCount=0,e.errorCount=0,e.promise=new Promise(function(t){e._resolve=t}),e}return i(t,e),a(t,[{key:"register",value:function(e,t){return c(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.registerCount++,r=null,n.prev=2,n.next=5,e;case 5:r=n.sent,this.loadCount++,n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),console.error("Failed to resolve asset loading promise.\n\nLoading fired by: "+t.name.fqn+"\nAttached node:"+t.node.name.fqn+"\n"+n.t0),this.errorCount++;case 13:return this.completeCount++,this._checkLoadCompleted(),n.abrupt("return",r);case 16:case"end":return n.stop()}},n,this,[[2,9]])}))}},{key:"_checkLoadCompleted",value:function(){this.emit("progress",this),this.registerCount===this.completeCount&&this._resolve()}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextFileResolver=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(32),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=t.TextFileResolver=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"resolve",value:function(e){var n=this;return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolve",this).call(this,e,function(e){return t.isDataURL(e)?Promise.resolve(n._dataUriToText(e)):new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(e){t(r.responseText)},r.onerror=function(e){n(e)},r.send()})})}},{key:"_dataUriToText",value:function(e){var t=e.split(",");return atob(t[1])}}]),t}(c.default);t.default=new l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.VideoResolver=function(){function e(){r(this,e)}return o(e,[{key:"resolve",value:function(e){var t=this;return new Promise(function(n,r){var o=document.createElement("video");o.crossOrigin=t._getCORSConfig(e),o.preload="auto",o.addEventListener("canplay",function(){n(o)}),o.addEventListener("canplaythrough",function(){n(o)}),o.onerror=function(t){r('Error has been occured during loading "'+e+'"\n'+t)},o.src=e,o.load(),o.readyState>3&&n(o)})}},{key:"_getCORSConfig",value:function(t){for(var n=null,r=0;r<e.corsResolvers.length&&null===(n=e.corsResolvers[r](t));r++);return null===n&&(n=e.defaultCORSConfig),n}}]),e}();i.defaultCORSConfig="anonymous",i.corsResolvers=[],t.default=new i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.timeScale=1,this.fpsRestriction=60,this._accumlatedSkipFrame=0,this._frameCount=0}return o(e,[{key:"internalUpdate",value:function(){this._frameCount++;var e=Date.now();return!!this._shouldUpdate(e)&&(this._updateTimer(e),!0)}},{key:"_shouldUpdate",value:function(e){if(void 0===this._time)return this._unrestrictedLastRealTime=e,!0;var t=e-this._unrestrictedLastRealTime,n=1e3/this.fpsRestriction;return this._unrestrictedLastRealTime=e,Math.abs(n-2*t-this._accumlatedSkipFrame)<Math.abs(n-t-this._accumlatedSkipFrame)?(this._accumlatedSkipFrame+=t,!1):(this._accumlatedSkipFrame=0,!0)}},{key:"_updateTimer",value:function(e){void 0===this._lastRealTime?(this._time=0,this._deltaTime=0):(this._deltaTime=e-this._lastRealTime,this._time+=this.timeScale*this._deltaTime),this._lastRealTime=e,void 0===this._lastFPS?0!==this.deltaTime&&(this._lastFPS=1e3/this.deltaTime):this._lastFPS=(this._lastFPS+1e3/this.deltaTime)/2}},{key:"deltaTime",get:function(){return this._deltaTime}},{key:"time",get:function(){return this._time}},{key:"timeInSecound",get:function(){return this._time/1e3}},{key:"frameCount",get:function(){return this._frameCount}},{key:"FPS",get:function(){return this._lastFPS?this._lastFPS.toFixed(2):Number.NaN}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(36),c=r(s),l=n(17),f=r(l),h=n(7),d=r(h),p=n(18),v=r(p),y=n(0),m=r(y),g=n(53),_=r(g),b=n(19),w=r(b),M=n(8),E=r(M),x=c.default.vec3,S=c.default.vec4,O=c.default.mat4,R=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.__viewMatrix=new f.default,e.__projectionMatrix=new f.default,e.__invProjectionMatrix=new f.default,e.__projectionViewMatrix=new f.default,e._renderQueue=new _.default,e._eyeCache=d.default.Zero,e._lookAtCache=d.default.Zero,e._upCache=d.default.Zero,e._orthographic=!1,e}return a(t,e),u(t,[{key:"$awake",value:function(){var e=this;this.getAttributeRaw("far").watch(function(t){e.Far=t},!0),this.getAttributeRaw("near").watch(function(t){e.Near=t},!0),this.getAttributeRaw("fovy").watch(function(t){e.Fovy=t},!0),this.getAttributeRaw("aspect").watch(function(t){e.Aspect=t},!0),this.getAttributeRaw("orthoSize").watch(function(t){e.OrthoSize=t},!0),this.getAttributeRaw("orthogonal").watch(function(t){e.OrthographicMode=t},!0),this.getAttributeRaw("autoAspect").boundTo("_autoAspect")}},{key:"$mount",value:function(){this.transform=this.node.getComponent(E.default),this.containedScene=t._findContainedScene(this.node),this.containedScene.queueRegistory.registerQueue(this._renderQueue),this.node.on("transformUpdated",this.updateTransform.bind(this)),this.updateTransform()}},{key:"$unmount",value:function(){this.containedScene.queueRegistory.unregisterQueue(this._renderQueue),this.containedScene=null}},{key:"getViewportRelativePosition",value:function(e){var t=void 0;return t=e instanceof E.default?e.globalPosition:e,f.default.transformPoint(this.ProjectionViewMatrix,t)}},{key:"updateContainedScene",value:function(e){this.containedScene&&this.containedScene.updateScene(e)}},{key:"renderScene",value:function(e){this.containedScene&&(this._justifyAspect(e),e.sceneDescription=this.containedScene.sceneDescription,this._renderQueue.renderAll(e))}},{key:"updateTransform",value:function(){var e=this.transform;x.transformMat4(this._eyeCache.rawElements,d.default.Zero.rawElements,e.globalTransform.rawElements),S.transformMat4(this._lookAtCache.rawElements,t._frontOrigin.rawElements,e.globalTransform.rawElements),x.add(this._lookAtCache.rawElements,this._lookAtCache.rawElements,this._eyeCache.rawElements),S.transformMat4(this._upCache.rawElements,t._upOrigin.rawElements,e.globalTransform.rawElements),O.lookAt(this.__viewMatrix.rawElements,this._eyeCache.rawElements,this._lookAtCache.rawElements,this._upCache.rawElements),O.mul(this.__projectionViewMatrix.rawElements,this.__projectionMatrix.rawElements,this.__viewMatrix.rawElements)}},{key:"_justifyAspect",value:function(e){if(this._autoAspect){var t=e.viewport.Width/e.viewport.Height;this._aspectCache!==t&&(this.setAttribute("aspect",t),this._aspectCache=t)}}},{key:"_recalculateProjection",value:function(){this._orthographic?O.ortho(this.__projectionMatrix.rawElements,-this._orthoSize*this._aspect,this._orthoSize*this._aspect,-this._orthoSize,this._orthoSize,this._near,this._far):O.perspective(this.__projectionMatrix.rawElements,this._fovy,this._aspect,this._near,this._far),O.mul(this.__projectionViewMatrix.rawElements,this.__projectionMatrix.rawElements,this.__viewMatrix.rawElements),O.invert(this.__invProjectionMatrix.rawElements,this.__projectionMatrix.rawElements)}},{key:"ViewMatrix",get:function(){return this.__viewMatrix}},{key:"ProjectionMatrix",get:function(){return this.__projectionMatrix}},{key:"InvProjectionMatrix",get:function(){return this.__invProjectionMatrix}},{key:"ProjectionViewMatrix",get:function(){return this.__projectionViewMatrix}},{key:"Far",get:function(){return this._far},set:function(e){this._far=e,this._recalculateProjection()}},{key:"Near",get:function(){return this._near},set:function(e){this._near=e,this._recalculateProjection()}},{key:"Aspect",get:function(){return this._aspect},set:function(e){this._aspect=e,this._recalculateProjection()}},{key:"Fovy",get:function(){return this._fovy},set:function(e){this._fovy=e,this._recalculateProjection()}},{key:"OrthoSize",get:function(){return this._orthoSize},set:function(e){this._orthoSize=e}},{key:"OrthographicMode",set:function(e){this._orthographic=e,this._recalculateProjection()},get:function(){return this._orthographic}},{key:"AutoAspect",set:function(e){this._autoAspect!==e&&(this._autoAspect=e,this._recalculateProjection())},get:function(){return this._autoAspect}}],[{key:"_findContainedScene",value:function(e){if(e.parent){var n=e.parent.getComponent(w.default);return n||t._findContainedScene(e.parent)}return null}}]),t}(m.default);t.default=R,R.attributes={fovy:{default:"45d",converter:"Angle2D"},near:{default:.01,converter:"Number"},far:{default:100,converter:"Number"},aspect:{default:1.6,converter:"Number"},autoAspect:{default:!0,converter:"Boolean"},orthoSize:{default:100,converter:"Number"},orthogonal:{default:!1,converter:"Boolean"}},R._frontOrigin=new v.default(0,0,-1,0),R._upOrigin=new v.default(0,1,0,0)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this._sortedRenderablesByTechniques={},this._rendeables=[]}return o(e,[{key:"add",value:function(e){this._rendeables.push(e);for(var t in this._sortedRenderablesByTechniques)this._sortedRenderablesByTechniques[t].rendarables.push({renderable:e,priortyCache:0})}},{key:"remove",value:function(e){this._removeFromRenderables(e,this._rendeables);for(var t in this._sortedRenderablesByTechniques)this._removeFromRenderables(e,this._sortedRenderablesByTechniques[t].rendarables)}},{key:"renderAll",value:function(e){var t=e.sortingTechnique||e.technique;this._ensureCacheForTechnique(t),this._sortForTechnique(e,t),this._sortedRenderablesByTechniques[t].rendarables.forEach(function(t){t.renderable.render(e)})}},{key:"_sortForTechnique",value:function(e,t){var n=this._sortedRenderablesByTechniques[t];if(n.lastFrame!==e.timer.frameCount){for(var r=0;r<n.rendarables.length;r++)n.rendarables[r].priortyCache=n.rendarables[r].renderable.getRenderingPriorty(e.camera,t);n.rendarables.sort(function(e,t){return e.priortyCache-t.priortyCache}),n.lastFrame=e.timer.frameCount}}},{key:"_ensureCacheForTechnique",value:function(e){this._sortedRenderablesByTechniques[e]||(this._sortedRenderablesByTechniques[e]={lastFrame:-1,rendarables:this._rendeables.map(function(e){return{renderable:e,priortyCache:-1}})})}},{key:"_removeFromRenderables",value:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if((r.index||r.renderable.index)===e.index)break}t.length!==n&&t.splice(n,1)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this._queues=[],this._renderables=[]}return o(e,[{key:"registerQueue",value:function(e){this._queues.push(e),this._renderables.forEach(function(t){return e.add(t)})}},{key:"unregisterQueue",value:function(e){var t=this._queues.indexOf(e);t>-1&&this._queues.splice(t,1)}},{key:"addRenderable",value:function(e){this._renderables.push(e),this._queues.forEach(function(t){return t.add(e)}),e.setRenderableIndex(this._renderables.length)}},{key:"removeRenderable",value:function(e){var t=this._renderables.indexOf(e);-1!==t&&(this._renderables.splice(t,1),this._renderables.forEach(function(e,t){e.setRenderableIndex(t+1)}),this._queues.forEach(function(t){return t.remove(e)}))}},{key:"getByIndex",value:function(e){return this._renderables[e]}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(35),l=r(c),f=n(118),h=r(f),d=n(0),p=r(d),v=n(20),y=r(v),m=n(2),g=r(m),_=l.default.define("grimoirejs-fundamental");!function(e){e[e.Aspect=0]="Aspect",e[e.Fit=1]="Fit",e[e.Manual=2]="Manual"}(u||(u={}));var b=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"$awake",value:function(){var e=this;if(this._scriptTag=this.companion.get("scriptElement"),!this._isContainedInBody(this._scriptTag))throw new Error("goml script should have body as ancesotor to instanciate canvas element in the location");this._generateCanvas(this._scriptTag),this.getAttributeRaw("width").watch(function(){e._resize()}),this.getAttributeRaw("height").watch(function(){e._resize()}),this.getAttributeRaw("antialias").watch(function(){console.warn("Changing antialias attribute is not supported. This is only works when the canvas element created.")}),this.getAttributeRaw("preserveDrawingBuffer").watch(function(){console.warn("Changing preserveDrawingBuffer attribute is not supported. This is only works when the canvas element created.")})}},{key:"notifySizeChanged",value:function(){this._onWindowResize()}},{key:"_generateCanvas",value:function(e){var t=this;this._autoFixForBody(e),this.canvas=document.createElement("canvas"),window.addEventListener("resize",function(){return t._onWindowResize()}),this._configureCanvas(this.canvas,e);var n=this._getContext(this.canvas);return this.companion.set(_.for("gl"),n),this.companion.set(_.for("canvasElement"),this.canvas),this.companion.set(_.for("GLExtRequestor"),new y.default(n)),g.default.generateDefaultTexture(n),this.canvas}},{key:"_resize",value:function(e){var t=this.getAttribute("width"),n=this.getAttribute("height");if(this._widthMode=this._asResizeMode(t),this._heightMode=this._asResizeMode(n),this._widthMode===this._heightMode&&this._widthMode===u.Aspect)throw new Error("Width and height could not have aspect mode in same time!");this._widthMode===u.Aspect&&(this._ratio=t.aspect),this._heightMode===u.Aspect&&(this._ratio=n.aspect),this._widthMode===u.Manual&&this._applyManualWidth(t.size,e),this._heightMode===u.Manual&&this._applyManualHeight(n.size,e),this._onWindowResize(e)}},{key:"_onWindowResize",value:function(e){var t=this._getParentSize();this._widthMode===u.Fit&&this._applyManualWidth(t[0],e),this._heightMode===u.Fit&&(0===t[1]&&h.default.debug&&console.warn("Canvas height parameter specified as fit and height of parent element is 0.\n This is possibly the reason you haven't set css to html or body element."),this._applyManualHeight(t[1],e))}},{key:"_applyManualWidth",value:function(e,t){e!==this.canvas.width&&(this.canvas.width=e,this._canvasContainer.style.width=e+"px",t||this.node.broadcastMessage(1,"resizeCanvas"),this._heightMode===u.Aspect&&this._applyManualHeight(e/this._ratio,t))}},{key:"_applyManualHeight",value:function(e,t){e!==this.canvas.height&&(this.canvas.height=e,this._canvasContainer.style.height=e+"px",t||this.node.broadcastMessage(1,"resizeCanvas"),this._widthMode===u.Aspect&&this._applyManualWidth(e*this._ratio,t))}},{key:"_getParentSize",value:function(){var e=this._canvasContainer.parentElement,t=getComputedStyle(e),n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),r=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),o=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth),i=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return[e.offsetWidth-n-o,e.offsetHeight-r-i]}},{key:"_asResizeMode",value:function(e){return"fit"===e.mode?u.Fit:"aspect"===e.mode?u.Aspect:u.Manual}},{key:"_configureCanvas",value:function(e,t){e.style.position="absolute",e.style.top="0px",e.style.left="0px",this._canvasContainer=document.createElement("div"),this._canvasContainer.style.position="relative",this._canvasContainer.style.overflow="hidden",this._canvasContainer.appendChild(e),this.getAttribute("containerId")&&(this._canvasContainer.id=this.getAttribute("containerId")),this.getAttribute("containerClass")&&(this._canvasContainer.className=this.getAttribute("containerClass")),this.companion.set(_.for("canvasContainer"),this._canvasContainer),t.parentElement.insertBefore(this._canvasContainer,t.nextSibling),this._resize(!0)}},{key:"_getContext",value:function(e){var t={antialias:this.getAttribute("antialias"),preserveDrawingBuffer:this.getAttribute("preserveDrawingBuffer")},n=e.getContext("webgl",t);if(n||(n=e.getContext("experimental-webgl",t)),!n)throw new Error("Failed to initializing WebGL context. Make sure your browser supporting WebGL.");return this._applyContextId(n)}},{key:"_applyContextId",value:function(e){var t=e;return t.__id__=Math.random().toString(36).slice(-6),t}},{key:"_isContainedInBody",value:function(e){return!!e.parentElement&&("BODY"===e.parentNode.nodeName||this._isContainedInBody(e.parentElement))}},{key:"_autoFixForBody",value:function(e){if("BODY"===e.parentElement.nodeName){0===document.body.getBoundingClientRect().height&&(document.body.style.height="100%",document.body.parentElement.style.height="100%")}}}]),t}(p.default);t.default=b,b.attributes={width:{default:"fit",converter:"CanvasSize"},height:{default:"fit",converter:"CanvasSize"},containerId:{default:"",converter:"String"},containerClass:{default:"gr-container",converter:"String"},preserveDrawingBuffer:{default:!0,converter:"Boolean"},antialias:{default:!0,converter:"Boolean"}}},function(e,t){e.exports="/*Header start*/\n// helper macros\n#ifdef FS\n  #define FS_PREC(prec,type) precision prec type;\n  #define VS_PREC(prec,type)\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    #if GL_FRAGMENT_PRECISION_HIGH > 0\n      #define PREFER_HIGHP highp\n    #else\n      #define PREFER_HIGHP mediump\n    #endif\n  #endif\n  #ifndef GL_FRAGMENT_PRECISION_HIGH\n    #define PREFER_HIGHP mediump\n  #endif\n#endif\n#ifdef VS\n#define VS_PREC(prec,type) precision prec type;\n#define FS_PREC(prec,type)\n#endif\n// constants\n#define PI 3.141592653589793\n#define E 2.718281828459045\n#define LN2 0.6931471805599453\n#define LN10 2.302585092994046\n#define LOG2E 1.4426950408889634\n#define LOG10E 0.4342944819032518\n#define SQRT2 1.4142135623730951\n#define SQRT1_2 0.7071067811865476\n\n/*Header end*/\n"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),u=r(a),s=n(58),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:"parse",value:function(t){var n=u.default.calcHash(t);return void 0!==e._parsedCache[n]?new Promise(function(t,r){t(e._parsedCache[n])}):e._parse(t).then(function(n){return e._parsedCache[t]=n,n})}},{key:"_parse",value:function(t){return new Promise(function(n,r){var o={};c.default.resolveImports(c.default.removeComment(t)).then(function(t){try{var i=c.default.separateTechniqueSource(t);for(var a in i)o[a]=e._parseTechnique(i[a]);n(o)}catch(e){r(e)}})})}},{key:"_parseTechnique",value:function(t){for(var n=c.default.fetchDrawOrder(t)||"Auto",r=c.default.separatePassSource(t),o=new Array(r.length),i=0;i<r.length;i++)o[i]=e._parsePassSource(r[i]);return{drawOrder:n,passes:o}}},{key:"_parsePassSource",value:function(e){var t=c.default.removePreferences(e);return{fragment:t,vertex:t,attributes:c.default.parseVariables(e,"attribute"),uniforms:c.default.parseVariables(e,"uniform"),macros:c.default.parseMacros(e),states:c.default.parsePreferences(e)}}}]),e}();l._parsedCache={},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(59),u=r(a),s=n(60),c=r(s),l=n(62),f=r(l),h=n(63),d=r(h),p=n(64),v=r(p),y=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},m=function(){function e(){o(this,e)}return i(e,null,[{key:"separateTechniqueSource",value:function(t){if(-1===t.indexOf("@Technique"))return{default:t};for(var n={},r=/@Technique\s+([a-zA-Z0-9_]+)/g,o=void 0;o=r.exec(t);){var i=o[1];if(void 0!==n[i])throw new Error("Technique name "+i+" is dupelicated");n[i]=e.obtainNextSection(t,"{","}",o.index+o.length)}return n}},{key:"separatePassSource",value:function(t){if(-1===t.indexOf("@Pass"))return[t];for(var n=[],r=/@Pass/g,o=void 0;o=r.exec(t);)n.push(e.obtainNextSection(t,"{","}",o.index+o.length));return n}},{key:"fetchDrawOrder",value:function(e){var t=/@DrawOrder\s*\((\w+)\)/g.exec(e);if(t){var n=e.indexOf("@Pass");if(-1!==n&&n<t.index)throw new Error("DrawOrder preference should be just under @Technique section");return t[1]}return null}},{key:"removePreferences",value:function(e){var t=/@.+$/gm;return e.replace(t,"")}},{key:"resolveImports",value:function(t){return y(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=/\s*@import\s+"([^"]+)"/.exec(t)){n.next=4;break}return n.abrupt("break",17);case 4:return o=void 0,n.t0=e,n.next=8,c.default.resolve(r[1]);case 8:return n.t1=n.sent,n.next=11,n.t0.resolveImports.call(n.t0,n.t1);case 11:if("string"==typeof(o=n.sent)){n.next=14;break}throw new Error("Required shader chunk '"+r[1]+"' was not found!!");case 14:t=t.replace(r[0],"\n"+o+"\n"),n.next=0;break;case 17:return n.abrupt("return",t);case 18:case"end":return n.stop()}},n,this)}))}},{key:"parseMacros",value:function(e){for(var t={},n=/@ExposeMacro\s*\(\s*([a-zA-Z0-9_]+)\s*,\s*([a-zA-Z0-9_]+)\s*,\s*([a-zA-Z0-9_]+)\s*,\s*([a-zA-Z0-9_]+)\s*\)/g,r=void 0;r=n.exec(e);){if(!(r[1]&&r[2]&&r[3]&&r[4]))throw new Error("Invalid parameter was passed on @ExposeMacro preference on '"+r[0]+"'");if("bool"!==r[1]&&"int"!==r[1])throw new Error('Invalid macro type "'+r[1]+'". regexResult type must be int or bool');var o=void 0;if("bool"===r[1]){if("true"!==r[4]&&"false"!==r[4])throw new Error('Default macro value "'+r[4]+'" is invalid for bool type macro. Must be true or false');o="true"===r[4]}else if(o=parseFloat(r[4]),isNaN(o))throw new Error('Default macro value "'+r[4]+'" is invalid for int type macro. Must be a number.');t[r[2]]={name:r[2],macroName:r[3],type:r[1],value:o,target:"expose"}}for(n=/@ReferMacro\s*\(\s*([a-zA-Z0-9_]+)\s*,\s*(.+)\s*\)/g;r=n.exec(e);){if(!r[1]||!r[2])throw new Error("Invalid parameter was passed on @ReferMacro preference on '"+r[0]+"'");t[r[1]]={name:r[1],macroName:r[1],value:r[2],target:"refer"}}return t}},{key:"parsePreferences",value:function(e){for(var t={enable:[WebGLRenderingContext.CULL_FACE,WebGLRenderingContext.BLEND,WebGLRenderingContext.DEPTH_TEST],functions:{blendColor:[0,0,0,0],cullFace:[WebGLRenderingContext.BACK],blendFuncSeparate:[WebGLRenderingContext.ONE,WebGLRenderingContext.ZERO,WebGLRenderingContext.ONE,WebGLRenderingContext.ZERO],blendEquationSeparate:[WebGLRenderingContext.FUNC_ADD,WebGLRenderingContext.FUNC_ADD],lineWidth:[1],frontFace:[WebGLRenderingContext.CCW],depthRange:[0,1],depthFunc:[WebGLRenderingContext.LESS],depthMask:[!0],colorMask:[!0,!0,!0,!0]},dynamicState:[]},n=/@([A-Za-z]+)\(([\sa-zA-Z_0-9,\.\-]*)\)/g,r=void 0;r=n.exec(e);){var o=d.default[r[1]];if(!o)throw new Error("Unknown pass preference "+r[1]+" was specified.");o(t,r[2].split(",").map(function(e){return e.trim()}))}return t}},{key:"asValidJSON",value:function(e){var t=/([\{,]\s*)([a-zA-Z0-9_]+)(\s*\:)/gm;return e.replace(t,'$1"$2"$3')}},{key:"removeComment",value:function(e){return u.default.remove(e)}},{key:"obtainNextSection",value:function(e,t,n,r){var o=e.indexOf(t,r);if(-1===o)throw new Error("Begining section charactor '"+t+"' was not found.");if(t.length>1||n.length>1)throw new Error("Invalid parameter");for(var i=1,a=t.charCodeAt(0),u=n.charCodeAt(0),s=o+1;s<e.length;s++){var c=e.charCodeAt(s);if(c===a?i++:c===u&&i--,0===i)return e.substring(o+1,s)}throw new Error("Invalid bracket matching")}},{key:"generateVariableFetchRegex",value:function(e){return new RegExp("(?:@([a-zA-Z0-9_]+)?(\\{.+\\})?)?\\s*"+e+"\\s+(?:(lowp|mediump|highp)\\s+)?([a-z0-9A-Z]+)\\s+([a-zA-Z0-9_]+)(?:\\s*\\[\\s*([a-zA-Z0-9_]+)\\s*\\]\\s*)?\\s*;","g")}},{key:"parseVariables",value:function(t,n){for(var r={},o=e.generateVariableFetchRegex(n),i=void 0;i=o.exec(t);){var a=i[5],u=v.default[i[4]],s=i[3],c=i[2],l=void 0!==i[6],h=void 0,d=i[1];d||(d=f.default[n][a])||(d="uniform"===n?"USER_VALUE":a.toUpperCase()),l&&(h=parseInt(i[6],10),isNaN(h)&&(h=i[6])),r[a]={semantic:d,name:a,type:u,precision:s,attributes:c?JSON.parse(e.asValidJSON(c)):{},isArray:l,count:h}}return r}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){e[e.Default=0]="Default",e[e.SingleQuotationString=1]="SingleQuotationString",e[e.DoubleQuatationString=2]="DoubleQuatationString",e[e.MultilineComment=3]="MultilineComment",e[e.SinglelineComment=4]="SinglelineComment"}(o||(o={}));var a=function(){function e(t){r(this,e),this.source=t,this._status=o.Default,this._afterSlush=!1,this.removedSource=this._remove()}return i(e,[{key:"_remove",value:function(){for(var e="",t=void 0,n=0;n<this.source.length;n++){var r=this.source.charAt(n),i=this.source.charAt(n+1);if("\\"!==r){switch(this._status){case o.Default:this._defaultParsing(r,i)}switch(this._isInComment&&"\n"!==r||(e+=r),this._status){case o.MultilineComment:case o.SinglelineComment:this._checkCommentEnd(t,r)}t=r}else this._afterSlush=!0,n++}return e}},{key:"_defaultParsing",value:function(e,t){"'"===e&&(this._status=o.SingleQuotationString),'"'===e&&(this._status=o.DoubleQuatationString),"/"===e&&"/"===t&&(this._status=o.SinglelineComment),"/"===e&&"*"===t&&(this._status=o.MultilineComment)}},{key:"_checkCommentEnd",value:function(e,t){return"\n"===t&&this._status===o.SinglelineComment?void(this._status=o.Default):"*"===e&&"/"===t&&this._status===o.MultilineComment?void(this._status=o.Default):void 0}},{key:"_isInComment",get:function(){return this._status===o.MultilineComment||this._status===o.SinglelineComment}}],[{key:"remove",value:function(t){return new e(t).removedSource}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImportResolver=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(31),l=r(c),f=n(61),h=r(f),d=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},p=t.ImportResolver=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){return/^https?:\/\/.*/gm.test(e)?t._toAbsolute(e):e}));return e.staticImports=Object.assign({},h.default),e}return a(t,e),u(t,[{key:"resolve",value:function(e){var n=this;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolve",this).call(this,e,function(t){return n._resolve(e)})}},{key:"_resolve",value:function(e){return d(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof this.staticImports[e]){t.next=4;break}return t.abrupt("return",this.staticImports[e]);case 4:return t.next=6,this._fromExternal(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"_fromExternal",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(e){t(r.responseText)},r.onerror=function(e){n(e)},r.send()})}}],[{key:"_toAbsolute",value:function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash}}]),t}(l.default);t.default=new p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(119),i=r(o),a=n(120),u=r(a);t.default={"basic-vert":i.default,"screen-vert":u.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={attribute:{position:"POSITION",normal:"NORMAL",texCoord:"TEXCOORD"},uniform:{_time:"TIME",_viewportSize:"VIEWPORT_SIZE",_matL:"LOCAL",_matM:"MODEL",_matV:"VIEW",_matP:"PROJECTION",_matVM:"MODELVIEW",_matPVM:"MODELVIEWPROJECTION",_matIM:"MODELINVERSE",_matIV:"VIEWINVERSE",_matIP:"PROJECTIONINVERSE",_matIVM:"MODELVIEWINVERSE",_matIPVM:"MODELVIEWPROJECTIONINVERSE",_matITM:"MODELINVERSETRANSPOSE",_matITVM:"MODELVIEWINVERSETRANSPOSE"}}},function(e,t,n){"use strict";function r(e,t){if(e.length!==t)throw new Error("Unmatching argument count on preference parse");return e.map(function(e){var t=WebGLRenderingContext[e];if("number"!=typeof t)throw new Error("Unknown WebGL constant "+e+" was specified");return t})}function o(e,t){if(e.length!==t)throw new Error("Unmatching argument count on preference parse");return e.map(function(e){var t=Number.parseFloat(e);if(isNaN(t))throw new Error("Failed to parse number on preference parsing");return t})}function i(e,t){if(e.length!==t)throw new Error("Unmatching argument count on preference parse");return e.map(function(e){if("true"!==e&&"false"!==e)throw new Error(e+" is not boolean");return"true"===e})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={Enable:function(e,t){var n=WebGLRenderingContext[t[0]];if("number"!=typeof n)throw new Error('Unknown WebGL constant "'+t[0]+'" was specified on @Enable');e.enable.push(n)},Disable:function(e,t){var n=WebGLRenderingContext[t[0]];if("number"!=typeof n)throw new Error('Unknown WebGL constant "'+t[0]+'" was specified on @Disable');var r=e.enable.indexOf(n);-1!==r&&e.enable.splice(r,1)},BlendFunc:function(e,t){var n=r(t,2);e.functions.blendFuncSeparate=[n[0],n[1],n[0],n[1]]},BlendFuncSeparate:function(e,t){e.functions.blendFuncSeparate=r(t,4)},BlendEquation:function(e,t){var n=r(t,1);e.functions.blendEquationSeparate=[n[0],n[0]]},BlendEquationSeparate:function(e,t){e.functions.blendEquationSeparate=r(t,4)},BlendColor:function(e,t){e.functions.blendColor=o(t,4)},ColorMask:function(e,t){e.functions.colorMask=i(t,4),e.enable.push(WebGLRenderingContext.COLOR_WRITEMASK)},CullFace:function(e,t){e.functions.cullFace=r(t,1)},DepthFunc:function(e,t){e.functions.depthFunc=r(t,1)},DepthRange:function(e,t){e.functions.depthRange=o(t,2)},DepthMask:function(e,t){e.functions.depthMask=i(t,1)},FrontFace:function(e,t){e.functions.frontFace=r(t,1)},LineWidth:function(e,t){e.functions.lineWidth=o(t,1)},PolygonOffset:function(e,t){e.functions.polygonOffset=o(t,2),e.enable.push(WebGLRenderingContext.POLYGON_OFFSET_FILL)},Scissor:function(e,t){e.functions.scissor=o(t,4),e.enable.push(WebGLRenderingContext.SCISSOR_TEST)},ExposeMacro:function(){},ReferMacro:function(){},DynamicState:function(e,t){if(!t.length)throw new Error("DynamicState require at least 1 argument for specifying state resolver");var n=t[0];t.splice(0,1),e.dynamicState.push({stateResolver:n,args:t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=WebGLRenderingContext;t.default={vec2:r.FLOAT_VEC2,vec3:r.FLOAT_VEC3,vec4:r.FLOAT_VEC4,ivec2:r.INT_VEC2,ivec3:r.INT_VEC3,ivec4:r.INT_VEC4,bvec2:r.BOOL_VEC2,bvec3:r.BOOL_VEC3,bvec4:r.BOOL_VEC4,float:r.FLOAT,int:r.INT,bool:r.BOOL,sampler2D:r.SAMPLER_2D,samplerCube:r.SAMPLER_CUBE,mat4:r.FLOAT_MAT4,mat3:r.FLOAT_MAT3,mat2:r.FLOAT_MAT2}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(66),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){r(this,e),this._macro={},this._observers={};for(var t in a.default)this.setValue(t,a.default[t])}return o(e,[{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=""),this._macro[e]!==t&&(this._macro[e]=t,this._observers[e]||(this._observers[e]=[]),this._notifyMacroChanged(e,t))}},{key:"getValue",value:function(e){var t=this._macro[e];return null===t?"":t}},{key:"watch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._observers[e];r||(r=this._observers[e]=[]),r.push(t),n&&void 0!==this._macro[e]&&t(this._macro[e],!0)}},{key:"unwatch",value:function(e,t){var n=this._observers[e];if(!n)return!1;for(var r=0;r<n.length;r++)if(n[r]===t)return n.splice(r,1),!0}},{key:"_notifyMacroChanged",value:function(e,t){for(var n=0;n<this._observers[e].length;n++)this._observers[e][n](t,!1)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GRIMOIRE:null,WEBGL_VERSION:"1"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(68),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t,n){var o=this;r(this,e),this.material=t,this.passes=[],this.drawOrder=n.drawOrder,this.passes=n.passes.map(function(e){return new a.default(o,e)})}return o(e,[{key:"draw",value:function(e){for(var t=0;t<this.passes.length;t++)this.passes[t].draw(e)}},{key:"dispose",value:function(){this.passes.forEach(function(e){return e.dispose()})}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),u=r(a),s=n(71),c=r(s),l=n(1),f=r(l),h=n(73),d=r(h),p=n(11),v=r(p),y=function(){function e(t,n){var r=this;o(this,e),this.technique=t,this.passRecipe=n,this.argumentDeclarations={},this.arguments={},this._macroHandlers={},this._uniformResolvers=v.default.generateRegisterers(this,n),this._gl=this.material.gl;var i=f.default.get(this._gl),a=i.macro;this._dynamicStateResolver=c.default.getDynamicStateResolver(this),this.program=new d.default(this._gl,n.vertex,n.fragment);for(var u in n.macros)!function(e){var t=n.macros[e];r.program.setMacro(t.macroName,t.value+""),"expose"===t.target?(r._macroHandlers[e]=function(e){var n=void 0;n="bool"===t.type?e?"":void 0:e,r.program.setMacro(t.macroName,n)},r.addArgument(e,{converter:"bool"===t.type?"Boolean":"Number",default:t.value})):"refer"===t.target&&(r.program.setMacro(t.macroName,t.value+""),a.watch(t.macroName,function(e,n){r.program.setMacro(t.macroName,e)},!0))}(u)}return i(e,[{key:"draw",value:function(e){var t=this.program.getProgram(e.geometry);t.use(),this._uniformResolvers.resolve(t.uniforms,e),c.default.configureForPass(this._gl,this.passRecipe),this._dynamicStateResolver(this._gl,e);for(var n in this.passRecipe.attributes){var r=this.passRecipe.attributes[n];u.default.bindBufferToAttribute(e.geometry,t,n,r.semantic)}u.default.drawWithCurrentVertexBuffer(e.geometry,e.indexGroup,e.drawCount,e.drawOffset)}},{key:"addArgument",value:function(e,t){if(this._argumentInitialized)throw new Error("setArgument cant be called for initialized pass");this.argumentDeclarations[e]=t}},{key:"setArgument",value:function(e,t,n){this._macroHandlers[e]?this._macroHandlers[e](t):this._uniformResolvers.update(this.program,e,t,n),this.arguments[e]=t}},{key:"dispose",value:function(){this._uniformResolvers.dispose(),this.program.dispose()}},{key:"material",get:function(){return this.technique.material}}]),e}();t.default=y},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.AABB:void 0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(4),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WebGLRenderingContext.ARRAY_BUFFER,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WebGLRenderingContext.STATIC_DRAW;r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,e.createBuffer()));return a.target=n,a.usage=i,a.keepSource=!1,a._bufferSource=null,a}return i(t,e),a(t,[{key:"update",value:function(e,t){this.bind(),this._bufferSource=null,t?(this.valid||this.gl.bufferData(this.target,e+t.byteLength,this.usage),this.gl.bufferSubData(this.target,e,t)):"number"==typeof e?this.gl.bufferData(this.target,e,this.usage):(this.gl.bufferData(this.target,e,this.usage),this._bufferSource=e),this.valid=!0}},{key:"bind",value:function(){this.gl.bindBuffer(this.target,this.resourceReference)}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._bufferSource=null,this.gl.deleteBuffer(this.resourceReference)}},{key:"bufferSource",get:function(){if(this.keepSource)return this._bufferSource;throw new Error("Accessing bufferSource getter of Buffer class instance require keepSource flag being enabled before updating Buffer.")}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(72),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){r(this,e)}return o(e,null,[{key:"registerDynamicStateResolver",value:function(t,n){e._dynamicStateResolvers[t]=n}},{key:"getDynamicStateResolver",value:function(t){if(t.passRecipe.states.dynamicState){for(var n=t.passRecipe.states.dynamicState,r=[],o=0;o<n.length;o++){var i=n[o],a=e._dynamicStateResolvers[i.stateResolver];if(!a)throw new Error("Unknown dynamic state resolver '"+i.stateResolver+"' was required");r.push(a(i.args,t))}return function(e,t){return r.forEach(function(n){return n(e,t)})}}return function(){}}},{key:"configureForPass",value:function(t,n){var r=n.states,o=r.functions;r.disable||e.complementDisableState(n.states);for(var i=0;i<r.enable.length;i++)t.enable(r.enable[i]);for(var a=0;a<r.disable.length;a++)t.disable(r.disable[a]);o.blendColor&&t.blendColor(o.blendColor[0],o.blendColor[1],o.blendColor[2],o.blendColor[3]),o.blendEquationSeparate&&t.blendEquationSeparate(o.blendEquationSeparate[0],o.blendEquationSeparate[1]),o.blendFuncSeparate&&t.blendFuncSeparate(o.blendFuncSeparate[0],o.blendFuncSeparate[1],o.blendFuncSeparate[2],o.blendFuncSeparate[3]),o.colorMask&&t.colorMask(o.colorMask[0],o.colorMask[1],o.colorMask[2],o.colorMask[3]),o.cullFace&&t.cullFace(o.cullFace[0]),o.depthFunc&&t.depthFunc(o.depthFunc[0]),o.depthMask&&t.depthMask(o.depthMask[0]),o.depthRange&&t.depthRange(o.depthRange[0],o.depthRange[1]),o.frontFace&&t.frontFace(o.frontFace[0]),o.polygonOffset&&t.polygonOffset(o.polygonOffset[0],o.polygonOffset[1]),o.scissor&&t.scissor(o.scissor[0],o.scissor[1],o.scissor[2],o.scissor[3])}},{key:"complementDisableState",value:function(t){t.disable||(t.disable=[]);var n=!0,r=!1,o=void 0;try{for(var i,a=e._glEnableTargets[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;-1===t.enable.indexOf(u)&&t.disable.push(u)}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}}]),e}();t.default=u,u._glEnableTargets=[WebGLRenderingContext.CULL_FACE,WebGLRenderingContext.DEPTH_TEST,WebGLRenderingContext.STENCIL_TEST,WebGLRenderingContext.BLEND,WebGLRenderingContext.SCISSOR_TEST,WebGLRenderingContext.DITHER,WebGLRenderingContext.POLYGON_OFFSET_FILL,WebGLRenderingContext.SAMPLE_ALPHA_TO_COVERAGE,WebGLRenderingContext.SAMPLE_COVERAGE],u._dynamicStateResolvers=Object.assign({},a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"dynamic-cull":function(e,t){function n(e){o!==e&&t.program.setMacro("CONTEXT_STATE_CULL",e)}var r=e[1]||"cull";t.addArgument(r,{converter:"String",default:e[0]||"back"});var o=null;return function(e){if("none"!==t.arguments[r])if(e.enable(WebGLRenderingContext.CULL_FACE),"back"===t.arguments[r])e.cullFace(WebGLRenderingContext.BACK),n("1");else{if("front"!==t.arguments[r])throw new Error("Unknown culling mode");e.cullFace(WebGLRenderingContext.FRONT),n("2")}else e.disable(WebGLRenderingContext.CULL_FACE),n("0")}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(74),u=r(a),s=n(78),c=r(s),l=n(80),f=r(l),h=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o(this,e),this._gl=t,this._vsSource=n,this._fsSource=r,this._macros=i,this._programs={},this._shaders=[]}return i(e,[{key:"getProgram",value:function(e){return this._programs[e.accessorHash]?this._programs[e.accessorHash]:this._constructProgram(e)}},{key:"setMacro",value:function(e,t){this._macros[e]!==t&&(this._macros[e]="boolean"==typeof t?t?"":void 0:t,this.dispose())}},{key:"dispose",value:function(){for(var e in this._programs)this._programs[e].release();this._programs={},this._shaders.forEach(function(e){return e.release()}),this._shaders=[]}},{key:"_constructProgram",value:function(e){var t=c.default.getShader(this._gl,WebGLRenderingContext.FRAGMENT_SHADER,f.default.generate(WebGLRenderingContext.FRAGMENT_SHADER,this._macros,this._fsSource,e)),n=c.default.getShader(this._gl,WebGLRenderingContext.VERTEX_SHADER,f.default.generate(WebGLRenderingContext.VERTEX_SHADER,this._macros,this._vsSource,e)),r=u.default.getProgram(this._gl,[n,t]);return this._shaders.push(t),this._shaders.push(n),this._programs[e.accessorHash]=r,r}},{key:"macros",get:function(){return this._macros},set:function(e){this._macros=e,this.dispose()}},{key:"fragmentShader",get:function(){return this._fsSource},set:function(e){this._fsSource=e,this.dispose()}},{key:"vertexShader",get:function(){return this._vsSource},set:function(e){this._vsSource=e,this.dispose()}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),c=r(s),l=n(75),f=r(l),h=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hash=n,r._referenceCount=0,r}return a(t,e),u(t,[{key:"release",value:function(){0===--this._referenceCount&&(this.destroy(),t._managedPrograms.get(this.gl)[this.hash]=void 0)}}],[{key:"getProgram",value:function(e,n){t._managedPrograms.has(e)||t._managedPrograms.set(e,{});var r=t._managedPrograms.get(e),o="";n=n.sort(),n.forEach(function(e){o+=e.index+","});var i=c.default.calcHash(o);return void 0===r[i]&&(r[i]=new t(e,i),r[i].update(n)),r[i]._referenceCount++,r[i]}}]),t}(f.default);t.default=h,h._managedPrograms=new Map},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(4),l=r(c),f=n(76),h=r(f),d=n(77),p=r(d),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,e.createProgram()));return n._uniformLocations={},n._attributeLocations={},n.uniforms=new p.default(n),n}return a(t,e),u(t,[{key:"update",value:function(e){var t=this;if(this.valid){this.gl.getAttachedShaders(this.resourceReference).forEach(function(e){return t.gl.detachShader(t.resourceReference,e)})}if(this._uniformLocations={},this._attributeLocations={},e.forEach(function(e){t.gl.attachShader(t.resourceReference,e.resourceReference)}),this.gl.linkProgram(this.resourceReference),!this.gl.getProgramParameter(this.resourceReference,WebGLRenderingContext.LINK_STATUS)){var n=this.gl.getProgramInfoLog(this.resourceReference);throw new Error("LINK FAILED\n"+n)}this.valid=!0}},{key:"use",value:function(){this.isLastUsed||this.gl.useProgram(this.resourceReference),this.uniforms.onUse()}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteProgram(this.resourceReference),this._uniformLocations={},this._attributeLocations={}}},{key:"findAttributeLocation",value:function(e){return void 0===this._attributeLocations[e]?(this._attributeLocations[e]=this.gl.getAttribLocation(this.resourceReference,e),this._safeEnableVertexAttribArray(this._attributeLocations[e]),this._attributeLocations[e]):this._attributeLocations[e]}},{key:"findUniformLocation",value:function(e){var t=this._uniformLocations[e];return void 0===t?this._uniformLocations[e]=this.gl.getUniformLocation(this.resourceReference,e):t}},{key:"_safeEnableVertexAttribArray",value:function(e){e<0||this.gl.enableVertexAttribArray(e)}},{key:"isLastUsed",get:function(){return h.default.useProgramCheck(this.gl,this.resourceReference)}}]),t}(l.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.ResourceCache=function(){function e(){r(this,e),this._lastUsedPrograms=new Map}return o(e,[{key:"useProgramCheck",value:function(e,t){return this._lastUsedPrograms.get(e)===t||(this._lastUsedPrograms.set(e,t),!1)}}]),e}();t.default=new i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=new Float32Array(9),a=function(){function e(t){r(this,e),this.program=t,this._currentTextureRegister=0,this._gl=t.gl}return o(e,[{key:"uniformBool",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1i(e,t?1:0)})}},{key:"uniformMatrix",value:function(e,t){var n=this;this._pass(e,function(e){n._gl.uniformMatrix4fv(e,!1,t.rawElements)})}},{key:"uniformMatrix3",value:function(e,t){var n=this;this._pass(e,function(e){for(var r=t.rawElements,o=0;o<3;o++)i[3*o+0]=r[4*o+0],i[3*o+1]=r[4*o+1],i[3*o+2]=r[4*o+2];n._gl.uniformMatrix3fv(e,!1,i)})}},{key:"uniformMatrixArray",value:function(e,t){for(var n=this,r=t.length/16,o=0;o<r;o++)!function(r){n._passAsArray(e,r,function(e){return n._gl.uniformMatrix4fv(e,!1,new Float32Array(t.buffer,t.byteOffset+64*r))})}(o)}},{key:"uniformFloat",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1f(e,t)})}},{key:"uniformFloatArray",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1fv(e,t)})}},{key:"uniformInt",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1i(e,t)})}},{key:"uniformVector2",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform2f(e,t.X,t.Y)})}},{key:"uniformIntVector2",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform2i(e,t.X,t.Y)})}},{key:"uniformVector2Array",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform2fv(e,t)})}},{key:"uniformVector3",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform3f(e,t.X,t.Y,t.Z)})}},{key:"uniformIntVector3",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform3i(e,t.X,t.Y,t.Z)})}},{key:"uniformVector3Array",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform3fv(e,t)})}},{key:"uniformColor3",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform3f(e,t.R,t.G,t.B)})}},{key:"uniformVector4",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform4f(e,t.X,t.Y,t.Z,t.W)})}},{key:"uniformIntVector4",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform4f(e,t.X,t.Y,t.Z,t.W)})}},{key:"uniformVector4Array",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform4fv(e,t)})}},{key:"uniformColor4",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform4f(e,t.R,t.G,t.B,t.A)})}},{key:"uniformTexture2D",value:function(e,t){t.valid?(t.register(this._currentTextureRegister),this.uniformInt(e,this._currentTextureRegister),this._currentTextureRegister++):console.warn("The texture assigned to '"+e+"' is not valid.")}},{key:"onUse",value:function(){this._currentTextureRegister=0}},{key:"_pass",value:function(e,t){var n=this.program.findUniformLocation(e);n&&t(n)}},{key:"_passAsArray",value:function(e,t,n){var r=this.program.findUniformLocation(e+"["+t+"]");r&&n(r)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),c=r(s),l=n(79),f=r(l),h=function(e){function t(e,n,r,a){o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return u.type=n,u.sourceCode=r,u.hash=a,u._referenceCount=0,u}return a(t,e),u(t,[{key:"release",value:function(){0===--this._referenceCount&&(this.destroy(),t._managedShaders.get(this.gl)[this.hash]=void 0)}}],[{key:"getShader",value:function(e,n,r){t._managedShaders.has(e)||t._managedShaders.set(e,{});var o=t._managedShaders.get(e),i=c.default.calcHash(r+n);return void 0===o[i]&&(o[i]=new t(e,n,r,i)),o[i]._referenceCount++,o[i]}}]),t}(f.default);t.default=h,h._managedShaders=new Map},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(4),c=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e,n,i){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,e.createShader(n)));return a.type=n,a.sourceCode=i,i&&a.update(i),a}return i(t,e),a(t,[{key:"update",value:function(e){if(this.gl.shaderSource(this.resourceReference,e),this.gl.compileShader(this.resourceReference),!this.gl.getShaderParameter(this.resourceReference,WebGLRenderingContext.COMPILE_STATUS))throw new Error("Compiling shader failed.\nSourceCode:\n"+this._insertLineNumbers(e)+"\n\nErrorCode:"+this.gl.getShaderInfoLog(this.resourceReference));this.sourceCode=e,this.valid=!0}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteShader(this.resourceReference)}},{key:"_insertLineNumbers",value:function(e){e="1:"+e;for(var t=2,n=0;n<e.length;n++){"\n"===e.charAt(n)&&(e=e.substring(0,n+1)+(t+":")+e.substring(n+1,e.length),n++,t++)}return e}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(56),u=r(a),s=n(81),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:"generate",value:function(t,n,r,o){return""+(t===WebGLRenderingContext.VERTEX_SHADER?"#define VS\n":"#define FS\n")+this._precisionCode(o.gl)+e._geometryToAttributeUsedFlags(o)+e._macroCode(n)+u.default+"\n/*****BEGINNING OF USER CODE******/\n"+r}},{key:"_macroCode",value:function(e){var t="";for(var n in e)void 0!==e[n]&&(t+="#define "+n+" "+e[n]+"\n");return t}},{key:"_geometryToAttributeUsedFlags",value:function(e){var t="";for(var n in e.accessors)t+="#define ATTRIBUTE_"+n+"_ENABLED\n";return t}},{key:"_precisionCode",value:function(t){var n="",r=c.default.get(t);return n+=e._precisionChunk(r.vertexInteger,"VERTEX_INTEGER",!1),n+=e._precisionChunk(r.fragmentInteger,"FRAGMENT_INTEGER",!1),n+=e._precisionChunk(r.vertexFloat,"VERTEX_FLOAT",!0),n+=e._precisionChunk(r.fragmentFloat,"FRAGMENT_FLOAT",!0)}},{key:"_precisionChunk",value:function(t,n,r){return e._precisionForVariable(t.lowp,n+"_LOWP",r)+e._precisionForVariable(t.mediump,n+"_MEDIUMP",r)+e._precisionForVariable(t.highp,n+"_HIGHP",r)}},{key:"_precisionForVariable",value:function(e,t,n){return"#define VARIABLE_MIN_"+t+" "+e.rangeMin+"\n#define VARIABLE_MAX_"+t+" "+e.rangeMax+"\n"+(n?"#define VARIABLE_PRECISION_"+t+" "+e.precision+" \n":"")}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gl=e,n.vertexInteger={lowp:e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT),mediump:e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT),highp:e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT)},n.fragmentInteger={lowp:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT),mediump:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT),highp:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT)},n.vertexFloat={lowp:e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT),mediump:e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT),highp:e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT)},n.fragmentFloat={lowp:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT),mediump:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT),highp:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT)},n}return i(t,e),a(t,null,[{key:"get",value:function(e){return this.__get(e,t)}}]),t}(s.default);t.default=c,c.registryName="GLSLPrecisionChecker"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o){r(this,e),this.registerers=t,this.disposers=n,this.updators=o}return o(e,[{key:"resolve",value:function(e,t){this.registerers.forEach(function(n){return n(e,t)})}},{key:"dispose",value:function(){this.disposers.forEach(function(e){return e()})}},{key:"update",value:function(e,t,n,r){this.updators[t]&&this.updators[t](e,n,r)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(12),l=r(c),f=n(4),h=r(f),d=n(38),p=r(d),v=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,e.createTexture()));return r.textureType=n,r.__format=WebGLRenderingContext.RGBA,r.__type=WebGLRenderingContext.UNSIGNED_BYTE,r._texParameterChanged=!0,r._magFilter=WebGLRenderingContext.LINEAR,r._minFilter=WebGLRenderingContext.LINEAR,r._wrapS=WebGLRenderingContext.REPEAT,r._wrapT=WebGLRenderingContext.REPEAT,r}return a(t,e),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteTexture(this.resourceReference)}},{key:"register",value:function(e){this.gl.activeTexture(WebGLRenderingContext.TEXTURE0+e),this.gl.bindTexture(this.textureType,this.resourceReference),this.__applyTexParameter()}},{key:"__getRawPixels",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments[4],i=arguments[5],a=arguments[6],u=p.default.typeToTypedArrayConstructor(e),s=new u(o*i*p.default.formatToElementCount(t)),c=this.gl.createFramebuffer();return this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,c),this.gl.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0,a,this.resourceReference,0),this.gl.checkFramebufferStatus(WebGLRenderingContext.FRAMEBUFFER)===WebGLRenderingContext.FRAMEBUFFER_COMPLETE&&this.gl.readPixels(n,r,o,i,t,e,s),this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),s}},{key:"__ensurePOT",value:function(e){if(e instanceof HTMLImageElement)return this._ensureImagePOT(e);if(e instanceof HTMLCanvasElement)return this._ensureCanvasPOT(e);if(e instanceof HTMLVideoElement)return this._ensureVideoPOT(e);throw new Error("Unsupported resource type")}},{key:"__needMipmap",value:function(e){return t._filtersNeedsMipmap.indexOf(e)>-1}},{key:"__applyTexParameter",value:function(){this._texParameterChanged&&(this.gl.texParameteri(this.textureType,WebGLRenderingContext.TEXTURE_MIN_FILTER,this._minFilter),this.gl.texParameteri(this.textureType,WebGLRenderingContext.TEXTURE_MAG_FILTER,this._magFilter),this.gl.texParameteri(this.textureType,WebGLRenderingContext.TEXTURE_WRAP_S,this._wrapS),this.gl.texParameteri(this.textureType,WebGLRenderingContext.TEXTURE_WRAP_T,this._wrapT),this._texParameterChanged=!1)}},{key:"_ensureImagePOT",value:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=l.default.getPow2Size(t,n);return t!==r.width||n!==r.height?{result:this._resizeImageOrVideo(e,r.width,r.height),height:r.height,width:r.width}:{result:e,width:t,height:n}}},{key:"_ensureCanvasPOT",value:function(e){var t=e.width,n=e.height,r=l.default.getPow2Size(t,n);return t!==r.width||n!==r.height?(e.width=r.width,e.height=r.height,{result:e,width:e.width,height:e.height}):{result:e,width:e.width,height:e.height}}},{key:"_ensureVideoPOT",value:function(e){var t=e.videoWidth,n=e.videoHeight,r=l.default.getPow2Size(t,n);return t!==r.width||n!==r.height?{result:this._resizeImageOrVideo(e,r.width,r.height),width:r.width,height:r.height}:{result:e,width:t,height:n}}},{key:"_resizeImageOrVideo",value:function(e,n,r){var o=t._resizerCanvas;return o.height=r,o.width=n,t._resizerContext.drawImage(e,0,0,e.width,e.height,0,0,n,r),t._resizerCanvas}},{key:"magFilter",get:function(){return this._magFilter},set:function(e){this._magFilter!==e&&(this._texParameterChanged=!0,this._magFilter=e)}},{key:"minFilter",get:function(){return this._minFilter},set:function(e){this._minFilter!==e&&(this._texParameterChanged=!0,this._minFilter=e,this.__ensureMipmap())}},{key:"wrapS",get:function(){return this._wrapS},set:function(e){this._wrapS!==e&&(this._texParameterChanged=!0,this._wrapS=e)}},{key:"wrapT",get:function(){return this._wrapT},set:function(e){this._wrapT!==e&&(this._texParameterChanged=!0,this._wrapT=e)}},{key:"format",get:function(){return this.__format}},{key:"type",get:function(){return this.__type}}]),t}(h.default);t.default=v,v._resizerCanvas=document.createElement("canvas"),v._resizerContext=v._resizerCanvas.getContext("2d"),v._filtersNeedsMipmap=[WebGLRenderingContext.LINEAR_MIPMAP_LINEAR,WebGLRenderingContext.LINEAR_MIPMAP_NEAREST,WebGLRenderingContext.NEAREST_MIPMAP_LINEAR,WebGLRenderingContext.NEAREST_MIPMAP_NEAREST]},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.Rectangle:void 0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._fullscreen=!1,e}return i(t,e),a(t,[{key:"$awake",value:function(){var e=this;this.getAttributeRaw("fullscreen").watch(function(t){e._fullscreen!==t&&(e._fullscreen=t,e._switchFullscreen())})}},{key:"_switchFullscreen",value:function(){if(this._fullscreen){var e=this.getAttribute("fullscreenTarget");if(e){var t=document.querySelectorAll(e);t[0]?this.requestFullscreen(t[0]):console.warn("Specified fullscreenTarget was not found on HTML dom tree")}else this.requestFullscreen(this.companion.get("canvasContainer"))}else this.exitFullscreen()}},{key:"requestFullscreen",value:function(e){if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else{if(!e.requestFullscreen)return void console.error("ご利用のブラウザはフルスクリーン操作に対応していません");e.requestFullscreen()}}},{key:"exitFullscreen",value:function(){document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen()}}]),t}(s.default);t.default=c,c.attributes={fullscreen:{converter:"Boolean",default:!1},fullscreenTarget:{converter:"String",default:null}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(21),f=r(l),h=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$mount",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getAttribute("type"))){e.next=15;break}n=f.default.get(this.companion.get("gl")),r=f.default.factoryArgumentDeclarations[t],o={};for(i in r)this.__addAttribute(i,r[i]),o[i]=this.getAttribute(i);if(a=n.instanciate(t,o),u=this.companion.get("GeometryRegistory"),s=this.getAttribute("name")){e.next=11;break}throw new Error("Name was not specified");case 11:return u.addGeometry(s,a),e.next=14,a;case 14:this.geometry=e.sent;case 15:case"end":return e.stop()}},e,this)}))}}]),t}(c.default);t.default=d,d.attributes={type:{converter:"String",default:null},name:{converter:"String",default:null}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(14),f=r(l),h=n(21),d=r(h),p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._geometryResolver=new f.default,e}return a(t,e),u(t,[{key:"$awake",value:function(){this.companion.set(this.name,this);var e=d.default.get(this.companion.get("gl")),t=!0,n=!1,r=void 0;try{for(var o,i=this.getAttribute("defaultGeometry")[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.addGeometry(a,e.instanciateAsDefault(a))}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"addGeometry",value:function(e,t){this._geometryResolver.register(e,t)}},{key:"getGeometry",value:function(e){return this._geometryResolver.get(e)}}]),t}(c.default);t.default=p,p.attributes={defaultGeometry:{converter:"StringArray",default:["quad","cube","sphere"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Background:{priorty:1e3},NoAlpha:{priorty:2e3},UseAlpha:{priorty:3e3,descending:!0},NoDepth:{priorty:4e3,descending:!0},Overlay:{priorty:5e3,descending:!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(14),f=r(l),h=n(1),d=r(h),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){if(this.getAttributeRaw("typeName").watch(function(){console.warn("Changeing 'typeName' on MaterialImporter makes no sense. This change won't affect anything.")}),this.getAttributeRaw("src").watch(function(){console.warn("Changeing 'src' on MaterialImporter makes no sense. This change won't affect anything.")}),!this.getAttribute("typeName")||!this.getAttribute("src"))throw new Error("type or src cannot be null in material importer");var e=this.getAttribute("typeName");if(d.default.getMaterialStatus(e)!==f.default.UNLOADED)throw new Error("A material type '"+e+"' is already loaded.");d.default.addSORTMaterialFromURL(this.getAttribute("typeName"),this.getAttribute("src"))}}]),t}(c.default);t.default=p,p.attributes={typeName:{default:null,converter:"String"},src:{default:null,converter:"String"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),c=r(s),l=n(36),f=r(l),h=n(0),d=r(h),p=n(22),v=r(p),y=n(19),m=r(y),g=n(8),_=r(g),b=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},w=f.default.vec3,M=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.renderArgs={},e._priortyCalcCache=new Float32Array(3),e}return a(t,e),u(t,[{key:"getRenderingPriorty",value:function(e,t){return this.geometryInstance&&this._materialContainer.material.techniques[t]?(w.add(this._priortyCalcCache,e.transform.globalPosition.rawElements,this.geometryInstance.aabb.Center.rawElements),w.sub(this._priortyCalcCache,this._priortyCalcCache,this._transformComponent.globalPosition.rawElements),this._materialContainer.getDrawPriorty(w.sqrLen(this._priortyCalcCache),t)):Number.NEGATIVE_INFINITY}},{key:"$awake",value:function(){var e=this;this.__bindAttributes(),this.getAttributeRaw("geometry").watch(function(){return b(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.geometry;case 2:this.geometryInstance=e.sent;case 3:case"end":return e.stop()}},e,this)}))},!0)}},{key:"$mount",value:function(){this._transformComponent=this.node.getComponent(_.default),this._materialContainer=this.node.getComponent(v.default),this._containedScene=t._findContainedScene(this.node),this._containedScene.queueRegistory.addRenderable(this)}},{key:"$unmount",value:function(){this._containedScene.queueRegistory.removeRenderable(this)}},{key:"render",value:function(e){if(this.node.isActive&&this.enabled&&this.layer===e.layer&&this.geometryInstance&&(e.material||this._materialContainer.material)){var t={indexGroup:this.indexGroup,geometry:this.geometryInstance,camera:e.camera,transform:this._transformComponent,viewport:e.viewport,drawCount:this.drawCount,drawOffset:this.drawOffset,sceneDescription:e.sceneDescription,rendererDescription:e.rendererDescription,technique:e.technique,renderable:this};c.default.debug&&window.spector&&window.spector.setMarker("Mesh renderer:"+this.node.id),this._materialContainer.material.draw(t),this.node.emit("render",e)}}},{key:"setRenderableIndex",value:function(e){this.index=e}}],[{key:"_findContainedScene",value:function(e){if(e.parent){var n=e.parent.getComponent(m.default);return n||t._findContainedScene(e.parent)}return null}}]),t}(d.default);t.default=M,M.attributes={geometry:{converter:"Geometry",default:"quad"},indexGroup:{converter:"String",default:"default"},layer:{converter:"String",default:"default"},drawCount:{converter:"Number",default:Number.MAX_VALUE},drawOffset:{converter:"Number",default:0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),c=r(s),l=n(121),f=r(l),h=n(7),d=r(h),p=n(0),v=r(p),y=n(8),m=r(y),g=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._updated=!1,e._lastCenter=null,e._lastScreenPos=null,e._lastPinchDistance=null,e._xsum=0,e._ysum=0,e._d=d.default.Zero,e}return a(t,e),u(t,[{key:"$awake",value:function(){this.__bindAttributes(),this._listeners={mousemove:this._mouseMove.bind(this),touchmove:this._touchMove.bind(this),touchstart:this._touchStart.bind(this),touchend:this._touchEnd.bind(this),contextmenu:this._contextMenu.bind(this),wheel:this._mouseWheel.bind(this)}}},{key:"$mount",value:function(){this._transform=this.node.getComponent(m.default);var e=this.companion.get("canvasElement");e.addEventListener("mousemove",this._listeners.mousemove),e.addEventListener("touchmove",this._listeners.touchmove),e.addEventListener("touchstart",this._listeners.touchstart),e.addEventListener("touchend",this._listeners.touchend),e.addEventListener("contextmenu",this._listeners.contextmenu),e.addEventListener("wheel",this._listeners.wheel),this._lastScreenPos=null,this._xsum=0,this._ysum=0}},{key:"$unmount",value:function(){var e=this.companion.get("canvasElement");e.removeEventListener("mousemove",this._listeners.mousemove),e.removeEventListener("touchmove",this._listeners.touchmove),e.removeEventListener("touchstart",this._listeners.touchstart),e.removeEventListener("touchend",this._listeners.touchend),e.removeEventListener("contextmenu",this._listeners.contextmenu),e.removeEventListener("wheel",this._listeners.wheel)}},{key:"$initialized",value:function(){var e=d.default.normalize(this.center.subtractWith(this._transform.position)),t=f.default.fromToRotation(this._transform.forward,e).normalize();this._transform.rotation=t,this._initialRotation=t,this._initialDirection=d.default.copy(this._transform.forward.negateThis()).normalized,null!==this.distance?this._transform.position=this.center.addWith(this._initialDirection.multiplyWith(this.distance)):this.distance=this._transform.position.subtractWith(this.center).magnitude}},{key:"$update",value:function(){if(this.isActive&&this._updated||!this._lastCenter||!this.center.equalWith(this._lastCenter)){this._updated=!1,this._lastCenter=this.center;var e=f.default.angleAxis(-this._xsum*this.rotateSpeed*.01,d.default.YUnit),t=f.default.angleAxis(-this._ysum*this.rotateSpeed*.01,d.default.XUnit),n=f.default.multiply(e,t),r=c.default.rotationQuaternion(n),o=c.default.transformNormal(r,this._initialDirection);this._transform.position=this.center.addWith(this._d).addWith(d.default.normalize(o).multiplyWith(this.distance)),this._transform.rotation=n,this._transform.rotation=f.default.multiply(n,this._initialRotation)}}},{key:"_contextMenu",value:function(e){this.isActive&&e.preventDefault()}},{key:"_touchStart",value:function(e){this.isActive&&(e.touches.length>=2&&(this._lastPinchDistance=Math.pow(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2),.5)),this._lastScreenPos=null,e.preventDefault())}},{key:"_touchEnd",value:function(e){this.isActive}},{key:"_mouseMove",value:function(e){if(this.isActive){var t=e.screenX,n=e.screenY;if(null===this._lastScreenPos)return void(this._lastScreenPos={x:t,y:n});this._checkButtonPress(e,!1)?(e.preventDefault(),this._move(t,n)):this._checkButtonPress(e,!0)&&(e.preventDefault(),this._rotate(t,n)),this._lastScreenPos={x:t,y:n}}}},{key:"_touchMove",value:function(e){if(this.isActive)switch(e.touches.length){case 1:var t=e.touches[0].pageX,n=e.touches[0].pageY;if(null===this._lastScreenPos)return void(this._lastScreenPos={x:t,y:n});e.preventDefault(),this._rotate(t,n),this._lastScreenPos={x:t,y:n};break;case 2:this.getAttribute("preventScroll")&&e.preventDefault();var r=Math.pow(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2),.5);this._zoom(.5*(this._lastPinchDistance-r)),this._lastPinchDistance=r}}},{key:"_mouseWheel",value:function(e){this.isActive&&(this.getAttribute("preventScroll")&&e.preventDefault(),this._zoom(e.deltaY))}},{key:"_checkButtonPress",value:function(e,t){return"buttons"in e?t?(1&e.buttons)>0:(2&e.buttons)>0:t?1===e.which:3===e.which}},{key:"_move",value:function(e,t){var n=e-this._lastScreenPos.x,r=t-this._lastScreenPos.y,o=-n*this.moveSpeed*.01,i=r*this.moveSpeed*.01;this._d=this._d.addWith(this._transform.right.multiplyWith(o)).addWith(this._transform.up.multiplyWith(i)),this._updated=!0}},{key:"_rotate",value:function(e,t){var n=e-this._lastScreenPos.x,r=t-this._lastScreenPos.y;this._xsum+=n,this._ysum+=r,this._ysum=Math.min(50*Math.PI,this._ysum),this._ysum=Math.max(50*-Math.PI,this._ysum),this._updated=!0}},{key:"_zoom",value:function(e){var t=d.default.subtract(this._transform.position,this.center).normalized,n=e*this.zoomSpeed*.05;this.distance=Math.max(1,this.distance+n),this._transform.position=this.center.addWith(t.multiplyWith(this.distance))}}]),t}(v.default);t.default=g,g.attributes={rotateSpeed:{default:1,converter:"Number"},zoomSpeed:{default:1,converter:"Number"},moveSpeed:{default:1,converter:"Number"},center:{default:"0,0,0",converter:"Position",lazy:!0},distance:{default:null,converter:"Number"},preventScroll:{default:!0,converter:"Boolean"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(41),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),a(t,[{key:"setViewport",value:function(e){this._viewport=e}},{key:"getViewport",value:function(){return this._viewport}},{key:"__configureClearScissor",value:function(){this.gl.enable(WebGLRenderingContext.SCISSOR_TEST);var e=this.getViewport();this.gl.scissor(e.Left,e.Bottom,e.Width,e.Height)}}]),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(123),c=r(s),l=n(0),f=r(l),h=n(1),d=r(h),p=n(16),v=r(p),y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){this.getAttributeRaw("bgColor").boundTo("_bgColor"),this.getAttributeRaw("clearDepth").boundTo("_clearDepth")}},{key:"$mount",value:function(){this.gl=this.companion.get("gl")}},{key:"$treeInitialized",value:function(){this.node.getComponent(v.default).register(this.onloop.bind(this),1e3),this.getAttribute("complementRenderer")&&0===this.node.getChildrenByNodeName("renderer").length&&this.node.addChildByName("renderer",{}),this._importSortFromHTML()}},{key:"onloop",value:function(e){if(this.enabled){var t=this._bgColor;this.gl.clearColor(t.R,t.G,t.B,t.A),this.gl.clearDepth(this._clearDepth),this.gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT|WebGLRenderingContext.DEPTH_BUFFER_BIT),this.node.broadcastMessage(1,"renderViewport",{timer:e})}}},{key:"_importSortFromHTML",value:function(){if(!t._sortImportedFromHTML){for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n++){n=n;var r=e.item(n);if("text/sort"===r.getAttribute("type")){var o=r.getAttribute("typeName");if(!o)throw new Error("Every script tag with 'text/sort' type should have typeName attribute to specify the name to be registered as a material.");r.getAttribute("src")?d.default.addSORTMaterialFromURL(o,r.getAttribute("src")):d.default.addSORTMaterial(o,r.innerText)}}t._sortImportedFromHTML=!0}}}]),t}(f.default);t.default=y,y.attributes={bgColor:{default:new c.default(0,0,0,0),converter:"Color4"},clearDepth:{default:1,converter:"Number"},complementRenderer:{default:!0,converter:"Boolean"}},y._sortImportedFromHTML=!1},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(96),f=r(l),h=n(24),d=r(h),p=n(43),v=r(p),y=n(13),m=r(y),g=function(t){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),u(n,[{key:"$mount",value:function(){var t=this,n=this.getAttribute("name");if(!n)throw new Error("Rendering target must have name");0===this.node.children.length&&this._instanciateDefaultBuffers(n),e(function(){var e=t.node.getComponentsInChildren(m.default),r=e[0].texture,o=t.node.getComponentsInChildren(v.default);t.renderingTarget=new f.default(t.companion.get("gl"),[r],o[0].buffer),d.default.get(t.companion.get("gl")).setRenderingTarget(n,t.renderingTarget)})}},{key:"_instanciateDefaultBuffers",value:function(e){this.node.addChildByName("color-buffer",{name:e,format:this.getAttribute("colorBufferFormat"),type:this.getAttribute("colorBufferType"),resizerType:this.getAttribute("resizerType")}),0!==this.getAttribute("depthBufferType")&&this.node.addChildByName("render-buffer",{name:e,type:this.getAttribute("depthBufferType"),resizerType:this.getAttribute("resizerType")})}}]),n}(c.default);t.default=g,g.attributes={name:{converter:"String",default:null},colorBufferFormat:{converter:"Enum",default:WebGLRenderingContext.RGBA,table:{RGBA:WebGLRenderingContext.RGBA,RGB:WebGLRenderingContext.RGB,ALPHA:WebGLRenderingContext.ALPHA,LUMINANCE:WebGLRenderingContext.LUMINANCE,LUMINANCE_ALPHA:WebGLRenderingContext.LUMINANCE_ALPHA,SRGB_EXT:WebGLRenderingContext.SRGB_EXT,SRGB_ALPHA_EXT:WebGLRenderingContext.SRGB_ALPHA_EXT,DEPTH_COMPONENT:WebGLRenderingContext.DEPTH_COMPONENT,DEPTH_STENCIL:WebGLRenderingContext.DEPTH_STENCIL}},colorBufferType:{converter:"Enum",default:WebGLRenderingContext.UNSIGNED_BYTE,table:{UNSIGNED_BYTE:WebGLRenderingContext.UNSIGNED_BYTE,UNSIGNED_SHORT_5_6_5:WebGLRenderingContext.UNSIGNED_SHORT_5_6_5,UNSIGNED_SHORT_4_4_4_4:WebGLRenderingContext.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:WebGLRenderingContext.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT:WebGLRenderingContext.UNSIGNED_SHORT,UNSIGNED_INT:WebGLRenderingContext.UNSIGNED_INT,FLOAT:WebGLRenderingContext.FLOAT}},depthBufferType:{converter:"Enum",default:WebGLRenderingContext.DEPTH_COMPONENT16,table:{NONE:0,DEPTH_COMPONENT16:WebGLRenderingContext.DEPTH_COMPONENT16}},resizerType:{converter:"String",default:"ViewportSize"}}}).call(t,n(95).setImmediate)},function(e,r,o){function i(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;r.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},o(124),r.setImmediate=t,r.clearImmediate=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(42),u=r(a),s=n(6),c=r(s),l=function(){function e(t,n,r){if(o(this,e),this.gl=t,this.textures=n,this.depthBuffer=r,0===n.length)throw new Error("Textures must contain 1 texture at least");this.fbo=new u.default(t);for(var i=0;i<n.length;i++)this.fbo.update(this.textures[i],0,i);this.fbo.update(r)}return i(e,[{key:"beforeDraw",value:function(e,t,n){if(this.bind(),0!==e){var r=0;0!=(e&WebGLRenderingContext.COLOR_BUFFER_BIT)&&t&&(this.gl.clearColor.apply(this.gl,t),r|=WebGLRenderingContext.COLOR_BUFFER_BIT),0!=(e&WebGLRenderingContext.DEPTH_BUFFER_BIT)&&null!==n&&this.depthBuffer&&(this.gl.clearDepth(n),r|=WebGLRenderingContext.DEPTH_BUFFER_BIT),0!==r&&this.gl.clear(r)}this.getViewport().configure(this.gl)}},{key:"getBufferWidth",value:function(){return this.texture.width}},{key:"getBufferHeight",value:function(){return this.texture.height}},{key:"getViewport",value:function(){return new c.default(0,0,this.getBufferWidth(),this.getBufferHeight())}},{key:"bind",value:function(){this.fbo.bind()}},{key:"texture",get:function(){return this.textures[0]}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(42),f=r(l),h=n(25),d=r(h),p=n(2),v=r(p),y=n(6),m=r(y),g=n(46),_=r(g),b=n(12),w=r(b),M=n(47),E=r(M),x=n(29),S=r(x),O=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._readCache=new Uint8Array(4),e}return a(t,e),u(t,[{key:"$mount",value:function(){if(this._sceneRenderer=this.node.getComponent(E.default),!this._sceneRenderer)throw new Error("The node attaching RenderHitArea should contain RenderScene.");this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement"),this.hitareaTexture=new v.default(this._gl),this.hitareaRenderbuffer=new d.default(this._gl),this.hitareaFBO&&(this.hitareaFBO.destroy(),this.hitareaFBO=null)}},{key:"$resizeViewport",value:function(e){var t=w.default.getPow2Size(e.width,e.height);this._bufferViewport=new m.default(0,0,t.width,t.height),this.hitareaTexture.update(0,t.width,t.height,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE),this.hitareaRenderbuffer.update(WebGLRenderingContext.DEPTH_COMPONENT16,t.width,t.height),this.hitareaFBO||(this.hitareaFBO=new f.default(this._gl),this.hitareaFBO.update(this.hitareaTexture),this.hitareaFBO.update(this.hitareaRenderbuffer))}},{key:"$render",value:function(e){if(this._mouseInside){var t=this._sceneRenderer.camera||e.camera;t&&(this.hitareaFBO.bind(),this._bufferViewport.configure(this._gl),this._gl.clearColor(0,0,0,0),this._gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this._gl.clearDepth(1),this._gl.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT),t.renderScene({renderer:this._sceneRenderer,camera:t,layer:this._sceneRenderer.layer,viewport:e.viewport,timer:e.timer,technique:"hitarea",sceneDescription:{},sortingTechnique:"default",rendererDescription:this.rendererDescription}),this._gl.flush(),this._gl.readPixels(this._lastPosition[0]*this._bufferViewport.Width,this._lastPosition[1]*this._bufferViewport.Height,1,1,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,this._readCache),this._updateCurrentIndex(_.default.fromColor(this._readCache),t),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}}},{key:"$mousemove",value:function(e){this._lastPosition=[e.viewportNormalizedX,e.viewportNormalizedY],this._mouseMoved=!0}},{key:"$mouseenter",value:function(e){this._mouseInside=!0,this._lastPosition=[e.viewportNormalizedX,e.viewportNormalizedY],this._mouseMoved=!0}},{key:"$mouseleave",value:function(e){this._mouseInside=!1,this._lastPosition=[e.viewportNormalizedX,e.viewportNormalizedY],this._mouseMoved=!0,this._lastRenderable instanceof c.default&&this._lastRenderable.node.emit("mouseleave",this._lastRenderable),this._lastRenderable=null}},{key:"$click",value:function(e){this._lastRenderable instanceof c.default&&this._lastRenderable.node.emit("click",this._lastRenderable)}},{key:"$dblclick",value:function(e){this._lastRenderable instanceof c.default&&this._lastRenderable.node.emit("dblclick",this._lastRenderable)}},{key:"$mousedown",value:function(e){this._lastRenderable instanceof c.default&&this._lastRenderable.node.emit("mousedown",this._lastRenderable)}},{key:"$mouseup",value:function(e){this._lastRenderable instanceof c.default&&this._lastRenderable.node.emit("mouseup",this._lastRenderable)}},{key:"_updateCurrentIndex",value:function(e,t){if(0===e)this._lastRenderable instanceof c.default&&this._lastRenderable.node.emit("mouseleave",this._lastRenderable),this._lastRenderable=null;else{var n=t.containedScene.queueRegistory.getByIndex(e-1);this._lastRenderable!==n?(this._lastRenderable instanceof c.default&&this._lastRenderable.node.emit("mouseleave",this._lastRenderable),n instanceof c.default&&n.node.emit("mouseenter",n)):n instanceof c.default&&(this._mouseMoved?n.node.emit("mousemove",n):n.node.emit("mouseon",n)),this._lastRenderable=n}}}]),t}(S.default);t.default=O,O.attributes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),c=r(s),l=n(0),f=r(l),h=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.rendererDescription={mouse:{coords:{canvas:[0,0],canvasNormalized:[0,0],viewport:[0,0],viewportNormalized:[0,0]},left:!1,right:!1,inside:!1}},e.metadata={},e}return a(t,e),u(t,[{key:"$mousemove",value:function(e){this._assignMouseState(e)}},{key:"$mouseenter",value:function(e){this._assignMouseState(e)}},{key:"$mouseleave",value:function(e){this._assignMouseState(e)}},{key:"$mousedown",value:function(e){this._assignMouseState(e)}},{key:"$mouseup",value:function(e){this._assignMouseState(e)}},{key:"$click",value:function(e){}},{key:"$dblclick",value:function(e){}},{key:"__beforeRender",value:function(){if(c.default.debug&&window.spector){var e="";for(var t in this.metadata)void 0!==this.metadata[t]&&(e+=t+"="+this.metadata[t]+"|");window.spector.setMarker("Renderer|"+e)}return!0}},{key:"_assignMouseState",value:function(e){var t=this.rendererDescription.mouse;t.inside=e.inside,t.coords.viewport=[e.viewportX,e.viewportY],t.coords.viewportNormalized=[e.viewportNormalizedX,e.viewportNormalizedY],t.coords.canvas=[e.canvasX,e.canvasY],t.coords.canvasNormalized=[e.canvasNormalizedX,e.canvasNormalizedY],t.left=this._isLeftButtonPressed(e),t.right=this._isRightButtonPressed(e)}},{key:"_isLeftButtonPressed",value:function(e){return 1===e.buttons||void 0===e.buttons&&1===e.which}},{key:"_isRightButtonPressed",value:function(e){return 2===e.buttons||void 0===e.buttons&&3===e.which}}]),t}(f.default);t.default=h,h.attributes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(22),l=r(c),f=n(29),h=r(f),d=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$awake",this).call(this),this.metadata.type="Quad",this.getAttributeRaw("indexGroup").boundTo("indexGroup"),this.getAttributeRaw("technique").boundTo("technique"),this.getAttributeRaw("technique").watch(function(t){e.metadata.technique=t},!0)}},{key:"$mount",value:function(){return d(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._gl=this.companion.get("gl"),this._materialContainer=this.node.getComponent(l.default),t=this.companion.get("GeometryRegistory"),e.next=5,t.getGeometry("quad");case 5:this._geom=e.sent;case 6:case"end":return e.stop()}},e,this)}))}},{key:"$render",value:function(e){if(this._materialContainer.materialReady&&this._geom&&this.__beforeRender()){var t={indexGroup:this.indexGroup,geometry:this._geom,camera:null,transform:null,viewport:this.out.getViewport(),technique:this.technique,sceneDescription:{},rendererDescription:this.rendererDescription};this._materialContainer.material.draw(t),this._gl.flush()}}}]),t}(h.default);t.default=p,p.attributes={indexGroup:{default:"default",converter:"String"},technique:{default:"default",converter:"String"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(26),l=r(c),f=n(30),h=r(f),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$awake",this).call(this);var e=this.getAttribute("name"),n=this.getAttribute("format"),r=this.getAttribute("type");e&&l.default.get(this.companion.get("gl")).setBackbuffer(this.getAttribute("name"),this.__texture),this.__texture.update(0,1,1,0,n,r,null)}},{key:"resize",value:function(e,t){var n=this.getAttribute("format"),r=this.getAttribute("type");this.__texture.update(0,e,t,0,n,r,null)}}]),t}(h.default);t.default=d,d.attributes={name:{converter:"String",default:null},format:{converter:"Enum",default:WebGLRenderingContext.RGBA,table:{RGBA:WebGLRenderingContext.RGBA,RGB:WebGLRenderingContext.RGB,ALPHA:WebGLRenderingContext.ALPHA,LUMINANCE:WebGLRenderingContext.LUMINANCE,LUMINANCE_ALPHA:WebGLRenderingContext.LUMINANCE_ALPHA,SRGB_EXT:WebGLRenderingContext.SRGB_EXT,SRGB_ALPHA_EXT:WebGLRenderingContext.SRGB_ALPHA_EXT,DEPTH_COMPONENT:WebGLRenderingContext.DEPTH_COMPONENT,DEPTH_STENCIL:WebGLRenderingContext.DEPTH_STENCIL}},type:{converter:"Enum",default:WebGLRenderingContext.UNSIGNED_BYTE,table:{UNSIGNED_BYTE:WebGLRenderingContext.UNSIGNED_BYTE,UNSIGNED_SHORT_5_6_5:WebGLRenderingContext.UNSIGNED_SHORT_5_6_5,UNSIGNED_SHORT_4_4_4_4:WebGLRenderingContext.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:WebGLRenderingContext.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT:WebGLRenderingContext.UNSIGNED_SHORT,UNSIGNED_INT:WebGLRenderingContext.UNSIGNED_INT,FLOAT:WebGLRenderingContext.FLOAT}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(33),l=r(c),f=n(30),h=r(f),d=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$awake",this).call(this),this.__bindAttributes(),this.getAttributeRaw("src").watch(function(t){null!==t&&e._loadTask(t)},!0)}},{key:"resize",value:function(e,t){this._resolvedImage&&(this._resolvedImage.width=e,this._resolvedImage.height=t,this._updateTexture())}},{key:"_loadTask",value:function(e){return d(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.resolve(e);case 2:n=t.sent,this._resolvedImage=n,this._updateTexture();case 5:case"end":return t.stop()}},t,this)}))}},{key:"_updateTexture",value:function(){this.__texture.update(this._resolvedImage,{premultipliedAlpha:this.premultipliedAlpha,flipY:this.flipY})}}]),t}(h.default);t.default=p,p.attributes={src:{converter:"String",default:null}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(50),l=r(c),f=n(30),h=r(f),d=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"$awake",this).call(this),this.__bindAttributes(),this.getAttributeRaw("src").watch(function(t){null!==t&&e._loadTask(t)},!0),this.getAttributeRaw("currentTime").watch(function(t){e.video&&e.video.currentTime!==e.currentTime&&e._syncVideoPref()}),this.getAttributeRaw("muted").watch(function(){e.video&&e._syncVideoPref()}),this.getAttributeRaw("playbackRate").watch(function(){e.video&&e._syncVideoPref()}),this.getAttributeRaw("loop").watch(function(){e.video&&e._syncVideoPref()})}},{key:"resize",value:function(e,t){this.video&&(this.video.width=e,this.video.height=t,this.tryUpdateCurrentFrame())}},{key:"_update",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentTime!==this.video.currentTime&&(this.currentTime=this.video.currentTime),this.tryUpdateCurrentFrame(),e.next=5,1;case 5:e.next=0;break;case 7:case"end":return e.stop()}},e,this)})},{key:"tryUpdateCurrentFrame",value:function(){this.video.readyState===this.video.HAVE_ENOUGH_DATA&&this.__texture.update(this.video,{premultipliedAlpha:this.premultipliedAlpha,flipY:this.flipY})}},{key:"_loadTask",value:function(e){return d(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.resolve(e);case 2:this.video=t.sent,this.__registerFrameCoroutine(this._update),this.video.play(),this._syncVideoPref(),this._update();case 7:case"end":return t.stop()}},t,this)}))}},{key:"_syncVideoPref",value:function(){this.video.playbackRate=this.playbackRate,this.video.muted=this.muted,this.video.loop=this.loop,this.video.currentTime=this.currentTime}}]),t}(h.default);t.default=p,p.attributes={src:{converter:"String",default:null},currentTime:{converter:"Number",default:0},muted:{converter:"Boolean",default:!0},playbackRate:{converter:"Number",default:1},loop:{converter:"Boolean",default:!0}}},function(e,t,n){"use strict";function r(e){if("fit"===e)return{mode:"fit"};if("string"==typeof e){var t=/aspect\(([\d+(?.\d*)?]+)\)/.exec(e);if(t)return{mode:"aspect",aspect:Number.parseFloat(t[1])}}return{mode:"manual",size:Number.parseFloat(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){if("string"==typeof e){return t.companion.get("GeometryRegistory").getGeometry(e)}if(e instanceof i.default)return Promise.resolve(e);throw new Error('Specified geometry "'+e+'" is not supported for converting into geometry.')}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(10),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if("string"==typeof e){var n=/\s*new\s*\(\s*([a-zA-Z\d\-]+)\s*\)/,r=void 0;if(r=n.exec(e))return t.component[t.declaration.componentBoundTo]=null,l.default.get(t.companion.get("gl")).instanciate(r[1]);var o=t.tree(e).first();if(o){var i=o.getComponent(a.default);return t.component[t.declaration.componentBoundTo]=i,i.materialPromise}return console.warn("There was no matching material component filtered by '"+e+"'"),null}return e instanceof s.default?(t.component[t.declaration.componentBoundTo]=null,Promise.resolve(e)):null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(39),a=r(i),u=n(37),s=r(u),c=n(1),l=r(c)},function(e,t,n){"use strict";function r(e,t){return null===e?null:e instanceof i.default?e:"string"==typeof e?t.component.node.tree(e).first():void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(127),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={name:"Position",lazy:!0,verify:function(e){return!0},convert:function(e,t){if(null===e)return null;if(t.convertContext._lastVal===e)return t.convertContext._node.getAttribute("position");t.convertContext._lastVal=null;try{var n=o.default.convert("Vector3",t,e);if(n)return n}catch(e){}return t.convertContext._node=o.default.convert("Node",t,e),t.convertContext._node?(t.convertContext._lastVal=e,t.convertContext._node.getAttribute("position")):void 0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e;return"object"===(void 0===e?"undefined":a(e))&&"function"==typeof t.beforeDraw&&"function"==typeof t.getBufferHeight&&"function"==typeof t.getBufferWidth&&"function"==typeof t.getViewport}function i(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!o(e)){n.next=4;break}return n.abrupt("return",e);case 4:if("string"!=typeof e){n.next=14;break}if("default"!==e){n.next=10;break}return r=t.component.node.getComponentInAncestor(s.default),n.abrupt("return",r.renderingTarget);case 10:if(!(i=l.default.get(t.companion.get("gl")).getRenderingTarget(e))){n.next=13;break}return n.abrupt("return",i);case 13:throw new Error('Specified rendering target "'+e+'" was not found.');case 14:return n.abrupt("return",null);case 15:case"end":return n.stop()}},n,this)}))}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i;var u=n(23),s=r(u),c=n(24),l=r(c),f=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=/(query|backbuffer)\((.+)\)[^\)]*$/,n=void 0;return(n=t.exec(e))?{type:n[1],param:n[2]}:null}function i(e,t){if(e instanceof y.default)return new h.default(e);if(e instanceof h.default)return e;if("string"==typeof e){var n=o(e);if(!n){var r=new y.default(t.companion.get("gl"));return s.default.resolve(e).then(function(e){r.update(e)}),t.companion.get("loader").register(r.validPromise),new h.default(r)}var i=n.param;switch(n.type){case"backbuffer":return new h.default(function(e){return p.default.get(t.companion.get("gl")).getBackbuffer(i)});case"query":var u=t.tree(i),c=u.first().getComponent(l.default);return new h.default(function(){return c.texture})}}if("object"===(void 0===e?"undefined":a(e))){if(e instanceof HTMLImageElement){var f=new y.default(t.companion.get("gl"));return e.complete&&e.naturalWidth?f.update(e):e.onload=function(){f.update(e)},new h.default(f)}if(e instanceof HTMLCanvasElement){var d=new y.default(t.companion.get("gl"));return d.update(e),new h.default(d)}}return null}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i;var u=n(33),s=r(u),c=n(13),l=r(c),f=n(110),h=r(f),d=n(26),p=r(d),v=n(2),y=r(v)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.rawResource=t,this.isFunctionalProxy="function"==typeof t}return o(e,[{key:"get",value:function(e){return this.isFunctionalProxy?this.rawResource(e):this.rawResource}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=/(\d+)\s*%/,r=void 0;if(r=n.exec(t)){var o=Number.parseFloat(r[1]);return Math.floor(e*o*.01)}return Math.floor(Number.parseFloat(t))}function i(e){if(e instanceof u.default){var t=new c.default(e.Left,e.Bottom,e.Width,e.Height);return function(){return t}}if(e instanceof c.default)return function(){return e};if("string"==typeof e){if("auto"===e)return function(e){return new c.default(0,0,e.width,e.height)};var n=e.split(",");if(4!==n.length)throw new Error("Invalid viewport size was specified.");return function(e){return new c.default(o(e.width,n[0]),o(e.height,n[1]),o(e.width,n[2]),o(e.height,n[3]))}}throw new Error(e+" could not be parsed")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(84),u=r(a),s=n(6),c=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(69),u=r(a),s=n(7),c=r(s),l=n(10),f=r(l),h=n(21),d=r(h),p=n(113),v=r(p),y=new u.default;y.expand(new c.default(-1,-1,-1)),y.expand(new c.default(1,1,1));var m={POSITION:{size:3,stride:32},NORMAL:{size:3,stride:32,offset:12},TEXCOORD:{size:2,stride:32,offset:24}},g=function(){function e(){o(this,e)}return i(e,null,[{key:"register",value:function(){e._registerQuad(),e._registerCube(),e._registerSphere(),e._registerCircle(),e._registerCylinder(),e._registerCone(),e._registerPlane(),e._registerTriangle(),e._registerCapsule()}},{key:"_registerQuad",value:function(){d.default.addType("quad",{},function(e,t){var n=new f.default(e);return n.addAttributes(v.default.plane([0,0,0],[0,0,1],[0,1,0],[1,0,0],1,1),m),n.addIndex("default",v.default.planeIndex(0,1,1)),n.addIndex("wireframe",v.default.linesFromTriangles(v.default.planeIndex(0,1,1)),WebGLRenderingContext.LINES),n})}},{key:"_registerTriangle",value:function(){d.default.addType("triangle",{},function(e,t){var n=new f.default(e);return n.addAttributes(v.default.triangle([0,0,0],[0,0,1],[0,1,0],[1,0,0]),m),n.addIndex("default",v.default.triangleIndex(0)),n.addIndex("wireframe",v.default.linesFromTriangles(v.default.triangleIndex(0)),WebGLRenderingContext.LINES),n})}},{key:"_registerCone",value:function(){d.default.addType("cone",{divide:{converter:"Number",default:50}},function(e,t){for(var n=t.divide,r=new f.default(e),o=n%2!=0?Math.PI/n:0,i=[].concat.apply([],[v.default.circle([0,-.5,0],[0,-1,0],[-Math.sin(o),0,Math.cos(o)],[Math.cos(o),0,Math.sin(o)],n)]),a=Math.cos(Math.PI/n)/3,u=Math.sin(Math.PI/n)/Math.pow(3,.5)*2,s=Math.cos(Math.PI/n)-a,c=Math.PI/n,l=0;l<n;l++){var h=c*(2*l+1);Array.prototype.push.apply(i,v.default.coneTriangle([-Math.sin(h)*s,0,-Math.cos(h)*s],[-Math.cos(Math.PI/2-h),1,-Math.sin(Math.PI/2-h)],[Math.sin(h)*s,1,Math.cos(h)*s],[-Math.cos(h)*u,0,Math.sin(h)*u],n,l))}r.addAttributes(i,m);for(var d=n+2,p=[].concat.apply([],[v.default.circleIndex(0,n)]),y=0;y<n;y++)Array.prototype.push.apply(p,v.default.triangleIndex(d+3*y));return r.addIndex("default",p),r.addIndex("wireframe",v.default.linesFromTriangles(p),WebGLRenderingContext.LINES),r})}},{key:"_registerCylinder",value:function(){d.default.addType("cylinder",{divide:{converter:"Number",default:50}},function(e,t){for(var n=t.divide,r=new f.default(e),o=n%2!=0?Math.PI/n:0,i=[].concat.apply([],[v.default.circle([0,1,0],[0,1,0],[0,0,-1],[1,0,0],n),v.default.circle([0,-1,0],[0,-1,0],[-Math.sin(o),0,Math.cos(o)],[Math.cos(o),0,Math.sin(o)],n)]),a=Math.sin(Math.PI/n),u=Math.cos(Math.PI/n),s=Math.PI/n,c=0;c<n;c++){var l=s*(2*c+1);Array.prototype.push.apply(i,v.default.cylinderPlane([-Math.sin(l)*u,0,-Math.cos(l)*u],[-Math.sin(l),0,-Math.cos(l)],[0,1,0],[-Math.cos(l)*a,0,Math.sin(l)*a],n,c))}r.addAttributes(i,m);for(var h=n+2,d=[].concat.apply([],[v.default.circleIndex(0,n),v.default.circleIndex(h,n)]),p=0;p<n;p++)Array.prototype.push.apply(d,v.default.planeIndex(2*h+4*p,1,1));return r.addIndex("default",d),r.addIndex("wireframe",v.default.linesFromTriangles(d),WebGLRenderingContext.LINES),r})}},{key:"_registerCube",value:function(){d.default.addType("cube",{divHorizontal:{converter:"Number",default:1},divVertical:{converter:"Number",default:1}},function(e,t){var n=t.divHorizontal,r=t.divVertical,o=new f.default(e),i=[].concat.apply([],[v.default.plane([0,0,1],[0,0,1],[0,1,0],[1,0,0],n,r),v.default.plane([0,0,-1],[0,0,-1],[0,1,0],[-1,0,0],n,r),v.default.plane([0,1,0],[0,1,0],[0,0,-1],[1,0,0],n,r),v.default.plane([0,-1,0],[0,-1,0],[0,0,-1],[-1,0,0],n,r),v.default.plane([1,0,0],[1,0,0],[0,1,0],[0,0,-1],n,r),v.default.plane([-1,0,0],[-1,0,0],[0,1,0],[0,0,1],n,r)]);o.addAttributes(i,m);var a=(n+1)*(r+1),u=[].concat.apply([],[v.default.planeIndex(0,n,r),v.default.planeIndex(a,n,r),v.default.planeIndex(2*a,n,r),v.default.planeIndex(3*a,n,r),v.default.planeIndex(4*a,n,r),v.default.planeIndex(5*a,n,r)]);return o.addIndex("default",u),o.addIndex("wireframe",v.default.linesFromTriangles(u),WebGLRenderingContext.LINES),o})}},{key:"_registerSphere",value:function(){d.default.addType("sphere",{divVertical:{converter:"Number",default:50},divHorizontal:{converter:"Number",default:50}},function(e,t){var n=t.divHorizontal,r=t.divVertical,o=new f.default(e);return o.addAttributes(v.default.sphere([0,0,0],[0,1,0],[1,0,0],[0,0,1],r,n),m),o.addIndex("default",v.default.sphereIndex(0,r,n)),o.addIndex("wireframe",v.default.linesFromTriangles(v.default.sphereIndex(0,r,n)),WebGLRenderingContext.LINES),o})}},{key:"_registerCapsule",value:function(){d.default.addType("capsule",{divide:{converter:"Number",default:50}},function(e,t){var n=t.divide,r=n%2==1?n+1:n,o=new f.default(e);return o.addAttributes(v.default.capsule([0,0,0],[0,1,0],[1,0,0],[0,0,1],r,n),m),o.addIndex("default",v.default.sphereIndex(0,r,n)),o.addIndex("wireframe",v.default.linesFromTriangles(v.default.sphereIndex(0,r,n)),WebGLRenderingContext.LINES),o})}},{key:"_registerCircle",value:function(){d.default.addType("circle",{divide:{converter:"Number",default:30}},function(e,t){var n=t.divide,r=new f.default(e);return r.addAttributes(v.default.circle([0,0,0],[0,0,1],[0,1,0],[1,0,0],n),m),r.addIndex("default",v.default.circleIndex(0,n)),r.addIndex("wireframe",v.default.linesFromTriangles(v.default.circleIndex(0,n)),WebGLRenderingContext.LINES),r})}},{key:"_registerPlane",value:function(){d.default.addType("plane",{divide:{converter:"Number",default:10}},function(e,t){var n=t.divide,r=n,o=new f.default(e),i=[].concat.apply([],[v.default.plane([0,0,0],[0,0,1],[0,1,0],[1,0,0],n,r),v.default.plane([0,0,0],[0,0,-1],[0,1,0],[-1,0,0],n,r,!0)]);o.addAttributes(i,m);var a=[].concat.apply([],[v.default.planeIndex(0,n,r),v.default.planeIndex((n+1)*(r+1),n,r)]);return o.addIndex("default",a),o.addIndex("wireframe",v.default.linesFromTriangles(a),WebGLRenderingContext.LINES),o})}}]),e}();t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"linesFromTriangles",value:function(e){var t=[],n=new Array(3),r=0,o=!0,i=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value;if(n[r%3]=c,r%3==2){var l=n[0],f=n[1],h=n[2];Array.prototype.push.apply(t,[l,f,f,h,h,l])}r++}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return t}},{key:"plane",value:function(e,t,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=new Array(8*(o+1)*(i+1)),s=[e[0]-n[0]-r[0],e[1]-n[1]-r[1],e[2]-n[2]-r[2]],c=[r[0]/o*2,r[1]/o*2,r[2]/o*2],l=[n[0]/i*2,n[1]/i*2,n[2]/i*2],f=0;f<i+1;f++)for(var h=0;h<o+1;h++){var d=8*((o+1)*f+h);u[d+0]=s[0]+c[0]*h+l[0]*f,u[d+1]=s[1]+c[1]*h+l[1]*f,u[d+2]=s[2]+c[2]*h+l[2]*f,u[d+3]=t[0],u[d+4]=t[1],u[d+5]=t[2],u[d+6]=a?1-1/o*h:1/o*h,u[d+7]=1/i*f}return u}},{key:"cylinderPlane",value:function(e,t,n,r,o,i){for(var a=new Array(32),u=[e[0]-n[0]-r[0],e[1]-n[1]-r[1],e[2]-n[2]-r[2]],s=[2*r[0],2*r[1],2*r[2]],c=[2*n[0],2*n[1],2*n[2]],l=0;l<2;l++)for(var f=0;f<2;f++){var h=8*(2*l+f);a[h+0]=u[0]+s[0]*f+c[0]*l,a[h+1]=u[1]+s[1]*f+c[1]*l,a[h+2]=u[2]+s[2]*f+c[2]*l;var d=Math.tan(Math.PI/o)/Math.sin(Math.PI/o);0===f?(a[h+3]=t[0]-d*r[0],a[h+4]=t[1]-d*r[1],a[h+5]=t[2]-d*r[2]):(a[h+3]=t[0]+d*r[0],a[h+4]=t[1]+d*r[1],a[h+5]=t[2]+d*r[2]),a[h+6]=1/o*(i+1+f),a[h+7]=0===l?0:1}return a}},{key:"triangle",value:function(e,t,n,r){for(var o=new Array(24),i=2*Math.PI/3,a=0;a<3;a++){var u=Math.sin(i*a),s=Math.cos(i*a);o[0+8*a]=e[0]+s*n[0]+u*r[0],o[1+8*a]=e[1]+s*n[1]+u*r[1],o[2+8*a]=e[2]+s*n[2]+u*r[2],o[3+8*a]=t[0],o[4+8*a]=t[1],o[5+8*a]=t[2],o[6+8*a]=.5+(s*n[0]+u*r[0])/2,o[7+8*a]=.5+(s*n[1]+u*r[1])/2}return o}},{key:"coneTriangle",value:function(e,t,n,r,o,i){for(var a=new Array(24),u=2*Math.PI/3,s=0;s<3;s++){var c=Math.sin(u*s),l=Math.cos(u*s);a[0+8*s]=e[0]+l*n[0]+c*r[0],a[1+8*s]=e[1]+l*n[1]+c*r[1],a[2+8*s]=e[2]+l*n[2]+c*r[2],a[3+8*s]=t[0],a[4+8*s]=t[1],a[5+8*s]=t[2];var f=Math.pow(2,.5),h=Math.tan(Math.PI/o)/Math.sin(Math.PI/o)/Math.pow(3,.5)*2;0===s?(a[3+8*s]=t[0],a[4+8*s]=t[1],a[5+8*s]=t[2],a[6+8*s]=0,a[7+8*s]=0):1===s?(a[3+8*s]=t[0]/f+h*r[0],a[4+8*s]=t[1]/f+h*r[1],a[5+8*s]=t[2]/f+h*r[2],a[6+8*s]=Math.cos(-Math.PI/o/2*(i+1)),a[7+8*s]=Math.sin(-Math.PI/o/2*(i+1))):(a[3+8*s]=t[0]/f-h*r[0],a[4+8*s]=t[1]/f-h*r[1],a[5+8*s]=t[2]/f-h*r[2],a[6+8*s]=Math.cos(-Math.PI/o/2*i),a[7+8*s]=Math.sin(-Math.PI/o/2*i))}return a}},{key:"triangleIndex",value:function(e){var t=new Array(3);return t[0]=e,t[1]=e+2,t[2]=e+1,t}},{key:"planeIndex",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new Array(6*t*n),o=0;o<n;o++)for(var i=0;i<t;i++){var a=6*(t*o+i),u=e+(t+1)*o+i,s=e+(t+1)*(o+1)+i;r[a+0]=u,r[a+1]=u+1,r[a+2]=s,r[a+3]=s,r[a+4]=u+1,r[a+5]=s+1}return r}},{key:"circle",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,i=new Array(6*(3+o));i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=t[0],i[4]=t[1],i[5]=t[2],i[6]=.5,i[7]=.5;for(var a=2*Math.PI/o,u=0;u<o+1;u++){var s=8+8*u,c=Math.sin(a*u),l=Math.cos(a*u);i[s+0]=e[0]+l*n[0]+c*r[0],i[s+1]=e[1]+l*n[1]+c*r[1],i[s+2]=e[2]+l*n[2]+c*r[2],i[s+3]=t[0],i[s+4]=t[1],i[s+5]=t[2],i[s+6]=.5+.5*c,i[s+7]=.5+.5*l}return i}},{key:"circleIndex",value:function(e,t){for(var n=new Array(3*t),r=0;r<t;r++)n[3*r+0]=e,n[3*r+1]=e+(r+2),n[3*r+2]=e+(r+1);return n}},{key:"capsule",value:function(e,t,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3,a=new Array(o*i*8),u=0;u<o;u++)for(var s=0;s<i;s++){a[8*(o*u+s)+0]=e[0]+.5*Math.sin(Math.PI*u/(o-1))*(n[0]*Math.cos(2*Math.PI*(s/(i-1)))+r[0]*Math.sin(2*Math.PI*(s/(i-1))))-.5*t[0]*Math.cos(Math.PI*u/(o-1)),a[8*(o*u+s)+1]=e[1]+.5*Math.sin(Math.PI*u/(o-1))*(n[1]*Math.cos(2*Math.PI*(s/(i-1)))+r[1]*Math.sin(2*Math.PI*(s/(i-1))))-.5*t[1]*Math.cos(Math.PI*u/(o-1)),a[8*(o*u+s)+2]=e[2]+.5*Math.sin(Math.PI*u/(o-1))*(n[2]*Math.cos(2*Math.PI*(s/(i-1)))+r[2]*Math.sin(2*Math.PI*(s/(i-1))))-.5*t[2]*Math.cos(Math.PI*u/(o-1));var c=Math.pow(a[8*(o*u+s)+0]*a[8*(o*u+s)+0]+a[8*(o*u+s)+1]*a[8*(o*u+s)+1]+a[8*(o*u+s)+2]*a[8*(o*u+s)+2],.5);a[8*(o*u+s)+3]=a[8*(o*u+s)+0]/c,a[8*(o*u+s)+4]=a[8*(o*u+s)+1]/c,a[8*(o*u+s)+5]=a[8*(o*u+s)+2]/c,a[8*(o*u+s)+6]=1-s/(i-1),a[8*(o*u+s)+7]=u/(o-1)}return a}},{key:"sphere",value:function(e,t,n,r,o,i){for(var a=new Array(o*i*8),u=0;u<o;u++)for(var s=0;s<i;s++){a[8*(o*u+s)+0]=e[0]+Math.sin(Math.PI*u/(o-1))*(n[0]*Math.cos(2*Math.PI*(s/(i-1)))+r[0]*Math.sin(2*Math.PI*(s/(i-1))))-t[0]*Math.cos(Math.PI*u/(o-1)),a[8*(o*u+s)+1]=e[1]+Math.sin(Math.PI*u/(o-1))*(n[1]*Math.cos(2*Math.PI*(s/(i-1)))+r[1]*Math.sin(2*Math.PI*(s/(i-1))))-t[1]*Math.cos(Math.PI*u/(o-1)),a[8*(o*u+s)+2]=e[2]+Math.sin(Math.PI*u/(o-1))*(n[2]*Math.cos(2*Math.PI*(s/(i-1)))+r[2]*Math.sin(2*Math.PI*(s/(i-1))))-t[2]*Math.cos(Math.PI*u/(o-1));var c=Math.pow(a[8*(o*u+s)+0]*a[8*(o*u+s)+0]+a[8*(o*u+s)+1]*a[8*(o*u+s)+1]+a[8*(o*u+s)+2]*a[8*(o*u+s)+2],.5);a[8*(o*u+s)+3]=a[8*(o*u+s)+0]/c,a[8*(o*u+s)+4]=a[8*(o*u+s)+1]/c,a[8*(o*u+s)+5]=a[8*(o*u+s)+2]/c,a[8*(o*u+s)+6]=1-s/(i-1),a[8*(o*u+s)+7]=u/(o-1)}return a}},{key:"sphereIndex",value:function(e,t,n){for(var r=new Array(n*t*6),o=0;o<t-1;o++)for(var i=0;i<n-1;i++)r[6*(t*i+o)+0]=t*o+i,r[6*(t*i+o)+1]=t*(o+1)+i,r[6*(t*i+o)+2]=t*o+i+1,r[6*(t*i+o)+3]=t*o+i+1,r[6*(t*i+o)+4]=t*(o+1)+i,r[6*(t*i+o)+5]=t*(o+1)+i+1;return r}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(130),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:"register",value:function(){c.default.addSORTMaterial("unlit",u.default)}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.__NAME__=t.__VERSION__=void 0;var o=n(48),i=r(o),a=n(31),u=r(a),s=n(32),c=r(s),l=n(33),f=r(l),h=n(14),d=r(h),p=n(49),v=r(p),y=n(50),m=r(y),g=n(34),_=r(g),b=n(15),w=r(b),M=n(52),E=r(M),x=n(55),S=r(x),O=n(85),R=r(O),k=n(86),C=r(k),P=n(87),T=r(P),A=n(16),I=r(A),F=n(39),j=r(F),D=n(40),N=r(D),L=n(22),G=r(L),B=n(89),z=r(B),W=n(90),q=r(W),U=n(91),V=r(U),H=n(122),Y=r(H),X=n(23),$=r(X),Q=n(93),Z=r(Q),J=n(94),K=r(J),ee=n(97),te=r(ee),ne=n(99),re=r(ne),oe=n(47),ie=r(oe),ae=n(98),ue=r(ae),se=n(29),ce=r(se),le=n(19),fe=r(le),he=n(100),de=r(he),pe=n(44),ve=r(pe),ye=n(101),me=r(ye),ge=n(43),_e=r(ge),be=n(27),we=r(be),Me=n(28),Ee=r(Me),xe=n(13),Se=r(xe),Oe=n(30),Re=r(Oe),ke=n(102),Ce=r(ke),Pe=n(45),Te=r(Pe),Ae=n(8),Ie=r(Ae),Fe=n(103),je=r(Fe),De=n(104),Ne=r(De),Le=n(105),Ge=r(Le),Be=n(106),ze=r(Be),We=n(107),qe=r(We),Ue=n(108),Ve=r(Ue),He=n(109),Ye=r(He),Xe=n(111),$e=r(Xe),Qe=n(112),Ze=r(Qe),Je=n(10),Ke=r(Je),et=n(21),tt=r(et),nt=n(113),rt=r(nt),ot=n(129),it=r(ot),at=n(72),ut=r(at),st=n(66),ct=r(st),lt=n(114),ft=r(lt),ht=n(61),dt=r(ht),pt=n(71),vt=r(pt),yt=n(65),mt=r(yt),gt=n(37),_t=r(gt),bt=n(1),wt=r(bt),Mt=n(68),Et=r(Mt),xt=n(73),St=r(xt),Ot=n(80),Rt=r(Ot),kt=n(67),Ct=r(kt),Pt=n(110),Tt=r(Pt),At=n(82),It=r(At),Ft=n(11),jt=r(Ft),Dt=n(131),Nt=r(Dt),Lt=n(132),Gt=r(Lt),Bt=n(134),zt=r(Bt),Wt=n(135),qt=r(Wt),Ut=n(70),Vt=r(Ut),Ht=n(42),Yt=r(Ht),Xt=n(20),$t=r(Xt),Qt=n(3),Zt=r(Qt),Jt=n(4),Kt=r(Jt),en=n(81),tn=r(en),nn=n(38),rn=r(nn),on=n(74),an=r(on),un=n(78),sn=r(un),cn=n(75),ln=r(cn),fn=n(25),hn=r(fn),dn=n(92),pn=r(dn),vn=n(41),yn=r(vn),mn=n(96),gn=r(mn),_n=n(26),bn=r(_n),wn=n(24),Mn=r(wn),En=n(76),xn=r(En),Sn=n(79),On=r(Sn),Rn=n(83),kn=r(Rn),Cn=n(2),Pn=r(Cn),Tn=n(77),An=r(Tn),In=n(6),Fn=r(In),jn=n(88),Dn=r(jn),Nn=n(53),Ln=r(Nn),Gn=n(54),Bn=r(Gn),zn=n(59),Wn=r(zn),qn=n(60),Un=r(qn),Vn=n(62),Hn=r(Vn),Yn=n(57),Xn=r(Yn),$n=n(63),Qn=r($n),Zn=n(58),Jn=r(Zn),Kn=n(64),er=r(Kn),tr=n(9),nr=r(tr),rr=n(46),or=r(rr),ir=n(12),ar=r(ir),ur=n(51),sr=r(ur),cr=n(136),lr=r(cr),fr=n(5),hr=r(fr),dr=t.__VERSION__="0.34.1",pr=t.__NAME__="grimoirejs-fundamental",vr={Asset:{AssetLoader:i.default,CacheResolver:u.default,ExternalResourceResolver:c.default,ImageResolver:f.default,NameResolver:d.default,TextFileResolver:v.default,VideoResolver:m.default},Components:{AssetLoadingManagerComponent:_.default,BasicComponent:w.default,CameraComponent:E.default,CanvasInitializerComponent:S.default,FullscreenComponent:R.default,GeometryComponent:C.default,GeometryRegistoryComponent:T.default,LoopManagerComponent:I.default,MaterialComponent:j.default,MaterialContainerBase:N.default,MaterialContainerComponent:G.default,MaterialImporterComponent:z.default,MeshRendererComponent:q.default,MouseCameraControlComponent:V.default,RenderComponentBase:Y.default,RendererComponent:$.default,RendererManagerComponent:Z.default,RenderingTargetComponent:K.default,RenderStage:{RenderHitareaComponent:te.default,RenderQuadComponent:re.default,RenderSceneComponent:ie.default,RenderStageBase:ue.default,SingleBufferRenderStageBase:ce.default},SceneComponent:fe.default,Texture:{ColorBufferTextureUpdator:de.default,ConstantSizeResourceResizer:ve.default,ImageTextureUpdator:me.default,RenderBufferUpdator:_e.default,ResizableResourceUpdator:we.default,ResourceResizerComponentBase:Ee.default,TextureContainer:Se.default,TextureUpdatorComponentBase:Re.default,VideoTextureUpdator:Ce.default,ViewportSizeResourceResizer:Te.default},TransformComponent:Ie.default},Converters:{CanvasSizeConverter:je.default,GeometryConverter:Ne.default,MaterialConverter:Ge.default,NodeConverter:ze.default,PositionConverter:qe.default,RenderingTargetConverter:Ve.default,TextureConverter:Ye.default,ViewportConverter:$e.default},Geometry:{DefaultPrimitives:Ze.default,Geometry:Ke.default,GeometryFactory:tt.default,GeometryUtility:rt.default,MorphGeometry:it.default},Material:{Defaults:{DefaultDynamicStateResolvers:ut.default,DefaultMacro:ct.default,DefaultMaterial:ft.default,DefaultStaticImport:dt.default},GLStateConfigurator:vt.default,MacroRegistory:mt.default,Material:_t.default,MaterialFactory:wt.default,Pass:Et.default,PassProgram:St.default,ShaderMixer:Rt.default,Technique:Ct.default,TextureReference:Tt.default,UniformResolverContainer:It.default,UniformResolverRegistry:jt.default,Uniforms:{MatricesRegister:Nt.default,MiscRegister:Gt.default,UserValueRegister:zt.default}},nodes:qt.default,Resource:{Buffer:Vt.default,FrameBuffer:Yt.default,GLExtRequestor:$t.default,GLRelatedRegistryBase:Zt.default,GLResource:Kt.default,GLSLPrecisionChecker:tn.default,GLUtility:rn.default,ManagedProgram:an.default,ManagedShader:sn.default,Program:ln.default,RenderBuffer:hn.default,RenderingTarget:{CanvasRegionRenderingTarget:pn.default,CanvasRenderingTarget:yn.default,OffscreenRenderingTarget:gn.default,RenderingBufferResourceRegistry:bn.default,RenderingTargetRegistry:Mn.default},ResourceCache:xn.default,Shader:On.default,Texture:kn.default,Texture2D:Pn.default,UniformProxy:An.default,Viewport:Fn.default},SceneRenderer:{DrawPriorty:Dn.default,RenderQueue:Ln.default,RenderQueueRegistry:Bn.default},Sort:{CommentRemover:Wn.default,ImportResolver:Un.default,NameSemanticsPair:Hn.default,Parser:Xn.default,Preferences:Qn.default,SortTransformUtility:Jn.default,TypeToConstant:er.default},Util:{HashCalculator:nr.default,MeshIndexCalculator:or.default,TextureSizeCalculator:ar.default,Timer:sr.default}};hr.default.notifyRegisteringPlugin(pr);var yr=(0,lr.default)();Object.assign(vr,{__VERSION__:dr,__NAME__:pr}),Object.assign(yr||{},vr),window.GrimoireJS.lib.fundamental=vr,t.default=yr},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Base.EEObject},function(e,t){e.exports='<div style="width:100%;height:100%;position: relative;">\n    <div style="width: 55px;height: 55px;border-radius: 100%;border: 5px solid #381794;border-right-color: #FC659D;animation: rotate 1s linear infinite;position: absolute;top: 0;left: 0;right: 0;bottom: 0;margin: auto;"></div>\n</div>\n<style type="text/css">\n    @keyframes rotate {\n        from {\n            transform: rotate(0deg);\n        }\n        to {\n            transform: rotate(360deg);\n        }\n    }\n</style>\n'},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Interface.GrimoireInterface},function(e,t){e.exports="/**\n * Simplest way of transforming vertices on vertex shader\n */\n #ifdef ATTRIBUTE_COLOR_ENABLED\n varying vec4 vColor;\n #endif\n\n varying vec2 vTexCoord;\n varying vec3 vPosition;\n #ifdef ATTRIBUTE_NORMAL_ENABLED\n varying vec3 vNormal;\n #endif\n#ifdef VS\n  @POSITION\n  attribute vec3 position;\n\n  #ifdef ATTRIBUTE_TEXCOORD_ENABLED\n  @TEXCOORD\n  attribute vec2 texCoord;\n  #endif\n\n  #ifdef ATTRIBUTE_NORMAL_ENABLED\n  @NORMAL\n  attribute vec3 normal;\n  #endif\n\n  @MODELVIEWPROJECTION\n  uniform mat4 _matPVM;\n\n  @MODEL\n  uniform mat4 _matM;\n\n  #ifdef ATTRIBUTE_COLOR_ENABLED\n  @COLOR\n  attribute vec4 attrColor;\n  #endif\n\n  #ifdef ATTRIBUTE_POINT_SIZE_ENABLED\n  @POINT_SIZE\n  attribute float pointSize;\n  #endif\n\n  @{default:1.0}\n  uniform float pointScale;\n  void main()\n  {\n    gl_Position = _matPVM * vec4(position,1.0);\n    vPosition = (_matM * vec4(position,1.0)).xyz;\n    #ifdef ATTRIBUTE_NORMAL_ENABLED\n    vNormal = (_matM * vec4(normal,0.)).xyz;\n    #endif\n    #ifdef ATTRIBUTE_TEXCOORD_ENABLED\n    vTexCoord = texCoord;\n    #endif\n    #ifndef ATTRIBUTE_TEXCOORD_ENABLED\n    vTexCoord = position.xy/2.0 + vec2(0.5);\n    #endif\n    #ifdef ATTRIBUTE_COLOR_ENABLED\n    vColor = attrColor;\n    #endif\n    float pSize = 1.0;\n    #ifdef ATTRIBUTE_POINT_SIZE_ENABLED\n    pSize *= pointSize;\n    #endif\n    gl_PointSize = pointScale * pSize;\n  }\n#endif\n"},function(e,t){e.exports="varying vec2 vTexCoord;\nvarying vec2 vScreenPos;\nvarying vec2 vScreenPosWithOffset;\nvarying vec2 vScreenPosNormalized;\nvarying vec2 vAspectScale;\n#ifdef VS\n  @POSITION\n  attribute vec3 position;\n  #ifdef ATTRIBUTE_TEXCOORD_ENABLED\n  @TEXCOORD\n  attribute vec2 texCoord;\n  @VIEWPORT\n  uniform vec4 viewportRect;\n  #endif\n  void main(){\n    gl_Position = vec4(position,1);\n    #ifdef ATTRIBUTE_TEXCOORD_ENABLED\n    vTexCoord = texCoord;\n    #endif\n    #ifndef ATTRIBUTE_TEXCOORD_ENABLED\n    vTexCoord = (position.xy + vec2(1.0)) * vec2(0.5);\n    #endif\n    vScreenPosNormalized = (position.xy + vec2(1.0)) * vec2(0.5);\n    vScreenPos = viewportRect.zw * vScreenPosNormalized;\n    vScreenPosWithOffset = vScreenPos + viewportRect.xy;\n  }\n#endif"},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.Quaternion:void 0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(u.default);t.default=s,s.attributes={}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.Color4:void 0},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[s]=r,u(s),s++}function o(e){delete c[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{i(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var u,s=1,c={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){u=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),u=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},u=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;u=function(t){var n=f.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){u=function(e){setTimeout(a,0,e)}}(),h.setImmediate=r,h.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(125),n(126))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?p=d.concat(p):y=-1,p.length&&u())}function u(){if(!v){var e=o(a);v=!0;for(var t=p.length;t;){for(d=p,p=[];++y<t;)d&&d[y].run();y=-1,t=p.length}d=null,v=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],v=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||v||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Node.GomlNode},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Node.Attribute},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._morphBaseAttribute={},e.morphParameters={},e.lastWeights=null,e}return i(t,e),a(t,[{key:"addMorphAttribute",value:function(e,t){var n=this.accessors[e];if(!n)throw new Error("There was no accessor related to specified accessor");var r=this.buffers[n.bufferIndex];if(!r.keepSource)throw new Error("To enable morphing attribute on Geometry, keepOnBuffer flag must be true on attribute vertex value");if(this._morphBaseAttribute[e])throw new Error("Already morphing attribute are registered. If you want to replace, remove current morphings at first.");if(null===this.lastWeights){for(var o=[],i=0;i<t.length;i++)o.push(0);this.lastWeights=o}else if(this.lastWeights.length!==t.length)throw new Error("morphing attribute should have same length with the morphing attribute previously registered.");var a=r.bufferSource;if(!(a instanceof Float32Array))throw new Error("Morphing is currently only supported for Float32Array");for(var u=a.byteLength/a.BYTES_PER_ELEMENT,s=new Float32Array(u),c=0;c<u;c++)s[c]=a[c];this._morphBaseAttribute[e]={buffer:s,accessor:this.accessors[e]},this.morphParameters[e]=t}},{key:"removeMorphAttribute",value:function(e){delete this.morphParameters[e],delete this._morphBaseAttribute[e],0===Object.keys(this.morphParameters).length&&(this.lastWeights=null)}},{key:"setWeight",value:function(e){this.lastWeights=e;for(var t in this._morphBaseAttribute)this._updateForSemantics(t)}},{key:"_updateForSemantics",value:function(e){var t=this.accessors[e],n=this.buffers[t.bufferIndex],r=n.bufferSource;if(!(r instanceof Float32Array))throw new Error("buffer source must be Float32Array");for(var o=0;o<r.length;o++)r[o]=this._calculateWeights(e,o);n.update(r)}},{key:"_calculateWeights",value:function(e,t){for(var n=this._morphBaseAttribute[e].buffer[t],r=0;r<this.lastWeights.length;r++)n+=this.lastWeights[r]*this.morphParameters[e][r].buffer[t];return n}}]),t}(s.default);t.default=c},function(e,t){e.exports='@Technique default{\n@Pass{\n  @DynamicState(dynamic-cull)\n  @BlendFunc(SRC_ALPHA,ONE_MINUS_SRC_ALPHA)\n  FS_PREC(mediump,float)\n  @import "basic-vert"\n  #ifdef FS\n  @{type:"color",default:"white"}\n  uniform vec4 color;\n\n  @{flag:"USE_TEXTURE"}\n  uniform sampler2D texture;\n\n  uniform float _time;\n  void main(void)\n  {\n    vec4 baseColor = color;\n    #ifdef ATTRIBUTE_COLOR_ENABLED\n    baseColor *= vColor;\n    #endif\n    #ifdef USE_TEXTURE\n      gl_FragColor = baseColor * texture2D(texture,vTexCoord);\n    #endif\n    #ifndef USE_TEXTURE\n      gl_FragColor = baseColor;\n    #endif\n  }\n  #endif\n}\n}\n\n@Technique hitarea{\n  @Disable(BLEND)\n  @Pass{\n    FS_PREC(mediump,float)\n    @import "basic-vert"\n    #ifdef FS\n      @MESH_INDEX\n      uniform vec4 meshIndex;\n      void main(){\n        gl_FragColor = meshIndex;\n      }\n    #endif\n  }\n}\n'},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=r(o),a=n(11),u=r(a);u.default.add("MODELVIEWPROJECTION",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,n.transform.calcPVM(n.camera))}}),u.default.add("LOCAL",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,n.transform.localTransform)}}),u.default.add("MODEL",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,n.transform.globalTransform)}}),u.default.add("MODELVIEW",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,n.camera.ViewMatrix.multiplyWith(n.transform.globalTransform))}}),u.default.add("VIEW",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,n.camera.ViewMatrix)}}),u.default.add("PROJECTION",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,n.camera.ProjectionMatrix)}}),u.default.add("MODELINVERSE",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,i.default.inverse(n.transform.globalTransform))}}),u.default.add("VIEWINVERSE",function(e){return function(t,n){t.uniformMatrix(e.name,i.default.inverse(n.camera.ViewMatrix))}}),u.default.add("PROJECTIONINVERSE",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,n.camera.InvProjectionMatrix)}}),u.default.add("MODELVIEWINVERSE",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,i.default.inverse(n.transform.calcVM(n.camera)))}}),u.default.add("MODELVIEWPROJECTIONINVERSE",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,i.default.inverse(n.transform.calcPVM(n.camera)))}}),u.default.add("MODELINVERSETRANSPOSE",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix(e.name,i.default.identity());t.uniformMatrix(e.name,i.default.transpose(i.default.inverse(n.transform.globalTransform)))}}),u.default.add("MODELVIEWINVERSETRANSPOSE",function(e){return function(t,n){if(!n.transform)return void t.uniformMatrix3(e.name,i.default.identity());t.uniformMatrix3(e.name,i.default.transpose(i.default.inverse(n.transform.calcVM(n.camera))))}}),t.default=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(133),i=r(o),a=n(18),u=r(a),s=n(46),c=r(s),l=n(11),f=r(l);f.default.add("VIEWPORT",function(e){return function(t,n){var r=n.viewport;t.uniformVector4(e.name,new u.default(r.Left,r.Top,r.Width,r.Height))}}),f.default.add("VIEWPORT_SIZE",function(e){return function(t,n){var r=n.viewport;t.uniformVector2(e.name,new i.default(r.Width,r.Height))}}),f.default.add("TIME",function(e){var t=e.attributes.unit||"ms",n=1;switch(t){case"s":n=1e3}return function(t,r){t.uniformFloat(e.name,Date.now()/n%1e5)}}),f.default.add("HAS_TEXTURE",function(e,t){var n=e.attributes.sampler;if(!n)throw new Error("The variable having HAS_TEXTURE as semantics must have sampler attribute");return console.warn("HAS_TEXTURE is deprecated now. Use flag attribute on sampler2D variables to register macro values"),function(r,o){var i=!!t.arguments[n]&&!!t.arguments[n].get();r.uniformBool(e.name,i)}}),f.default.add("CAMERA_POSITION",function(e){return function(t,n){t.uniformVector3(e.name,n.camera.transform.globalPosition)}}),f.default.add("CAMERA_DIRECTION",function(e){return function(t,n){t.uniformVector3(e.name,n.camera.transform.forward)}}),f.default.add("MESH_INDEX",function(e){return function(t,n){var r=n.renderable.index;t.uniformVector4(e.name,c.default.fromIndex(r))}}),f.default.add("MOUSE_POSITION",function(e){var t=e.attributes.coord||"viewportNormalized";return function(n,r){var o=r.rendererDescription.mouse;o?n.uniformVector2(e.name,new i.default(o.coords[t][0],o.coords[t][1])):n.uniformVector2(e.name,i.default.Zero)}}),f.default.add("MOUSE_STATE",function(e){return function(t,n){var r=n.rendererDescription.mouse;r?t.uniformVector2(e.name,new i.default(r.left?1:0,r.right?1:0)):t.uniformVector2(e.name,i.default.Zero)}}),t.default=null},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS&&window.GrimoireJS.lib.math?window.GrimoireJS.lib.math.Vector2:void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,o,i){var a=void 0;a=t?l.array:l.single,a[e]=function(e,t){t.addArgument(e.name,{converter:n,default:e.attributes.default?e.attributes.default:r});var a=i?function(t,n,r){i(e,t,n,r)}:void 0;return{register:function(n,r){o(n,e.name,t.arguments[e.name],r)},update:a}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=r(i),u=n(11),s=r(u),c=WebGLRenderingContext,l={array:{},single:{}};s.default.add("USER_VALUE",function(e,t,n,r){var o=void 0;if(e.count){if(!(o=l.array[e.type]))throw new Error("No user_value registerer was registered for "+e.type+"[]")}else if(!(o=l.single[e.type]))throw new Error("No user_value registerer was registered for "+e.type);return o(e,t)}),o(c.FLOAT,!1,"Number",0,function(e,t,n){return e.uniformFloat(t,n)}),o(c.INT,!1,"Number",0,function(e,t,n){return e.uniformInt(t,n)}),o(c.BOOL,!1,"Boolean",!1,function(e,t,n){return e.uniformBool(t,n)}),o(c.INT_VEC2,!1,"Vector2",[0,0],function(e,t,n){return e.uniformVector2(t,n)}),o(c.INT_VEC3,!1,"Vector3",[0,0,0],function(e,t,n){return e.uniformVector3(t,n)}),o(c.INT_VEC4,!1,"Vector4",[0,0,0,0],function(e,t,n){return e.uniformVector4(t,n)}),o(c.FLOAT_VEC2,!1,"Vector2",[0,0],function(e,t,n){return e.uniformVector2(t,n)}),o(c.FLOAT_MAT4,!0,"Object",[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],function(e,t,n){return e.uniformMatrixArray(t,n)}),o(c.SAMPLER_2D,!1,"Texture",null,function(e,t,n,r){var o=void 0;if(n){var i=n.get();i.valid&&(o=i)}o||(o=a.default.defaultTextures.get(e.program.gl)),e.uniformTexture2D(t,o)},function(e,t,n,r){if(void 0!==e.attributes.flag){var o=!1;if(n)if(n.isFunctionalProxy)o=!0;else{var i=n.get({});i.valid?o=!0:i.validPromise.then(function(){t.setMacro(e.attributes.flag,!0),o=!0})}t.setMacro(e.attributes.flag,o)}}),l.single[c.FLOAT_VEC3]=function(e,t){var n="color"===e.attributes.type,r=e.attributes.default,o=r||(n?[1,1,1]:[0,0,0]);return t.addArgument(e.name,{converter:n?"Color3":"Vector3",default:o}),{register:n?function(n,r){n.uniformColor3(e.name,t.arguments[e.name])}:function(n,r){n.uniformVector3(e.name,t.arguments[e.name])}}},l.single[c.FLOAT_VEC4]=function(e,t){var n="color"===e.attributes.type,r=e.attributes.default,o=r||(n?[1,1,1,1]:[0,0,0,0]);return t.addArgument(e.name,{converter:n?"Color4":"Vector4",default:o}),{register:n?function(n,r){n.uniformColor4(e.name,t.arguments[e.name])}:function(n,r){n.uniformVector4(e.name,t.arguments[e.name])}}},t.default=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={goml:{components:["CanvasInitializer","LoopManager","AssetLoadingManager","GeometryRegistory","RendererManager","Fullscreen"]},scene:{components:["Scene"]},object:{components:["Transform"]},camera:{components:["Camera"],default:{position:[0,0,10]},super:"object"},mesh:{components:["MaterialContainer","MeshRenderer"],super:"object"},renderer:{components:["Renderer"]},geometry:{components:["Geometry"]},texture:{components:["Texture"]},material:{components:["Material"]},"import-material":{components:["MaterialImporter"]},"texture-buffer":{components:["TextureBuffer"]},"render-buffer":{components:["RenderBuffer"]},"render-scene":{components:["RenderScene","RenderHitArea"],default:{material:null}},"render-quad":{components:["MaterialContainer","RenderQuad"],default:{material:null}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(97),i=r(o),a=n(106),u=r(a),s=n(107),c=r(s),l=n(112),f=r(l),h=n(114),d=r(h),p=n(20),v=r(p),y=n(5),m=r(y),g=n(34),_=r(g),b=n(15),w=r(b),M=n(52),E=r(M),x=n(55),S=r(x),O=n(85),R=r(O),k=n(86),C=r(k),P=n(87),T=r(P),A=n(16),I=r(A),F=n(39),j=r(F),D=n(22),N=r(D),L=n(89),G=r(L),B=n(90),z=r(B),W=n(91),q=r(W),U=n(23),V=r(U),H=n(93),Y=r(H),X=n(94),$=r(X),Q=n(99),Z=r(Q),J=n(47),K=r(J),ee=n(19),te=r(ee),ne=n(100),re=r(ne),oe=n(44),ie=r(oe),ae=n(101),ue=r(ae),se=n(43),ce=r(se),le=n(13),fe=r(le),he=n(102),de=r(he),pe=n(45),ve=r(pe),ye=n(8),me=r(ye),ge=n(103),_e=r(ge),be=n(104),we=r(be),Me=n(105),Ee=r(Me),xe=n(108),Se=r(xe),Oe=n(109),Re=r(Oe),ke=n(111),Ce=r(ke),Pe=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})};t.default=function(){m.default.register(function(){return Pe(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.default.registerComponent("AssetLoadingManager",_.default),m.default.registerComponent("Camera",E.default),m.default.registerComponent("CanvasInitializer",S.default),m.default.registerComponent("Fullscreen",R.default),m.default.registerComponent("Geometry",C.default),m.default.registerComponent("GeometryRegistory",T.default),m.default.registerComponent("LoopManager",I.default),m.default.registerComponent("Material",j.default),m.default.registerComponent("MaterialContainer",N.default),m.default.registerComponent("MaterialImporter",G.default),m.default.registerComponent("MeshRenderer",z.default),m.default.registerComponent("MouseCameraControl",q.default),m.default.registerComponent("RenderBufferUpdator",ce.default),m.default.registerComponent("Renderer",V.default),m.default.registerComponent("RendererManager",Y.default),m.default.registerComponent("RenderQuad",Z.default),m.default.registerComponent("RenderScene",K.default),m.default.registerComponent("Scene",te.default),m.default.registerComponent("ColorBufferTextureUpdator",re.default),m.default.registerComponent("TextureContainer",fe.default),m.default.registerComponent("Transform",me.default),m.default.registerComponent("RenderHitArea",i.default),m.default.registerComponent("ImageTextureUpdator",ue.default),m.default.registerComponent("VideoTextureUpdator",de.default),m.default.registerComponent("ViewportSizeResourceResizer",ve.default),m.default.registerComponent("ConstantSizeResourceResizer",ie.default),m.default.registerComponent("RenderingTarget",$.default),m.default.registerComponent("BasicComponent",w.default),m.default.registerConverter("CanvasSize",_e.default),m.default.registerConverter("Geometry",we.default),m.default.registerConverter("Material",Ee.default),m.default.registerConverter("Texture",Re.default),m.default.registerConverter("Texture2D",Re.default),m.default.registerConverter("Viewport",Ce.default),m.default.registerConverter("Node",u.default),m.default.registerConverter(c.default),m.default.registerConverter("RenderingTarget",Se.default),m.default.registerNode("goml",["CanvasInitializer","LoopManager","AssetLoadingManager","GeometryRegistory","RendererManager","Fullscreen"]),m.default.registerNode("scene",["Scene"]),m.default.registerNode("object",["Transform"]),m.default.registerNode("camera",["Camera"],{position:"0,0,10"},"object"),m.default.registerNode("mesh",["MaterialContainer","MeshRenderer"],{},"object"),m.default.registerNode("renderer",["Renderer"]),m.default.registerNode("geometry",["Geometry"]),m.default.registerNode("texture",["TextureContainer"]),m.default.registerNode("image-texture",["ImageTextureUpdator"],{},"texture"),m.default.registerNode("video-texture",["VideoTextureUpdator"],{},"texture"),m.default.registerNode("material",["Material"]),m.default.registerNode("import-material",["MaterialImporter"]),m.default.registerNode("color-buffer",["ColorBufferTextureUpdator"],{resizerType:"ViewportSize"},"texture"),m.default.registerNode("render-buffer",["RenderBufferUpdator"],{resizerType:"ViewportSize"}),m.default.registerNode("render-scene",["RenderScene","RenderHitArea"],{material:null}),m.default.registerNode("render-quad",["MaterialContainer","RenderQuad"],{material:null}),m.default.registerNode("rendering-target",["RenderingTarget"]),f.default.register(),d.default.register(),v.default.request("OES_texture_float");case 57:case"end":return e.stop()}},e,this)}))})}}])})}).call(t,n(124).setImmediate,n(124).clearImmediate)},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=24)}([function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===this.Float32Array&&"undefined"!=typeof SIMD,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var r=Math.PI/180;n.toRadian=function(e){return e*r},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(3),l=function(e){function t(e,n,i){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return void 0===n?(a.rawElements=e,o(a)):(a.rawElements=[e,n,i],a)}return i(t,e),a(t,null,[{key:"copy",value:function(e){return new t(e.X,e.Y,e.Z)}},{key:"dot",value:function(e,t){return c.vec3.dot(e.rawElements,t.rawElements)}},{key:"add",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.add(r,e.rawElements,n.rawElements))}},{key:"subtract",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.sub(r,e.rawElements,n.rawElements))}},{key:"multiply",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.scale(r,n.rawElements,e))}},{key:"negate",value:function(e){return t.multiply(-1,e)}},{key:"equals",value:function(e,t){return s.default.__elementEquals(e,t)}},{key:"nearlyEquals",value:function(e,t){return s.default.__nearlyElementEquals(e,t)}},{key:"normalize",value:function(e){var n=c.vec3.create();return new t(c.vec3.normalize(n,e.rawElements))}},{key:"cross",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.cross(r,e.rawElements,n.rawElements))}},{key:"min",value:function(e,n){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.min(t.rawElements[e],n.rawElements[e])}))}},{key:"max",value:function(e,n){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.max(t.rawElements[e],n.rawElements[e])}))}},{key:"angle",value:function(e,n){return Math.acos(t.dot(e.normalized,n.normalized))}},{key:"parse",value:function(e){var n=s.default.__parse(e),r=n.elements;if(r&&(1===r.length||3===r.length)){var o=void 0;return o=1===r.length?new t(r[0],r[0],r[0]):new t(r[0],r[1],r[2]),n.needNormalize&&(o=o.normalizeThis()),n.coefficient&&(o=o.multiplyWith(n.coefficient)),n.needNegate&&(o=o.negateThis()),o}}},{key:"lerp",value:function(e,n,r){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return t.rawElements[e]+(n.rawElements[e]-t.rawElements[e])*r}))}},{key:"XUnit",get:function(){return new t(1,0,0)}},{key:"YUnit",get:function(){return new t(0,1,0)}},{key:"ZUnit",get:function(){return new t(0,0,1)}},{key:"Zero",get:function(){return new t(0,0,0)}},{key:"One",get:function(){return new t(1,1,1)}}]),a(t,[{key:"normalizeThis",value:function(){return t.normalize(this)}},{key:"dotWith",value:function(e){return t.dot(this,e)}},{key:"addWith",value:function(e){return t.add(this,e)}},{key:"subtractWith",value:function(e){return t.subtract(this,e)}},{key:"multiplyWith",value:function(e){return t.multiply(e,this)}},{key:"negateThis",value:function(){return t.negate(this)}},{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"nearlyEqualWith",value:function(e){return t.nearlyEquals(this,e)}},{key:"crossWith",value:function(e){return t.cross(this,e)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+", "+this.Z+")"}},{key:"toDisplayString",value:function(){return"Vector3"+this.toString()}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(e){this.rawElements[0]=+e}},{key:"Y",get:function(){return this.rawElements[1]},set:function(e){this.rawElements[1]=+e}},{key:"Z",get:function(){return this.rawElements[2]},set:function(e){this.rawElements[2]=+e}},{key:"ElementCount",get:function(){return 3}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this._magnitudeSquaredCache=-1,this._magnitudeCache=-1}return o(e,[{key:"magnitude",get:function(){return this._magnitudeCache<0&&(this._magnitudeCache=Math.sqrt(this.sqrMagnitude)),this._magnitudeCache}},{key:"ElementCount",get:function(){return 0}},{key:"sqrMagnitude",get:function(){if(this._magnitudeSquaredCache<0){for(var e=0,t=this.rawElements,n=0;n<this.ElementCount;n++)e+=t[n]*t[n];this._magnitudeSquaredCache=e}return this._magnitudeSquaredCache}}],[{key:"__elementEquals",value:function(e,t){if(e.ElementCount!==t.ElementCount)return!1;for(var n=0;n<e.ElementCount;n++)if(e.rawElements[n]!==t.rawElements[n])return!1;return!0}},{key:"__nearlyElementEquals",value:function(e,t){if(e.ElementCount!==t.ElementCount)return!1;for(var n=0;n<e.ElementCount;n++)if(Math.abs(e.rawElements[n]-t.rawElements[n])>.01)return!1;return!0}},{key:"__fromGenerationFunction",value:function(e,t,n){for(var r=new Float32Array(e.ElementCount),o=0;o<r.length;o++)r[o]=n(o,e,t);return r}},{key:"__parse",value:function(t){var n=/(-?)([\d,Ee\+\-\.]+)?(n)?\(([-\d,Ee\+\.\s]+)\)/g,r=n.exec(t);if(r){if(!r[4])throw new Error("The specified string '"+t+"' is not containing braced vector.");return{needNormalize:"n"===r[3],needNegate:"-"===r[1],coefficient:parseFloat(r[2]),elements:e._parseRawVector(r[4])}}return{needNormalize:!1,needNegate:!1,elements:e._parseRawVector(t),coefficient:void 0}}},{key:"_parseRawVector",value:function(e){for(var t=e.split(","),n=new Array(t.length),r=0;r<t.length;r++)if(n[r]=parseFloat(t[r]),isNaN(n[r]))throw new Error("Unexpected vector string "+e);return n}}]),e}();t.default=i},function(e,t,n){t.glMatrix=n(0),t.mat2=n(26),t.mat2d=n(27),t.mat3=n(11),t.mat4=n(28),t.quat=n(29),t.vec2=n(30),t.vec3=n(12),t.vec4=n(13)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(3),l=function(e){function t(e,n,i,a){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return void 0===n?(u.rawElements=e,o(u)):(u.rawElements=[e,n,i,a],u)}return i(t,e),a(t,null,[{key:"copy",value:function(e){return new t(e.X,e.Y,e.Z,e.W)}},{key:"dot",value:function(e,t){return c.vec4.dot(e.rawElements,t.rawElements)}},{key:"add",value:function(e,n){var r=c.vec4.create();return new t(c.vec4.add(r,e.rawElements,n.rawElements))}},{key:"subtract",value:function(e,n){var r=c.vec4.create();return new t(c.vec4.sub(r,e.rawElements,n.rawElements))}},{key:"multiply",value:function(e,n){var r=c.vec4.create();return new t(c.vec4.scale(r,n.rawElements,e))}},{key:"negate",value:function(e){return t.multiply(-1,e)}},{key:"equals",value:function(e,t){return s.default.__elementEquals(e,t)}},{key:"nearlyEquals",value:function(e,t){return s.default.__nearlyElementEquals(e,t)}},{key:"normalize",value:function(e){var n=c.vec4.create();return new t(c.vec4.normalize(n,e.rawElements))}},{key:"min",value:function(e,n){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.min(t.rawElements[e],n.rawElements[e])}))}},{key:"max",value:function(e,n){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.max(t.rawElements[e],n.rawElements[e])}))}},{key:"angle",value:function(e,n){return Math.acos(t.dot(e.normalized,n.normalized))}},{key:"parse",value:function(e){var n=s.default.__parse(e),r=n.elements;if(r&&(1===r.length||4===r.length)){var o=void 0;return o=1===r.length?new t(r[0],r[0],r[0],r[0]):new t(r[0],r[1],r[2],r[3]),n.needNormalize&&(o=o.normalizeThis()),n.coefficient&&(o=o.multiplyWith(n.coefficient)),n.needNegate&&(o=o.negateThis()),o}}},{key:"lerp",value:function(e,n,r){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return t.rawElements[e]+(n.rawElements[e]-t.rawElements[e])*r}))}},{key:"XUnit",get:function(){return new t(1,0,0,0)}},{key:"YUnit",get:function(){return new t(0,1,0,0)}},{key:"ZUnit",get:function(){return new t(0,0,1,0)}},{key:"WUnit",get:function(){return new t(0,0,0,1)}},{key:"One",get:function(){return new t(1,1,1,1)}},{key:"Zero",get:function(){return new t(0,0,0,0)}}]),a(t,[{key:"normalizeThis",value:function(){return t.normalize(this)}},{key:"dotWith",value:function(e){return t.dot(this,e)}},{key:"addWith",value:function(e){return t.add(this,e)}},{key:"subtractWith",value:function(e){return t.subtract(this,e)}},{key:"multiplyWith",value:function(e){return t.multiply(e,this)}},{key:"negateThis",value:function(){return t.negate(this)}},{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"nearlyEqualWith",value:function(e){return t.nearlyEquals(this,e)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+", "+this.Z+", "+this.W+")"}},{key:"toDisplayString",value:function(){return"Vector4"+this.toString()}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(e){this.rawElements[0]=+e}},{key:"Y",get:function(){return this.rawElements[1]},set:function(e){this.rawElements[1]=+e}},{key:"Z",get:function(){return this.rawElements[2]},set:function(e){this.rawElements[2]=+e}},{key:"W",get:function(){return this.rawElements[3]},set:function(e){this.rawElements[3]=+e}},{key:"ElementCount",get:function(){return 4}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),l=n(4),f=r(l),h=n(7),d=r(h),p=function(e){function t(e,n,r,a){o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.rawElements=[e,n,r,a],u}return a(t,e),u(t,null,[{key:"internalParse",value:function(e,n,r){if(n&&d.default[e])return t.internalParse(d.default[e],!1);var o=void 0;if(n&&(o=e.match(/^#([0-9a-f]{3})$/i))){var i=o[1];return new t(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,1)}if(n&&(o=e.match(/^#([0-9a-f]{4})$/i))){var a=o[1];return new t(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,parseInt(a.charAt(3),16)/15)}if(o=e.match(/^#([0-9a-f]{6})$/i)){var u=o[1];return new t(parseInt(u.substr(0,2),16)/255,parseInt(u.substr(2,2),16)/255,parseInt(u.substr(4,2),16)/255,1)}if(n&&(o=e.match(/^#([0-9a-f]{8})$/i))){var s=o[1];return new t(parseInt(s.substr(0,2),16)/255,parseInt(s.substr(2,2),16)/255,parseInt(s.substr(4,2),16)/255,parseInt(s.substr(6,2),16)/255)}var c=e.match(/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i);if(c&&n)return new t(parseInt(c[1],10)/255,parseInt(c[2],10)/255,parseInt(c[3],10)/255,1);if((c=e.match(/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*(0|1|0\.\d+)\s*\)\s*$/i))&&n){var l=parseFloat(c[4]);return new t(parseInt(c[1],10)/255,parseInt(c[2],10)/255,parseInt(c[3],10)/255,l)}return r?void 0:null}},{key:"parse",value:function(e,n){return t.internalParse(e,!0,n)}},{key:"equals",value:function(e,t){return c.default.__elementEquals(e,t)}}]),u(t,[{key:"toVector",value:function(){return new f.default(this.R,this.G,this.B,this.A)}},{key:"equalWith",value:function(e){return t.equals(e,this)}},{key:"toString",value:function(){return"rgba("+Math.round(255*this.R)+", "+Math.round(255*this.G)+", "+Math.round(255*this.B)+", "+Math.round(255*this.A)+")"}},{key:"toDisplayString",value:function(){var e="#";return e+=Math.round(255*this.R).toString(16).toUpperCase(),e+=Math.round(255*this.G).toString(16).toUpperCase(),e+=Math.round(255*this.B).toString(16).toUpperCase(),e+=Math.round(255*this.A).toString(16).toUpperCase(),"Color4("+this.R+", "+this.G+", "+this.B+", "+this.A+", "+e+")"}},{key:"R",get:function(){return this.rawElements[0]}},{key:"G",get:function(){return this.rawElements[1]}},{key:"B",get:function(){return this.rawElements[2]}},{key:"A",get:function(){return this.rawElements[3]}},{key:"ElementCount",get:function(){return 4}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),l=n(1),f=r(l),h=n(5),d=r(h),p=n(4),v=r(p),y=n(7),m=r(y),g=function(e){function t(e,n,r){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.rawElements=[e,n,r],a}return a(t,e),u(t,null,[{key:"fromColor4",value:function(e){return new t(e.R,e.G,e.B)}},{key:"parse",value:function(e,n){return t.internalParse(e,!0,n)}},{key:"internalParse",value:function(e,n,r){if(n&&m.default[e]){var o=d.default.internalParse(m.default[e],!1,r);return t.fromColor4(o)}var i=void 0;if(n&&(i=e.match(/^#([0-9a-f]{3})$/i))){var a=i[1];return new t(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15)}if(i=e.match(/^#([0-9a-f]{6})$/i)){var u=i[1];return new t(parseInt(u.substr(0,2),16)/255,parseInt(u.substr(2,2),16)/255,parseInt(u.substr(4,2),16)/255)}var s=e.match(/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i);return s&&n?new t(parseInt(s[1],10)/255,parseInt(s[2],10)/255,parseInt(s[3],10)/255):r?void 0:null}},{key:"equals",value:function(e,t){return c.default.__elementEquals(e,t)}}]),u(t,[{key:"toVector",value:function(){return new f.default(this.R,this.G,this.B)}},{key:"toVector4",value:function(e){return void 0===e&&(e=0),new v.default(this.R,this.G,this.B,e)}},{key:"equalWith",value:function(e){return t.equals(e,this)}},{key:"toString",value:function(){return"rgb("+Math.round(255*this.R)+", "+Math.round(255*this.G)+", "+Math.round(255*this.B)+")"}},{key:"toDisplayString",value:function(){var e="#";return e+=Math.round(255*this.R).toString(16).toUpperCase(),e+=Math.round(255*this.G).toString(16).toUpperCase(),e+=Math.round(255*this.B).toString(16).toUpperCase(),"Color3("+this.R+", "+this.G+", "+this.B+", "+e+")"}},{key:"R",get:function(){return this.rawElements[0]}},{key:"G",get:function(){return this.rawElements[1]}},{key:"B",get:function(){return this.rawElements[2]}},{key:"ElementCount",get:function(){return 3}}]),t}(c.default);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"parseAngle",value:function(e){var t=/^ *(-?[\de+-.]*) *(?:\/ *([\de+-.]*))? *(p|prad|deg|d|r|rad)? *$/gm,n=t.exec(e);if(null!=n){var r=parseFloat(n[1]);n[2]&&(r/=parseFloat(n[2]));var o=n[3];return null==o&&(o="d"),"r"===o||"rad"===o?r:"p"===o||"prad"===o?r*Math.PI:r/180*Math.PI}}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),s=n(3),c=n(18),l=r(c),f=n(8),h=r(f),d=function(){function e(t){o(this,e),this.rawElements=t}return i(e,null,[{key:"equals",value:function(e,t){for(var n=0;n<4;n++)if(e.rawElements[n]!==t.rawElements[n])return!1;return!0}},{key:"parse",value:function(t){var n=/^ *(x|y|z) *\(([^\(\)]+)\) *$/gm,r=/^ *axis *\(([^\(\),]+),([^\(\),]+),([^\(\),]+),([^\(\),]+)\) *$/gm,o=/^ *([^\(\),]+),([^\(\),]+),([^\(\),]+) *$/gm,i=n.exec(t);if(i){var a=h.default.parseAngle(i[2]);if(void 0===a)return;if("x"===i[1])return e.angleAxis(a,u.default.XUnit);if("y"===i[1])return e.angleAxis(a,u.default.YUnit);if("z"===i[1])return e.angleAxis(a,u.default.ZUnit)}var s=r.exec(t);if(s){var c=h.default.parseAngle(s[1]),l=parseFloat(s[2]),f=parseFloat(s[3]),d=parseFloat(s[4]);if(void 0===c)return;return e.angleAxis(c,new u.default(l,f,d))}var p=o.exec(t);if(p){var v=h.default.parseAngle(p[1]),y=h.default.parseAngle(p[2]),m=h.default.parseAngle(p[3]);if(void 0===v||void 0===y||void 0===m)return;return e.euler(v,y,m)}}},{key:"add",value:function(t,n){var r=s.quat.create();return new e(s.quat.add(r,t.rawElements,n.rawElements))}},{key:"multiply",value:function(t,n){var r=s.quat.create();return new e(s.quat.mul(r,t.rawElements,n.rawElements))}},{key:"angleAxis",value:function(t,n){var r=s.vec3.create();r[0]=n.X,r[1]=n.Y,r[2]=n.Z,s.vec3.normalize(r,r);var o=s.quat.create();return new e(s.quat.setAxisAngle(o,r,+t))}},{key:"euler",value:function(t,n,r){return e.multiply(e.angleAxis(r,u.default.ZUnit),e.multiply(e.angleAxis(t,u.default.XUnit),e.angleAxis(n,u.default.YUnit)))}},{key:"eulerXYZ",value:function(t,n,r){return e.multiply(e.angleAxis(r,u.default.ZUnit),e.multiply(e.angleAxis(n,u.default.YUnit),e.angleAxis(t,u.default.XUnit)))}},{key:"slerp",value:function(t,n,r){var o=s.quat.create();return new e(s.quat.slerp(o,t.rawElements,n.rawElements,+r))}},{key:"angle",value:function(t,n){var r=e.multiply(n,t.inverse());return r=r.normalize(),2*Math.acos(r.W)}},{key:"fromToRotation",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=u.default.cross(t.normalized,n.normalized);o.magnitude<.5&&(o=r||new u.default(0,1,0));var i=Math.acos(u.default.dot(t.normalized,n.normalized));return e.angleAxis(i,o)}},{key:"lookRotation",value:function(t,n){n=n||u.default.YUnit;var r=t.normalized,o=u.default.cross(n,r).normalized,i=u.default.cross(r,o),a=o.X,s=o.Y,c=o.Z,l=i.X,f=i.Y,h=i.Z,d=r.X,p=r.Y,v=r.Z,y=a+f+v;if(y>0){var m=Math.sqrt(1+y);return new e([.5*(h-p)/m,.5*(d-c)/m,.5*(s-l)/m,m/2])}if(a>=f&&a>=v){var g=Math.sqrt(1+a-f-v);return new e([.5*(s+l)/g,.5*(c+d)/g,.5*(h-p)/g,g/2])}if(f>v){var _=Math.sqrt(1+f-a-v);return new e([.5*(l+s)/_,.5*_,.5*(p+h)/_,.5*(d-c)/_])}var b=Math.sqrt(1+v-a-f);return new e([.5*(d+c)/b,.5*(p+h)/b,.5*b,.5*(s-l)/b])}},{key:"Identity",get:function(){return new e(s.quat.create())}}]),i(e,[{key:"equalWith",value:function(t){return e.equals(this,t)}},{key:"normalize",value:function(){var t=s.quat.create();return new e(s.quat.normalize(t,this.rawElements))}},{key:"inverse",value:function(){var t=s.quat.create();return new e(s.quat.invert(t,this.rawElements))}},{key:"toAngleAxisString",value:function(){var e=2*Math.acos(this.W),t=Math.sqrt(1-this.W*this.W);return 180!==e&&0!==e?"axis("+e+","+this.X/t+","+this.Y/t+","+this.Z/t+")":0===e?"axis("+e+",0,1,0)":"axis(180d,"+this.X+","+this.Y+","+this.Z+")"}},{key:"toString",value:function(){return this.toAngleAxisString()}},{key:"factoringQuaternionZXY",value:function(){var e={x:0,y:0,z:0},t=l.default.rotationQuaternion(this),n=t.rawElements[6];return Math.abs(n)<.9999?(e.x=Math.asin(n),e.z=Math.atan2(-t.rawElements[4],t.rawElements[5]),e.y=Math.atan2(-t.rawElements[2],t.rawElements[10])):(e.y=0,e.x=Math.PI/2*n,e.z=Math.atan2(t.rawElements[1],t.rawElements[0])),e}},{key:"factoringQuaternionXYZ",value:function(){var e={x:0,y:0,z:0},t=l.default.rotationQuaternion(this),n=-t.rawElements[2];return Math.abs(n)<.9999?(e.x=Math.atan2(t.rawElements[6],t.rawElements[10]),e.y=Math.asin(n),e.z=Math.atan2(t.rawElements[1],t.rawElements[0])):(e.x=0,e.y=Math.PI/2*n,e.z=Math.atan2(-t.rawElements[4],t.rawElements[5])),e}},{key:"eularAngles",get:function(){var e=this.factoringQuaternionZXY();return new u.default(e.x,e.y,e.z)},set:function(t){this.rawElements=e.euler(t.X,t.Y,t.Z).rawElements}},{key:"X",get:function(){return this.rawElements[0]}},{key:"Y",get:function(){return this.rawElements[1]}},{key:"Z",get:function(){return this.rawElements[2]}},{key:"W",get:function(){return this.rawElements[3]}},{key:"ImaginaryPart",get:function(){return new u.default(this.X,this.Y,this.Z)}},{key:"Conjugate",get:function(){var t=s.quat.create();return new e(s.quat.conjugate(t,this.rawElements))}},{key:"Length",get:function(){return s.quat.len(this.rawElements)}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(3),l=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return void 0===n?(i.rawElements=e,o(i)):(i.rawElements=[e,n],i)}return i(t,e),a(t,null,[{key:"copy",value:function(e){return new t(e.X,e.Y)}},{key:"parse",value:function(e){var n=s.default.__parse(e),r=n.elements;if(1===r.length||2===r.length){var o=void 0;return o=1===r.length?new t(r[0],r[0]):new t(r[0],r[1]),n.needNormalize&&(o=o.normalizeThis()),n.coefficient&&(o=o.multiplyWith(n.coefficient)),n.needNegate&&(o=o.negateThis()),o}}},{key:"dot",value:function(e,t){return c.vec2.dot(e.rawElements,t.rawElements)}},{key:"add",value:function(e,n){var r=c.vec2.create();return new t(c.vec2.add(r,e.rawElements,n.rawElements))}},{key:"subtract",value:function(e,n){var r=c.vec2.create();return new t(c.vec2.sub(r,e.rawElements,n.rawElements))}},{key:"multiply",value:function(e,n){var r=c.vec2.create();return new t(c.vec2.scale(r,n.rawElements,e))}},{key:"negate",value:function(e){return t.multiply(-1,e)}},{key:"equals",value:function(e,t){return s.default.__elementEquals(e,t)}},{key:"nearlyEquals",value:function(e,t){return s.default.__nearlyElementEquals(e,t)}},{key:"normalize",value:function(e){var n=c.vec2.create();return new t(c.vec2.normalize(n,e.rawElements))}},{key:"min",value:function(e,n){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.min(t.rawElements[e],n.rawElements[e])}))}},{key:"max",value:function(e,n){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.max(t.rawElements[e],n.rawElements[e])}))}},{key:"angle",value:function(e,n){return Math.acos(t.dot(e.normalized,n.normalized))}},{key:"lerp",value:function(e,n,r){return new t(s.default.__fromGenerationFunction(e,n,function(e,t,n){return t.rawElements[e]+(n.rawElements[e]-t.rawElements[e])*r}))}},{key:"XUnit",get:function(){return new t(1,0)}},{key:"YUnit",get:function(){return new t(0,1)}},{key:"One",get:function(){return new t(1,1)}},{key:"Zero",get:function(){return new t(0,0)}}]),a(t,[{key:"dotWith",value:function(e){return t.dot(this,e)}},{key:"addWith",value:function(e){return t.add(this,e)}},{key:"subtractWith",value:function(e){return t.subtract(e,this)}},{key:"multiplyWith",value:function(e){return t.multiply(e,this)}},{key:"negateThis",value:function(){return t.negate(this)}},{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"nearlyEqualWith",value:function(e){return t.nearlyEquals(this,e)}},{key:"normalizeThis",value:function(){return t.normalize(this)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+")"}},{key:"toDisplayString",value:function(){return"Vector2"+this.toString()}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(e){this.rawElements[0]=+e}},{key:"Y",get:function(){return this.rawElements[1]},set:function(e){this.rawElements[1]=+e}},{key:"ElementCount",get:function(){return 2}}]),t}(s.default);t.default=l},function(e,t,n){var r=n(0),o={};o.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromValues=function(e,t,n,o,i,a,u,s,c){var l=new r.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=o,l[4]=i,l[5]=a,l[6]=u,l[7]=s,l[8]=c,l},o.set=function(e,t,n,r,o,i,a,u,s,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=u,e[7]=s,e[8]=c,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=l*a-u*c,h=-l*i+u*s,d=c*i-a*s,p=n*f+r*h+o*d;return p?(p=1/p,e[0]=f*p,e[1]=(-l*r+o*c)*p,e[2]=(u*r-o*a)*p,e[3]=h*p,e[4]=(l*n-o*s)*p,e[5]=(-u*n+o*i)*p,e[6]=d*p,e[7]=(-c*n+r*s)*p,e[8]=(a*n-r*i)*p,e):null},o.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8];return e[0]=a*l-u*c,e[1]=o*c-r*l,e[2]=r*u-o*a,e[3]=u*s-i*l,e[4]=n*l-o*s,e[5]=o*i-n*u,e[6]=i*c-a*s,e[7]=r*s-n*c,e[8]=n*a-r*i,e},o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],u=e[6],s=e[7],c=e[8];return t*(c*i-a*s)+n*(-c*o+a*u)+r*(s*o-i*u)},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=n[0],d=n[1],p=n[2],v=n[3],y=n[4],m=n[5],g=n[6],_=n[7],b=n[8];return e[0]=h*r+d*a+p*c,e[1]=h*o+d*u+p*l,e[2]=h*i+d*s+p*f,e[3]=v*r+y*a+m*c,e[4]=v*o+y*u+m*l,e[5]=v*i+y*s+m*f,e[6]=g*r+_*a+b*c,e[7]=g*o+_*u+b*l,e[8]=g*i+_*s+b*f,e},o.mul=o.multiply,o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=n[0],d=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=u,e[5]=s,e[6]=h*r+d*a+c,e[7]=h*o+d*u+l,e[8]=h*i+d*s+f,e},o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=Math.sin(n),d=Math.cos(n);return e[0]=d*r+h*a,e[1]=d*o+h*u,e[2]=d*i+h*s,e[3]=d*a-h*r,e[4]=d*u-h*o,e[5]=d*s-h*i,e[6]=c,e[7]=l,e[8]=f,e},o.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,u=r+r,s=o+o,c=n*a,l=r*a,f=r*u,h=o*a,d=o*u,p=o*s,v=i*a,y=i*u,m=i*s;return e[0]=1-f-p,e[3]=l-m,e[6]=h+y,e[1]=l+m,e[4]=1-c-p,e[7]=d-v,e[2]=h-y,e[5]=d+v,e[8]=1-c-f,e},o.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],y=t[14],m=t[15],g=n*u-r*a,_=n*s-o*a,b=n*c-i*a,w=r*s-o*u,M=r*c-i*u,E=o*c-i*s,x=l*v-f*p,S=l*y-h*p,O=l*m-d*p,R=f*y-h*v,k=f*m-d*v,C=h*m-d*y,P=g*C-_*k+b*R+w*O-M*S+E*x;return P?(P=1/P,e[0]=(u*C-s*k+c*R)*P,e[1]=(s*O-a*C-c*S)*P,e[2]=(a*k-u*O+c*x)*P,e[3]=(o*k-r*C-i*R)*P,e[4]=(n*C-o*O+i*S)*P,e[5]=(r*O-n*k-i*x)*P,e[6]=(v*E-y*M+m*w)*P,e[7]=(y*b-p*E-m*_)*P,e[8]=(p*M-v*b+m*g)*P,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=t[0],d=t[1],p=t[2],v=t[3],y=t[4],m=t[5],g=t[6],_=t[7],b=t[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-y)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-_)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(f-b)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))},e.exports=o},function(e,t,n){var r=n(0),o={};o.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,n){var o=new r.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],s=n[2];return e[0]=o*s-i*u,e[1]=i*a-r*s,e[2]=r*u-o*a,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e},o.hermite=function(e,t,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,c=a*(i-1),l=a*(3-2*i);return e[0]=t[0]*u+n[0]*s+r[0]*c+o[0]*l,e[1]=t[1]*u+n[1]*s+r[1]*c+o[1]*l,e[2]=t[2]*u+n[2]*s+r[2]*c+o[2]*l,e},o.bezier=function(e,t,n,r,o,i){var a=1-i,u=a*a,s=i*i,c=u*a,l=3*i*u,f=3*s*a,h=s*i;return e[0]=t[0]*c+n[0]*l+r[0]*f+o[0]*h,e[1]=t[1]*c+n[1]*l+r[1]*f+o[1]*h,e[2]=t[2]*c+n[2]*l+r[2]*f+o[2]*h,e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,i=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=o*t,e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*i-s*o,f=c*o+s*r-a*i,h=c*i+a*o-u*r,d=-a*r-u*o-s*i;return e[0]=l*c+d*-a+f*-s-h*-u,e[1]=f*c+d*-u+h*-a-l*-s,e[2]=h*c+d*-s+l*-u-f*-a,e},o.rotateX=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateY=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateZ=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var u,s;for(n||(n=3),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],i(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),o.angle=function(e,t){var n=o.fromValues(e[0],e[1],e[2]),r=o.fromValues(t[0],t[1],t[2]);o.normalize(n,n),o.normalize(r,r);var i=o.dot(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=t[0],u=t[1],s=t[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))},e.exports=o},function(e,t,n){var r=n(0),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+i*i)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],u=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=u+r*(n[3]-u),e},o.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*i-s*o,f=c*o+s*r-a*i,h=c*i+a*o-u*r,d=-a*r-u*o-s*i;return e[0]=l*c+d*-a+f*-s-h*-u,e[1]=f*c+d*-u+h*-a-l*-s,e[2]=h*c+d*-s+l*-u-f*-a,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],i(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=t[0],s=t[1],c=t[2],l=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},e.exports=o},function(e,t,n){"use strict";function r(e){return"number"==typeof e?e:"string"==typeof e?i.default.parseAngle(e):void 0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof a.default?e:e instanceof s.default?new a.default(e.R,e.G,e.B):"string"==typeof e?a.default.parse(e):Array.isArray(e)?new a.default(e[0],e[1],e[2]):null}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),u=n(5),s=r(u);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof s.default?e:e instanceof a.default?new s.default(e.R,e.G,e.B,1):"string"==typeof e?s.default.parse(e):Array.isArray(e)?new s.default(e[0],e[1],e[2],e[3]):null}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),u=n(5),s=r(u);t.default=o},function(e,t,n){"use strict";function r(e){return e instanceof i.default?e:Array.isArray(e)?4===e.length?new i.default([e[0],e[1],e[2],e[3]]):i.default.euler(e[0],e[1],e[2]):"string"==typeof e?i.default.parse(e):e&&void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]&&void 0!==e[3]?new i.default([e[0],e[1],e[2],e[3]]):e&&void 0!==e.X&&void 0!==e.Y&&void 0!==e.Z&&void 0!==e.W?new i.default([e.X,e.Y,e.Z,e.W]):void 0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(19),c=r(s),l=n(1),f=r(l),h=n(4),d=r(h),p=n(9),v=r(p),y=n(3),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.rawElements=e||y.mat4.create(),n}return a(t,e),u(t,null,[{key:"zero",value:function(){return new t([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}},{key:"identity",value:function(){return new t(y.mat4.create())}},{key:"fromElements",value:function(e,n,r,o,i,a,u,s,c,l,f,h,d,p,v,y){return new t([e,i,c,d,n,a,l,p,r,u,f,v,o,s,h,y])}},{key:"fromFunc",value:function(e){return new t([e(0,0),e(1,0),e(2,0),e(3,0),e(0,1),e(1,1),e(2,1),e(3,1),e(0,2),e(1,2),e(2,2),e(3,2),e(0,3),e(1,3),e(2,3),e(3,3)])}},{key:"equals",value:function(e,n){return t.__elementEquals(e,n)}},{key:"add",value:function(e,n){for(var r=y.mat4.create(),o=0;o<16;o++)r[o]=e.rawElements[o]+n.rawElements[o];return new t(r)}},{key:"subtract",value:function(e,n){return t.add(e,t.negate(n))}},{key:"scalarMultiply",value:function(e,n){var r=y.mat4.create();return y.mat4.multiply(r,[e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,e],n.rawElements),new t(r)}},{key:"multiply",value:function(e,n){var r=y.mat4.create();return new t(y.mat4.mul(r,e.rawElements,n.rawElements))}},{key:"trs",value:function(e,n,r){var o=y.mat4.create(),i=y.mat4.create();return y.mat4.mul(o,y.mat4.translate(o,y.mat4.create(),e.rawElements),y.mat4.fromQuat(i,n.rawElements)),y.mat4.scale(o,o,r.rawElements),new t(o)}},{key:"negate",value:function(e){return this.scalarMultiply(-1,e)}},{key:"transpose",value:function(e){var n=y.mat4.create();return new t(y.mat4.transpose(n,e.rawElements))}},{key:"transformPoint",value:function(e,t){var n=y.vec3.create();return y.vec3.transformMat4(n,t.rawElements,e.rawElements),new f.default(n)}},{key:"transformNormal",value:function(e,t){var n=y.vec4.create(),r=y.vec4.create();return r[0]=t.X,r[1]=t.Y,r[2]=t.Z,r[3]=0,y.vec4.transformMat4(n,r,e.rawElements),new f.default(n[0],n[1],n[2])}},{key:"transform",value:function(e,t){var n=y.vec4.create(),r=y.vec4.create();return r[0]=t.X,r[1]=t.Y,r[2]=t.Z,r[3]=t.W,y.vec4.transformMat4(n,r,e.rawElements),new d.default(n[0],n[1],n[2],n[3])}},{key:"determinant",value:function(e){return y.mat4.determinant(e.rawElements)}},{key:"inverse",value:function(e){var n=y.mat4.create();return new t(y.mat4.invert(n,e.rawElements))}},{key:"translate",value:function(e){var n=y.mat4.create();return y.mat4.translate(n,n,e.rawElements),new t(n)}},{key:"scale",value:function(e){var n=y.mat4.create();return y.mat4.scale(n,n,e.rawElements),new t(n)}},{key:"rotateX",value:function(e){var n=y.mat4.create();return y.mat4.rotateX(n,n,e),new t(n)}},{key:"rotateY",value:function(e){var n=y.mat4.create();return y.mat4.rotateY(n,n,e),new t(n)}},{key:"rotateZ",value:function(e){var n=y.mat4.create();return y.mat4.rotateZ(n,n,e),new t(n)}},{key:"rotationQuaternion",value:function(e){var n=y.quat.create(),r=y.mat4.create();return y.quat.normalize(n,e.rawElements),y.mat4.fromQuat(r,n),new t(r)}},{key:"frustum",value:function(e,n,r,o,i,a){var u=y.mat4.create();return y.mat4.frustum(u,e,n,r,o,i,a),new t(u)}},{key:"ortho",value:function(e,n,r,o,i,a){var u=y.mat4.create();return y.mat4.ortho(u,e,n,r,o,i,a),new t(u)}},{key:"perspective",value:function(e,n,r,o){var i=y.mat4.create();return y.mat4.perspective(i,e,n,r,o),new t(i)}},{key:"lookAt",value:function(e,n,r){var o=y.mat4.create();return y.mat4.lookAt(o,e.rawElements,n.rawElements,r.rawElements),new t(o)}}]),u(t,[{key:"getAt",value:function(e,t){return this.rawElements[4*t+e]}},{key:"setAt",value:function(e,t,n){this.rawElements[4*t+e]=n}},{key:"getBySingleIndex",value:function(e){return this.rawElements[e]}},{key:"getColmun",value:function(e){return new d.default(this.rawElements[4*e],this.rawElements[4*e+1],this.rawElements[4*e+2],this.rawElements[4*e+3])}},{key:"getRow",value:function(e){return new d.default(this.rawElements[e],this.rawElements[e+4],this.rawElements[e+8],this.rawElements[e+12])}},{key:"multiplyWith",value:function(e){return t.multiply(this,e)}},{key:"equalWith",value:function(e){return t.equals(e,this)}},{key:"getTranslation",value:function(){var e=[0,0,0];return y.mat4.getTranslation(e,this.rawElements),new f.default(e)}},{key:"getScaling",value:function(){var e=[0,0,0];return y.mat4.getScaling(e,this.rawElements),new f.default(e)}},{key:"getRotation",value:function(){var e=[0,0,0,0],n=this.getScaling();return y.mat4.getRotation(e,this.multiplyWith(t.scale(new f.default(1/n.X,1/n.Y,1/n.Z))).rawElements),new v.default(e)}},{key:"toString",value:function(){return"|"+this.getBySingleIndex(0)+" "+this.getBySingleIndex(4)+" "+this.getBySingleIndex(8)+" "+this.getBySingleIndex(12)+"|\n\n                 |"+this.getBySingleIndex(1)+" "+this.getBySingleIndex(5)+" "+this.getBySingleIndex(9)+" "+this.getBySingleIndex(13)+"|\n\n                 |"+this.getBySingleIndex(2)+" "+this.getBySingleIndex(6)+" "+this.getBySingleIndex(10)+" "+this.getBySingleIndex(14)+"|\n\n                 |"+this.getBySingleIndex(3)+" "+this.getBySingleIndex(7)+" "+this.getBySingleIndex(11)+" "+this.getBySingleIndex(15)+"|"}},{key:"ElementCount",get:function(){return 16}},{key:"RowCount",get:function(){return 4}},{key:"ColmunCount",get:function(){return 4}}]),t}(c.default);t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"getAt",value:function(e,t){throw new Error("Not implemented")}},{key:"getBySingleIndex",value:function(e){throw new Error("Not implemented")}},{key:"RowCount",get:function(){return 0}},{key:"ColmunCount",get:function(){return 0}}],[{key:"__elementEquals",value:function(e,t){if(e.RowCount!==t.RowCount||e.ColmunCount!==t.ColmunCount)return!1;for(var n=e.RowCount*t.ColmunCount,r=0;r<n;r++)if(e.getBySingleIndex(r)!==t.getBySingleIndex(r))return!1;return!0}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e instanceof i.default?e:"string"==typeof e?i.default.parse(e):"number"==typeof e?new i.default(e,e):Array.isArray(e)?new i.default(e[0],e[1]):void 0!==e[0]&&void 0!==e[1]?new i.default(e[0],e[1]):void 0!==e.X&&void 0!==e.Y?new i.default(e.X,e.Y):void 0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t,n){"use strict";function r(e){return e instanceof i.default?e:"string"==typeof e?i.default.parse(e):"number"==typeof e?new i.default(e,e,e):Array.isArray(e)?new i.default(e[0],e[1],e[2]):void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]?new i.default(e[0],e[1],e[2]):void 0!==e.X&&void 0!==e.Y&&void 0!==e.Z?new i.default(e.X,e.Y,e.Z):void 0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t,n){"use strict";function r(e){return e instanceof i.default?e:"string"==typeof e?i.default.parse(e):"number"==typeof e?new i.default(e,e,e,e):Array.isArray(e)?new i.default(e[0],e[1],e[2],e[3]):e&&void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]&&void 0!==e[3]?new i.default(e[0],e[1],e[2],e[3]):e&&void 0!==e.X&&void 0!==e.Y&&void 0!==e.Z&&void 0!==e.W?new i.default(e.X,e.Y,e.Z,e.W):void 0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=r(o),a=n(6),u=r(a),s=n(5),c=r(s),l=n(7),f=r(l),h=n(14),d=r(h),p=n(15),v=r(p),y=n(16),m=r(y),g=n(31),_=r(g),b=n(17),w=r(b),M=n(20),E=r(M),x=n(21),S=r(x),O=n(22),R=r(O),k=n(32),C=r(k),P=n(18),T=r(P),A=n(19),I=r(A),F=n(9),j=r(F),D=n(33),N=r(D),L=n(8),G=r(L),B=n(10),z=r(B),W=n(1),q=r(W),U=n(4),V=r(U),H=n(2),Y=r(H),X=n(34),$=r(X),Q=n(23),Z=r(Q),J={AABB:i.default,Color3:u.default,Color4:c.default,Colors:f.default,Converters:{Angle2DConverter:d.default,Color3Converter:v.default,Color4Converter:m.default,NumberArrayConverter:_.default,Rotation3Converter:w.default,Vector2Converter:E.default,Vector3Converter:S.default,Vector4Converter:R.default},GLM:C.default,Matrix:T.default,MatrixBase:I.default,Quaternion:j.default,Rectangle:N.default,Util:{Angle2DParser:G.default},Vector2:z.default,Vector3:q.default,Vector4:V.default,VectorBase:Y.default};Z.default.notifyRegisteringPlugin("grimoirejs-math");var K=(0,$.default)();Object.assign(J,{__VERSION__:"1.15.1",__NAME__:"grimoirejs-math"}),Object.assign(K||{},J),window.GrimoireJS.lib.math=J,t.default=K},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t){var n=this;r(this,e),t&&t.forEach(function(e){return n.expand(e)})}return o(e,[{key:"expand",value:function(e){return null==this.pointLBF&&(this.pointLBF=a.default.copy(e),this.pointRTN=a.default.copy(e)),this.pointLBF=a.default.min(e,this.pointLBF),this.pointRTN=a.default.max(e,this.pointRTN),this._center=null,this}},{key:"clear",value:function(){this.pointLBF=null,this.pointRTN=null,this._center=null}},{key:"Width",get:function(){return Math.abs(this.pointLBF.X-this.pointRTN.X)}},{key:"Height",get:function(){return Math.abs(this.pointLBF.Y-this.pointRTN.Y)}},{key:"Distance",get:function(){return Math.abs(this.pointLBF.Z-this.pointRTN.Z)}},{key:"Center",get:function(){return this._center?this._center:this._center=a.default.add(this.pointLBF,this.pointRTN).multiplyWith(.5)}}]),e}();t.default=u},function(e,t,n){var r=n(0),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=n[0],s=n[1],c=n[2],l=n[3];return e[0]=r*u+i*s,e[1]=o*u+a*s,e[2]=r*c+i*l,e[3]=o*c+a*l,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=o*s+a*u,e[2]=r*-u+i*s,e[3]=o*-u+a*s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=n[0],s=n[1];return e[0]=r*u,e[1]=o*u,e[2]=i*s,e[3]=a*s,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=t[0],s=t[1],c=t[2],l=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},e.exports=o},function(e,t,n){var r=n(0),o={};o.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.fromValues=function(e,t,n,o,i,a){var u=new r.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=n,u[3]=o,u[4]=i,u[5]=a,u},o.set=function(e,t,n,r,o,i,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=n*i-r*o;return s?(s=1/s,e[0]=i*s,e[1]=-r*s,e[2]=-o*s,e[3]=n*s,e[4]=(o*u-i*a)*s,e[5]=(r*a-n*u)*s,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],p=n[5];return e[0]=r*c+i*l,e[1]=o*c+a*l,e[2]=r*f+i*h,e[3]=o*f+a*h,e[4]=r*d+i*p+u,e[5]=o*d+a*p+s,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*c,e[1]=o*l+a*c,e[2]=r*-c+i*l,e[3]=o*-c+a*l,e[4]=u,e[5]=s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=n[0],l=n[1];return e[0]=r*c,e[1]=o*c,e[2]=i*l,e[3]=a*l,e[4]=u,e[5]=s,e},o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=n[0],l=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=r*c+i*l+u,e[5]=o*c+a*l+s,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=t[0],l=t[1],f=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))},e.exports=o},function(e,t,n){var r=n(0),o={scalar:{},SIMD:{}};o.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.fromValues=function(e,t,n,o,i,a,u,s,c,l,f,h,d,p,v,y){var m=new r.ARRAY_TYPE(16);return m[0]=e,m[1]=t,m[2]=n,m[3]=o,m[4]=i,m[5]=a,m[6]=u,m[7]=s,m[8]=c,m[9]=l,m[10]=f,m[11]=h,m[12]=d,m[13]=p,m[14]=v,m[15]=y,m},o.set=function(e,t,n,r,o,i,a,u,s,c,l,f,h,d,p,v,y){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=u,e[7]=s,e[8]=c,e[9]=l,e[10]=f,e[11]=h,e[12]=d,e[13]=p,e[14]=v,e[15]=y,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.SIMD.transpose=function(e,t){var n,r,o,i,a,u,s,c,l,f;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),a=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,i,0,1,4,5),s=SIMD.Float32x4.shuffle(a,u,0,2,4,6),c=SIMD.Float32x4.shuffle(a,u,1,3,5,7),SIMD.Float32x4.store(e,0,s),SIMD.Float32x4.store(e,4,c),a=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,i,2,3,6,7),l=SIMD.Float32x4.shuffle(a,u,0,2,4,6),f=SIMD.Float32x4.shuffle(a,u,1,3,5,7),SIMD.Float32x4.store(e,8,l),SIMD.Float32x4.store(e,12,f),e},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],y=t[14],m=t[15],g=n*u-r*a,_=n*s-o*a,b=n*c-i*a,w=r*s-o*u,M=r*c-i*u,E=o*c-i*s,x=l*v-f*p,S=l*y-h*p,O=l*m-d*p,R=f*y-h*v,k=f*m-d*v,C=h*m-d*y,P=g*C-_*k+b*R+w*O-M*S+E*x;return P?(P=1/P,e[0]=(u*C-s*k+c*R)*P,e[1]=(o*k-r*C-i*R)*P,e[2]=(v*E-y*M+m*w)*P,e[3]=(h*M-f*E-d*w)*P,e[4]=(s*O-a*C-c*S)*P,e[5]=(n*C-o*O+i*S)*P,e[6]=(y*b-p*E-m*_)*P,e[7]=(l*E-h*b+d*_)*P,e[8]=(a*k-u*O+c*x)*P,e[9]=(r*O-n*k-i*x)*P,e[10]=(p*M-v*b+m*g)*P,e[11]=(f*b-l*M-d*g)*P,e[12]=(u*S-a*R-s*x)*P,e[13]=(n*R-r*S+o*x)*P,e[14]=(v*_-p*w-y*g)*P,e[15]=(l*w-f*_+h*g)*P,e):null},o.SIMD.invert=function(e,t){var n,r,o,i,a,u,s,c,l,f,h=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),p=SIMD.Float32x4.load(t,8),v=SIMD.Float32x4.load(t,12);return a=SIMD.Float32x4.shuffle(h,d,0,1,4,5),r=SIMD.Float32x4.shuffle(p,v,0,1,4,5),n=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.shuffle(h,d,2,3,6,7),i=SIMD.Float32x4.shuffle(p,v,2,3,6,7),o=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.mul(o,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.mul(r,a),s=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,a)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),c),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),l),a=SIMD.Float32x4.swizzle(a,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),c),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),l),f=SIMD.Float32x4.mul(n,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),a=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(f,c)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(f,l)),e):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],y=t[14],m=t[15];return e[0]=u*(h*m-d*y)-f*(s*m-c*y)+v*(s*d-c*h),e[1]=-(r*(h*m-d*y)-f*(o*m-i*y)+v*(o*d-i*h)),e[2]=r*(s*m-c*y)-u*(o*m-i*y)+v*(o*c-i*s),e[3]=-(r*(s*d-c*h)-u*(o*d-i*h)+f*(o*c-i*s)),e[4]=-(a*(h*m-d*y)-l*(s*m-c*y)+p*(s*d-c*h)),e[5]=n*(h*m-d*y)-l*(o*m-i*y)+p*(o*d-i*h),e[6]=-(n*(s*m-c*y)-a*(o*m-i*y)+p*(o*c-i*s)),e[7]=n*(s*d-c*h)-a*(o*d-i*h)+l*(o*c-i*s),e[8]=a*(f*m-d*v)-l*(u*m-c*v)+p*(u*d-c*f),e[9]=-(n*(f*m-d*v)-l*(r*m-i*v)+p*(r*d-i*f)),e[10]=n*(u*m-c*v)-a*(r*m-i*v)+p*(r*c-i*u),e[11]=-(n*(u*d-c*f)-a*(r*d-i*f)+l*(r*c-i*u)),e[12]=-(a*(f*y-h*v)-l*(u*y-s*v)+p*(u*h-s*f)),e[13]=n*(f*y-h*v)-l*(r*y-o*v)+p*(r*h-o*f),e[14]=-(n*(u*y-s*v)-a*(r*y-o*v)+p*(r*s-o*u)),e[15]=n*(u*h-s*f)-a*(r*h-o*f)+l*(r*s-o*u),e},o.SIMD.adjoint=function(e,t){var n,r,o,i,a,u,s,c,l,f,h,d,p;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),l=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,i,0,1,4,5),a=SIMD.Float32x4.shuffle(l,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,l,1,3,5,7),l=SIMD.Float32x4.shuffle(n,r,2,3,6,7),c=SIMD.Float32x4.shuffle(o,i,2,3,6,7),s=SIMD.Float32x4.shuffle(l,c,0,2,4,6),c=SIMD.Float32x4.shuffle(c,l,1,3,5,7),l=SIMD.Float32x4.mul(s,c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.mul(u,l),h=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,l),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),l=SIMD.Float32x4.mul(u,s),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),f),p=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,l)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),f),d=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,l)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),l=SIMD.Float32x4.mul(a,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),d),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,l),p),l=SIMD.Float32x4.swizzle(l,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,l),d),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,l)),l=SIMD.Float32x4.mul(a,c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,l)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),d),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,l)),l=SIMD.Float32x4.mul(a,s),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),h),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,l)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),p),SIMD.Float32x4.store(e,0,f),SIMD.Float32x4.store(e,4,h),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,p),e},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],y=e[15];return(t*a-n*i)*(f*y-h*v)-(t*u-r*i)*(l*y-h*p)+(t*s-o*i)*(l*v-f*p)+(n*u-r*a)*(c*y-h*d)-(n*s-o*a)*(c*v-f*d)+(r*s-o*u)*(c*p-l*d)},o.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(e,0,s);var c=SIMD.Float32x4.load(n,4),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),a))));SIMD.Float32x4.store(e,4,l);var f=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(e,8,h);var d=SIMD.Float32x4.load(n,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),a))));return SIMD.Float32x4.store(e,12,p),e},o.scalar.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],y=t[13],m=t[14],g=t[15],_=n[0],b=n[1],w=n[2],M=n[3];return e[0]=_*r+b*u+w*f+M*v,e[1]=_*o+b*s+w*h+M*y,e[2]=_*i+b*c+w*d+M*m,e[3]=_*a+b*l+w*p+M*g,_=n[4],b=n[5],w=n[6],M=n[7],e[4]=_*r+b*u+w*f+M*v,e[5]=_*o+b*s+w*h+M*y,e[6]=_*i+b*c+w*d+M*m,e[7]=_*a+b*l+w*p+M*g,_=n[8],b=n[9],w=n[10],M=n[11],e[8]=_*r+b*u+w*f+M*v,e[9]=_*o+b*s+w*h+M*y,e[10]=_*i+b*c+w*d+M*m,e[11]=_*a+b*l+w*p+M*g,_=n[12],b=n[13],w=n[14],M=n[15],e[12]=_*r+b*u+w*f+M*v,e[13]=_*o+b*s+w*h+M*y,e[14]=_*i+b*c+w*d+M*m,e[15]=_*a+b*l+w*p+M*g,e},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(e,t,n){var r,o,i,a,u,s,c,l,f,h,d,p,v=n[0],y=n[1],m=n[2];return t===e?(e[12]=t[0]*v+t[4]*y+t[8]*m+t[12],e[13]=t[1]*v+t[5]*y+t[9]*m+t[13],e[14]=t[2]*v+t[6]*y+t[10]*m+t[14],e[15]=t[3]*v+t[7]*y+t[11]*m+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=u,e[5]=s,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=r*v+u*y+f*m+t[12],e[13]=o*v+s*y+h*m+t[13],e[14]=i*v+c*y+d*m+t[14],e[15]=a*v+l*y+p*m+t[15]),e},o.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(i,a)));return SIMD.Float32x4.store(e,12,s),e},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.SIMD.scale=function(e,t,n){var r,o,i,a=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,1,1,1,1))),i=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(e,t,n,o){var i,a,u,s,c,l,f,h,d,p,v,y,m,g,_,b,w,M,E,x,S,O,R,k,C=o[0],P=o[1],T=o[2],A=Math.sqrt(C*C+P*P+T*T);return Math.abs(A)<r.EPSILON?null:(A=1/A,C*=A,P*=A,T*=A,i=Math.sin(n),a=Math.cos(n),u=1-a,s=t[0],c=t[1],l=t[2],f=t[3],h=t[4],d=t[5],p=t[6],v=t[7],y=t[8],m=t[9],g=t[10],_=t[11],b=C*C*u+a,w=P*C*u+T*i,M=T*C*u-P*i,E=C*P*u-T*i,x=P*P*u+a,S=T*P*u+C*i,O=C*T*u+P*i,R=P*T*u-C*i,k=T*T*u+a,e[0]=s*b+h*w+y*M,e[1]=c*b+d*w+m*M,e[2]=l*b+p*w+g*M,e[3]=f*b+v*w+_*M,e[4]=s*E+h*x+y*S,e[5]=c*E+d*x+m*S,e[6]=l*E+p*x+g*S,e[7]=f*E+v*x+_*S,e[8]=s*O+h*R+y*k,e[9]=c*O+d*R+m*k,e[10]=l*O+p*R+g*k,e[11]=f*O+v*R+_*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.scalar.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+c*r,e[5]=a*o+l*r,e[6]=u*o+f*r,e[7]=s*o+h*r,e[8]=c*o-i*r,e[9]=l*o-a*r,e[10]=f*o-u*r,e[11]=h*o-s*r,e},o.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],u=t[2],s=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-c*r,e[1]=a*o-l*r,e[2]=u*o-f*r,e[3]=s*o-h*r,e[8]=i*r+c*o,e[9]=a*r+l*o,e[10]=u*r+f*o,e[11]=s*r+h*o,e},o.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(a,o))),e},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],u=t[2],s=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+c*r,e[1]=a*o+l*r,e[2]=u*o+f*r,e[3]=s*o+h*r,e[4]=c*o-i*r,e[5]=l*o-a*r,e[6]=f*o-u*r,e[7]=h*o-s*r,e},o.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,n){var o,i,a,u=n[0],s=n[1],c=n[2],l=Math.sqrt(u*u+s*s+c*c);return Math.abs(l)<r.EPSILON?null:(l=1/l,u*=l,s*=l,c*=l,o=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=u*u*a+i,e[1]=s*u*a+c*o,e[2]=c*u*a-s*o,e[3]=0,e[4]=u*s*a-c*o,e[5]=s*s*a+i,e[6]=c*s*a+u*o,e[7]=0,e[8]=u*c*a+s*o,e[9]=s*c*a-u*o,e[10]=c*c*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=r+r,s=o+o,c=i+i,l=r*u,f=r*s,h=r*c,d=o*s,p=o*c,v=i*c,y=a*u,m=a*s,g=a*c;return e[0]=1-(d+v),e[1]=f+g,e[2]=h-m,e[3]=0,e[4]=f-g,e[5]=1-(l+v),e[6]=p+y,e[7]=0,e[8]=h+m,e[9]=p-y,e[10]=1-(l+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},o.getScaling=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],u=t[6],s=t[8],c=t[9],l=t[10];return e[0]=Math.sqrt(n*n+r*r+o*o),e[1]=Math.sqrt(i*i+a*a+u*u),e[2]=Math.sqrt(s*s+c*c+l*l),e},o.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},o.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],u=t[3],s=o+o,c=i+i,l=a+a,f=o*s,h=o*c,d=o*l,p=i*c,v=i*l,y=a*l,m=u*s,g=u*c,_=u*l,b=r[0],w=r[1],M=r[2];return e[0]=(1-(p+y))*b,e[1]=(h+_)*b,e[2]=(d-g)*b,e[3]=0,e[4]=(h-_)*w,e[5]=(1-(f+y))*w,e[6]=(v+m)*w,e[7]=0,e[8]=(d+g)*M,e[9]=(v-m)*M,e[10]=(1-(f+p))*M,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var i=t[0],a=t[1],u=t[2],s=t[3],c=i+i,l=a+a,f=u+u,h=i*c,d=i*l,p=i*f,v=a*l,y=a*f,m=u*f,g=s*c,_=s*l,b=s*f,w=r[0],M=r[1],E=r[2],x=o[0],S=o[1],O=o[2];return e[0]=(1-(v+m))*w,e[1]=(d+b)*w,e[2]=(p-_)*w,e[3]=0,e[4]=(d-b)*M,e[5]=(1-(h+m))*M,e[6]=(y+g)*M,e[7]=0,e[8]=(p+_)*E,e[9]=(y-g)*E,e[10]=(1-(h+v))*E,e[11]=0,e[12]=n[0]+x-(e[0]*x+e[4]*S+e[8]*O),e[13]=n[1]+S-(e[1]*x+e[5]*S+e[9]*O),e[14]=n[2]+O-(e[2]*x+e[6]*S+e[10]*O),e[15]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,u=r+r,s=o+o,c=n*a,l=r*a,f=r*u,h=o*a,d=o*u,p=o*s,v=i*a,y=i*u,m=i*s;return e[0]=1-f-p,e[1]=l+m,e[2]=h-y,e[3]=0,e[4]=l-m,e[5]=1-c-p,e[6]=d+v,e[7]=0,e[8]=h+y,e[9]=d-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,n,r,o,i,a){var u=1/(n-t),s=1/(o-r),c=1/(i-a);return e[0]=2*i*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(o+r)*s,e[10]=(a+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*c,e[15]=0,e},o.perspective=function(e,t,n,r,o){var i=1/Math.tan(t/2),a=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*a,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(o+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-u)*s*.5,e[9]=(o-i)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},o.ortho=function(e,t,n,r,o,i,a){var u=1/(t-n),s=1/(r-o),c=1/(i-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*u,e[13]=(o+r)*s,e[14]=(a+i)*c,e[15]=1,e},o.lookAt=function(e,t,n,i){var a,u,s,c,l,f,h,d,p,v,y=t[0],m=t[1],g=t[2],_=i[0],b=i[1],w=i[2],M=n[0],E=n[1],x=n[2];return Math.abs(y-M)<r.EPSILON&&Math.abs(m-E)<r.EPSILON&&Math.abs(g-x)<r.EPSILON?o.identity(e):(h=y-M,d=m-E,p=g-x,v=1/Math.sqrt(h*h+d*d+p*p),h*=v,d*=v,p*=v,a=b*p-w*d,u=w*h-_*p,s=_*d-b*h,v=Math.sqrt(a*a+u*u+s*s),v?(v=1/v,a*=v,u*=v,s*=v):(a=0,u=0,s=0),c=d*s-p*u,l=p*a-h*s,f=h*u-d*a,v=Math.sqrt(c*c+l*l+f*f),v?(v=1/v,c*=v,l*=v,f*=v):(c=0,l=0,f=0),e[0]=a,e[1]=c,e[2]=h,e[3]=0,e[4]=u,e[5]=l,e[6]=d,e[7]=0,e[8]=s,e[9]=f,e[10]=p,e[11]=0,e[12]=-(a*y+u*m+s*g),e[13]=-(c*y+l*m+f*g),e[14]=-(h*y+d*m+p*g),e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],y=e[13],m=e[14],g=e[15],_=t[0],b=t[1],w=t[2],M=t[3],E=t[4],x=t[5],S=t[6],O=t[7],R=t[8],k=t[9],C=t[10],P=t[11],T=t[12],A=t[13],I=t[14],F=t[15];return Math.abs(n-_)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(o-b)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-E)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-x)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(c-S)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-O)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(f-R)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(h-k)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-P)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-T)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(y-A)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(m-I)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(g-F)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))},e.exports=o},function(e,t,n){var r=n(0),o=n(11),i=n(12),a=n(13),u={};u.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=i.create(),t=i.fromValues(1,0,0),n=i.fromValues(0,1,0);return function(r,o,a){var s=i.dot(o,a);return s<-.999999?(i.cross(e,t,o),i.length(e)<1e-6&&i.cross(e,n,o),i.normalize(e,e),u.setAxisAngle(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.cross(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var e=o.create();return function(t,n,r,o){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],u.normalize(t,u.fromMat3(t,e))}}(),u.clone=a.clone,u.fromValues=a.fromValues,u.copy=a.copy,u.set=a.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},u.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},u.add=a.add,u.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=n[0],s=n[1],c=n[2],l=n[3];return e[0]=r*l+a*u+o*c-i*s,e[1]=o*l+a*s+i*u-r*c,e[2]=i*l+a*c+r*s-o*u,e[3]=a*l-r*u-o*s-i*c,e},u.mul=u.multiply,u.scale=a.scale,u.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=o*s+i*u,e[2]=i*s-o*u,e[3]=a*s-r*u,e},u.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-i*u,e[1]=o*s+a*u,e[2]=i*s+r*u,e[3]=a*s-o*u,e},u.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+o*u,e[1]=o*s-r*u,e[2]=i*s+a*u,e[3]=a*s-i*u,e},u.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},u.dot=a.dot,u.lerp=a.lerp,u.slerp=function(e,t,n,r){var o,i,a,u,s,c=t[0],l=t[1],f=t[2],h=t[3],d=n[0],p=n[1],v=n[2],y=n[3];return i=c*d+l*p+f*v+h*y,i<0&&(i=-i,d=-d,p=-p,v=-v,y=-y),1-i>1e-6?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,s=Math.sin(r*o)/a):(u=1-r,s=r),e[0]=u*c+s*d,e[1]=u*l+s*p,e[2]=u*f+s*v,e[3]=u*h+s*y,e},u.sqlerp=function(){var e=u.create(),t=u.create();return function(n,r,o,i,a,s){return u.slerp(e,r,a,s),u.slerp(t,o,i,s),u.slerp(n,e,t,2*s*(1-s)),n}}(),u.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-o*u,e[3]=i*u,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.length=a.length,u.len=u.length,u.squaredLength=a.squaredLength,u.sqrLen=u.squaredLength,u.normalize=a.normalize,u.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*i+a]-t[3*a+i])*n,e[i]=(t[3*i+o]+t[3*o+i])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},u.exactEquals=a.exactEquals,u.equals=a.equals,e.exports=u},function(e,t,n){var r=n(0),o={};o.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},o.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var u,s;for(n||(n=2),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],i(e,e,a),t[u]=e[0],t[u+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var n=e[0],o=e[1],i=t[0],a=t[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))},e.exports=o},function(e,t,n){"use strict";function r(e){return"string"==typeof e?new Float32Array(e.split(",").map(function(e){return parseFloat(e)})):Array.isArray(e)?new Float32Array(e):e instanceof Float32Array?e:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default={vec2:r.vec2,vec3:r.vec3,vec4:r.vec4,glMatrix:r.glMatrix,mat2d:r.mat2d,mat3:r.mat3,mat4:r.mat4,quat:r.quat}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t,n,o,i){r(this,e),this._left=t,this._bottom=n,this._width=o,this._height=i}return o(e,null,[{key:"equals",value:function(e,t){return e.Left===t.Left&&e.Right===t.Right&&e.Top===t.Top&&e.Bottom===t.Bottom}},{key:"edgeSizeEquals",value:function(e,t){return e.Width===t.Width&&e.Height===t.Height}}]),o(e,[{key:"contains",value:function(e,t){var n=void 0;return e instanceof a.default?(n=e.X,t=e.Y):n=e,this.Left<=n&&this.Right>=n&&this.Top<=t&&this.Bottom>=t}},{key:"toLocal",value:function(e,t){var n=void 0;return e instanceof a.default?(n=e.X,t=e.Y):n=e,n-=this.Left,t-=this.Bottom,e instanceof a.default?new a.default(n,t):[n,t]}},{key:"toLocalNormalized",value:function(e,t){if(e instanceof a.default){var n=this.toLocal(e);return new a.default(n.X/this.Width,n.Y/this.Height)}var r=this.toLocal(e,t);return[r[0]/this.Width,r[1]/this.Height]}},{key:"toAbsolute",value:function(e,t){return e instanceof a.default?new a.default(e.X+this.Left,e.Y+this.Top):[e+this.Left,t+this.Top]}},{key:"toString",value:function(){return"Rectangle("+this.Left+","+this.Top+"-"+this.Right+","+this.Bottom+")"}},{key:"Left",get:function(){return this._left}},{key:"Right",get:function(){return this.Left+this.Width}},{key:"Top",get:function(){return this._bottom+this._height}},{key:"Bottom",get:function(){return this._bottom}},{key:"Width",get:function(){return this._width}},{key:"Height",get:function(){return this._height}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=r(o),a=n(20),u=r(a),s=n(21),c=r(s),l=n(22),f=r(l),h=n(17),d=r(h),p=n(14),v=r(p),y=n(15),m=r(y),g=n(16),_=r(g),b=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})};t.default=function(){i.default.register(function(){return b(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i.default.registerConverter("Vector2",u.default),i.default.registerConverter("Vector3",c.default),i.default.registerConverter("Vector4",f.default),i.default.registerConverter("Color3",m.default),i.default.registerConverter("Color4",_.default),i.default.registerConverter("Rotation3",d.default),i.default.registerConverter("Angle2D",v.default);case 7:case"end":return e.stop()}},e,this)}))})}}])})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=36)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if("string"==typeof e){var t=new s.default(c.queryRootNodes(e)),n=t.queryFunc.bind(t);return Object.setPrototypeOf(n,t),n}if("function"!=typeof e){var r=new s.default(e),o=r.queryFunc.bind(r);return Object.setPrototypeOf(o,r),o}c.callInitializedAlready?e():c.initializedEventHandler.push(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),a=r(i),u=n(19),s=r(u),c=new a.default;Object.setPrototypeOf(o,c),t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),u=r(a),s=n(4),c=r(s),l=function(){function e(t,n){o(this,e),"string"==typeof t&&(t=t.split(".")),n?(this._ns=u.default.defineByArray(t),this._name=n):(this._name=t[t.length-1],t=t.slice(0,t.length-1),this._ns=u.default.defineByArray(t)),this._fqn=this.ns.hierarchy.concat([this.name]).join("."),e._instances[this._fqn]=this,e._map.add(t.concat([this._name]))}return i(e,[{key:"toString",value:function(){return this.fqn}},{key:"ns",get:function(){return this._ns}},{key:"name",get:function(){return this._name}},{key:"fqn",get:function(){return this._fqn}}],[{key:"fromFQN",value:function(t,n){t=e._ensureQNTobeArray(t,n).join(".");var r=e._instances[t];return r||new e(t.split("."))}},{key:"guess",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._from(n)}},{key:"clear",value:function(){e._instances={},e._mapBackingField=new c.default}},{key:"_from",value:function(t){var n=t.join("."),r=e._instances[n];return r||e.fromFQN(e._map.resolve(u.default.defineByArray(t)))}},{key:"_ensureQNTobeArray",value:function(t,n){return n?e._ensureQNTobeArray(t.extend(n)):"string"==typeof t?t.split("."):Array.isArray(t)?t:t.hierarchy}},{key:"_map",get:function(){return void 0===this._mapBackingField&&(this._mapBackingField=new c.default),this._mapBackingField}}]),e}();t.default=l,l._instances={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=r(a),s=n(1),c=r(s),l=n(6),f=r(l),h=n(16),d=r(h),p=function(){function e(){o(this,e)}return i(e,null,[{key:"tobeComponentIdentity",value:function(t){if("function"==typeof t){var n=d.default.ctorMap.find(function(e){return e.ctor===t});if(!n)throw new Error("Specified constructor have not registered to current context.");t=n.name}else t=e.tobeNSIdentity(t);return t}},{key:"tobeString",value:function(e){if("string"==typeof e)return e;if("number"==typeof e)return e.toString();throw new Error("Specified argument can not convert into string")}},{key:"tobeNumber",value:function(e){if("string"==typeof e)return parseInt(e,10);if("number"==typeof e)return e;throw new Error("specified argument can not be converted into number")}},{key:"tobeNSIdentity",value:function(e){if(!e)throw Error("argument can not be null or undefined.");return"string"==typeof e?c.default.guess(e):e}},{key:"tobeNSIdentityArray",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push(this.tobeNSIdentity(e[n]));return t}},{key:"tobeNSDictionary",value:function(e){if(!e)return new f.default;if(e instanceof f.default)return e;var t=new f.default;for(var n in e)t.set(c.default.guess(n),e[n]);return t}},{key:"tobeMessage",value:function(e){return e.startsWith("$")?e.startsWith("$$")?e:"$"+e:"$$"+e}},{key:"tobeComponentConstructor",value:function(e){if("function"==typeof e)return e;var t=u.default.componentDeclarations.get(e);return t?t.ctor:null}},{key:"tobeFQN",value:function(t){return"string"==typeof t?e.checkFQNString(t)?t.substring(1):null:t.fqn}},{key:"checkFQNString",value:function(e){return e.startsWith("_")}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){r(this,e)}return o(e,null,[{key:"w",value:function(e){a.default.debug&&console.warn(e)}},{key:"isCamelCase",value:function(e){return/^[A-Z][a-zA-Z0-9]*$/.test(e)}},{key:"isSnakeCase",value:function(e){return/^[a-z0-9\-]+$/.test(e)}},{key:"flat",value:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new Array(t);t=0;for(var o=0;o<e.length;o++)for(var i=e[o],a=0;a<i.length;a++)r[t]=i[a],t++;return r}},{key:"flatMap",value:function(t,n){for(var r=new Array(t.length),o=0;o<t.length;o++)r[o]=n(t[o]);return e.flat(r)}},{key:"sum",value:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}},{key:"remove",value:function(e,t){for(var n=-1,r=0;r<e.length;r++)if(t===e[r]){n=r;break}return!(n<0)&&(e.splice(n,1),!0)}},{key:"checkOverlap",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(-1!==t.indexOf(r))return!1;t.push(r)}return!0}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e),this._nameMap={},this._FQNSet=new Set,this._isTerminal=!1}return i(e,[{key:"add",value:function(e){if(!e)throw new Error("Argument ns is null or undefined.");return e instanceof c.default&&(e=e.ns.hierarchy.concat([e.name])),0!==e.length&&this._add(e)}},{key:"get",value:function(e){if("string"==typeof e)return this.get(u.default.defineByArray(e.split(".")));var t=e.hierarchy,n=t[t.length-1];if(!this._nameMap[n])return[];for(var r=this._nameMap[n]._get(t.slice(0,t.length-1)),o=[],i=0;i<r.length;i++){var a=r[i];a.push(n),o.push(a.join("."))}return o}},{key:"resolve",value:function(e){if("string"==typeof e)return this.resolve(u.default.defineByArray(e.split(".")));var t=this.get(e);if(0===t.length)throw new Error(e+" is not found in this context.");if(t.length>1)throw new Error(e+" is ambiguous in this context. ["+t.join(", ")+"]");return t[0]}},{key:"has",value:function(e){return!!this._nameMap[e]}},{key:"remove",value:function(e){var t=e.fqn.split(".");this._remove(t)}},{key:"foreach",value:function(e){this._FQNSet.forEach(e)}},{key:"_remove",value:function(e){if(1===e.length)this._nameMap[e[0]]._isTerminal=!1;else{this._nameMap[e[e.length-1]]._remove(e.slice(0,e.length-1))}}},{key:"_get",value:function(e){var t=[];if(0===e.length){if(0===this.count)return[[]];for(var n in this._nameMap)for(var r=this._nameMap[n]._get([]),o=0;o<r.length;o++){var i=r[o];i.push(n),t.push(i)}return this._isTerminal&&t.push([]),t}var a=e[e.length-1];for(var u in this._nameMap){var s=u===a?this._nameMap[u]._get(e.slice(0,e.length-1)):this._nameMap[u]._get(e);if(0!==s.length)for(var c=0;c<s.length;c++){var l=s[c];l.push(u),t.push(l)}}return t}},{key:"_add",value:function(t){var n=t.join(".");if(this._FQNSet.has(n))return!1;this._FQNSet.add(n),this._nameMap[t[t.length-1]]||(this._nameMap[t[t.length-1]]=new e);var r=t.slice(0,t.length-1);return 0===r.length?this._nameMap[t[t.length-1]]._isTerminal=!0:this._nameMap[t[t.length-1]].add(r),!0}},{key:"count",get:function(){return this._FQNSet.size}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"defaultNamespace",get:function(){return"grimoirejs"}},{key:"x_gr_id",get:function(){return"x-gr-id"}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),s=n(4),c=r(s),l=n(7),f=r(l),h=n(2),d=r(h),p=function(){function e(){o(this,e),this._fqnObjectMap={},this._idResolver=new c.default}return i(e,[{key:"set",value:function(e,t){this._fqnObjectMap[e.fqn]=t,this._idResolver.add(e)}},{key:"delete",value:function(e){return void 0!==this._fqnObjectMap[e.fqn]&&(delete this._fqnObjectMap[e.fqn],this._idResolver.remove(e),!0)}},{key:"get",value:function(e){if(!e)throw new Error("NSDictionary.get() can not recieve args null or undefined.");if("string"==typeof e){var t=d.default.tobeFQN(e);if(t)return this._fqnObjectMap[t];var n=e.split("."),r=this._idResolver.get(f.default.defineByArray(n));if(0===r.length)return null;if(1===r.length)return this._fqnObjectMap[r[0]];throw new Error("Specified tag name "+e+" is ambiguous to identify.")}return e instanceof u.default?this._fqnObjectMap[e.fqn]:e.namespaceURI?this.get(e.namespaceURI+"."+e.localName):this.get(e.localName)}},{key:"isAmbiguous",value:function(e){return this._idResolver.get(f.default.defineByArray(e.split("."))).length>1}},{key:"has",value:function(e){return 0!==this._idResolver.get(f.default.defineByArray(e.split("."))).length}},{key:"pushDictionary",value:function(e){var t=this;return e.forEach(function(e,n){var r=u.default.fromFQN(n);t.set(r,e)}),this}},{key:"hasMatchingValue",value:function(e){var t=new c.default;t.add(e);var n=void 0;for(var r in this._fqnObjectMap){if(1===t.get(f.default.defineByArray(r.split("."))).length){if(void 0!==n)throw new Error("matching attribute is ambiguous. It has following possibilities "+n+" "+r);n=r}}if(n)return this._fqnObjectMap[n]}},{key:"toArray",value:function(){var e=this,t=[];return Object.keys(this._fqnObjectMap).forEach(function(n){t.push(e._fqnObjectMap[n])}),t}},{key:"clone",value:function(){return(new e).pushDictionary(this)}},{key:"forEach",value:function(e){var t=this;return Object.keys(this._fqnObjectMap).forEach(function(n){e(t._fqnObjectMap[n],n)}),this}},{key:"map",value:function(t){var n=new e;return this.forEach(function(e,r){var o=u.default.fromFQN(r);n.set(o,t(e,r))}),n}},{key:"clear",value:function(){this._fqnObjectMap={},this._idResolver=new c.default}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),s=n(3),c=r(s),l=function(){function e(t){o(this,e),this._ns=t}return i(e,[{key:"extend",value:function(t){return new e(this._ns.concat([t]))}},{key:"for",value:function(e){return u.default.fromFQN(this,e)}},{key:"toString",value:function(){return this.qualifiedName}},{key:"hierarchy",get:function(){return this._ns}},{key:"qualifiedName",get:function(){return this._ns.join(".")}}],[{key:"define",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.defineByArray(n)}},{key:"defineByArray",value:function(t){return new e(c.default.flat(t.map(function(e){return e.split(".")})))}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),c=r(s),l=n(5),f=r(l),h=n(15),d=r(h),p=n(17),v=r(p),y=n(13),m=r(y),g=n(2),_=r(g),b=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isDefaultComponent=!1,e.disposed=!1,e._enabled=!0,e._awaked=!1,e._handlers=[],e._additionalAttributesNames=[],e._initializedInfo=null,e}return a(t,e),u(t,[{key:"setAttribute",value:function(e,t){"string"==typeof e&&_.default.checkFQNString(e)&&(e=this.name.fqn+"."+e);var n=this.attributes.get(e);n&&(n.Value=t)}},{key:"getAttribute",value:function(e){"string"==typeof e&&_.default.checkFQNString(e)&&(e=this.name.fqn+"."+e);var t=this.getAttributeRaw(e);if(t)return t.Value;throw new Error("attribute "+e+" is not defined in "+this.name.fqn)}},{key:"getAttributeRaw",value:function(e){return"string"==typeof e&&_.default.checkFQNString(e)&&(e=this.name.fqn+"."+e),this.attributes.get(e)}},{key:"addEnabledObserver",value:function(e){this._handlers.push(e)}},{key:"removeEnabledObserver",value:function(e){return c.default.remove(this._handlers,e)}},{key:"resolveDefaultAttributes",value:function(e){var t=e||{};if(this.isDefaultComponent)this.attributes.forEach(function(e){return e.resolveDefaultValue(t)});else{var n=d.default.getAttributes(this.element);for(var r in n)f.default.x_gr_id;this.attributes.forEach(function(e){return e.resolveDefaultValue(n)})}}},{key:"dispose",value:function(){this.node.removeComponent(this)}},{key:"awake",value:function(){if(this._awaked)return!1;this._awaked=!0;var e=this.$$awake;return"function"==typeof e&&e(),!0}},{key:"initialized",value:function(e){if(this._initializedInfo!==e){this._initializedInfo=e;var t=this.$$initialized;"function"==typeof t&&t(e)}}},{key:"__addAtribute",value:function(e,t){console.warn(this.name.fqn+" is using '__addAtribute()'.\nthis method is deprecated because typo.\nplease use '__addAttribute() instead of.'"),this.__addAttribute(e,t)}},{key:"__addAttribute",value:function(e,t){if(!t)throw new Error("can not add attribute null or undefined.");var n=v.default.generateAttributeForComponent(e,t,this);if(this.node.addAttribute(n),this.isDefaultComponent)n.resolveDefaultValue(d.default.getAttributes(this.node.element));else{var r=d.default.getAttributes(this.element);n.resolveDefaultValue(r)}return this._additionalAttributesNames.push(n.name),n}},{key:"__removeAttributes",value:function(e){var t=this;if(e){var n=this._additionalAttributesNames.findIndex(function(t){return t.name===e});if(n<0)throw new Error("can not remove attributes :"+e);var r=this._additionalAttributesNames[n];this.node.removeAttribute(this.attributes.get(r)),this.attributes.delete(r),this._additionalAttributesNames.splice(n,1)}else{this._additionalAttributesNames.concat().forEach(function(e){t.__removeAttributes(e.name)})}}},{key:"__bindAttributes",value:function(){this.attributes.forEach(function(e){var t=e.name.name;e.boundTo(t)})}},{key:"enabled",get:function(){return this._enabled},set:function(e){var t=this;this._enabled!==e&&(this._enabled=e,this._handlers.forEach(function(e){e(t)}))}},{key:"companion",get:function(){return this.node.companion}},{key:"tree",get:function(){return this.node.tree}},{key:"isActive",get:function(){return this.enabled&&!!this.node&&this.node.isActive}}]),t}(m.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),u=r(a),s=n(0),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:"parse",value:function(t,n){var r=e._createNode(t),o=t.childNodes,i=[];if(o&&0!==o.length){for(var a=[],u=0;u<o.length;u++){var s=o.item(u);e._isElement(s)?this._isComponentsTag(s)?(e._parseComponents(r,s),a.push(s)):i.push(s):a.push(s)}for(var c=0;c<a.length;c++)t.removeChild(a[c])}return n&&n.addChild(r,null,!1),i.forEach(function(t){e.parse(t,r)}),r}},{key:"_createNode",value:function(e){var t=e.localName,n=c.default.nodeDeclarations.get(e);if(!n)throw new Error('Tag "'+t+'" is not found.');return new u.default(n,e)}},{key:"_parseComponents",value:function(t,n){var r=n.childNodes;if(r)for(var o=0;o<r.length;o++){var i=r.item(o);if(e._isElement(i)){var a=c.default.componentDeclarations.get(i);if(!a)throw new Error("Component "+i.tagName+" is not found.");var u=a.generateInstance(i);t._addComponentDirectly(u,!1)}}}},{key:"_isElement",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"_isComponentsTag",value:function(e){return/\.COMPONENTS$/im.test(e.nodeName)}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(20),c=r(s),l=n(3),f=r(l),h=n(5),d=r(h),p=n(9),v=r(p),y=n(11),m=r(y),g=n(0),_=r(g),b=n(12),w=r(b),M=n(15),E=r(M),x=n(6),S=r(x),O=n(2),R=r(O),k=n(22),C=r(k),P=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.children=[],r._parent=null,r._root=null,r._tree=(0,_.default)([r]),r._companion=new S.default,r._isActive=!1,r._messageCache={},r._deleted=!1,r._mounted=!1,r._enabled=!0,r._defaultValueResolved=!1,r._initializedInfo=null,!e)throw new Error("recipe must not be null");return e.resolvedDependency||e.resolveDependency(),r.nodeDeclaration=e,r.element=n||document.createElementNS(e.name.ns.qualifiedName,e.name.name),r.componentsElement=document.createElement("COMPONENTS"),r._root=r,r._components=[],r._attributeManager=new c.default(e.name.name),r.element.setAttribute(d.default.x_gr_id,r.id),e.defaultComponentsActual.forEach(function(e){r.addComponent(e,null,!0)}),_.default.nodeDictionary[r.id]=r,r}return a(t,e),u(t,[{key:"getChildrenByClass",value:function(e){for(var n=this.element.getElementsByClassName(e),r=new Array(n.length),o=0;o<n.length;o++)r[o]=t.fromElement(n.item(o));return r}},{key:"queryChildren",value:function(e){for(var n=this.element.querySelectorAll(e),r=new Array(n.length),o=0;o<n.length;o++)r[o]=t.fromElement(n.item(o));return r}},{key:"getChildrenByNodeName",value:function(e){for(var n=this.element.getElementsByTagName(e),r=new Array(n.length),o=0;o<n.length;o++)r[o]=t.fromElement(n.item(o));return r}},{key:"remove",value:function(){this.children.forEach(function(e){e.remove()}),this._sendMessageForced("$$dispose"),this.removeAllListeners(),delete _.default.nodeDictionary[this.id],this._parent?this._parent.detachChild(this):(this.setMounted(!1),this.element.parentNode&&this.element.parentNode.removeChild(this.element)),this._deleted=!0}},{key:"sendMessage",value:function(e,t){return!!this.isActive&&(e=R.default.tobeMessage(e),this._sendMessage(e,t),!0)}},{key:"broadcastMessage",value:function(e,t,n){if(this.enabled&&this.mounted)if("number"==typeof e){var r=e,o=R.default.tobeMessage(t),i=n;this._broadcastMessage(o,i,r)}else{var a=R.default.tobeMessage(e),u=t;this._broadcastMessage(a,u,-1)}}},{key:"append",value:function(e){var t=this,n=m.default.parseXML(e),r=[];return n.forEach(function(e){var n=v.default.parse(e);t.addChild(n),r.push(n)}),r}},{key:"addChildByName",value:function(e,n){var r=_.default.nodeDeclarations.get(e),o=new t(r);if(n)for(var i in n)o.setAttribute(i,n[i]);return this.addChild(o),o}},{key:"addChild",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e._deleted)throw new Error("deleted node never use.");if(null!=t&&"number"!=typeof t)throw new Error("insert index should be number or null or undefined.");var r=null==t?this.children.length:t;if(this.children.splice(r,0,e),e._parent=this,e._tree=this._tree,e._companion=this._companion,n){var o=this.element[E.default.getNodeListIndexByElementIndex(this.element,r)];this.element.insertBefore(e.element,o)}this.mounted&&e.setMounted(!0),this._initializedInfo&&e.sendInitializedMessage(this._initializedInfo)}},{key:"callRecursively",value:function(e){return this._callRecursively(e,function(e){return e.children})}},{key:"removeChild",value:function(e){var t=this.detachChild(e);t&&t.remove()}},{key:"detachChild",value:function(e){var t=this.children.indexOf(e);return-1===t?null:(e.setMounted(!1),e._parent=null,this.children.splice(t,1),this.element.removeChild(e.element),e)}},{key:"detach",value:function(){if(!this.parent)throw new Error("root Node cannot be detached.");this.parent.detachChild(this)}},{key:"getAttribute",value:function(e){return this._attributeManager.getAttribute(e)}},{key:"getAttributeRaw",value:function(e){return this._attributeManager.getAttributeRaw(e)}},{key:"setAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._attributeManager.guess(e);0===r.length&&this._attributeManager.setAttribute("string"==typeof e?e:e.fqn,t);for(var o=0;o<r.length;o++){var i=r[o];if(!n&&this.isFreezeAttribute(i.fqn))throw new Error("attribute "+i.fqn+" can not set. Attribute is frozen. ");this._attributeManager.setAttribute(i.fqn,t)}}},{key:"addAttribute",value:function(e){return this._attributeManager.addAttribute(e)}},{key:"setMounted",value:function(e){if(this._mounted!==e)if(e){this._mount();for(var t=0;t<this.children.length;t++)this.children[t].setMounted(e)}else{for(var n=0;n<this.children.length;n++)this.children[n].setMounted(e);this._sendMessageForced("unmount"),this._isActive=!1,this._tree=(0,_.default)([this]),this._companion=new S.default,this._mounted=e}}},{key:"removeAttribute",value:function(e){return this._attributeManager.removeAttribute(e)}},{key:"addComponent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=R.default.tobeComponentIdentity(e);var r=_.default.componentDeclarations.get(e);if(!r)throw new Error("component '"+R.default.tobeNSIdentity(e).fqn+"' is not defined.");var o=r.generateInstance();t=t||{};for(var i in t)o.setAttribute(i,t[i]);return this._addComponentDirectly(o,n),o}},{key:"_addComponentDirectly",value:function(e,t){var n=this;if(e.node||e.disposed)throw new Error("component never change attached node");this._messageCache={},e.isDefaultComponent=!!t,e.node=this;var r=this.componentsElement[E.default.getNodeListIndexByElementIndex(this.componentsElement,this._components.length)];this.componentsElement.insertBefore(e.element,r);for(var o=[],i=e;i;)o=o.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);o.filter(function(t){return t.startsWith("$")&&"function"==typeof e[t]}).forEach(function(t){e["$"+t]=e[t].bind(e)}),this._components.push(e),e.attributes.forEach(function(e){return n.addAttribute(e)}),this._defaultValueResolved&&e.attributes.forEach(function(e){return e.resolveDefaultValue(E.default.getAttributes(n.element))}),this._mounted&&(e.resolveDefaultAttributes(null),this._sendMessageForcedTo(e,"awake"),this._sendMessageForcedTo(e,"mount")),this._initializedInfo&&e.initialized(this._initializedInfo)}},{key:"removeComponents",value:function(e){var t=this,n=!1,r=[];e=R.default.tobeComponentIdentity(e);for(var o=0;o<this._components.length;o++){var i=this._components[o];i.name.fqn===e.fqn&&r.push(i)}return r.forEach(function(e){var r=t.removeComponent(e);n=n||r}),n}},{key:"removeComponent",value:function(e){var t=this._components.indexOf(e);return-1!==t&&(this._sendMessageForcedTo(e,"unmount"),this._sendMessageForcedTo(e,"dispose"),this.componentsElement.removeChild(e.element),this._components.splice(t,1),this._messageCache={},delete e.node,e.disposed=!0,delete _.default.componentDictionary[e.id],!0)}},{key:"getComponents",value:function(e){if(e){var t=R.default.tobeComponentConstructor(e);return t?this._components.filter(function(e){return e instanceof t}):[]}return this._components}},{key:"getComponent",value:function(e){if(e){if("function"==typeof e)return this._components.find(function(t){return t instanceof e})||null;var t=R.default.tobeComponentConstructor(e);if(!t)throw new Error("component "+e+" is not exist");return this.getComponent(t)}throw new Error("name must not be null or undefined")}},{key:"getComponentsInChildren",value:function(e){if(null==e)throw new Error("getComponentsInChildren recieve null or undefined");return this.callRecursively(function(t){return t.getComponent(e)}).filter(function(e){return!!e})}},{key:"getComponentInAncestor",value:function(e){if(null==e)throw new Error("getComponentInAncestor recieve null or undefined");return this.parent?this.parent._getComponentInAncestor(e):null}},{key:"sendInitializedMessage",value:function(e){if(this._initializedInfo!==e){for(var t=this._components.concat(),n=0;n<t.length;n++)t[n].initialized(e);this._initializedInfo=e;this.children.concat().forEach(function(t){t.sendInitializedMessage(e)})}}},{key:"resolveAttributesValue",value:function(){this._defaultValueResolved=!0;var e=E.default.getAttributes(this.element);for(var t in e)if(t!==d.default.x_gr_id&&this.isFreezeAttribute(t))throw new Error("attribute "+t+" can not change from GOML. Attribute is frozen. ");this._components.forEach(function(t){t.resolveDefaultAttributes(e)})}},{key:"isFreezeAttribute",value:function(e){return!!this.nodeDeclaration.freezeAttributes.toArray().find(function(t){return e===t.fqn})}},{key:"notifyActivenessUpdate",value:function(e){this.isActive!==e&&(this._isActive=e,this.children.forEach(function(t){t.notifyActivenessUpdate(e&&t.enabled)}))}},{key:"watch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._attributeManager.watch(e,t,n)}},{key:"toString",value:function(){var e=this.name.fqn,t=this.getAttribute("id");null!==t&&(e+=" id: "+t);var n=this.getAttribute("class");return null!==n&&(e+=" class: "+n),e}},{key:"toStructualString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.parent?"\n"+this.parent._openTreeString()+this._currentSiblingsString(2*this._layer,"<"+this.toString()+"/>",!0,e)+this.parent._closeTreeString():"\n"+this._currentSiblingsString(0,"<"+this.toString()+"/>",!0,e)}},{key:"_openTreeString",value:function(){for(var e="",t=0;t<2*this._layer;t++)e+=" ";var n="",r="";return this.parent&&(n=this.parent._openTreeString(),0!==this.index&&(r=e+"...\n")),""+n+r+e+"<"+this.toString()+">\n"}},{key:"_closeTreeString",value:function(){for(var e="",t=0;t<2*this._layer;t++)e+=" ";var n="",r="";return this.parent&&(n=this.parent._closeTreeString(),this.index!==this.parent.children.length-1&&(r=e+"...\n")),e+"</"+this.name.fqn+">\n"+r+n}},{key:"_currentSiblingsString",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="",i=0;i<e;i++)o+=" ";var a="";if(n){a=""+o;for(var u=0;u<t.length;u++)a+="^"}var s=[];if(this.parent)for(var c=!1,l=0;l<this.parent.children.length;l++)l===this.index?(s.push(""+o+t+"・・・("+l+")"),n&&s.push(a+r),c=!1):l>0&&this.index-1>l||l>this.index+1&&this.parent.children.length-1>l?c||(s.push(o+"..."),c=!0):s.push(o+"<"+this.parent.children[l].toString()+"/>・・・("+l+")");else s.push(""+o+t),n&&s.push(a+r);return s.join("\n")+"\n"}},{key:"_sendMessage",value:function(e,t){void 0===this._messageCache[e]&&(this._messageCache[e]=this._components.filter(function(t){return"function"==typeof t[e]}));for(var n=this._messageCache[e],r=0;r<n.length;r++)n[r].disposed||this._sendMessageToComponent(n[r],e,t)}},{key:"_broadcastMessage",value:function(e,t,n){if(this.isActive&&(this._sendMessage(e,t),0!==n))for(var r=n-1,o=0;o<this.children.length;o++)this.children[o]._broadcastMessage(e,t,r)}},{key:"_getComponentInAncestor",value:function(e){var t=this.getComponent(e);return t||(this.parent?this.parent._getComponentInAncestor(e):null)}},{key:"_sendMessageToComponent",value:function(e,t,n){if(!e.enabled)return!1;var r=e[t];if("function"==typeof r){try{r(n)}catch(n){var o=new C.default(this,e,t.substr(1),n);if(this.emit("messageerror",o),!o.handled&&(_.default.emit("messageerror",o),!o.handled))throw o}return!0}return!1}},{key:"_sendMessageForced",value:function(e){for(var t=this._components.concat(),n=0;n<t.length;n++){var r=t[n];r.disposed||this._sendMessageForcedTo(r,e)}}},{key:"_sendMessageForcedTo",value:function(e,t){t=R.default.tobeMessage(t);var n=e[t];"function"==typeof n&&n()}},{key:"_mount",value:function(){this._mounted=!0;for(var e=this._components.concat(),t=0;t<e.length;t++){var n=e[t];n.disposed||(n.awake(),this._sendMessageForcedTo(n,"$$mount"))}}},{key:"_callRecursively",value:function(e,t){var n=e(this),r=t(this),o=r.map(function(t){return t.callRecursively(e)}),i=f.default.flat(o);return i.unshift(n),i}},{key:"name",get:function(){return this.nodeDeclaration.name}},{key:"tree",get:function(){if(!this.mounted)throw new Error("this node is not mounted");return this._tree}},{key:"deleted",get:function(){return this._deleted}},{key:"isActive",get:function(){return this._isActive}},{key:"enabled",get:function(){return this._enabled},set:function(e){this.setAttribute("enabled",e)}},{key:"companion",get:function(){return this._companion}},{key:"parent",get:function(){return this._parent}},{key:"hasChildren",get:function(){return this.children.length>0}},{key:"mounted",get:function(){return this._mounted}},{key:"index",get:function(){return this._parent?this._parent.children.indexOf(this):-1}},{key:"_layer",get:function(){return this.parent?this.parent._layer+1:1}}],[{key:"fromElement",value:function(e){var t=e.getAttribute(d.default.x_gr_id);if(t)return _.default.nodeDictionary[t];throw new Error("element has not 'x-gr-id'")}}]),t}(w.default);t.default=P},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"parseXML",value:function(t,n){var r=e._parser.parseFromString(t,"text/xml");if(!r||r.getElementsByTagName("parsererror").length>0){var o=(new XMLSerializer).serializeToString(r);throw new Error("Error parsing XML: "+o)}if(n&&r.documentElement.tagName.toUpperCase()!==n.toUpperCase())throw new Error("Specified document is invalid.");return[r.documentElement]}},{key:"getElements",value:function(e,t){for(var n=[],r=e.getElementsByTagName(t),o=0;o<r.length;o++)n.push(r.item(o));return n}},{key:"getSingleElement",value:function(t,n,r){var o=e.getElements(t,n);if(1===o.length)return o[0];if(0===o.length){if(r)throw new Error("The mandatory element "+n+" was required, but not found");return null}throw new Error("The element "+n+" requires to exist in single. But there is "+o.length+" count of elements")}},{key:"getAttribute",value:function(e,t,n){var r=e.attributes.getNamedItem(t);if(r)return r.value;if(n)throw new Error("The mandatory attribute "+t+" was required, but it was not found");return null}},{key:"getAttributeFloat",value:function(t,n,r){var o=e.getAttribute(t,n,r);return o?parseFloat(o):null}},{key:"getAttributeInt",value:function(t,n,r){var o=e.getAttribute(t,n,r);return o?parseInt(o,10):null}},{key:"getChildElements",value:function(e){for(var t=e.childNodes,n=[],r=0;r<t.length;r++)t.item(r)instanceof Element&&n.push(t.item(r));return n}},{key:"getAttributes",value:function(e,t){for(var n={},r=e.attributes,o=0;o<r.length;o++){var i=r.item(o);t&&i.namespaceURI!==t||(n[i.localName]=i.value)}return n}}]),e}();i._parser=new DOMParser,t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(37),u=n(13),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.EventEmitter.call(e),e}return i(t,e),t}(s.default);!function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype[n]=t.prototype[n]})})}(c,[a.EventEmitter]),t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.id=e.getUniqueRandom(10)}return o(e,null,[{key:"getUniqueRandom",value:function(e){return Math.random().toString(36).slice(-e)}}]),o(e,[{key:"toString",value:function(){return this.getTypeName()}},{key:"getTypeName",value:function(){var e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=r(a),s=n(9),c=r(s),l=n(11),f=r(l),h=n(23),d=r(h),p=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},v=function(){function e(){o(this,e)}return i(e,null,[{key:"loadFromScriptTag",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getAttribute("src"),r=void 0,!n){t.next=10;break}return o=new XMLHttpRequest,o.open("GET",n),t.next=7,d.default.send(o);case 7:r=o.responseText,t.next=11;break;case 10:r=e.text;case 11:i=f.default.parseXML(r,"GOML"),a=c.default.parse(i[0]),u.default.addRootNode(e,a);case 14:case"end":return t.stop()}},t,this)}))}},{key:"loadFromQuery",value:function(t){return p(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(r=document.querySelectorAll(t),o=[],i=[],a=0;a<r.length;a++)s=r.item(a),i.push(s),o[a]=e.loadFromScriptTag(s);return 0===o.length&&u.default.debug&&console.warn("There was no goml file detected. Have you specified `type='text/goml'` to the script tag?"),n.next=7,Promise.all(o);case 7:e.initializedEventHandlers.forEach(function(e){e()}),this.callInitializedAlready=!0;case 9:case"end":return n.stop()}},n,this)}))}},{key:"loadForPage",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadFromQuery('script[type="text/goml"]');case 2:case"end":return t.stop()}},t,this)}))}}]),e}();v.callInitializedAlready=!1,v.initializedEventHandlers=[],t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"getNodeListIndexByElementIndex",value:function(e,t){var n=Array.prototype.slice.call(e.childNodes),r=n.filter(function(e){return 1===e.nodeType});return t=t<0?r.length+t:t,n.indexOf(r[t])}},{key:"getAttributes",value:function(e){for(var t={},n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);if(!o.name.startsWith("xmlns")){t[o.namespaceURI?o.namespaceURI+"."+o.localName:o.localName]=o.value}}return t}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),u=r(a),s=n(0),c=r(s),l=n(17),f=r(l),h=n(6),d=r(h),p=n(1),v=r(p),y=n(4),m=r(y),g=n(8),_=r(g),b=n(2),w=r(b),M=function(){function e(t,n,r){if(o(this,e),this.name=t,this._ctorOrObj=n,this.idResolver=new m.default,this._resolvedDependency=!1,!r)return void this.resolveDependency();r instanceof v.default||"string"==typeof r?this._super=r:this.superComponent=r}return i(e,[{key:"generateInstance",value:function(e){this.isDependenyResolved||this.resolveDependency(),e=e||document.createElementNS(this.name.ns.qualifiedName,this.name.name);var t=new this.ctor;e.setAttribute(u.default.x_gr_id,t.id),c.default.componentDictionary[t.id]=t,t.name=this.name,t.element=e,t.attributes=new d.default;for(var n in this.attributes)f.default.generateAttributeForComponent(n,this.attributes[n],t);return t}},{key:"resolveDependency",value:function(){if(this._resolvedDependency)return!1;var t={},n=void 0;if(this._super||this.superComponent){var r=this._super?w.default.tobeNSIdentity(this._super):this.superComponent.name;n=c.default.componentDeclarations.get(r),n.resolveDependency();for(var o in n.attributes)t[o]=n.attributes[o],this.idResolver.add(v.default.fromFQN(this.name.fqn+"."+o));this.superComponent=n.ctor}this.ctor=this._ensureTobeComponentConstructor(this.name,this._ctorOrObj,n?n.ctor:void 0);for(var i in this.ctor.attributes)t[i]=this.ctor.attributes[i],this.idResolver.add(v.default.fromFQN(this.name.fqn+"."+i));return this.attributes=t,e.ctorMap.push({ctor:this._ctorOrObj,name:this.name}),this._resolvedDependency=!0}},{key:"_ensureTobeComponentConstructor",value:function(e,t,n){if("function"==typeof t){var r=this._extractInheritsAttributes(t);if(n){var o=function(){n.call(this),t.call(this)};return o.prototype=this._clonePrototypeChain(t.prototype,n.prototype),o.prototype.name=e,o.attributes=r,o}return t.prototype.name=e,t.attributes=r,t}if(n&&!(n.prototype instanceof _.default)&&n!==_.default)throw new Error("Base component comstructor must extends Compoent class.");var i=n||_.default,a=function(){i.call(this)};return t.__proto__=i.prototype,a.prototype=t,a.attributes=t.attributes,a.prototype.name=e,a}},{key:"_extractInheritsAttributes",value:function(e){for(var t=[];e&&e!==_.default;)t.push(e.attributes),e=e.prototype.__proto__.constructor;for(var n={},r=t.length-1;r>=0;r--)for(var o in t[r])n[o]=t[r][o];return n}},{key:"_clonePrototypeChain",value:function(e,t){for(var n=[],r=e;;){if(r.constructor===_.default)break;n.push(r),r=Object.getPrototypeOf(r)}n.reverse(),n.pop();for(var o=t,i=0;i<n.length;i++){var a=Object.getOwnPropertyDescriptors(n[0]);o=Object.create(o,a)}return e.__proto__=o,e}},{key:"isDependenyResolved",get:function(){return this._resolvedDependency}}]),e}();t.default=M,M.ctorMap=[]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),u=r(a),s=n(1),c=r(s),l=n(4),f=r(l),h=n(0),d=r(h),p=function(){function e(){o(this,e),this.convertContext={},this._observers=[],this._ignoireActivenessObservers=[]}return i(e,[{key:"watch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this._ignoireActivenessObservers.push(e):this._observers.push(e),t&&e(this.Value,void 0,this)}},{key:"unwatch",value:function(e){var t=this._observers.findIndex(function(t){return t===e});return t>=0?void this._observers.splice(t,1):(t=this._ignoireActivenessObservers.findIndex(function(t){return t===e}),t>=0?void this._ignoireActivenessObservers.splice(t,1):void 0)}},{key:"boundTo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.component;if(n[e]&&console.warn("component field "+e+" is already defined."),this.converter.lazy)Object.defineProperty(n,e,{get:function(){return t.Value},set:function(e){t.Value=e},enumerable:!0,configurable:!0});else{var r=void 0;this.watch(function(e){r=e},!0),Object.defineProperty(n,e,{get:function(){return r},set:function(e){t.Value=e},enumerable:!0,configurable:!0})}}},{key:"resolveDefaultValue",value:function(e){if(void 0===this._value){var t=new f.default;t.add(this.name);var n=void 0;for(var r in e)if(u.default.checkFQNString(r)){if(this.name.fqn===r.substring(1))return void(this.Value=e[r])}else{var o=t.get(r);if(o.length>0){if(void 0!==n)throw new Error("tag attribute is ambiguous for "+this.name.fqn+". It has the following possibilities "+n+" "+o[0]);n=r}}if(void 0!==n)return void(this.Value=e[n]);var i=this.component.node.nodeDeclaration.defaultAttributesActual.hasMatchingValue(this.name);if(void 0!==i)return void(this.Value=i);this.Value=this.declaration.default}}},{key:"_valuate",value:function(e){var t=this.converter.convert(e,this);if(void 0===t){var n="Converting attribute value failed.\n\n* input : "+e+"\n* Attribute(Attribute FQN) : "+this.name.name+"("+this.name.fqn+")\n* Component : "+this.component.name.name+"("+this.component.name.fqn+")\n* Node(Node FQN) : "+this.component.node.name.name+"("+this.component.node.name.fqn+")\n* Converter : "+this.declaration.converter+"\n\n* Structure map:\n"+this.component.node.toStructualString("--------------Error was thrown from '"+this.name.name+"' of this node.");throw new Error(n)}return this._lastValuete=t,t}},{key:"_notifyChange",value:function(e){var t=this,n=this._lastValuete;if(this.component.isActive){var r=this._valuate(e);this._observers.forEach(function(e){e(r,n,t)}),this._ignoireActivenessObservers.forEach(function(e){e(r,n,t)})}else{if(0===this._ignoireActivenessObservers.length)return;var o=this._valuate(e);this._ignoireActivenessObservers.forEach(function(e){e(o,n,t)})}}},{key:"tree",get:function(){return this.component.tree}},{key:"companion",get:function(){return this.component.companion}},{key:"Value",get:function(){if(void 0===this._value){var e=this.component.node;throw new Error("attribute "+this.name.name+" value is undefined in "+(e?e.name.name:"undefined"))}return this._valuate(this._value)},set:function(e){this._value!==e&&(this._value=e,this._notifyChange(e))}}],[{key:"convert",value:function(e,t,n){var r=u.default.tobeNSIdentity(e),o=d.default.converters.get(r);if(!o)throw new Error("converter "+r.name+" is not defined.");return o.convert(n,t)}},{key:"generateAttributeForComponent",value:function(t,n,r){var o=new e;o.name=c.default.fromFQN(r.name.fqn+"."+t),o.component=r,o.declaration=n;var i=u.default.tobeNSIdentity(n.converter);if(o.converter=d.default.converters.get(i),void 0===o.converter)throw new Error("Specified converter "+i.name+" was not found from registered converters.\n Component: "+o.component.name.fqn+"\n Attribute: "+o.name.name);return o.component.attributes.set(o.name,o),o.converter.verify(o),o}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),u=r(a),s=n(11),c=r(s),l=n(9),f=r(l),h=function(){function e(t){if(o(this,e),!t)throw new Error("nodes is null");this.nodes=t}return i(e,[{key:"get",value:function(e,t){if(void 0===e){var n=this.first();if(n)return n;throw new Error("this NodeInterface is empty.")}if(void 0===t){if(this.count<=e)throw new Error("index out of range.");var r=e;return this.find(function(){return 0===r||(r--,!1)})}if(this.nodes.length<=e||this.nodes[e].length<=t)throw new Error("index out of range.");return this.nodes[e][t]}},{key:"getAttribute",value:function(e){var t=this.first();if(!t)throw new Error("this NodeInterface is empty.");return t.getAttribute(e)}},{key:"setAttribute",value:function(e,t){this.forEach(function(n){n.setAttribute(e,t,!1)})}},{key:"on",value:function(e,t){return this.forEach(function(n){n.on(e,t)}),this}},{key:"off",value:function(e,t){return this.forEach(function(n){n.removeListener(e,t)}),this}},{key:"append",value:function(e){return this.forEach(function(t){c.default.parseXML(e).forEach(function(e){var n=f.default.parse(e);t.addChild(n)})}),this}},{key:"remove",value:function(){return this.forEach(function(e){e.remove()}),this}},{key:"forEach",value:function(e){for(var t=0;t<this.nodes.length;t++)for(var n=this.nodes[t],r=t,o=0;o<n.length;o++){var i=n[o],a=o,u={abort:!1};if(e(i,r,a,u),u.abort)return this}return this}},{key:"map",value:function(e){return this.nodes.map(function(t,n){return t.map(function(t,r){return e(t,n,r)})})}},{key:"find",value:function(e){for(var t=this.nodes,n=0;n<t.length;n++)for(var r=t[n],o=0;o<r.length;o++){var i=r[o];if(e(i,n,o))return i}return null}},{key:"watch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.forEach(function(r){r.watch(e,t,n)})}},{key:"setEnable",value:function(e){return this.forEach(function(t){t.enabled=!!e}),this}},{key:"children",value:function(){return new e(this.nodes.map(function(e){return u.default.flatMap(e,function(e){return e.children})}))}},{key:"addComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.forEach(function(n){n.addComponent(e,t)}),this}},{key:"first",value:function(){return this.find(function(){return!0})}},{key:"single",value:function(){if(1!==this.count)throw new Error("this nodeInterface is not single.");var e=this.first();if(!e)throw new Error("this nodeInterface is not single,but is empty.");return e}},{key:"filter",value:function(t){for(var n=[],r=0;r<this.nodes.length;r++){var o=this.nodes[r];n.push([]);for(var i=0;i<o.length;i++){var a=o[i];t(a,r,i)&&n[r].push(a)}}return new e(n)}},{key:"toArray",value:function(){return u.default.flat(this.nodes)}},{key:"addChildByName",value:function(t,n){return new e(this.map(function(e){return e.addChildByName(t,n)}))}},{key:"sendMessage",value:function(e,t){this.forEach(function(n){n.sendMessage(e,t)})}},{key:"broadcastMessage",value:function(e,t,n){"number"==typeof e?this.forEach(function(r){r.broadcastMessage(e,t,n)}):this.forEach(function(e){e.broadcastMessage(t,n)})}},{key:"count",get:function(){if(0===this.nodes.length)return 0;var e=this.nodes.map(function(e){return e.length});return u.default.sum(e)}},{key:"isEmpty",get:function(){return 0===this.count}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),u=r(a),s=n(0),c=r(s),l=n(18),f=r(l),h=n(10),d=r(h),p=function(){function e(t){o(this,e),this.rootNodes=t}return i(e,[{key:"getNodeById",value:function(e){return this.rootNodes.map(function(t){return d.default.fromElement(t.element.ownerDocument.getElementById(e))})}},{key:"queryFunc",value:function(e){return new f.default(this._queryNodes(e))}},{key:"_queryNodes",value:function(e){return this.rootNodes.map(function(t){for(var n=t.element.ownerDocument.querySelectorAll(e),r=[],o=0;o<n.length;o++){var i=n.item(o).getAttribute(u.default.x_gr_id);if(i){var a=c.default.nodeDictionary[i];a&&r.push(a)}}return r})}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),u=r(a),s=n(4),c=r(s),l=n(7),f=r(l),h=n(1),d=r(h),p=n(2),v=r(p),y=function(){function e(){o(this,e),this._fqnList=[]}return i(e,[{key:"add",value:function(e,t){for(var n=0;n<this._fqnList.length;n++){var r=this._fqnList[n];if(r.fqn===e)return r.val=t,this._fqnList.splice(n,1),void this._fqnList.push(r)}var o={fqn:e,val:t};this._fqnList.push(o)}},{key:"resolve",value:function(e,t){var n=this.guess(e,t);return 0===n.length?void 0:n[n.length-1]}},{key:"guess",value:function(e,t){var n=new c.default;n.add(e.split("."));for(var r=[],o=0;o<this._fqnList.length;o++){var i=this._fqnList[o].fqn;n.get(i).length>0&&(r.push(this._fqnList[o].val),t&&(this._fqnList.splice(o,1),o--))}return r}}]),e}(),m=function(){function e(t){o(this,e),this.tag=t,this._attributesFQNMap={},this._idResolver=new c.default,this._attrBuffer=new y,this._watchBuffer=new y}return i(e,[{key:"addAttribute",value:function(e){var t=e.name.fqn;this._idResolver.has(t)&&u.default.w("attribute "+e.name+" is already exist in "+this.tag),void 0===this._attributesFQNMap[t]&&(this._attributesFQNMap[t]=[]),this._attributesFQNMap[t].push(e),this._idResolver.add(e.name);var n=this._attrBuffer.resolve(e.name.fqn,!0);void 0!==n&&(e.Value=n);for(var r=this._watchBuffer.guess(e.name.fqn,!0),o=0;o<r.length;o++)e.watch(r[o],!0);return e}},{key:"watch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v.default.tobeFQN(e);if(r){var o=this._attributesFQNMap[r];if(void 0===o||0===o.length)return void this._watchBuffer.add(r,t);for(var i=0;i<o.length;i++)o[i].watch(t,n)}else{e=e;var a=this._idResolver.get(f.default.defineByArray(e.split(".")));if(0===a.length)return void this._watchBuffer.add(e,t);if(a.length>1)throw new Error("attribute "+e+" is ambiguous");for(var u=0;u<this._attributesFQNMap[a[0]].length;u++)this._attributesFQNMap[a[0]][u].watch(t,n)}}},{key:"setAttribute",value:function(e,t){var n=this._attributesFQNMap[e];if(void 0===n||0===n.length)return void this._attrBuffer.add(e,t);for(var r=0;r<n.length;r++)n[r].Value=t}},{key:"getAttributeRaw",value:function(e){var t=v.default.tobeFQN(e);if(t){var n=this._attributesFQNMap[t]||[];if(0===n.length)throw new Error("attribute "+t+" is not found.");if(1!==n.length)throw new Error("attribute "+t+" is ambiguous. there are "+n.length+" attributes has same fqn.");return n[0]}e=e;var r=this._idResolver.get(e);if(0===r.length)throw new Error("attribute "+e+" is not found.");if(r.length>1)throw new Error("attribute "+e+" is ambiguous. It has the following possibilities. "+r);if(1!==this._attributesFQNMap[r[0]].length)throw new Error("attribute "+e+" is ambiguous. there are "+this._attributesFQNMap[r[0]].length+" attributes has same fqn.");return this._attributesFQNMap[r[0]][0]}},{key:"getAttribute",value:function(e){var t=v.default.tobeFQN(e);if(t){var n=this._attributesFQNMap[t]||[];if(0===n.length){var r=this._attrBuffer.resolve(t,!1);if(void 0!==r)return r;throw new Error("attribute "+e+" is not found.")}if(1!==n.length)throw new Error("attribute "+e+" is ambiguous. there are "+n.length+" attributes has same fqn.");return n[0].Value}e=e;var o=this._idResolver.get(e);if(0===o.length){var i=this._attrBuffer.resolve(e,!1);if(void 0!==i)return i;throw new Error("attribute "+e+" is not found.")}if(o.length>1)throw new Error("attribute "+e+" is ambiguous. there are "+this._attributesFQNMap[o[0]].length+" attributes has same fqn.");return this._attributesFQNMap[o[0]][0].Value}},{key:"removeAttribute",value:function(e){if(this._attributesFQNMap[e.name.fqn]){var t=this._attributesFQNMap[e.name.fqn];return 1===t.length&&this._idResolver.remove(e.name),u.default.remove(t,e),delete this._attributesFQNMap[e.name.fqn],!0}return!1}},{key:"guess",value:function(e){return e instanceof d.default?[e]:v.default.checkFQNString(e)?[d.default.fromFQN(e)]:this._idResolver.get(e).map(function(e){return d.default.fromFQN(e)})}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(12),c=r(s),l=n(14),f=r(l),h=n(24),d=r(h),p=n(25),v=r(p),y=n(26),m=r(y),g=n(27),_=r(g),b=n(28),w=r(b),M=n(29),E=r(M),x=n(18),S=r(x),O=n(3),R=r(O),k=n(19),C=r(k),P=n(30),T=r(P),A=n(31),I=r(A),F=n(32),j=r(F),D=n(33),N=r(D),L=n(5),G=r(L),B=n(16),z=r(B),W=n(8),q=r(W),U=n(34),V=r(U),H=n(1),Y=r(H),X=n(7),$=r(X),Q=n(6),Z=r(Q),J=n(2),K=r(J),ee=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},te=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.nodeDeclarations=new Z.default,e.converters=new Z.default,e.componentDeclarations=new Z.default,e.rootNodes={},e.loadTasks=[],e.lib={},e.nodeDictionary={},e.componentDictionary={},e.debug=!0,e._registrationContext=G.default.defaultNamespace,e}return a(t,e),u(t,[{key:"ns",value:function(e){return function(t){return $.default.define(e).for(t)}}},{key:"initialize",value:function(){this.registerConverter("String",N.default),this.registerConverter("StringArray",j.default),this.registerConverter("Boolean",T.default),this.registerConverter(E.default),this.registerConverter("Object",w.default),this.registerConverter(d.default),this.registerConverter("Number",_.default),this.registerConverter(m.default),this.registerConverter("NumberArray",v.default),this.registerComponent(I.default),this.registerNode("grimoire-node-base",["GrimoireComponent"])}},{key:"register",value:function(e){this.loadTasks.push({ns:this._registeringPluginNamespace,task:e}),this._registeringPluginNamespace=G.default.defaultNamespace}},{key:"resolvePlugins",value:function(){return ee(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.loadTasks.length)){e.next=16;break}return n=this.loadTasks[t],this._registrationContext=n.ns,e.prev=4,e.next=7,n.task();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Error: loadTask of plugin '"+n.ns+"' is failed."),console.error(e.t0);case 13:t++,e.next=1;break;case 16:this._registrationContext=G.default.defaultNamespace,this.componentDeclarations.forEach(function(e){e.resolveDependency()}),this.nodeDeclarations.forEach(function(e){e.resolveDependency()});case 19:case"end":return e.stop()}},e,this,[[4,9]])}))}},{key:"registerComponent",value:function(e,t,n){var r=void 0,o=void 0,i=void 0;if("string"==typeof e||e instanceof Y.default)r=e,o=t,i=n;else{if(o=e,i=t,null==o.componentName)throw new Error("registering component has not 'componentName': "+o);r=o.componentName}if(r=this._ensureTobeNSIdentityOnRegister(r),this.componentDeclarations.get(r))throw new Error("component "+r.fqn+" is already registerd.");if("function"==typeof o&&!(o.prototype instanceof q.default))throw new Error("component constructor "+r.fqn+" must be inherits Component");this.debug&&!R.default.isCamelCase(r.name)&&console.warn("component "+r.name+" is registerd. but,it should be 'CamelCase'.");var a=o.attributes;if(!a)throw new Error("component must has 'attributes'");for(var u in a)if(void 0===a[u].default)throw new Error("default value of attribute "+u+" in "+r.fqn+" must be not 'undefined'.");var s=new z.default(r,o,i);return this.componentDeclarations.set(r,s),s}},{key:"registerNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],r=arguments[3],o=arguments[4],i=this._ensureTobeNSIdentityOnRegister(e);if(this.nodeDeclarations.get(i))throw new Error("gomlnode "+i.fqn+" is already registerd.");this.debug&&!R.default.isSnakeCase(i.name)&&console.warn("node "+i.name+" is registerd. but,it should be 'snake-case'.");var a=new V.default(i,t||[],n||{},r,o);return this.nodeDeclarations.set(i,a),a}},{key:"getCompanion",value:function(e){var t=this.getRootNode(e);if(t)return t.companion;throw new Error("scriptTag is not goml")}},{key:"addRootNode",value:function(e,t){if(!t)throw new Error("can not register null to rootNodes.");return e.setAttribute("x-rootNodeId",t.id),this.rootNodes[t.id]=t,t.companion.set(this.ns(G.default.defaultNamespace)("scriptElement"),e),t.setMounted(!0),t.broadcastMessage("treeInitialized",{ownerScriptTag:e,id:t.id}),t.sendInitializedMessage({ownerScriptTag:e,id:t.id}),this.emit("root-node-added",{ownerScriptTag:e,rootNode:t}),t.id}},{key:"getRootNode",value:function(e){var t=e.getAttribute("x-rootNodeId");if(t){var n=this.rootNodes[t];if(!n)throw new Error("threr is no rootNode has id "+t);return n}return null}},{key:"noConflict",value:function(){window.gr=this.noConflictPreserve}},{key:"queryRootNodes",value:function(e){for(var t=document.querySelectorAll(e),n=[],r=0;r<t.length;r++){var o=this.getRootNode(t.item(r));o&&n.push(o)}return n}},{key:"registerConverter",value:function(e,t){if(t)return void this.registerConverter({name:this._ensureTobeNSIdentityOnRegister(e),verify:function(){return!0},convert:t});var n=e;this.converters.set(this._ensureTobeNSIdentityOnRegister(n.name),n)}},{key:"overrideDeclaration",value:function(e,t,n){var r=this.nodeDeclarations.get(e);if(!r)throw new Error("attempt not-exist node declaration : "+K.default.tobeNSIdentity(e).name);if(r.resolvedDependency||r.resolveDependency(),n){for(var o=t,i=0;i<o.length;i++)r.addDefaultComponent(o[i]);r.defaultAttributes.pushDictionary(K.default.tobeNSDictionary(n))}else if(Array.isArray(t))for(var a=0;a<t.length;a++)r.addDefaultComponent(t[a]);else r.defaultAttributes.pushDictionary(K.default.tobeNSDictionary(t));return r}},{key:"clear",value:function(){this.nodeDeclarations.clear(),this.componentDeclarations.clear(),this.converters.clear();for(var e in this.rootNodes)delete this.rootNodes[e];for(var t in this.nodeDictionary)delete this.nodeDictionary[t];for(var n in this.componentDictionary)delete this.componentDictionary[n];this.loadTasks.splice(0,this.loadTasks.length),this._registeringPluginNamespace=G.default.defaultNamespace,this.initialize()}},{key:"extendGrimoireInterface",value:function(e,t){if(this[e])throw new Error("gr."+e+" can not extend.it is already exist.");this[e]=t.bind(this)}},{key:"extendGomlInterface",value:function(e,t){if(C.default[e])throw new Error("gr."+e+" can not extend.it is already exist.");C.default[e]=t.bind(this)}},{key:"extendNodeInterface",value:function(e,t){if(S.default[e])throw new Error("gr."+e+" can not extend.it is already exist.");S.default[e]=t.bind(this)}},{key:"notifyRegisteringPlugin",value:function(e){var t=/^[Gg]rimoire(?:js|JS)?-(.*)$/.exec(e);t&&(e=t[1]),this._registeringPluginNamespace=e}},{key:"_ensureNameTobeConstructor",value:function(e){if(!e)return null;if("function"==typeof e)return e;if("string"==typeof e)return this._ensureNameTobeConstructor(K.default.tobeNSIdentity(e));var t=this.componentDeclarations.get(e);return t?t.ctor:null}},{key:"_ensureTobeNSIdentityOnRegister",value:function(e){return e?"string"==typeof e?-1!==e.indexOf("|")?Y.default.fromFQN(e):Y.default.fromFQN($.default.define(this._registrationContext),e):e:null}},{key:"initializedEventHandler",get:function(){return f.default.initializedEventHandlers}},{key:"callInitializedAlready",get:function(){return f.default.callInitializedAlready}}]),t}(c.default);t.default=te},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n,i,a){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(u.node=e,u.component=n,u.messageName=i,u.error=a,u.handled=!1,u._isMessageException=!0,a._isMessageException)u.message=a.message+"\n [Message stack]: "+u.messageName+" at <"+u.component.name.fqn+"> on <"+u.node.toString()+">\n";else{for(var s=u.node.getComponents(),c="",l=0;l<s.length;l++){var f=s[l],h="";u.component===f&&(h="<<<<<<<<< This component"),c+="  ("+l+")  <"+f.name.fqn+">  "+h+"\n\n   Attributes:\n",f.attributes.forEach(function(e){try{c+="    "+e.name.fqn+" --- "+e.Value+"\n"}catch(t){c+="    "+e.name.fqn+" --- Failed to fetch\n"}}),c+="\n\n"}u.message="["+a.name+"]: "+a.message+"\n\nThis exception was thrown in message function. Following information are snapshot of GOML tree status.\n\n* Node:  <"+e.toString()+">\n* Component:  <"+n.name.fqn+">\n* Message:  "+i+" \n\n* Node map:\n "+e.toStructualString("--------(Error was thrown from "+n.name.fqn+" component of this node.)")+"\n\n* Components of this node:\n"+c+"\n\n"}u.stack=a.stack;var d=Object.getPrototypeOf(u);return d.name="MessageException",d.message=u.message,u}return i(t,e),a(t,[{key:"toString",value:function(){return this.message}}]),t}(Error);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"send",value:function(e,t){return new Promise(function(n,r){e.onload=function(e){n(e)},e.onerror=function(e){r(e)},e.send(t)})}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Enum",verify:function(e){if(!e.declaration.table)throw new Error("Enum converter needs to be specified table in attribute dictionary")},convert:function(e,t){if("number"==typeof e)return e;if("string"==typeof e){var n=t.declaration.table[e];if(!n)throw new Error("Specified value is not exisiting in the relation table");return n}}}},function(e,t,n){"use strict";function r(e){if(e instanceof Array)return e;if("string"==typeof e){return e.split(",").map(function(e){return Number.parseFloat(e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=r(o),a=n(8),u=r(a),s=n(10),c=r(s);t.default={name:"Component",verify:function(e){if(!e.declaration.target)throw new Error("Component converter require to be specified target")},convert:function(e,t){if(null===e)return null;if(e instanceof c.default)return e.getComponent(t.declaration.target);if(e instanceof u.default){if(e.name.fqn===i.default.tobeNSIdentity(t.declaration.target).fqn)return e;throw new Error("Specified component must be "+t.declaration.target)}var n=t.tree(e).first();return n?n.getComponent(t.declaration.target):null}}},function(e,t,n){"use strict";function r(e){return"number"==typeof e?e:"string"==typeof e?Number.parseFloat(e):null===e?null:Array.isArray(e)&&1===e.length?e[0]:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={name:"Array",verify:function(e){if(!e.declaration.type)throw new Error("Array converter needs to be specified type in attribute declaration.")},convert:function(e,t){var n=o.default.converters.get(t.declaration.type);if(!n)throw new Error("converter "+t.declaration.type+" is not registerd.");if(Array.isArray(e))return e.map(function(e){return n.convert(e,t)});if("string"==typeof e){for(var r=e.split(" "),i=0;i<r.length;i++){var a=r[i];"\\"===a[a.length-1]&&(i===r.length-1?r[i]=a.substring(0,a.length-"\\".length)+" ":(r[i]=a.substring(0,a.length-"\\".length)+" "+r[i+1],r.splice(i+1,1)))}return r.map(function(e){return n.convert(e,t)})}return null}}},function(e,t,n){"use strict";function r(e){if("boolean"==typeof e)return e;if("string"==typeof e)switch(e){case"true":return!0;case"false":return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),s=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"$awake",value:function(){var e=this.node;e.resolveAttributesValue(),this.getAttributeRaw("id").watch(function(t){e.element.id=t||""},!0,!0),this.getAttributeRaw("class").watch(function(t){e.element.className=Array.isArray(t)?t.join(" "):""},!0,!0),this.getAttributeRaw("enabled").watch(function(t){e._enabled=t;var n=e.parent;e.notifyActivenessUpdate(n?n.isActive&&e.enabled:e.enabled)},!1,!0),e._enabled=this.getAttribute("enabled"),e._isActive=e.parent?e.parent.isActive&&e.enabled:e.enabled}}]),t}(s.default);t.default=c,c.componentName="GrimoireComponent",c.attributes={id:{converter:"String",default:null},class:{converter:"StringArray",default:null},enabled:{converter:"Boolean",default:!0}}},function(e,t,n){"use strict";function r(e){return Array.isArray(e)||!e?e:"string"==typeof e?e.split(" "):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return"string"==typeof e?e:e?"function"==typeof e.toString?e.toString():void 0:e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),u=r(a),s=n(6),c=r(s),l=n(35),f=r(l),h=n(1),d=r(h),p=n(4),v=r(p),y=n(0),m=r(y),g=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];o(this,e),this.name=t,this._defaultComponents=n,this._defaultAttributes=r,this._superNode=i,this._freezeAttributes=a,this.defaultAttributes=new c.default,this.idResolver=new v.default,this._resolvedDependency=!1,this._superNode||"grimoire-node-base"===this.name.name||(this._superNode=new d.default("grimoirejs.grimoire-node-base")),this._freezeAttributes=this._freezeAttributes||[]}return i(e,[{key:"addDefaultComponent",value:function(e){var t=u.default.tobeNSIdentity(e);this.defaultComponents.push(t),this._defaultComponentsActual&&this._defaultComponentsActual.push(t)}},{key:"resolveDependency",value:function(){var e=this;if(this._resolvedDependency)return!1;this.defaultComponents=new f.default(this._defaultComponents.map(function(e){return u.default.tobeNSIdentity(e)}));for(var t in this._defaultAttributes){var n=this._defaultAttributes[t];this.defaultAttributes.set(d.default.fromFQN(t),n)}return this.superNode=this._superNode?u.default.tobeNSIdentity(this._superNode):void 0,this._resolveInherites(),this._defaultComponentsActual.forEach(function(t){m.default.componentDeclarations.get(t).idResolver.foreach(function(t){e.idResolver.add(d.default.fromFQN(t))})}),this.freezeAttributes=new f.default(this._freezeAttributes.map(function(e){return u.default.tobeNSIdentity(e)})),this._resolvedDependency=!0,!0}},{key:"_resolveInherites",value:function(){if(!this.superNode)return this._defaultComponentsActual=this.defaultComponents,void(this._defaultAttributesActual=this.defaultAttributes);var e=m.default.nodeDeclarations.get(this.superNode);e.resolveDependency();var t=e.defaultComponentsActual,n=e.defaultAttributesActual;this._defaultComponentsActual=t.clone().merge(this.defaultComponents),this._defaultAttributesActual=n.clone().pushDictionary(this.defaultAttributes)}},{key:"resolvedDependency",get:function(){return this._resolvedDependency}},{key:"defaultComponentsActual",get:function(){if(!this._resolvedDependency)throw new Error(this.name.fqn+" is not resolved dependency!");return this._defaultComponentsActual}},{key:"defaultAttributesActual",get:function(){if(!this._resolvedDependency)throw new Error(this.name.fqn+" is not resolved dependency!");return this._defaultAttributesActual}}]),e}();t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this._content={},t&&this.pushArray(t)}return o(e,[{key:"push",value:function(e){return!this._content[e.fqn]&&(this._content[e.fqn]=e,!0)}},{key:"pushArray",value:function(e){var t=this;return e.forEach(function(e){t.push(e)}),this}},{key:"toArray",value:function(){var e=[];for(var t in this._content)e.push(this._content[t]);return e}},{key:"clone",value:function(){var t=new e;for(var n in this._content)t.push(this._content[n]);return t}},{key:"merge",value:function(e){return this.pushArray(e.toArray()),this}},{key:"forEach",value:function(e){for(var t in this._content)e(this._content[t]);return this}}],[{key:"fromArray",value:function(t){var n=new e;return n.pushArray(t),n}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.__NAME__=t.__VERSION__=void 0;var o=n(20),i=r(o),a=n(5),u=r(a),s=n(12),c=r(s),l=n(2),f=r(l),h=n(13),d=r(h),p=n(4),v=r(p),y=n(22),m=r(y),g=n(7),_=r(g),b=n(6),w=r(b),M=n(1),E=r(M),x=n(35),S=r(x),O=n(38),R=r(O),k=n(3),C=r(k),P=n(23),T=r(P),A=n(11),I=r(A),F=n(31),j=r(F),D=n(29),N=r(D),L=n(30),G=r(L),B=n(26),z=r(B),W=n(24),q=r(W),U=n(25),V=r(U),H=n(27),Y=r(H),X=n(28),$=r(X),Q=n(32),Z=r(Q),J=n(33),K=r(J),ee=n(19),te=r(ee),ne=n(0),re=r(ne),oe=n(21),ie=r(oe),ae=n(18),ue=r(ae),se=n(17),ce=r(se),le=n(8),fe=r(le),he=n(16),de=r(he),pe=n(14),ve=r(pe),ye=n(10),me=r(ye),ge=n(9),_e=r(ge),be=n(34),we=r(be),Me=n(15),Ee=r(Me),xe=n(39),Se=r(xe),Oe=t.__VERSION__="0.21.1",Re=t.__NAME__="grimoirejs",ke={Base:{AttributeManager:i.default,Constants:u.default,EEObject:c.default,Ensure:f.default,IDObject:d.default,IdResolver:v.default,MessageException:m.default,Namespace:_.default,NSDictionary:w.default,NSIdentity:E.default,NSSet:S.default,Types:R.default,Utility:C.default,XMLHttpRequestAsync:T.default,XMLReader:I.default},Components:{GrimoireComponent:j.default},Converters:{ArrayConverter:N.default,BooleanConverter:G.default,ComponentConverter:z.default,EnumConverter:q.default,NumberArrayConverter:V.default,NumberConverter:Y.default,ObjectConverter:$.default,StringArrayConverter:Z.default,StringConverter:K.default},Interface:{GomlInterfaceImpl:te.default,GrimoireInterface:re.default,GrimoireInterfaceImpl:ie.default,NodeInterface:ue.default},Node:{Attribute:ce.default,Component:fe.default,ComponentDeclaration:de.default,GomlLoader:ve.default,GomlNode:me.default,GomlParser:_e.default,NodeDeclaration:we.default,NodeUtility:Ee.default}},Ce=(0,Se.default)();Object.assign(ke,{__VERSION__:Oe,__NAME__:Re}),Object.assign(Ce||{},ke),window.GrimoireJS.__VERSION__=Oe,t.default=Ce},function(e,t,n){"use strict";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){this._events=new r,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,u="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(u=!1)),i.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)a.call(e,t)&&n.push(u?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},i.prototype.listeners=function(e,t){var n=u?u+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},i.prototype.emit=function(e,t,n,r,o,i){var a=u?u+e:e;if(!this._events[a])return!1;var s,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,o),!0;case 6:return l.fn.call(l.context,t,n,r,o,i),!0}for(c=1,s=new Array(f-1);c<f;c++)s[c-1]=arguments[c];l.fn.apply(l.context,s)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!s)for(h=1,s=new Array(f-1);h<f;h++)s[h-1]=arguments[h];l[c].fn.apply(l[c].context,s)}}return!0},i.prototype.on=function(e,t,n){var r=new o(t,n||this),i=u?u+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.once=function(e,t,n){var r=new o(t,n||this,!0),i=u?u+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.removeListener=function(e,t,n,o){var i=u?u+e:e;if(!this._events[i])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[i],this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[i]);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==t||o&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[i]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new r:delete this._events[i]}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=u?u+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=u,i.EventEmitter=i,e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(){var e=window;return e.GrimoireJS&&(u.default.libraryPreference=e.GrimoireJS),u.default.noConflictPreserve=e.gr,e.gr=e.GrimoireJS=u.default,f.initialize(),u.default};var a=n(0),u=r(a),s=n(14),c=r(s),l=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},f=function(){function e(){o(this,e)}return i(e,null,[{key:"initialize",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e._notifyLibraryLoadingToWindow(),e._copyGLConstants(),u.default.initialize(),t.next=6,e._waitForDOMLoading();case 6:return t.next=8,e._waitForPluginLoadingSuspendPromise();case 8:return e._logVersions(),t.next=11,u.default.resolvePlugins();case 11:return t.next=13,c.default.loadForPage();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.error(t.t0);case 18:case"end":return t.stop()}},t,this,[[0,15]])}))}},{key:"_copyGLConstants",value:function(){if(!WebGLRenderingContext.ONE)for(var e in WebGLRenderingContext.prototype)if(/^[A-Z]/.test(e)){var t=WebGLRenderingContext.prototype[e];WebGLRenderingContext[e]=t}}},{key:"_waitForDOMLoading",value:function(){return new Promise(function(e){"loading"===document.readyState?window.addEventListener("DOMContentLoaded",function(){e()}):e()})}},{key:"_logVersions",value:function(){var e=u.default;if(e.debug){var t="%cGrimoire.js v"+e.__VERSION__+"\nplugins:\n\n",n=1;for(var r in e.lib){var o=e.lib[r];t+="  "+n+" : "+(o.__NAME__||r)+"@"+o.__VERSION__+"\n",n++}t+='\nTo suppress this message,please inject a line "gr.debug = false;" on the initializing timing.',console.log(t,"color:#44F;font-weight:bold;")}}},{key:"_notifyLibraryLoadingToWindow",value:function(){window.postMessage({$source:"grimoirejs",$messageType:"library-loading"},"*")}},{key:"_waitForPluginLoadingSuspendPromise",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.default.libraryPreference){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.default.libraryPreference.postponeLoading;case 4:case"end":return e.stop()}},e,this)}))}}]),e}()}])})},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?p=d.concat(p):y=-1,p.length&&u())}function u(){if(!v){var e=o(a);v=!0;for(var t=p.length;t;){for(d=p,p=[];++y<t;)d&&d[y].run();y=-1,t=p.length}d=null,v=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],v=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||v||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(t){!function(t){"use strict";function n(e,t,n,r){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),u=new d(r||[]);return a._invoke=c(e,n,u),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function a(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function n(t,o,i,a){var u=r(e[t],e,o);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&g.call(c,"__await")?Promise.resolve(c.__await).then(function(e){n("next",e,i,a)},function(e){n("throw",e,i,a)}):Promise.resolve(c).then(function(e){s.value=e,i(s)},a)}a(u.arg)}function o(e,t){function r(){return new Promise(function(r,o){n(e,t,r,o)})}return i=i?i.then(r,r):r()}"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n));var i;this._invoke=o}function c(e,t,n){var o=S;return function(i,a){if(o===R)throw new Error("Generator is already running");if(o===k){if("throw"===i)throw a;return v()}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=l(u,n);if(s){if(s===C)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===S)throw o=k,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=R;var c=r(e,t,n);if("normal"===c.type){if(o=n.done?k:O,c.arg===C)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=k,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===y){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=y,l(e,t),"throw"===t.method))return C;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,C;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,C):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:y,done:!0}}var y,m=Object.prototype,g=m.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",w=_.asyncIterator||"@@asyncIterator",M=_.toStringTag||"@@toStringTag",E="object"==typeof e,x=t.regeneratorRuntime;if(x)return void(E&&(e.exports=x));x=t.regeneratorRuntime=E?e.exports:{},x.wrap=n;var S="suspendedStart",O="suspendedYield",R="executing",k="completed",C={},P={};P[b]=function(){return this};var T=Object.getPrototypeOf,A=T&&T(T(p([])));A&&A!==m&&g.call(A,b)&&(P=A);var I=a.prototype=o.prototype=Object.create(P);i.prototype=I.constructor=a,a.constructor=i,a[M]=i.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,M in e||(e[M]="GeneratorFunction")),e.prototype=Object.create(I),e},x.awrap=function(e){return{__await:e}},u(s.prototype),s.prototype[w]=function(){return this},x.AsyncIterator=s,x.async=function(e,t,r,o){var i=new s(n(e,t,r,o));return x.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},u(I),I[M]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},x.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=g.call(o,"catchLoc"),u=g.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,C):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),C}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;h(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=y),C}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,n(89))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[s]=r,u(s),s++}function o(e){delete c[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{i(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var u,s=1,c={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){u=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),u=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},u=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;u=function(t){var n=f.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){u=function(e){setTimeout(a,0,e)}}(),h.setImmediate=r,h.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(89),n(332))},function(e,t,n){n(126),e.exports=n(125)}])});