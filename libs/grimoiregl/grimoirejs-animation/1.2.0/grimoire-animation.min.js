!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),u=r(a),f=n(12),c=r(f),l=n(1),s=r(l),d=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{f(r.next(e))}catch(e){o(e)}}function u(e){try{f(r.throw(e))}catch(e){o(e)}}function f(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,u)}f((r=r.apply(e,t||[])).next())})},p=function(){function e(){i(this,e)}return o(e,null,[{key:"addAnimationType",value:function(t,n){this.animationGenerators[t]=n,e.registerdHandlers[t]&&e.registerdHandlers[t].forEach(function(e){return e()})}},{key:"addAnimation",value:function(t,n){var r=u.default.parse(n);e.addAnimationType(t,function(){return new s.default(r)})}},{key:"addAnimationFromURL",value:function(t,n){return d(this,void 0,void 0,regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.default.resolve(n);case 2:i=r.sent,e.addAnimation(t,i);case 4:case"end":return r.stop()}},r,this)}))}},{key:"_onRegister",value:function(t,n){e.registerdHandlers[t]?e.registerdHandlers[t].push(n):e.registerdHandlers[t]=[n]}},{key:"instanciate",value:function(t){return d(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.animationGenerators[t]){n.next=4;break}return n.abrupt("return",e.animationGenerators[t]());case 4:return n.next=6,this._waitForRegistered(t);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},n,this)}))}},{key:"_waitForRegistered",value:function(t){return new Promise(function(n){e._onRegister(t,function(){n(e.animationGenerators[t]())})})}}]),e}();t.default=p,p.animationGenerators={},p.registerdHandlers={},p.animationTypes=[]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(){function e(t){r(this,e),this.clips={};for(var n in t)this.clips[n]=new a.default(t[n])}return i(e,[{key:"getClip",value:function(e){if(void 0===this.clips[e])throw new Error("Animation type "+e+" is not exist.");return this.clips[e]}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(20),u=r(a),f=n(6),c=r(f),l=function(){function e(t){i(this,e),this.elements={};for(var n in t)this.elements[n]=t[n]}return o(e,[{key:"step",value:function(e,t){var n=this;for(var r in this.elements)!function(r){var i=n.elements[r],o=e.getComponent(i.component).getAttributeRaw(i.attribute);"@"===i.query?e.getComponent(i.component).setAttribute(i.attribute,c.default.calc(t,i,o)):e.element.querySelectorAll(i.query).forEach(function(e){u.default.fromElement(e).getComponent(i.component).setAttribute(i.attribute,c.default.calc(t,i,o))})}(r)}},{key:"Elements",get:function(){return this.elements}},{key:"Length",get:function(){var e=0;for(var t in this.elements){var n=this.elements[t].timeline[this.elements[t].timeline.length-1];e=n>e?n:e}return e}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(){function e(){r(this,e)}return i(e,null,[{key:"parse",value:function(t){var n=a.default.calcHash(t);return void 0!==e._parsedCache[n]?e._parsedCache[n]:(e._parsedCache[n]=JSON.parse(t),e._parsedCache[n])}}]),e}();t.default=u,u._parsedCache={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),c=r(f),l=n(8),s=r(l),d=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{f(r.next(e))}catch(e){o(e)}}function u(e){try{f(r.throw(e))}catch(e){o(e)}}function f(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,u)}f((r=r.apply(e,t||[])).next())})},p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$mount",value:function(){if(this.__bindAttributes(),!this.animation||"string"!=typeof this.animation)throw new Error("Animation type name must be sppecified and string");this._animationPromise=c.default.instanciate(this.animation),this._registerAttributes()}},{key:"$update",value:function(e){this._ready&&this.auto&&this._update(e.timer)}},{key:"_registerAttributes",value:function(){return d(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._animationPromise;case 2:this._animation=e.sent,this._ready=!0;case 4:case"end":return e.stop()}},e,this)}))}},{key:"_update",value:function(e){for(var t in this.clips){var n=this._animation.getClip(this.clips[t]).Length,r=this.loop?e.time%n:Math.max(e.time,n);if(r>n)return;this._animation.getClip(this.clips[t]).step(this.node,r)}}},{key:"getClip",value:function(e){return this._animation.getClip(e)}},{key:"Animation",get:function(){return this._animation}}]),t}(s.default);t.default=p,p.attributes={animation:{converter:"String",default:null},clips:{converter:"StringArray",default:null},auto:{converter:"Boolean",default:!0},loop:{converter:"Boolean",default:!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),c=r(f),l=n(8),s=r(l),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"$awake",value:function(){if(this.__bindAttributes(),this.getAttributeRaw("typeName").watch(function(e){console.warn("Changeing 'typeName' on AnimationImporter makes no sense. This change won't affect anything.")}),this.getAttributeRaw("src").watch(function(e){console.warn("Changeing 'src' on AnimationImporter makes no sense. This change won't affect anything.")}),!this.typeName||!this.src)throw new Error("type or src cannot be null in Animation importer");if(c.default.animationTypes.indexOf(this.typeName)>=0)throw new Error("A Animation type '"+this.typeName+"' is already loaded.");c.default.animationTypes.push(this.typeName),c.default.addAnimationFromURL(this.typeName,this.src)}}]),t}(s.default);t.default=d,d.attributes={typeName:{default:null,converter:"String"},src:{default:null,converter:"String"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),u=n(19),f=r(u),c=n(18),l=r(c),s=n(17),d=r(s),p=n(14),m=r(p),h=n(15),v=r(h),y=n(16),b=r(y),_=function(){function e(){i(this,e)}return o(e,null,[{key:"calc",value:function(e,t,n){var r=this._decideTimelinePosition(e,t.timeline);if(t.values.length-1===r)return t.values[r];if(void 0!==t.defaultEffect){var i=Math.max(0,Math.min(1,(e-t.timeline[r])/(t.timeline[r+1]-t.timeline[r]))),o=n.converter.convert(t.values[r],n),u=n.converter.convert(t.values[r+1],n);if(t.defaultEffect===a.EffectName.LINEAR)switch(n.converter.name.name){case"Number":return o+(u-o)*i;case"Vector2":return d.default.lerp(o,u,i);case"Vector3":return l.default.lerp(o,u,i);case"Vector4":return f.default.lerp(o,u,i);case"Rotation3":return b.default.slerp(o,u,i);case"Color3":var c=l.default.lerp(o.toVector(),u.toVector(),i);return new m.default(c.X,c.Y,c.Z);case"Color4":var s=f.default.lerp(o.toVector(),u.toVector(),i);return new v.default(s.X,s.Y,s.Z,s.W);default:throw new Error("Converter "+n.converter.name+" is not supported.")}else if(t.defaultEffect===a.EffectName.DESCRETE)return t.values[r]}}},{key:"_decideTimelinePosition",value:function(e,t){var n=0,r=t.length-1,i=void 0;if(e<t[n])return n;if(e>t[r])return r;for(;r-n>1;){if(i=Math.floor((n+r)/2),t[i]===e)return i;t[i]<e?n=i:e<t[i]&&(r=i)}return n}}]),e}();t.default=_},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Node.Component},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(5),u=r(a),f=n(4),c=r(f),l=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{f(r.next(e))}catch(e){o(e)}}function u(e){try{f(r.throw(e))}catch(e){o(e)}}function f(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,u)}f((r=r.apply(e,t||[])).next())})};t.default=function(){o.default.register(function(){return l(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.default.registerNode("import-animation",["AnimationImporter"]),o.default.registerComponent("Animation",c.default),o.default.registerComponent("AnimationImporter",u.default);case 3:case"end":return e.stop()}},e,this)}))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.EffectName=void 0;!function(e){e.LINEAR="LINEAR",e.DESCRETE="DESCRETE",e.BEZIER="BEZIER"}(r||(t.EffectName=r={})),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i),a=n(2),u=r(a),f=n(0),c=r(f),l=n(3),s=r(l),d=n(4),p=r(d),m=n(5),h=r(m),v=n(6),y=r(v),b=n(9),_=r(b),w=n(7),g=r(w),O={Animation:{Animation:o.default,AnimationClip:u.default,AnimationFactory:c.default,AnimationParser:s.default},Components:{AnimationComponent:p.default,AnimationImporterComponent:h.default},Util:{TimelineCalculator:y.default}};g.default.notifyRegisteringPlugin("grimoirejs-animation");var j=(0,_.default)();Object.assign(O,{__VERSION__:"1.2.0",__NAME__:"grimoirejs-animation"}),Object.assign(j||{},O),window.GrimoireJS.lib.animation=O,t.default=j},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.fundamental.Asset.TextFileResolver},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.fundamental.Util.HashCalculator},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Color3},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Color4},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Quaternion},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Vector2},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Vector3},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Vector4},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Node.GomlNode}])});